<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActionView::Helpers::SanitizeHelper</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["ActionView", "Helpers", "SanitizeHelper"]'>


    <meta property="og:title" value="ActionView::Helpers::SanitizeHelper">

  
    
    <meta name="description" content="Action View Sanitize Helpers  The SanitizeHelper module provides a set of methods for scrubbing text of undesired HTML elements.">
    <meta property="og:description" content="Action View Sanitize Helpers  The SanitizeHelper module provides a set of methods for scrubbing text of undesired HTML elements.">
  

    <meta name="keywords" content="ActionView::Helpers::SanitizeHelper class, sanitize, sanitize_css, strip_tags, strip_links">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Module</span>
            ActionView::Helpers::SanitizeHelper
            
        </h2>
        <ul class="files">
            
            <li><a href="../../../files/rails/actionview/lib/action_view/helpers/sanitize_helper_rb.html">rails/actionview/lib/action_view/helpers/sanitize_helper.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="module-ActionView::Helpers::SanitizeHelper-label-Action+View+Sanitize+Helpers">Action View Sanitize Helpers</h1>

<p>The <a href="SanitizeHelper.html"><code>SanitizeHelper</code></a> module provides a set of methods for scrubbing text of undesired HTML elements. These helper methods extend Action View making them callable within your template files.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-sanitize">sanitize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sanitize_css">sanitize_css</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strip_links">strip_links</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strip_tags">strip_tags</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-sanitize">
            
              <b>sanitize</b>(html, options = {})
            
            <a href="../../../classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize" name="method-i-sanitize" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Sanitizes HTML input, stripping all but known-safe tags and attributes.</p>

<p>It also strips <code>href</code> / <code>src</code> attributes with unsafe protocols like <code>javascript:</code>, while also protecting against attempts to use Unicode, ASCII, and hex character references to work around these protocol filters.</p>

<p>The default sanitizer is <code>Rails::HTML5::SafeListSanitizer</code>. See <a href="https://github.com/rails/rails-html-sanitizer">Rails HTML Sanitizers</a> for more information.</p>

<p>Custom sanitization rules can also be provided.</p>

<p>Please note that sanitizing user-provided text does not guarantee that the resulting markup is valid or even well-formed.</p>

<h4 id="method-i-sanitize-label-Options">Options</h4>
<dl class="rdoc-list label-list"><dt><code>:tags</code>
<dd>
<p>An array of allowed tags.</p>
</dd><dt><code>:attributes</code>
<dd>
<p>An array of allowed attributes.</p>
</dd><dt><code>:scrubber</code>
<dd>
<p>A <a href="https://github.com/rails/rails-html-sanitizer">Rails::HTML scrubber</a> or <a href="https://github.com/flavorjones/loofah">Loofah::Scrubber</a> object that defines custom sanitization rules. A custom scrubber takes precedence over custom tags and attributes.</p>
</dd></dl>

<h4 id="method-i-sanitize-label-Examples">Examples</h4>

<h5 id="method-i-sanitize-label-Normal+use">Normal use</h5>

<pre><code>&lt;%= sanitize @comment.body %&gt;
</code></pre>

<h5 id="method-i-sanitize-label-Providing+custom+lists+of+permitted+tags+and+attributes">Providing custom lists of permitted tags and attributes</h5>

<pre><code>&lt;%= sanitize @comment.body, tags: %w(strong em a), attributes: %w(href) %&gt;
</code></pre>

<h5 id="method-i-sanitize-label-Providing+a+custom+Rails-3A-3AHTML+scrubber">Providing a custom <code>Rails::HTML</code> scrubber</h5>

<pre><code>class CommentScrubber &lt; Rails::HTML::PermitScrubber
  def initialize
    super
    self.tags = %w( form script comment blockquote )
    self.attributes = %w( style )
  end

  def skip_node?(node)
    node.text?
  end
end
</code></pre>

<p></p>

<pre><code>&lt;%= sanitize @comment.body, scrubber: CommentScrubber.new %&gt;
</code></pre>

<p>See <a href="https://github.com/rails/rails-html-sanitizer">Rails HTML Sanitizer</a> for documentation about <code>Rails::HTML</code> scrubbers.</p>

<h5 id="method-i-sanitize-label-Providing+a+custom+Loofah-3A-3AScrubber">Providing a custom <code>Loofah::Scrubber</code></h5>

<pre><code>scrubber = Loofah::Scrubber.new do |node|
  node.remove if node.name == &#39;script&#39;
end
</code></pre>

<p></p>

<pre><code>&lt;%= sanitize @comment.body, scrubber: scrubber %&gt;
</code></pre>

<p>See <a href="https://github.com/flavorjones/loofah">Loofah’s documentation</a> for more information about defining custom <code>Loofah::Scrubber</code> objects.</p>

<h4 id="method-i-sanitize-label-Global+Configuration">Global Configuration</h4>

<p>To set the default allowed tags or attributes across your application:</p>

<pre><code># In config/application.rb
config.action_view.sanitized_allowed_tags = [&#39;strong&#39;, &#39;em&#39;, &#39;a&#39;]
config.action_view.sanitized_allowed_attributes = [&#39;href&#39;, &#39;title&#39;]
</code></pre>

<p>The default, starting in Rails 7.1, is to use an HTML5 parser for sanitization (if it is available, see NOTE below). If you wish to revert back to the previous HTML4 behavior, you can do so by setting the following in your application configuration:</p>

<pre><code># In config/application.rb
config.action_view.sanitizer_vendor = Rails::HTML4::Sanitizer
</code></pre>

<p>Or, if you’re upgrading from a previous version of Rails and wish to opt into the HTML5 behavior:</p>

<pre><code># In config/application.rb
config.action_view.sanitizer_vendor = Rails::HTML5::Sanitizer
</code></pre>

<p>NOTE: <code>Rails::HTML5::Sanitizer</code> is not supported on JRuby, so on JRuby platforms Rails will fall back to using <code>Rails::HTML4::Sanitizer</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-sanitize_source')" id="l_method-i-sanitize_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/sanitize_helper.rb#L111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-sanitize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/sanitize_helper.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sanitize</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">safe_list_sanitizer</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">options</span>)&amp;.<span class="ruby-identifier">html_safe</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-sanitize_css">
            
              <b>sanitize_css</b>(style)
            
            <a href="../../../classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize_css" name="method-i-sanitize_css" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Sanitizes a block of CSS code. Used by <a href="SanitizeHelper.html#method-i-sanitize"><code>sanitize</code></a> when it comes across a style attribute.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-sanitize_css_source')" id="l_method-i-sanitize_css_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/sanitize_helper.rb#L116" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-sanitize_css_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/sanitize_helper.rb, line 116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sanitize_css</span>(<span class="ruby-identifier">style</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">safe_list_sanitizer</span>.<span class="ruby-identifier">sanitize_css</span>(<span class="ruby-identifier">style</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strip_links">
            
              <b>strip_links</b>(html)
            
            <a href="../../../classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_links" name="method-i-strip_links" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Strips all link tags from <code>html</code> leaving just the link text.</p>

<pre><code>strip_links(&#39;&lt;a href=&quot;http://www.rubyonrails.org&quot;&gt;Ruby on Rails&lt;/a&gt;&#39;)
# =&gt; Ruby on Rails

strip_links(&#39;Please e-mail me at &lt;a href=&quot;mailto:me@email.com&quot;&gt;me@email.com&lt;/a&gt;.&#39;)
# =&gt; Please e-mail me at me@email.com.

strip_links(&#39;Blog: &lt;a href=&quot;http://www.myblog.com/&quot; class=&quot;nav&quot; target=\&quot;_blank\&quot;&gt;Visit&lt;/a&gt;.&#39;)
# =&gt; Blog: Visit.

strip_links(&#39;&lt;&lt;a href=&quot;https://example.org&quot;&gt;malformed &amp; link&lt;/a&gt;&#39;)
# =&gt; &amp;lt;malformed &amp;amp; link
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-strip_links_source')" id="l_method-i-strip_links_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/sanitize_helper.rb#L150" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-strip_links_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/sanitize_helper.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strip_links</span>(<span class="ruby-identifier">html</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">link_sanitizer</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">html</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strip_tags">
            
              <b>strip_tags</b>(html)
            
            <a href="../../../classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags" name="method-i-strip_tags" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Strips all HTML tags from <code>html</code>, including comments and special characters.</p>

<pre><code>strip_tags(&quot;Strip &lt;i&gt;these&lt;/i&gt; tags!&quot;)
# =&gt; Strip these tags!

strip_tags(&quot;&lt;b&gt;Bold&lt;/b&gt; no more!  &lt;a href=&#39;more.html&#39;&gt;See more here&lt;/a&gt;...&quot;)
# =&gt; Bold no more!  See more here...

strip_tags(&quot;&lt;div id=&#39;top-bar&#39;&gt;Welcome to my website!&lt;/div&gt;&quot;)
# =&gt; Welcome to my website!

strip_tags(&quot;&gt; A quote from Smith &amp; Wesson&quot;)
# =&gt; &amp;gt; A quote from Smith &amp;amp; Wesson
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-strip_tags_source')" id="l_method-i-strip_tags_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/sanitize_helper.rb#L133" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-strip_tags_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/sanitize_helper.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">strip_tags</span>(<span class="ruby-identifier">html</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">full_sanitizer</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">html</span>)&amp;.<span class="ruby-identifier">html_safe</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
