<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActionView::Helpers::TextHelper</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["ActionView", "Helpers", "TextHelper"]'>


    <meta property="og:title" value="ActionView::Helpers::TextHelper">

  
    
    <meta name="description" content="Action View Text Helpers  The TextHelper module provides a set of methods for filtering, formatting and transforming strings, which can reduce the amount of inline Ruby code in your views.">
    <meta property="og:description" content="Action View Text Helpers  The TextHelper module provides a set of methods for filtering, formatting and transforming strings, which can reduce the amount of inline Ruby code in your views.">
  

    <meta name="keywords" content="ActionView::Helpers::TextHelper class, concat, safe_concat, truncate, highlight, excerpt, pluralize, word_wrap, simple_format, cycle, current_cycle, reset_cycle">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Module</span>
            ActionView::Helpers::TextHelper
            
        </h2>
        <ul class="files">
            
            <li><a href="../../../files/rails/actionview/lib/action_view/helpers/text_helper_rb.html">rails/actionview/lib/action_view/helpers/text_helper.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="module-ActionView::Helpers::TextHelper-label-Action+View+Text+Helpers">Action View Text Helpers</h1>

<p>The <a href="TextHelper.html"><code>TextHelper</code></a> module provides a set of methods for filtering, formatting and transforming strings, which can reduce the amount of inline Ruby code in your views. These helper methods extend Action View making them callable within your template files.</p>

<h4 id="module-ActionView::Helpers::TextHelper-label-Sanitization">Sanitization</h4>

<p>Most text helpers that generate HTML output sanitize the given input by default, but do not escape it. This means HTML tags will appear in the page but all malicious code will be removed. Let’s look at some examples using the <code>simple_format</code> method:</p>

<pre><code>simple_format(&#39;&lt;a href=&quot;http://example.com/&quot;&gt;Example&lt;/a&gt;&#39;)
# =&gt; &quot;&lt;p&gt;&lt;a href=\&quot;http://example.com/\&quot;&gt;Example&lt;/a&gt;&lt;/p&gt;&quot;

simple_format(&#39;&lt;a href=&quot;javascript:alert(\&#39;no!\&#39;)&quot;&gt;Example&lt;/a&gt;&#39;)
# =&gt; &quot;&lt;p&gt;&lt;a&gt;Example&lt;/a&gt;&lt;/p&gt;&quot;
</code></pre>

<p>If you want to escape all content, you should invoke the <code>h</code> method before calling the text helper.</p>

<pre><code>simple_format h(&#39;&lt;a href=&quot;http://example.com/&quot;&gt;Example&lt;/a&gt;&#39;)
# =&gt; &quot;&lt;p&gt;&amp;lt;a href=\&quot;http://example.com/\&quot;&amp;gt;Example&amp;lt;/a&amp;gt;&lt;/p&gt;&quot;
</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-concat">concat</a>,
              </li>
            
              
              <li>
                <a href="#method-i-current_cycle">current_cycle</a>,
              </li>
            
              
              <li>
                <a href="#method-i-cycle">cycle</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-excerpt">excerpt</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-highlight">highlight</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-pluralize">pluralize</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-reset_cycle">reset_cycle</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-safe_concat">safe_concat</a>,
              </li>
            
              
              <li>
                <a href="#method-i-simple_format">simple_format</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-truncate">truncate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>W</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-word_wrap">word_wrap</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="SanitizeHelper.html">
              ActionView::Helpers::SanitizeHelper
            </a>
          
        </li>
      
        <li>
          
            <a href="TagHelper.html">
              ActionView::Helpers::TagHelper
            </a>
          
        </li>
      
        <li>
          
            <a href="OutputSafetyHelper.html">
              ActionView::Helpers::OutputSafetyHelper
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
    
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-concat">
            
              <b>concat</b>(string)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-concat" name="method-i-concat" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>The preferred method of outputting text in your views is to use the <code>&lt;%= &quot;text&quot; %&gt;</code> eRuby syntax. The regular <code>puts</code> and <code>print</code> methods do not operate as expected in an eRuby code block. If you absolutely must output text within a non-output code block (i.e., <code>&lt;% %&gt;</code>), you can use the <code>concat</code> method.</p>

<pre><code>&lt;% concat &quot;hello&quot; %&gt; is equivalent to &lt;%= &quot;hello&quot; %&gt;

&lt;%
   unless signed_in?
     concat link_to(&quot;Sign In&quot;, action: :sign_in)
   end
%&gt;

is equivalent to

&lt;% unless signed_in? %&gt;
  &lt;%= link_to &quot;Sign In&quot;, action: :sign_in %&gt;
&lt;% end %&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-concat_source')" id="l_method-i-concat_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L63" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-concat_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">concat</span>(<span class="ruby-identifier">string</span>)
  <span class="ruby-identifier">output_buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">string</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-current_cycle">
            
              <b>current_cycle</b>(name = &quot;default&quot;)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-current_cycle" name="method-i-current_cycle" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the current cycle string after a cycle has been started. Useful for complex table highlighting or any other design need which requires the current cycle string in more than one place.</p>

<pre><code>&lt;%# Alternate background colors %&gt;
&lt;% @items = [1,2,3,4] %&gt;
&lt;% @items.each do |item| %&gt;
  &lt;div style=&quot;background-color:&lt;%= cycle(&quot;red&quot;,&quot;white&quot;,&quot;blue&quot;) %&gt;&quot;&gt;
    &lt;span style=&quot;background-color:&lt;%= current_cycle %&gt;&quot;&gt;&lt;%= item %&gt;&lt;/span&gt;
  &lt;/div&gt;
&lt;% end %&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-current_cycle_source')" id="l_method-i-current_cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L454" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-current_cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 454</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">current_cycle</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;default&quot;</span>)
  <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">current_value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-cycle">
            
              <b>cycle</b>(first_value, *values)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-cycle" name="method-i-cycle" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates a Cycle object whose <code>to_s</code> method cycles through elements of an array every time it is called. This can be used for example, to alternate classes for table rows. You can use named cycles to allow nesting in loops. Passing a <a href="../../Hash.html"><code>Hash</code></a> as the last parameter with a <code>:name</code> key will create a named cycle. The default name for a cycle without a <code>:name</code> key is <code>&quot;default&quot;</code>. You can manually reset a cycle by calling <a href="TextHelper.html#method-i-reset_cycle"><code>reset_cycle</code></a> and passing the name of the cycle. The current cycle string can be obtained anytime using the <a href="TextHelper.html#method-i-current_cycle"><code>current_cycle</code></a> method.</p>

<pre><code> &lt;%# Alternate CSS classes for even and odd numbers... %&gt;
 &lt;% @items = [1,2,3,4] %&gt;
 &lt;table&gt;
 &lt;% @items.each do |item| %&gt;
   &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;) -%&gt;&quot;&gt;
     &lt;td&gt;&lt;%= item %&gt;&lt;/td&gt;
   &lt;/tr&gt;
 &lt;% end %&gt;
 &lt;/table&gt;

 &lt;%# Cycle CSS classes for rows, and text colors for values within each row %&gt;
 &lt;% @items = [
   { first: &quot;Robert&quot;, middle: &quot;Daniel&quot;, last: &quot;James&quot; },
   { first: &quot;Emily&quot;, middle: &quot;Shannon&quot;, maiden: &quot;Pike&quot;, last: &quot;Hicks&quot; },
   { first: &quot;June&quot;, middle: &quot;Dae&quot;, last: &quot;Jones&quot; },
 ] %&gt;
 &lt;% @items.each do |item| %&gt;
   &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;, name: &quot;row_class&quot;) -%&gt;&quot;&gt;
     &lt;td&gt;
       &lt;% item.values.each do |value| %&gt;
         &lt;%# Create a named cycle &quot;colors&quot; %&gt;
         &lt;span style=&quot;color:&lt;%= cycle(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, name: &quot;colors&quot;) -%&gt;&quot;&gt;
           &lt;%= value %&gt;
         &lt;/span&gt;
       &lt;% end %&gt;
       &lt;% reset_cycle(&quot;colors&quot;) %&gt;
     &lt;/td&gt;
  &lt;/tr&gt;
&lt;% end %&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-cycle_source')" id="l_method-i-cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L430" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cycle</span>(<span class="ruby-identifier">first_value</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">values</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-identifier">values</span>.<span class="ruby-identifier">extract_options!</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:name</span>, <span class="ruby-string">&quot;default&quot;</span>)

  <span class="ruby-identifier">values</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">first_value</span>)

  <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cycle</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">values</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">values</span>
    <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">set_cycle</span>(<span class="ruby-identifier">name</span>, <span class="ruby-constant">Cycle</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">values</span>))
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-excerpt">
            
              <b>excerpt</b>(text, phrase, options = {})
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-excerpt" name="method-i-excerpt" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Extracts the first occurrence of <code>phrase</code> plus surrounding text from <code>text</code>. An omission marker is prepended / appended if the start / end of the result does not coincide with the start / end of <code>text</code>. The result is always stripped in any case. Returns <code>nil</code> if <code>phrase</code> isn’t found.</p>

<h4 id="method-i-excerpt-label-Options">Options</h4>
<dl class="rdoc-list label-list"><dt><code>:radius</code>
<dd>
<p>The number of characters (or tokens — see <code>:separator</code> option) around <code>phrase</code> to include in the result. Defaults to 100.</p>
</dd><dt><code>:omission</code>
<dd>
<p>The marker to prepend / append when the start / end of the excerpt does not coincide with the start / end of <code>text</code>. Defaults to <code>&quot;...&quot;</code>.</p>
</dd><dt><code>:separator</code>
<dd>
<p>The separator between tokens to count for <code>:radius</code>. Defaults to <code>&quot;&quot;</code>, which treats each character as a token.</p>
</dd></dl>

<h4 id="method-i-excerpt-label-Examples">Examples</h4>

<pre><code>excerpt(&#39;This is an example&#39;, &#39;an&#39;, radius: 5)
# =&gt; &quot;...s is an exam...&quot;

excerpt(&#39;This is an example&#39;, &#39;is&#39;, radius: 5)
# =&gt; &quot;This is a...&quot;

excerpt(&#39;This is an example&#39;, &#39;is&#39;)
# =&gt; &quot;This is an example&quot;

excerpt(&#39;This next thing is an example&#39;, &#39;ex&#39;, radius: 2)
# =&gt; &quot;...next...&quot;

excerpt(&#39;This is also an example&#39;, &#39;an&#39;, radius: 8, omission: &#39;&lt;chop&gt; &#39;)
# =&gt; &quot;&lt;chop&gt; is also an example&quot;

excerpt(&#39;This is a very beautiful morning&#39;, &#39;very&#39;, separator: &#39; &#39;, radius: 1)
# =&gt; &quot;...a very beautiful...&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-excerpt_source')" id="l_method-i-excerpt_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L235" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-excerpt_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 235</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">excerpt</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">phrase</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">phrase</span>

  <span class="ruby-identifier">separator</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:separator</span>, <span class="ruby-keyword">nil</span>) <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">phrase</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Regexp</span>
    <span class="ruby-identifier">regex</span> = <span class="ruby-identifier">phrase</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">regex</span> = <span class="ruby-regexp">/#{Regexp.escape(phrase)}/i</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">matches</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">regex</span>)
  <span class="ruby-identifier">phrase</span> = <span class="ruby-identifier">matches</span>[<span class="ruby-value">0</span>]

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">separator</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">separator</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-identifier">regex</span>)
        <span class="ruby-identifier">phrase</span> = <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">first_part</span>, <span class="ruby-identifier">second_part</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">phrase</span>, <span class="ruby-value">2</span>)

  <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">first_part</span>   = <span class="ruby-identifier">cut_excerpt_part</span>(<span class="ruby-value">:first</span>, <span class="ruby-identifier">first_part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">postfix</span>, <span class="ruby-identifier">second_part</span> = <span class="ruby-identifier">cut_excerpt_part</span>(<span class="ruby-value">:second</span>, <span class="ruby-identifier">second_part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">options</span>)

  <span class="ruby-identifier">affix</span> = [<span class="ruby-identifier">first_part</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">phrase</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">second_part</span>].<span class="ruby-identifier">join</span>.<span class="ruby-identifier">strip</span>
  [<span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">affix</span>, <span class="ruby-identifier">postfix</span>].<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-highlight">
            
              <b>highlight</b>(text, phrases, options = {}, &amp;block)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-highlight" name="method-i-highlight" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Highlights occurrences of <code>phrases</code> in <code>text</code> by formatting them with a highlighter string. <code>phrases</code> can be one or more strings or regular expressions. The result will be marked HTML safe. By default, <code>text</code> is sanitized before highlighting to prevent possible XSS attacks.</p>

<p>If a block is specified, it will be used instead of the highlighter string. Each occurrence of a phrase will be passed to the block, and its return value will be inserted into the final result.</p>

<h4 id="method-i-highlight-label-Options">Options</h4>
<dl class="rdoc-list label-list"><dt><code>:highlighter</code>
<dd>
<p>The highlighter string. Uses <code>\1</code> as the placeholder for a phrase, similar to +String#sub+. Defaults to <code>&quot;&lt;mark&gt;\1&lt;/mark&gt;&quot;</code>. This option is ignored if a block is specified.</p>
</dd><dt><code>:sanitize</code>
<dd>
<p>Whether to sanitize <code>text</code> before highlighting. Defaults to true.</p>
</dd></dl>

<h4 id="method-i-highlight-label-Examples">Examples</h4>

<pre><code>highlight(&#39;You searched for: rails&#39;, &#39;rails&#39;)
# =&gt; &quot;You searched for: &lt;mark&gt;rails&lt;/mark&gt;&quot;

highlight(&#39;You searched for: rails&#39;, /for|rails/)
# =&gt; &quot;You searched &lt;mark&gt;for&lt;/mark&gt;: &lt;mark&gt;rails&lt;/mark&gt;&quot;

highlight(&#39;You searched for: ruby, rails, dhh&#39;, &#39;actionpack&#39;)
# =&gt; &quot;You searched for: ruby, rails, dhh&quot;

highlight(&#39;You searched for: rails&#39;, [&#39;for&#39;, &#39;rails&#39;], highlighter: &#39;&lt;em&gt;\1&lt;/em&gt;&#39;)
# =&gt; &quot;You searched &lt;em&gt;for&lt;/em&gt;: &lt;em&gt;rails&lt;/em&gt;&quot;

highlight(&#39;You searched for: rails&#39;, &#39;rails&#39;, highlighter: &#39;&lt;a href=&quot;search?q=\1&quot;&gt;\1&lt;/a&gt;&#39;)
# =&gt; &quot;You searched for: &lt;a href=\&quot;search?q=rails\&quot;&gt;rails&lt;/a&gt;&quot;

highlight(&#39;You searched for: rails&#39;, &#39;rails&#39;) { |match| link_to(search_path(q: match, match)) }
# =&gt; &quot;You searched for: &lt;a href=\&quot;search?q=rails\&quot;&gt;rails&lt;/a&gt;&quot;

highlight(&#39;&lt;a href=&quot;javascript:alert(\&#39;no!\&#39;)&quot;&gt;ruby&lt;/a&gt; on rails&#39;, &#39;rails&#39;, sanitize: false)
# =&gt; &quot;&lt;a href=\&quot;javascript:alert(&#39;no!&#39;)\&quot;&gt;ruby&lt;/a&gt; on &lt;mark&gt;rails&lt;/mark&gt;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-highlight_source')" id="l_method-i-highlight_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L174" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-highlight_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">highlight</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">phrases</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">text</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:sanitize</span>, <span class="ruby-keyword">true</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">phrases</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-identifier">text</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">patterns</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">phrases</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">phrase</span><span class="ruby-operator">|</span> <span class="ruby-constant">Regexp</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">phrase</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">phrase</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-identifier">phrase</span>) }
    <span class="ruby-identifier">pattern</span> = <span class="ruby-regexp">/(#{patterns.join(&quot;|&quot;)})/i</span>
    <span class="ruby-identifier">highlighter</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:highlighter</span>, <span class="ruby-string">&#39;&lt;mark&gt;\1&lt;/mark&gt;&#39;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">block</span>

    <span class="ruby-identifier">text</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/&lt;[^&gt;]*|[^&lt;]+/</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">segment</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">segment</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;&lt;&quot;</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
          <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">highlighter</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">html_safe</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-pluralize">
            
              <b>pluralize</b>(count, singular, plural_arg = nil, plural: plural_arg, locale: I18n.locale)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-pluralize" name="method-i-pluralize" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Attempts to pluralize the <code>singular</code> word unless <code>count</code> is 1. If <code>plural</code> is supplied, it will use that when count is &gt; 1, otherwise it will use the Inflector to determine the plural form for the given locale, which defaults to <code>I18n.locale</code>.</p>

<p>The word will be pluralized using rules defined for the locale (you must define your own inflection rules for languages other than English). See <a href="../../ActiveSupport/Inflector.html#method-i-pluralize"><code>ActiveSupport::Inflector.pluralize</code></a></p>

<pre><code>pluralize(1, &#39;person&#39;)
# =&gt; &quot;1 person&quot;

pluralize(2, &#39;person&#39;)
# =&gt; &quot;2 people&quot;

pluralize(3, &#39;person&#39;, plural: &#39;users&#39;)
# =&gt; &quot;3 users&quot;

pluralize(0, &#39;person&#39;)
# =&gt; &quot;0 people&quot;

pluralize(2, &#39;Person&#39;, locale: :de)
# =&gt; &quot;2 Personen&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-pluralize_source')" id="l_method-i-pluralize_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L290" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-pluralize_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pluralize</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">singular</span>, <span class="ruby-identifier">plural_arg</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-value">plural:</span> <span class="ruby-identifier">plural_arg</span>, <span class="ruby-value">locale:</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">locale</span>)
  <span class="ruby-identifier">word</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">count</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-regexp">/^1(\.0+)?$/</span>)
    <span class="ruby-identifier">singular</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">plural</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">singular</span>.<span class="ruby-identifier">pluralize</span>(<span class="ruby-identifier">locale</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-node">&quot;#{count || 0} #{word}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-reset_cycle">
            
              <b>reset_cycle</b>(name = &quot;default&quot;)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-reset_cycle" name="method-i-reset_cycle" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Resets a cycle so that it starts from the first element the next time it is called. Pass in <code>name</code> to reset a named cycle.</p>

<pre><code>&lt;%# Alternate CSS classes for even and odd numbers... %&gt;
&lt;% @items = [[1,2,3,4], [5,6,3], [3,4,5,6,7,4]] %&gt;
&lt;table&gt;
&lt;% @items.each do |item| %&gt;
  &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;) -%&gt;&quot;&gt;
      &lt;% item.each do |value| %&gt;
        &lt;span style=&quot;color:&lt;%= cycle(&quot;#333&quot;, &quot;#666&quot;, &quot;#999&quot;, name: &quot;colors&quot;) -%&gt;&quot;&gt;
          &lt;%= value %&gt;
        &lt;/span&gt;
      &lt;% end %&gt;

      &lt;% reset_cycle(&quot;colors&quot;) %&gt;
  &lt;/tr&gt;
&lt;% end %&gt;
&lt;/table&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-reset_cycle_source')" id="l_method-i-reset_cycle_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L477" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-reset_cycle_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 477</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">reset_cycle</span>(<span class="ruby-identifier">name</span> = <span class="ruby-string">&quot;default&quot;</span>)
  <span class="ruby-identifier">cycle</span> = <span class="ruby-identifier">get_cycle</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">cycle</span>.<span class="ruby-identifier">reset</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-safe_concat">
            
              <b>safe_concat</b>(string)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-safe_concat" name="method-i-safe_concat" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-safe_concat_source')" id="l_method-i-safe_concat_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L67" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-safe_concat_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">safe_concat</span>(<span class="ruby-identifier">string</span>)
  <span class="ruby-identifier">output_buffer</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:safe_concat</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">output_buffer</span>.<span class="ruby-identifier">safe_concat</span>(<span class="ruby-identifier">string</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">string</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-simple_format">
            
              <b>simple_format</b>(text, html_options = {}, options = {})
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-simple_format" name="method-i-simple_format" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>text</code> transformed into HTML using simple formatting rules. Two or more consecutive newlines (<code>\n\n</code> or <code>\r\n\r\n</code>) are considered a paragraph and wrapped in <code>&lt;p&gt;</code> tags. One newline (<code>\n</code> or <code>\r\n</code>) is considered a linebreak and a <code>&lt;br /&gt;</code> tag is appended. This method does not remove the newlines from the <code>text</code>.</p>

<p>You can pass any HTML attributes into <code>html_options</code>. These will be added to all created paragraphs.</p>

<h4 id="method-i-simple_format-label-Options">Options</h4>
<ul><li>
<p><code>:sanitize</code> - If <code>false</code>, does not sanitize <code>text</code>.</p>
</li><li>
<p><code>:sanitize_options</code> - Any extra options you want appended to the sanitize.</p>
</li><li>
<p><code>:wrapper_tag</code> - <a href="../../String.html"><code>String</code></a> representing the wrapper tag, defaults to <code>&quot;p&quot;</code></p>
</li></ul>

<h4 id="method-i-simple_format-label-Examples">Examples</h4>

<pre><code>my_text = &quot;Here is some basic text...\n...with a line break.&quot;

simple_format(my_text)
# =&gt; &quot;&lt;p&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/p&gt;&quot;

simple_format(my_text, {}, wrapper_tag: &quot;div&quot;)
# =&gt; &quot;&lt;div&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/div&gt;&quot;

more_text = &quot;We want to put a paragraph...\n\n...right there.&quot;

simple_format(more_text)
# =&gt; &quot;&lt;p&gt;We want to put a paragraph...&lt;/p&gt;\n\n&lt;p&gt;...right there.&lt;/p&gt;&quot;

simple_format(&quot;Look ma! A class!&quot;, class: &#39;description&#39;)
# =&gt; &quot;&lt;p class=&#39;description&#39;&gt;Look ma! A class!&lt;/p&gt;&quot;

simple_format(&quot;&lt;blink&gt;Unblinkable.&lt;/blink&gt;&quot;)
# =&gt; &quot;&lt;p&gt;Unblinkable.&lt;/p&gt;&quot;

simple_format(&quot;&lt;blink&gt;Blinkable!&lt;/blink&gt; It&#39;s true.&quot;, {}, sanitize: false)
# =&gt; &quot;&lt;p&gt;&lt;blink&gt;Blinkable!&lt;/blink&gt; It&#39;s true.&lt;/p&gt;&quot;

simple_format(&quot;&lt;a target=\&quot;_blank\&quot; href=\&quot;http://example.com\&quot;&gt;Continue&lt;/a&gt;&quot;, {}, { sanitize_options: { attributes: %w[target href] } })
# =&gt; &quot;&lt;p&gt;&lt;a target=\&quot;_blank\&quot; href=\&quot;http://example.com\&quot;&gt;Continue&lt;/a&gt;&lt;/p&gt;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-simple_format_source')" id="l_method-i-simple_format_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L376" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-simple_format_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 376</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">simple_format</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">html_options</span> = {}, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">wrapper_tag</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:wrapper_tag</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&quot;p&quot;</span>

  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sanitize</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:sanitize_options</span>, {})) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:sanitize</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">paragraphs</span> = <span class="ruby-identifier">split_paragraphs</span>(<span class="ruby-identifier">text</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">wrapper_tag</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">html_options</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">paragraphs</span>.<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">paragraph</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">wrapper_tag</span>, <span class="ruby-identifier">raw</span>(<span class="ruby-identifier">paragraph</span>), <span class="ruby-identifier">html_options</span>)
    }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n\n&quot;</span>).<span class="ruby-identifier">html_safe</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-truncate">
            
              <b>truncate</b>(text, options = {}, &amp;block)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-truncate" name="method-i-truncate" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Truncates <code>text</code> if it is longer than a specified <code>:length</code>. If <code>text</code> is truncated, an omission marker will be appended to the result for a total length not exceeding <code>:length</code>.</p>

<p>You can also pass a block to render and append extra content after the omission marker when <code>text</code> is truncated. However, this content <em>can</em> cause the total length to exceed <code>:length</code> characters.</p>

<p>The result will be escaped unless <code>escape: false</code> is specified. In any case, the result will be marked HTML-safe. Care should be taken if <code>text</code> might contain HTML tags or entities, because truncation could produce invalid HTML, such as unbalanced or incomplete tags.</p>

<h4 id="method-i-truncate-label-Options">Options</h4>
<dl class="rdoc-list label-list"><dt><code>:length</code>
<dd>
<p>The maximum number of characters that should be returned, excluding any extra content from the block. Defaults to 30.</p>
</dd><dt><code>:omission</code>
<dd>
<p>The string to append after truncating. Defaults to  <code>&quot;...&quot;</code>.</p>
</dd><dt><code>:separator</code>
<dd>
<p>A string or regexp used to find a breaking point at which to truncate. By default, truncation can occur at any character in <code>text</code>.</p>
</dd><dt><code>:escape</code>
<dd>
<p>Whether to escape the result. Defaults to true.</p>
</dd></dl>

<h4 id="method-i-truncate-label-Examples">Examples</h4>

<pre><code>truncate(&quot;Once upon a time in a world far far away&quot;)
# =&gt; &quot;Once upon a time in a world...&quot;

truncate(&quot;Once upon a time in a world far far away&quot;, length: 17)
# =&gt; &quot;Once upon a ti...&quot;

truncate(&quot;Once upon a time in a world far far away&quot;, length: 17, separator: &#39; &#39;)
# =&gt; &quot;Once upon a...&quot;

truncate(&quot;And they found that many people were sleeping better.&quot;, length: 25, omission: &#39;... (continued)&#39;)
# =&gt; &quot;And they f... (continued)&quot;

truncate(&quot;&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;&quot;)
# =&gt; &quot;&amp;lt;p&amp;gt;Once upon a time in a wo...&quot;

truncate(&quot;&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;&quot;, escape: false)
# =&gt; &quot;&lt;p&gt;Once upon a time in a wo...&quot;

truncate(&quot;Once upon a time in a world far far away&quot;) { link_to &quot;Continue&quot;, &quot;#&quot; }
# =&gt; &quot;Once upon a time in a world...&lt;a href=\&quot;#\&quot;&gt;Continue&lt;/a&gt;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-truncate_source')" id="l_method-i-truncate_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L122" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-truncate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 122</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">truncate</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>
    <span class="ruby-identifier">length</span>  = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:length</span>, <span class="ruby-value">30</span>)

    <span class="ruby-identifier">content</span> = <span class="ruby-identifier">text</span>.<span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">length</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-identifier">content</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:escape</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">content</span>.<span class="ruby-identifier">html_safe</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ERB</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">html_escape</span>(<span class="ruby-identifier">content</span>)
    <span class="ruby-identifier">content</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">length</span>
    <span class="ruby-identifier">content</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-word_wrap">
            
              <b>word_wrap</b>(text, line_width: 80, break_sequence: &quot;\n&quot;)
            
            <a href="../../../classes/ActionView/Helpers/TextHelper.html#method-i-word_wrap" name="method-i-word_wrap" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Wraps the <code>text</code> into lines no longer than <code>line_width</code> width. This method breaks on the first whitespace character that does not exceed <code>line_width</code> (which is 80 by default).</p>

<pre><code>word_wrap(&#39;Once upon a time&#39;)
# =&gt; &quot;Once upon a time&quot;

word_wrap(&#39;Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding a successor to the throne turned out to be more trouble than anyone could have imagined...&#39;)
# =&gt; &quot;Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding\na successor to the throne turned out to be more trouble than anyone could have\nimagined...&quot;

word_wrap(&#39;Once upon a time&#39;, line_width: 8)
# =&gt; &quot;Once\nupon a\ntime&quot;

word_wrap(&#39;Once upon a time&#39;, line_width: 1)
# =&gt; &quot;Once\nupon\na\ntime&quot;
</code></pre>

<p>You can also specify a custom <code>break_sequence</code> (“n” by default):</p>

<pre><code>word_wrap(&#39;Once upon a time&#39;, line_width: 1, break_sequence: &quot;\r\n&quot;)
# =&gt; &quot;Once\r\nupon\r\na\r\ntime&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-word_wrap_source')" id="l_method-i-word_wrap_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/actionview/lib/action_view/helpers/text_helper.rb#L320" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-word_wrap_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/actionview/lib/action_view/helpers/text_helper.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">word_wrap</span>(<span class="ruby-identifier">text</span>, <span class="ruby-value">line_width:</span> <span class="ruby-value">80</span>, <span class="ruby-value">break_sequence:</span> <span class="ruby-string">&quot;\n&quot;</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-string">+&quot;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-comment"># Match up to `line_width` characters, followed by one of</span>
  <span class="ruby-comment">#   (1) non-newline whitespace plus an optional newline</span>
  <span class="ruby-comment">#   (2) the end of the string, ignoring any trailing newlines</span>
  <span class="ruby-comment">#   (3) a newline</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># -OR-</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># Match an empty line</span>
  <span class="ruby-identifier">pattern</span> = <span class="ruby-regexp">/(.{1,#{line_width}})(?:[^\S\n]+\n?|\n*\Z|\n)|\n/</span>

  <span class="ruby-identifier">text</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-node">&quot;\\1#{break_sequence}&quot;</span>).<span class="ruby-identifier">chomp!</span>(<span class="ruby-identifier">break_sequence</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
