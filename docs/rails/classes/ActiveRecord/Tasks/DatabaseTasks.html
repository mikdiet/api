<!DOCTYPE html>
<html lang="en">
<head>
    <title>ActiveRecord::Tasks::DatabaseTasks</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["ActiveRecord", "Tasks", "DatabaseTasks"]'>


    <meta property="og:title" value="ActiveRecord::Tasks::DatabaseTasks">

  
    
    <meta name="description" content="Active Record DatabaseTasks  ActiveRecord::Tasks::DatabaseTasks is a utility class, which encapsulates logic behind common tasks used to manage database and migrations.">
    <meta property="og:description" content="Active Record DatabaseTasks  ActiveRecord::Tasks::DatabaseTasks is a utility class, which encapsulates logic behind common tasks used to manage database and migrations.">
  

    <meta name="keywords" content="ActiveRecord::Tasks::DatabaseTasks class, structure_dump_flags, structure_load_flags, check_protected_environments!, register_task, db_dir, migrations_paths, fixtures_path, root, env, name, seed_loader, create, create_all, create_current, prepare_all, drop, drop_all, drop_current, truncate_all, migrate, migrate_status, check_target_version, target_version, charset_current, charset, collation_current, collation, purge, purge_all, purge_current, structure_dump, structure_load, schema_up_to_date?, schema_dump_path, cache_dump_filename, load_schema_current, check_schema_file, load_seed, dump_schema_cache, clear_schema_cache">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Module</span>
            ActiveRecord::Tasks::DatabaseTasks
            
        </h2>
        <ul class="files">
            
            <li><a href="../../../files/rails/activerecord/lib/active_record/tasks/database_tasks_rb.html">rails/activerecord/lib/active_record/tasks/database_tasks.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="module-ActiveRecord::Tasks::DatabaseTasks-label-Active+Record+DatabaseTasks">Active Record DatabaseTasks</h1>

<p><a href="DatabaseTasks.html"><code>ActiveRecord::Tasks::DatabaseTasks</code></a> is a utility class, which encapsulates logic behind common tasks used to manage database and migrations.</p>

<p>The tasks defined here are used with Rails commands provided by Active Record.</p>

<p>In order to use <a href="DatabaseTasks.html"><code>DatabaseTasks</code></a>, a few config values need to be set. All the needed config values are set by Rails already, so itâ€™s necessary to do it only if you want to change the defaults or when you want to use Active Record outside of Rails (in such case after configuring the database tasks, you can also use the rake tasks defined in Active Record).</p>

<p>The possible config values are:</p>
<ul><li>
<p><code>env</code>: current environment (like <a href="../../Rails.html#method-c-env"><code>Rails.env</code></a>).</p>
</li><li>
<p><code>database_configuration</code>: configuration of your databases (as in <code>config/database.yml</code>).</p>
</li><li>
<p><code>db_dir</code>: your <code>db</code> directory.</p>
</li><li>
<p><code>fixtures_path</code>: a path to fixtures directory.</p>
</li><li>
<p><code>migrations_paths</code>: a list of paths to directories with migrations.</p>
</li><li>
<p><code>seed_loader</code>: an object which will load seeds, it needs to respond to the <code>load_seed</code> method.</p>
</li><li>
<p><code>root</code>: a path to the root of the application.</p>
</li></ul>

<p>Example usage of <a href="DatabaseTasks.html"><code>DatabaseTasks</code></a> outside Rails could look as such:</p>

<pre><code>include ActiveRecord::Tasks
DatabaseTasks.database_configuration = YAML.load_file(&#39;my_database_config.yml&#39;)
DatabaseTasks.db_dir = &#39;db&#39;
# other settings...

DatabaseTasks.create_current(&#39;production&#39;)
</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-cache_dump_filename">cache_dump_filename</a>,
              </li>
            
              
              <li>
                <a href="#method-i-charset">charset</a>,
              </li>
            
              
              <li>
                <a href="#method-i-charset_current">charset_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_protected_environments-21">check_protected_environments!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_schema_file">check_schema_file</a>,
              </li>
            
              
              <li>
                <a href="#method-i-check_target_version">check_target_version</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear_schema_cache">clear_schema_cache</a>,
              </li>
            
              
              <li>
                <a href="#method-i-collation">collation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-collation_current">collation_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create">create</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create_all">create_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create_current">create_current</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-db_dir">db_dir</a>,
              </li>
            
              
              <li>
                <a href="#method-i-drop">drop</a>,
              </li>
            
              
              <li>
                <a href="#method-i-drop_all">drop_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-drop_current">drop_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-dump_schema_cache">dump_schema_cache</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-env">env</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-fixtures_path">fixtures_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-load_schema_current">load_schema_current</a>,
              </li>
            
              
              <li>
                <a href="#method-i-load_seed">load_seed</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-migrate">migrate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-migrate_status">migrate_status</a>,
              </li>
            
              
              <li>
                <a href="#method-i-migrations_paths">migrations_paths</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-name">name</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-prepare_all">prepare_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-purge">purge</a>,
              </li>
            
              
              <li>
                <a href="#method-i-purge_all">purge_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-purge_current">purge_current</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-register_task">register_task</a>,
              </li>
            
              
              <li>
                <a href="#method-i-root">root</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-schema_dump_path">schema_dump_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-schema_up_to_date-3F">schema_up_to_date?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-seed_loader">seed_loader</a>,
              </li>
            
              
              <li>
                <a href="#method-i-structure_dump">structure_dump</a>,
              </li>
            
              
              <li>
                <a href="#method-c-structure_dump_flags">structure_dump_flags</a>,
              </li>
            
              
              <li>
                <a href="#method-i-structure_load">structure_load</a>,
              </li>
            
              
              <li>
                <a href="#method-c-structure_load_flags">structure_load_flags</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-target_version">target_version</a>,
              </li>
            
              
              <li>
                <a href="#method-i-truncate_all">truncate_all</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <h2 class="sectiontitle">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">LOCAL_HOSTS</td>
            <td>=</td>
            <td class="attr-value">[&quot;127.0.0.1&quot;, &quot;localhost&quot;]</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <h2 class="sectiontitle">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>database_configuration</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>db_dir</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>env</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>fixtures_path</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>migrations_paths</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>root</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [W]
            </td>
            <td class='attr-name'>seed_loader</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-structure_dump_flags">
            
              <b>structure_dump_flags</b>
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-c-structure_dump_flags" name="method-c-structure_dump_flags" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Extra flags passed to database CLI tool (mysqldump/pg_dump) when calling db:schema:dump It can be used as a string/array (the typical case) or a hash (when you use multiple adapters) Example:</p>

<pre><code>ActiveRecord::Tasks::DatabaseTasks.structure_dump_flags = {
  mysql2: [&#39;--no-defaults&#39;, &#39;--skip-add-drop-table&#39;],
  postgres: &#39;--no-tablespaces&#39;
}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-structure_dump_flags_source')" id="l_method-c-structure_dump_flags_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L50" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-structure_dump_flags_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 50</span>
<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:structure_dump_flags</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>
</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-structure_load_flags">
            
              <b>structure_load_flags</b>
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-c-structure_load_flags" name="method-c-structure_load_flags" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Extra flags passed to database CLI tool when calling db:schema:load It can be used as a string/array (the typical case) or a hash (when you use multiple adapters)</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-structure_load_flags_source')" id="l_method-c-structure_load_flags_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L56" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-structure_load_flags_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 56</span>
<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:structure_load_flags</span>, <span class="ruby-value">instance_accessor:</span> <span class="ruby-keyword">false</span>
</pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-cache_dump_filename">
            
              <b>cache_dump_filename</b>(db_config_name, schema_cache_path: nil)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-cache_dump_filename" name="method-i-cache_dump_filename" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-cache_dump_filename_source')" id="l_method-i-cache_dump_filename_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L440" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-cache_dump_filename_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 440</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cache_dump_filename</span>(<span class="ruby-identifier">db_config_name</span>, <span class="ruby-value">schema_cache_path:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">configurations</span>.<span class="ruby-identifier">primary?</span>(<span class="ruby-identifier">db_config_name</span>)
    <span class="ruby-string">&quot;schema_cache.yml&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-node">&quot;#{db_config_name}_schema_cache.yml&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">schema_cache_path</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCHEMA_CACHE&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Tasks</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">db_dir</span>, <span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-charset">
            
              <b>charset</b>(configuration, *arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-charset" name="method-i-charset" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-charset_source')" id="l_method-i-charset_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L305" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-charset_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 305</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">charset</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">charset</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-charset_current">
            
              <b>charset_current</b>(env_name = env, db_name = name)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-charset_current" name="method-i-charset_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-charset_current_source')" id="l_method-i-charset_current_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L300" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-charset_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 300</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">charset_current</span>(<span class="ruby-identifier">env_name</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">db_name</span> = <span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">env_name</span>, <span class="ruby-value">name:</span> <span class="ruby-identifier">db_name</span>)
  <span class="ruby-identifier">charset</span>(<span class="ruby-identifier">db_config</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-check_protected_environments-21">
            
              <b>check_protected_environments!</b>(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-check_protected_environments-21" name="method-i-check_protected_environments-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-check_protected_environments-21_source')" id="l_method-i-check_protected_environments-21_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L65" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-check_protected_environments-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_protected_environments!</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;DISABLE_DATABASE_ENVIRONMENT_CHECK&quot;</span>]

  <span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">environment</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">check_current_protected_environment!</span>(<span class="ruby-identifier">db_config</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-check_schema_file">
            
              <b>check_schema_file</b>(filename)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-check_schema_file" name="method-i-check_schema_file" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-check_schema_file_source')" id="l_method-i-check_schema_file_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L458" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-check_schema_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 458</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_schema_file</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">filename</span>)
    <span class="ruby-identifier">message</span> = <span class="ruby-node">+%{#{filename} doesn&#39;t exist yet. Run `bin/rails db:migrate` to create it, then try again.}</span>
    <span class="ruby-identifier">message</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">%{ If you do not intend to use a database, you should instead alter #{Rails.root}/config/application.rb to limit the frameworks that will be loaded.}</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>)
    <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">abort</span> <span class="ruby-identifier">message</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-check_target_version">
            
              <b>check_target_version</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-check_target_version" name="method-i-check_target_version" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-check_target_version_source')" id="l_method-i-check_target_version_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L290" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-check_target_version_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_target_version</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_version</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">Migration</span>.<span class="ruby-identifier">valid_version_format?</span>(<span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>])
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Invalid format of target version: `VERSION=#{ENV[&#39;VERSION&#39;]}`&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-clear_schema_cache">
            
              <b>clear_schema_cache</b>(filename)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-clear_schema_cache" name="method-i-clear_schema_cache" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-clear_schema_cache_source')" id="l_method-i-clear_schema_cache_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L484" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-clear_schema_cache_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 484</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">clear_schema_cache</span>(<span class="ruby-identifier">filename</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_f</span> <span class="ruby-identifier">filename</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-collation">
            
              <b>collation</b>(configuration, *arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-collation" name="method-i-collation" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-collation_source')" id="l_method-i-collation_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L315" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-collation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 315</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">collation</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">collation</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-collation_current">
            
              <b>collation_current</b>(env_name = env, db_name = name)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-collation_current" name="method-i-collation_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-collation_current_source')" id="l_method-i-collation_current_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L310" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-collation_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 310</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">collation_current</span>(<span class="ruby-identifier">env_name</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">db_name</span> = <span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">env_name</span>, <span class="ruby-value">name:</span> <span class="ruby-identifier">db_name</span>)
  <span class="ruby-identifier">collation</span>(<span class="ruby-identifier">db_config</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-create">
            
              <b>create</b>(configuration, *arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-create" name="method-i-create" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-create_source')" id="l_method-i-create_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L115" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-create_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Created database &#39;#{db_config.database}&#39;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">DatabaseAlreadyExists</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{db_config.database}&#39; already exists&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t create &#39;#{db_config.database}&#39; database. Please check your configuration.&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-create_all">
            
              <b>create_all</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-create_all" name="method-i-create_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-create_all_source')" id="l_method-i-create_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L127" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-create_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_all</span>
  <span class="ruby-identifier">each_local_configuration</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">with_temporary_connection</span>(<span class="ruby-identifier">db_config</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">create</span>(<span class="ruby-identifier">db_config</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-create_current">
            
              <b>create_current</b>(environment = env, name = nil)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-create_current" name="method-i-create_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-create_current_source')" id="l_method-i-create_current_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L170" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-create_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">create_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>, <span class="ruby-identifier">name</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">db_config</span>) }

  <span class="ruby-identifier">migration_class</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-db_dir">
            
              <b>db_dir</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-db_dir" name="method-i-db_dir" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-db_dir_source')" id="l_method-i-db_dir_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L83" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-db_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">db_dir</span>
  <span class="ruby-ivar">@db_dir</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db&quot;</span>].<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-drop">
            
              <b>drop</b>(configuration, *arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-drop" name="method-i-drop" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-drop_source')" id="l_method-i-drop_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L204" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-drop_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 204</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">drop</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Dropped database &#39;#{db_config.database}&#39;&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Database &#39;#{db_config.database}&#39; does not exist&quot;</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Couldn&#39;t drop database &#39;#{db_config.database}&#39;&quot;</span>
  <span class="ruby-identifier">raise</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-drop_all">
            
              <b>drop_all</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-drop_all" name="method-i-drop_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-drop_all_source')" id="l_method-i-drop_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L216" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-drop_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drop</span>(<span class="ruby-identifier">db_config</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-drop_current">
            
              <b>drop_current</b>(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-drop_current" name="method-i-drop_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-drop_current_source')" id="l_method-i-drop_current_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L220" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-drop_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 220</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">drop_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span> <span class="ruby-identifier">drop</span>(<span class="ruby-identifier">db_config</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-dump_schema_cache">
            
              <b>dump_schema_cache</b>(conn, filename)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-dump_schema_cache" name="method-i-dump_schema_cache" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Dumps the schema cache in YAML format for the connection into the file</p>

<h4 id="method-i-dump_schema_cache-label-Examples">Examples</h4>

<pre><code>ActiveRecord::Tasks::DatabaseTasks.dump_schema_cache(ActiveRecord::Base.connection, &quot;tmp/schema_dump.yaml&quot;)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-dump_schema_cache_source')" id="l_method-i-dump_schema_cache_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L480" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-dump_schema_cache_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 480</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">dump_schema_cache</span>(<span class="ruby-identifier">conn</span>, <span class="ruby-identifier">filename</span>)
  <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">dump_to</span>(<span class="ruby-identifier">filename</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-env">
            
              <b>env</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-env" name="method-i-env" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-env_source')" id="l_method-i-env_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L103" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-env_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">env</span>
  <span class="ruby-ivar">@env</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">env</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-fixtures_path">
            
              <b>fixtures_path</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-fixtures_path" name="method-i-fixtures_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-fixtures_path_source')" id="l_method-i-fixtures_path_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L91" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-fixtures_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">fixtures_path</span>
  <span class="ruby-ivar">@fixtures_path</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;FIXTURES_PATH&quot;</span>]
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;FIXTURES_PATH&quot;</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">root</span>, <span class="ruby-string">&quot;test&quot;</span>, <span class="ruby-string">&quot;fixtures&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-load_schema_current">
            
              <b>load_schema_current</b>(format = ActiveRecord.schema_format, file = nil, environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-load_schema_current" name="method-i-load_schema_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-load_schema_current_source')" id="l_method-i-load_schema_current_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L450" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-load_schema_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 450</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_schema_current</span>(<span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-identifier">file</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">with_temporary_connection</span>(<span class="ruby-identifier">db_config</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">load_schema</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-identifier">format</span>, <span class="ruby-identifier">file</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-load_seed">
            
              <b>load_seed</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-load_seed" name="method-i-load_seed" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-load_seed_source')" id="l_method-i-load_seed_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L466" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-load_seed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 466</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">load_seed</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">seed_loader</span>
    <span class="ruby-identifier">seed_loader</span>.<span class="ruby-identifier">load_seed</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;You tried to load seed data, but no seed loader is specified. Please specify seed &quot;</span> \
          <span class="ruby-string">&quot;loader with ActiveRecord::Tasks::DatabaseTasks.seed_loader = your_seed_loader\n&quot;</span> \
          <span class="ruby-string">&quot;Seed loader should respond to load_seed method&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-migrate">
            
              <b>migrate</b>(version = nil)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-migrate" name="method-i-migrate" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-migrate_source')" id="l_method-i-migrate_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L237" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-migrate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrate</span>(<span class="ruby-identifier">version</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">scope</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCOPE&quot;</span>]
  <span class="ruby-identifier">verbose_was</span>, <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span>, <span class="ruby-identifier">verbose?</span>

  <span class="ruby-identifier">check_target_version</span>

  <span class="ruby-identifier">migration_connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">migrate</span>(<span class="ruby-identifier">target_version</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">migration</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span>.<span class="ruby-identifier">blank?</span>
      <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">migration</span>.<span class="ruby-identifier">scope</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">migration</span>.<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">version</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">migrations_ran</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">write</span>(<span class="ruby-node">&quot;No migrations ran. (using #{scope} scope)&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">migrations_ran</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">migration_connection</span>.<span class="ruby-identifier">schema_cache</span>.<span class="ruby-identifier">clear!</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Migration</span>.<span class="ruby-identifier">verbose</span> = <span class="ruby-identifier">verbose_was</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-migrate_status">
            
              <b>migrate_status</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-migrate_status" name="method-i-migrate_status" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-migrate_status_source')" id="l_method-i-migrate_status_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L275" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-migrate_status_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrate_status</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">migration_connection</span>.<span class="ruby-identifier">schema_migration</span>.<span class="ruby-identifier">table_exists?</span>
    <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">abort</span> <span class="ruby-string">&quot;Schema migrations table does not exist yet.&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># output</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\ndatabase: #{migration_connection.pool.db_config.database}\n\n&quot;</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{&#39;Status&#39;.center(8)}  #{&#39;Migration ID&#39;.ljust(14)}  Migration Name&quot;</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-string">&quot;-&quot;</span> <span class="ruby-operator">*</span> <span class="ruby-value">50</span>
  <span class="ruby-identifier">migration_connection</span>.<span class="ruby-identifier">migration_context</span>.<span class="ruby-identifier">migrations_status</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">status</span>, <span class="ruby-identifier">version</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{status.center(8)}  #{version.ljust(14)}  #{name}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">puts</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-migrations_paths">
            
              <b>migrations_paths</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-migrations_paths" name="method-i-migrations_paths" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-migrations_paths_source')" id="l_method-i-migrations_paths_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L87" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-migrations_paths_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">migrations_paths</span>
  <span class="ruby-ivar">@migrations_paths</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">paths</span>[<span class="ruby-string">&quot;db/migrate&quot;</span>].<span class="ruby-identifier">to_a</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-name">
            
              <b>name</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-name" name="method-i-name" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-name_source')" id="l_method-i-name_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L107" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">name</span>
  <span class="ruby-ivar">@name</span> <span class="ruby-operator">||=</span> <span class="ruby-string">&quot;primary&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-prepare_all">
            
              <b>prepare_all</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-prepare_all" name="method-i-prepare_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-prepare_all_source')" id="l_method-i-prepare_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L176" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-prepare_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">prepare_all</span>
  <span class="ruby-identifier">seed</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">env</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">with_temporary_pool</span>(<span class="ruby-identifier">db_config</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">database_initialized</span> = <span class="ruby-identifier">migration_connection</span>.<span class="ruby-identifier">schema_migration</span>.<span class="ruby-identifier">table_exists?</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">NoDatabaseError</span>
        <span class="ruby-identifier">create</span>(<span class="ruby-identifier">db_config</span>)
        <span class="ruby-keyword">retry</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">database_initialized</span>
        <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">schema_dump_path</span>(<span class="ruby-identifier">db_config</span>))
          <span class="ruby-identifier">load_schema</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-keyword">nil</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">seed</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">migrate</span>
      <span class="ruby-identifier">dump_schema</span>(<span class="ruby-identifier">db_config</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">dump_schema_after_migration</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">load_seed</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">seed</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-purge">
            
              <b>purge</b>(configuration)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-purge" name="method-i-purge" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-purge_source')" id="l_method-i-purge_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L320" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-purge_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>).<span class="ruby-identifier">purge</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-purge_all">
            
              <b>purge_all</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-purge_all" name="method-i-purge_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-purge_all_source')" id="l_method-i-purge_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L325" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-purge_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 325</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge_all</span>
  <span class="ruby-identifier">each_local_configuration</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span> <span class="ruby-identifier">purge</span>(<span class="ruby-identifier">db_config</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-purge_current">
            
              <b>purge_current</b>(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-purge_current" name="method-i-purge_current" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-purge_current_source')" id="l_method-i-purge_current_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L329" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-purge_current_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 329</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">purge_current</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">each_current_configuration</span>(<span class="ruby-identifier">environment</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span> <span class="ruby-identifier">purge</span>(<span class="ruby-identifier">db_config</span>) }

  <span class="ruby-identifier">migration_class</span>.<span class="ruby-identifier">establish_connection</span>(<span class="ruby-identifier">environment</span>.<span class="ruby-identifier">to_sym</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-register_task">
            
              <b>register_task</b>(pattern, task)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-register_task" name="method-i-register_task" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-register_task_source')" id="l_method-i-register_task_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L73" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-register_task_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">register_task</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">task</span>)
  <span class="ruby-ivar">@tasks</span> <span class="ruby-operator">||=</span> {}
  <span class="ruby-ivar">@tasks</span>[<span class="ruby-identifier">pattern</span>] = <span class="ruby-identifier">task</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-root">
            
              <b>root</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-root" name="method-i-root" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-root_source')" id="l_method-i-root_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L99" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-root_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">root</span>
  <span class="ruby-ivar">@root</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">root</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-schema_dump_path">
            
              <b>schema_dump_path</b>(db_config, format = ActiveRecord.schema_format)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-schema_dump_path" name="method-i-schema_dump_path" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-schema_dump_path_source')" id="l_method-i-schema_dump_path_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L427" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-schema_dump_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 427</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_dump_path</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">schema_format</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCHEMA&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;SCHEMA&quot;</span>]

  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">db_config</span>.<span class="ruby-identifier">schema_dump</span>(<span class="ruby-identifier">format</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">filename</span>

  <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">filename</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Tasks</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">db_dir</span>
    <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Tasks</span><span class="ruby-operator">::</span><span class="ruby-constant">DatabaseTasks</span>.<span class="ruby-identifier">db_dir</span>, <span class="ruby-identifier">filename</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-schema_up_to_date-3F">
            
              <b>schema_up_to_date?</b>(configuration, format = ActiveRecord.schema_format, file = nil)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-schema_up_to_date-3F" name="method-i-schema_up_to_date-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-schema_up_to_date-3F_source')" id="l_method-i-schema_up_to_date-3F_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L370" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-schema_up_to_date-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 370</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">schema_up_to_date?</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-identifier">format</span> = <span class="ruby-constant">ActiveRecord</span>.<span class="ruby-identifier">schema_format</span>, <span class="ruby-identifier">file</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)

  <span class="ruby-identifier">file</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">schema_dump_path</span>(<span class="ruby-identifier">db_config</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">file</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">file</span>)

  <span class="ruby-identifier">with_temporary_connection</span>(<span class="ruby-identifier">db_config</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">connection</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">internal_metadata</span>.<span class="ruby-identifier">enabled?</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">internal_metadata</span>.<span class="ruby-identifier">table_exists?</span>

    <span class="ruby-identifier">connection</span>.<span class="ruby-identifier">internal_metadata</span>[<span class="ruby-value">:schema_sha1</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">schema_sha1</span>(<span class="ruby-identifier">file</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-seed_loader">
            
              <b>seed_loader</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-seed_loader" name="method-i-seed_loader" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-seed_loader_source')" id="l_method-i-seed_loader_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L111" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-seed_loader_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">seed_loader</span>
  <span class="ruby-ivar">@seed_loader</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-structure_dump">
            
              <b>structure_dump</b>(configuration, *arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-structure_dump" name="method-i-structure_dump" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-structure_dump_source')" id="l_method-i-structure_dump_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L335" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-structure_dump_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 335</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">structure_dump</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-value">0</span>)
  <span class="ruby-identifier">flags</span> = <span class="ruby-identifier">structure_dump_flags_for</span>(<span class="ruby-identifier">db_config</span>.<span class="ruby-identifier">adapter</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_dump</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">flags</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-structure_load">
            
              <b>structure_load</b>(configuration, *arguments)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-structure_load" name="method-i-structure_load" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-structure_load_source')" id="l_method-i-structure_load_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L342" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-structure_load_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">structure_load</span>(<span class="ruby-identifier">configuration</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
  <span class="ruby-identifier">db_config</span> = <span class="ruby-identifier">resolve_configuration</span>(<span class="ruby-identifier">configuration</span>)
  <span class="ruby-identifier">filename</span> = <span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-value">0</span>)
  <span class="ruby-identifier">flags</span> = <span class="ruby-identifier">structure_load_flags_for</span>(<span class="ruby-identifier">db_config</span>.<span class="ruby-identifier">adapter</span>)
  <span class="ruby-identifier">database_adapter_for</span>(<span class="ruby-identifier">db_config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>).<span class="ruby-identifier">structure_load</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">flags</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-target_version">
            
              <b>target_version</b>()
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-target_version" name="method-i-target_version" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-target_version_source')" id="l_method-i-target_version_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L296" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-target_version_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 296</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">target_version</span>
  <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;VERSION&quot;</span>].<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-truncate_all">
            
              <b>truncate_all</b>(environment = env)
            
            <a href="../../../classes/ActiveRecord/Tasks/DatabaseTasks.html#method-i-truncate_all" name="method-i-truncate_all" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-truncate_all_source')" id="l_method-i-truncate_all_source">show</a>
                
                  | <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/activerecord/lib/active_record/tasks/database_tasks.rb#L231" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-truncate_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File rails/activerecord/lib/active_record/tasks/database_tasks.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">truncate_all</span>(<span class="ruby-identifier">environment</span> = <span class="ruby-identifier">env</span>)
  <span class="ruby-identifier">configs_for</span>(<span class="ruby-value">env_name:</span> <span class="ruby-identifier">environment</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">db_config</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">truncate_tables</span>(<span class="ruby-identifier">db_config</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
