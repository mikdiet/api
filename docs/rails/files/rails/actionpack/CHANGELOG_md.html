<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='[]'>

</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            CHANGELOG.md
        </h2>
        <ul class="files">
            
            <li>
                rails/actionpack/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/7b55c452b7d9a295d148ff882e0197cd139a9f8f/actionpack/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2024-05-24 23:57:09 +0300</li>
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+7.0.8.3+-28May+17-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.8.3 (May 17, 2024)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.8.2+-28May+16-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.8.2 (May 16, 2024)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.8.1+-28February+21-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.8.1 (February 21, 2024)</h2>
<ul><li>
<p>Fix possible XSS vulnerability with the <code>translate</code> method in controllers</p>

<p>CVE-2024-26143</p>
</li></ul>

<h2 id="label-Rails+7.0.8+-28September+09-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.8 (September 09, 2023)</h2>
<ul><li>
<p>Fix <code>HostAuthorization</code> potentially displaying the value of the X_FORWARDED_HOST header when the HTTP_HOST header is being blocked.</p>

<p><em>Hartley McGuire</em>, <em>Daniel Schlosser</em></p>
</li></ul>

<h2 id="label-Rails+7.0.7.2+-28August+22-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.7.2 (August 22, 2023)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.7.1+-28August+22-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.7.1 (August 22, 2023)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.7+-28August+09-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.7 (August 09, 2023)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.6+-28June+29-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.6 (June 29, 2023)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.5.1+-28June+26-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.5.1 (June 26, 2023)</h2>
<ul><li>
<p>Raise an exception if illegal characters are provide to redirect_to [CVE-2023-28362]</p>

<p><em>Zack Deveau</em></p>
</li></ul>

<h2 id="label-Rails+7.0.5+-28May+24-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.5 (May 24, 2023)</h2>
<ul><li>
<p>Do not return CSP headers for 304 Not Modified responses.</p>

<p><em>Tobias Kraze</em></p>
</li><li>
<p>Fix <code>EtagWithFlash</code> when there is no <code>Flash</code> middleware available.</p>

<p><em>fatkodima</em></p>
</li><li>
<p>Fix content-type header with <code>send_stream</code>.</p>

<p><em>Elliot Crosby-McCullough</em></p>
</li><li>
<p>Address Selenium <code>:capabilities</code> deprecation warning.</p>

<p><em>Ron Shinall</em></p>
</li><li>
<p>Fix cookie domain for domain: all on two letter single level TLD.</p>

<p><em>John Hawthorn</em></p>
</li><li>
<p>Don't double log the <code>controller</code>, <code>action</code>, or <code>namespaced_controller</code> when using <code>ActiveRecord::QueryLog</code></p>

<p>Previously if you set <code>config.active_record.query_log_tags</code> to an array that included <code>:controller</code>, <code>:namespaced_controller</code>, or <code>:action</code>, that item would get logged twice. This bug has been fixed.</p>

<p><em>Alex Ghiculescu</em></p>
</li><li>
<p>Rescue <code>EOFError</code> exception from <code>rack</code> on a multipart request.</p>

<p><em>Nikita Vasilevsky</em></p>
</li><li>
<p>Rescue <code>JSON::ParserError</code> in Cookies json deserializer to discards marshal dumps:</p>

<p>Without this change, if <code>action_dispatch.cookies_serializer</code> is set to <code>:json</code> and the app tries to read a <code>:marshal</code> serialized cookie, it would error out which wouldn't clear the cookie and force app users to manually clear it in their browser.</p>

<p>(See #45127 for original bug discussion)</p>

<p><em>Nathan Bardoux</em></p>
</li></ul>

<h2 id="label-Rails+7.0.4.3+-28March+13-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.4.3 (March 13, 2023)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.4.2+-28January+24-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.4.2 (January 24, 2023)</h2>
<ul><li>
<p>Fix <code>domain: :all</code> for two letter TLD</p>

<p>This fixes a compatibility issue introduced in our previous security release when using <code>domain: :all</code> with a two letter but single level top level domain domain (like <code>.ca</code>, rather than <code>.co.uk</code>).</p>
</li></ul>

<h2 id="label-Rails+7.0.4.1+-28January+17-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.4.1 (January 17, 2023)</h2>
<ul><li>
<p>Fix sec issue with _url_host_allowed?</p>

<p>Disallow certain strings from <code>_url_host_allowed?</code> to avoid a redirect to malicious sites.</p>

<p>[CVE-2023-22797]</p>
</li><li>
<p>Avoid regex backtracking on If-None-Match header</p>

<p>[CVE-2023-22795]</p>
</li><li>
<p>Use string#split instead of regex for domain parts</p>

<p>[CVE-2023-22792]</p>
</li></ul>

<h2 id="label-Rails+7.0.4+-28September+09-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.4 (September 09, 2022)</h2>
<ul><li>
<p>Prevent <code>ActionDispatch::ServerTiming</code> from overwriting existing values in <code>Server-Timing</code>.</p>

<p>Previously, if another middleware down the chain set <code>Server-Timing</code> header, it would overwritten by <code>ActionDispatch::ServerTiming</code>.</p>

<p><em>Jakub Malinowski</em></p>
</li></ul>

<h2 id="label-Rails+7.0.3.1+-28July+12-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.3.1 (July 12, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.3+-28May+09-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.3 (May 09, 2022)</h2>
<ul><li>
<p>Allow relative redirects when <code>raise_on_open_redirects</code> is enabled.</p>

<p><em>Tom Hughes</em></p>
</li><li>
<p>Fix <code>authenticate_with_http_basic</code> to allow for missing password.</p>

<p>Before <a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0 it was possible to handle basic authentication with only a username.</p>

<pre><code>authenticate_with_http_basic do |token, _|
  ApiClient.authenticate(token)
end
</code></pre>

<p>This ability is restored.</p>

<p><em>Jean Boussier</em></p>
</li><li>
<p>Fix <code>content_security_policy</code> returning invalid directives.</p>

<p>Directives such as <code>self</code>, <code>unsafe-eval</code> and few others were not single quoted when the directive was the result of calling a lambda returning an array.</p>

<pre><code>content_security_policy do |policy|
  policy.frame_ancestors lambda { [:self, &quot;https://example.com&quot;] }
end
</code></pre>

<p>With this fix the policy generated from above will now be valid.</p>

<p><em>Edouard Chin</em></p>
</li><li>
<p>Fix <code>skip_forgery_protection</code> to run without raising an error if forgery protection has not been enabled / <code>verify_authenticity_token</code> is not a defined callback.</p>

<p>This fix prevents the <a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0 Welcome Page (<code>/</code>) from raising an <code>ArgumentError</code> if <code>default_protect_from_forgery</code> is false.</p>

<p><em>Brad Trick</em></p>
</li><li>
<p>Fix <code>ActionController::Live</code> to copy the IsolatedExecutionState in the ephemeral thread.</p>

<p>Since its inception <code>ActionController::Live</code> has been copying thread local variables to keep things such as <code>CurrentAttributes</code> set from middlewares working in the controller action.</p>

<p>With the introduction of <code>IsolatedExecutionState</code> in 7.0, some of that global state was lost in <code>ActionController::Live</code> controllers.</p>

<p><em>Jean Boussier</em></p>
</li><li>
<p>Fix setting <code>trailing_slash: true</code> in route definition.</p>

<pre><code>get &#39;/test&#39; =&gt; &quot;test#index&quot;, as: :test, trailing_slash: true

test_path() # =&gt; &quot;/test/&quot;
</code></pre>

<p><em>Jean Boussier</em></p>
</li></ul>

<h2 id="label-Rails+7.0.2.4+-28April+26-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.2.4 (April 26, 2022)</h2>
<ul><li>
<p>Allow Content Security Policy DSL to generate for API responses.</p>

<p><em>Tim Wade</em></p>
</li></ul>

<h2 id="label-Rails+7.0.2.3+-28March+08-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.2.3 (March 08, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.2.2+-28February+11-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.2.2 (February 11, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.2.1+-28February+11-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.2.1 (February 11, 2022)</h2>
<ul><li>
<p>Under certain circumstances, the middleware isn't informed that the response body has been fully closed which result in request state not being fully reset before the next request</p>

<p>[CVE-2022-23633]</p>
</li></ul>

<h2 id="label-Rails+7.0.2+-28February+08-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.2 (February 08, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.1+-28January+06-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.1 (January 06, 2022)</h2>
<ul><li>
<p>Fix <code>ActionController::Parameters</code> methods to keep the original logger context when creating a new copy of the original object.</p>

<p><em>Yutaka Kamei</em></p>
</li></ul>

<h2 id="label-Rails+7.0.0+-28December+15-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.0 (December 15, 2021)</h2>
<ul><li>
<p>Deprecate <code>Rails.application.config.action_controller.urlsafe_csrf_tokens</code>. This config is now always enabled.</p>

<p><em>Étienne Barrié</em></p>
</li><li>
<p>Instance variables set in requests in a <code>ActionController::TestCase</code> are now cleared before the next request</p>

<p>This means if you make multiple requests in the same test, instance variables set in the first request will not persist into the second one. (It's not recommended to make multiple requests in the same test.)</p>

<p><em>Alex Ghiculescu</em></p>
</li></ul>

<h2 id="label-Rails+7.0.0.rc3+-28December+14-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.0.rc3 (December 14, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.0.rc2+-28December+14-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.0.rc2 (December 14, 2021)</h2>
<ul><li>
<p>Fix X_FORWARDED_HOST protection. [CVE-2021-44528]</p>
</li></ul>

<h2 id="label-Rails+7.0.0.rc1+-28December+06-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.0.rc1 (December 06, 2021)</h2>
<ul><li>
<p><code>Rails.application.executor</code> hooks can now be called around every request in a <code>ActionController::TestCase</code></p>

<p>This helps to better simulate request or job local state being reset between requests and prevent state leaking from one request to another.</p>

<p>To enable this, set <code>config.active_support.executor_around_test_case = true</code> (this is the default in <a href="../../../classes/Rails.html"><code>Rails</code></a> 7).</p>

<p><em>Alex Ghiculescu</em></p>
</li><li>
<p>Consider onion services secure for cookies.</p>

<p><em>Justin Tracey</em></p>
</li><li>
<p>Remove deprecated <code>Rails.config.action_view.raise_on_missing_translations</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to passing a path to <code>fixture_file_upload</code> relative to <code>fixture_path</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionDispatch::SystemTestCase#host!</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>Rails.config.action_dispatch.hosts_response_app</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionDispatch::Response.return_only_media_type_on_content_type</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Raise <code>ActionController::Redirecting::UnsafeRedirectError</code> for unsafe <code>redirect_to</code> redirects.</p>

<p>This allows <code>rescue_from</code> to be used to add a default fallback route:</p>

<pre><code>rescue_from ActionController::Redirecting::UnsafeRedirectError do
  redirect_to root_url
end
</code></pre>

<p><em>Kasper Timm Hansen</em>, <em>Chris Oliver</em></p>
</li><li>
<p>Add <code>url_from</code> to verify a redirect location is internal.</p>

<p>Takes the open redirect protection from <code>redirect_to</code> so users can wrap a param, and fall back to an alternate redirect URL when the param provided one is unsafe.</p>

<pre><code>def create
  redirect_to url_from(params[:redirect_url]) || root_url
end
</code></pre>

<p><em>dmcge</em>, <em>Kasper Timm Hansen</em></p>
</li><li>
<p>Allow Capybara driver name overrides in <code>SystemTestCase::driven_by</code></p>

<p>Allow users to prevent conflicts among drivers that use the same driver type (selenium, poltergeist, webkit, rack test).</p>

<p>Fixes #42502</p>

<p><em>Chris LaRose</em></p>
</li><li>
<p>Allow multiline to be passed in routes when using wildcard segments.</p>

<p>Previously routes with newlines weren't detected when using wildcard segments, returning a <code>No route matches</code> error. After this change, routes with newlines are detected on wildcard segments. Example</p>

<pre><code>draw do
    get &quot;/wildcard/*wildcard_segment&quot;, to: SimpleApp.new(&quot;foo#index&quot;), as: :wildcard
  end

  # After the change, the path matches.
  assert_equal &quot;/wildcard/a%0Anewline&quot;, url_helpers.wildcard_path(wildcard_segment: &quot;a\nnewline&quot;)
</code></pre>

<p>Fixes #39103</p>

<p><em>Ignacio Chiazzo</em></p>
</li><li>
<p>Treat html suffix in controller translation.</p>

<p><em>Rui Onodera</em>, <em>Gavin Miller</em></p>
</li><li>
<p>Allow permitting numeric params.</p>

<p>Previously it was impossible to permit different fields on numeric parameters. After this change you can specify different fields for each numbered parameter. For example params like,</p>

<pre><code>book: {
        authors_attributes: {
          &#39;0&#39;: { name: &quot;William Shakespeare&quot;, age_of_death: &quot;52&quot; },
          &#39;1&#39;: { name: &quot;Unattributed Assistant&quot; },
          &#39;2&#39;: &quot;Not a hash&quot;,
          &#39;new_record&#39;: { name: &quot;Some name&quot; }
        }
      }
</code></pre>

<p>Before you could permit name on each author with, <code>permit book: { authors_attributes: [ :name ] }</code></p>

<p>After this change you can permit different keys on each numbered element, <code>permit book: { authors_attributes: { &#39;1&#39;: [ :name ], &#39;0&#39;: [ :name, :age_of_death ] } }</code></p>

<p>Fixes #41625</p>

<p><em>Adam Hess</em></p>
</li><li>
<p>Update <code>HostAuthorization</code> middleware to render debug info only when <code>config.consider_all_requests_local</code> is set to true.</p>

<p>Also, blocked host info is always logged with level <code>error</code>.</p>

<p>Fixes #42813</p>

<p><em>Nikita Vyrko</em></p>
</li><li>
<p>Add Server-Timing middleware</p>
</li></ul>

<p>Server-Timing specification defines how the server can communicate to browsers performance metrics  about the request it is responding to.</p>

<p>The ServerTiming middleware is enabled by default on <code>development</code> environment by default using the  <code>config.server_timing</code> setting and set the relevant duration metrics in the <code>Server-Timing</code> header</p>

<p>The full specification for Server-Timing header can be found in: <a href="https://www.w3.org/TR/server-timing/#dfn-server-timing-header-field">www.w3.org/TR/server-timing/#dfn-server-timing-header-field</a></p>

<p><em>Sebastian Sogamoso</em>, <em>Guillermo Iguaran</em></p>

<h2 id="label-Rails+7.0.0.alpha2+-28September+15-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.0.alpha2 (September 15, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.0.0.alpha1+-28September+15-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.0.0.alpha1 (September 15, 2021)</h2>
<ul><li>
<p>Use a static error message when raising <code>ActionDispatch::Http::Parameters::ParseError</code> to avoid inadvertently logging the HTTP request body at the <code>fatal</code> level when it contains malformed JSON.</p>

<p>Fixes #41145</p>

<p><em>Aaron Lahey</em></p>
</li><li>
<p>Add <code>Middleware#delete!</code> to delete middleware or raise if not found.</p>

<p><code>Middleware#delete!</code> works just like <code>Middleware#delete</code> but will raise an error if the middleware isn’t found.</p>

<p><em>Alex Ghiculescu</em>, <em>Petrik de Heus</em>, <em>Junichi Sato</em></p>
</li><li>
<p>Raise error on unpermitted open redirects.</p>

<p>Add <code>allow_other_host</code> options to <code>redirect_to</code>. Opt in to this behaviour with <code>ActionController::Base.raise_on_open_redirects = true</code>.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Deprecate <code>poltergeist</code> and <code>webkit</code> (capybara-webkit) driver registration for system testing (they will be removed in <a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1). Add <code>cuprite</code> instead.</p>

<p><a href="https://github.com/teampoltergeist/poltergeist">Poltergeist</a> and <a href="https://github.com/thoughtbot/capybara-webkit">capybara-webkit</a> are already not maintained. These usage in <a href="../../../classes/Rails.html"><code>Rails</code></a> are removed for avoiding confusing users.</p>

<p><a href="https://github.com/rubycdp/cuprite">Cuprite</a> is a good alternative to Poltergeist. Some guide descriptions are replaced from Poltergeist to Cuprite.</p>

<p><em>Yusuke Iwaki</em></p>
</li><li>
<p>Exclude additional flash types from <code>ActionController::Base.action_methods</code>.</p>

<p>Ensures that additional flash types defined on <a href="../../../classes/ActionController/Base.html"><code>ActionController::Base</code></a> subclasses are not listed as actions on that controller.</p>

<pre><code>class MyController &lt; ApplicationController
  add_flash_types :hype
end

MyController.action_methods.include?(&#39;hype&#39;) # =&gt; false
</code></pre>

<p><em>Gavin Morrice</em></p>
</li><li>
<p>OpenSSL constants are now used for <a href="../../../classes/Digest.html"><code>Digest</code></a> computations.</p>

<p><em>Dirkjan Bussink</em></p>
</li><li>
<p>Remove IE6-7-8 file download related hack/fix from <a href="../../../classes/ActionController/DataStreaming.html"><code>ActionController::DataStreaming</code></a> module.</p>

<p>Due to the age of those versions of IE this fix is no longer relevant, more importantly it creates an edge-case for unexpected Cache-Control headers.</p>

<p><em>Tadas Sasnauskas</em></p>
</li><li>
<p>Configuration setting to skip logging an uncaught exception backtrace when the exception is present in <code>rescued_responses</code>.</p>

<p>It may be too noisy to get all backtraces logged for applications that manage uncaught exceptions via <code>rescued_responses</code> and <code>exceptions_app</code>. <code>config.action_dispatch.log_rescued_responses</code> (defaults to <code>true</code>) can be set to <code>false</code> in this case, so that only exceptions not found in <code>rescued_responses</code> will be logged.</p>

<p><em>Alexander Azarov</em>, <em>Mike Dalessio</em></p>
</li><li>
<p>Ignore file fixtures on <code>db:fixtures:load</code>.</p>

<p><em>Kevin Sjöberg</em></p>
</li><li>
<p>Fix <a href="../../../classes/ActionController/Live.html"><code>ActionController::Live</code></a> controller test deadlocks by removing the body buffer size limit for tests.</p>

<p><em>Dylan Thacker-Smith</em></p>
</li><li>
<p>New <code>ActionController::ConditionalGet#no_store</code> method to set HTTP cache control <code>no-store</code> directive.</p>

<p><em>Tadas Sasnauskas</em></p>
</li><li>
<p>Drop support for the <code>SERVER_ADDR</code> header.</p>

<p>Following up <a href="https://github.com/rack/rack/pull/1573">github.com/rack/rack/pull/1573</a> and <a href="https://github.com/rails/rails/pull/42349">github.com/rails/rails/pull/42349</a>.</p>

<p><em>Ricardo Díaz</em></p>
</li><li>
<p>Set session options when initializing a basic session.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Add <code>cache_control: {}</code> option to <code>fresh_when</code> and <code>stale?</code>.</p>

<p>Works as a shortcut to set <code>response.cache_control</code> with the above methods.</p>

<p><em>Jacopo Beschi</em></p>
</li><li>
<p>Writing into a disabled session will now raise an error.</p>

<p>Previously when no session store was set, writing into the session would silently fail.</p>

<p><em>Jean Boussier</em></p>
</li><li>
<p>Add support for 'require-trusted-types-for' and 'trusted-types' headers.</p>

<p>Fixes #42034.</p>

<p><em>lfalcao</em></p>
</li><li>
<p>Remove inline styles and address basic accessibility issues on rescue templates.</p>

<p><em>Jacob Herrington</em></p>
</li><li>
<p>Add support for 'private, no-store' Cache-Control headers.</p>

<p>Previously, 'no-store' was exclusive; no other directives could be specified.</p>

<p><em>Alex Smith</em></p>
</li><li>
<p>Expand payload of <code>unpermitted_parameters.action_controller</code> instrumentation to allow subscribers to know which controller action received unpermitted parameters.</p>

<p><em>bbuchalter</em></p>
</li><li>
<p>Add <code>ActionController::Live#send_stream</code> that makes it more convenient to send generated streams:</p>

<pre><code>send_stream(filename: &quot;subscribers.csv&quot;) do |stream|
  stream.writeln &quot;email_address,updated_at&quot;

  @subscribers.find_each do |subscriber|
    stream.writeln [ subscriber.email_address, subscriber.updated_at ].join(&quot;,&quot;)
  end
end
</code></pre>

<p><em>DHH</em></p>
</li><li>
<p>Add <code>ActionController::Live::Buffer#writeln</code> to write a line to the stream with a newline included.</p>

<p><em>DHH</em></p>
</li><li>
<p><code>ActionDispatch::Request#content_type</code> now returned Content-Type header as it is.</p>

<p>Previously, <code>ActionDispatch::Request#content_type</code> returned value does NOT contain charset part. This behavior changed to returned Content-Type header containing charset part as it is.</p>

<p>If you want just MIME type, please use <code>ActionDispatch::Request#media_type</code> instead.</p>

<p>Before:</p>

<pre><code>request = ActionDispatch::Request.new(&quot;CONTENT_TYPE&quot; =&gt; &quot;text/csv; header=present; charset=utf-16&quot;, &quot;REQUEST_METHOD&quot; =&gt; &quot;GET&quot;)
request.content_type #=&gt; &quot;text/csv&quot;
</code></pre>

<p>After:</p>

<pre><code>request = ActionDispatch::Request.new(&quot;Content-Type&quot; =&gt; &quot;text/csv; header=present; charset=utf-16&quot;, &quot;REQUEST_METHOD&quot; =&gt; &quot;GET&quot;)
request.content_type #=&gt; &quot;text/csv; header=present; charset=utf-16&quot;
request.media_type   #=&gt; &quot;text/csv&quot;
</code></pre>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Change <code>ActionDispatch::Request#media_type</code> to return <code>nil</code> when the request don’t have a <code>Content-Type</code> header.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Fix error in <code>ActionController::LogSubscriber</code> that would happen when throwing inside a controller action.</p>

<p><em>Janko Marohnić</em></p>
</li><li>
<p>Allow anything with <code>#to_str</code> (like <code>Addressable::URI</code>) as a <code>redirect_to</code> location.</p>

<p><em>ojab</em></p>
</li><li>
<p>Change the request method to a <code>GET</code> when passing failed requests down to <code>config.exceptions_app</code>.</p>

<p><em>Alex Robbin</em></p>
</li><li>
<p>Deprecate the ability to assign a single value to <code>config.action_dispatch.trusted_proxies</code> as <code>RemoteIp</code> middleware behaves inconsistently depending on whether this is configured with a single value or an enumerable.</p>

<p>Fixes #40772.</p>

<p><em>Christian Sutter</em></p>
</li><li>
<p>Add <code>redirect_back_or_to(fallback_location, **)</code> as a more aesthetically pleasing version of <code>redirect_back fallback_location:, **</code>. The old method name is retained without explicit deprecation.</p>

<p><em>DHH</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/6-1-stable/actionpack/CHANGELOG.md">6-1-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </main>
  </body>
</html>
