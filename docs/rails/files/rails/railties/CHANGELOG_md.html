<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='[]'>

</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            CHANGELOG.md
        </h2>
        <ul class="files">
            
            <li>
                rails/railties/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/railties/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2024-06-28 01:29:16 +0300</li>
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+7.1.3.4+-28June+04-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.3.4 (June 04, 2024)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.1.3.3+-28May+16-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.3.3 (May 16, 2024)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.1.3.2+-28February+21-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.3.2 (February 21, 2024)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.1.3.1+-28February+21-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.3.1 (February 21, 2024)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.1.3+-28January+16-2C+2024-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.3 (January 16, 2024)</h2>
<ul><li>
<p>Make sure <code>config.after_routes_loaded</code> hook runs on boot.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Fix <code>config.log_level</code> not being respected when using a <code>BroadcastLogger</code></p>

<p><em>Édouard Chin</em></p>
</li><li>
<p>Fix isolated engines to take <code>ActiveRecord::Base.table_name_prefix</code> into consideration. This will allow for engine defined models, such as inside Active Storage, to respect Active Record table name prefix configuration.</p>

<p><em>Chedli Bourguiba</em></p>
</li><li>
<p>The <code>bin/rails app:template</code> command will no longer add potentially unwanted gem platforms via <code>bundle lock --add-platform=...</code> commands.</p>

<p><em>Jonathan Hefner</em></p>
</li></ul>

<h2 id="label-Rails+7.1.2+-28November+10-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.2 (November 10, 2023)</h2>
<ul><li>
<p>Fix running <code>db:system:change</code> when app has no Dockerfile.</p>

<p><em>Hartley McGuire</em></p>
</li><li>
<p>If you accessed <code>config.eager_load_paths</code> and friends, later changes to <code>config.paths</code> were not reflected in the expected auto/eager load paths. Now, they are.</p>

<p>This bug has been latent since <a href="../../../classes/Rails.html"><code>Rails</code></a> 3.</p>

<p>Fixes #49629.</p>

<p><em>Xavier Noria</em></p>
</li></ul>

<h2 id="label-Rails+7.1.1+-28October+11-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.1 (October 11, 2023)</h2>
<ul><li>
<p>Ensures the <a href="../../../classes/Rails.html"><code>Rails</code></a> generated Dockerfile uses correct ruby version and matches <a href="../Gemfile.html">Gemfile</a>.</p>

<p><em>Abhay Nikam</em></p>
</li></ul>

<h2 id="label-Rails+7.1.0+-28October+05-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.0 (October 05, 2023)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+7.1.0.rc2+-28October+01-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.0.rc2 (October 01, 2023)</h2>
<ul><li>
<p>Always set the <a href="../../../classes/Rails.html"><code>Rails</code></a> logger to be an instance of <code>ActiveSupport::BroadcastLogger</code>.</p>

<p><em>Edouard Chin</em></p>
</li></ul>

<h2 id="label-Rails+7.1.0.rc1+-28September+27-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.0.rc1 (September 27, 2023)</h2>
<ul><li>
<p>Require <code>concurrent-ruby</code> in <code>config/puma.rb</code> so that Puma can boot in production when <code>WEB_CONCURRENCY</code> is not explicitly specified.</p>

<p>Fixes #49323.</p>

<p><em>Matt Brictson</em></p>
</li><li>
<p>Raise error when generating attribute with dangerous name.</p>

<p>The following will now raise an error as <code>save</code> and <code>hash</code> are already defined by Active Record.</p>

<pre><code>$ bin/rails generate model Post save
$ bin/rails generate model Post hash
</code></pre>

<p><em>Petrik de Heus</em></p>
</li></ul>

<h2 id="label-Rails+7.1.0.beta1+-28September+13-2C+2023-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 7.1.0.beta1 (September 13, 2023)</h2>
<ul><li>
<p>Add ability to show slow tests to the test runner</p>

<pre><code>$ bin/test --profile # additionally prints 10 (default) slowest tests
# or
$ bin/test --profile 20 # prints 20 slowest tests
</code></pre>

<p><em>fatkodima</em></p>
</li><li>
<p><code>rails new --javascript</code> generator now supports Bun</p>

<pre><code>$ rails new my_new_app --javascript=bun
</code></pre>

<p><em>Jason Meller</em></p>
</li><li>
<p>bin/setup uses <code>bun</code> instead of <code>yarn</code> when generated an app with bun</p>

<p>Use <code>bun install</code> on <code>bin/setup</code> when using <code>bun</code>.</p>

<p><em>Cadu Ribeiro</em></p>
</li><li>
<p><code>config/application.rb</code> now includes</p>

<pre><code>config.autoload_lib(ignore: %w(assets tasks))
</code></pre>

<p>In practice, this means that new 7.1 applications autoload from <code>lib</code> out of the box.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Add an option to start rails console in sandbox mode by default</p>

<p><code>sandbox_by_default</code> option is added to start rails console in sandbox mode by default. With this option turned on, <code>--no-sandbox</code> must be specified to start rails in non-sandbox mode.</p>

<p>Note that this option is ignored when rails environment is development or test.</p>

<p><em>Shouichi Kamiya</em></p>
</li><li>
<p>Omit <code>webdrivers</code> gem dependency from <code>Gemfile</code> template</p>

<p><em>Sean Doyle</em></p>
</li><li>
<p>Support filtering tests by line ranges</p>

<p>The new syntax allows you to filter tests by line ranges. For example, the following command runs tests from line 10 to 20.</p>

<pre><code>$ rails test test/models/user_test.rb:10-20
</code></pre>

<p><em>Shouichi Kamiya</em>, <em>Seonggi Yang</em>, <em>oljfte</em>, <em>Ryohei UEDA</em></p>
</li><li>
<p>Update default scaffold templates to set 303 (See Other) as status code on redirect for the update action for XHR requests other than GET or POST to avoid issues (e.g browsers trying to follow the redirect using the original request method resulting in double PATCH/PUT)</p>

<p><em>Guillermo Iguaran</em></p>
</li><li>
<p>The new <code>config.autoload_lib_once</code> is similar to <code>config.autoload_lib</code>, except that it adds <code>lib</code> to <code>config.autoload_once_paths</code> instead.</p>

<p>By calling <code>config.autoload_lib_once</code>, classes and modules in <code>lib</code> can be autoloaded, even from application initializers, but won't be reloaded.</p>

<p>Please, see further details in the <a href="https://guides.rubyonrails.org/v7.1/autoloading_and_reloading_constants.html">autoloading guide</a>.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Add <code>config.action_dispatch.debug_exception_log_level</code> to configure the log level used by <code>ActionDispatch::DebugExceptions</code>.</p>

<p>The default is <code>:fatal</code>, but with <code>load_defaults &quot;7.1&quot;</code> the default will be <code>:error</code>.</p>

<p><em>Hartley McGuire</em></p>
</li><li>
<p>Add <code>DATABASE</code> option to <code>railties:install:migrations</code></p>

<p>This allows you to specify which database the migrations should be copied to when running <code>rails railties:install:migrations</code>.</p>

<pre><code>$ rails railties:install:migrations DATABASE=animals
</code></pre>

<p><em>Matthew Hirst</em></p>
</li><li>
<p>The new method <code>config.autoload_lib(ignore:)</code> provides a simple way to autoload from <code>lib</code>:</p>

<pre><code># config/application.rb
config.autoload_lib(ignore: %w(assets tasks))
</code></pre>

<p>Please, see further details in the <a href="https://guides.rubyonrails.org/v7.1/autoloading_and_reloading_constants.html">autoloading guide</a>.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Don't show secret_key_base for <code>Rails.application.config#inspect</code>.</p>

<p>Before:</p>

<pre><code>Rails.application.config.inspect
&quot;#&lt;Rails::Application::Configuration:0x00000001132b02a0 @root=... @secret_key_base=\&quot;b3c631c314c0bbca50c1b2843150fe33\&quot; ... &gt;&quot;
</code></pre>

<p>After:</p>

<pre><code>Rails.application.config.inspect
&quot;#&lt;Rails::Application::Configuration:0x00000001132b02a0&gt;&quot;
</code></pre>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Deprecate calling <code>Rails.application.secrets</code>.</p>

<p><a href="../../../classes/Rails.html"><code>Rails</code></a> <code>secrets</code> have been deprecated in favor of <code>credentials</code>. Calling <code>Rails.application.secrets</code> should show a deprecation warning.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Store <code>secret_key_base</code> in <code>Rails.config</code> for local environments.</p>

<p><a href="../../../classes/Rails.html"><code>Rails</code></a> <code>secrets</code> have been deprecated in favor of <code>credentials</code>. For the local environments the <code>secret_key_base</code> is now stored in <code>Rails.config.secret_key_base</code> instead of the soft deprecated <code>Rails.application.secrets.secret_key_base</code>.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Enable force_ssl=true in production by default: Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies</p>

<p><em>Justin Searls</em>, <em>Aaron Patterson</em>, <em>Guillermo Iguaran</em>, <em>Vinícius Bispo</em></p>
</li><li>
<p>Add engine's draw paths to application route set, so that the application can draw route files defined in engine paths.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Support <code>VISUAL</code> environment variable for commands which open an editor, and prefer it over <code>EDITOR</code>.</p>

<p><em>Summer ☀️</em></p>
</li><li>
<p>Add engine's <code>test/fixtures</code> path to <code>fixture_paths</code> in <code>on_load</code> hook if path exists and is under the <a href="../../../classes/Rails.html"><code>Rails</code></a> application root.</p>

<p><em>Chris Salzberg</em></p>
</li><li>
<p><code>bin/rails app:template</code> now runs <code>bundle install</code> and any <code>after_bundle</code> blocks after the template is executed.</p>

<p><em>Jonathan Hefner</em> and <em>Gerry Caulfield</em></p>
</li><li>
<p>Enable passing column size to migration generator</p>

<p>Previously you could pass a limit to the migration generator:</p>

<p><code>rails generate migration CreateAuthor name:text{65535}</code></p>

<p>Now, a size attribute can be passed to the migration generator:</p>

<p><code>rails generate migration CreateAuthor name:text{medium}</code></p>

<p>This generates a migration which includes the size attribute:</p>

<pre><code>class CreateAuthor &lt; ActiveRecord::Migration[7.1]
  def change
    create_table :authors do |t|
      t.text :name, size: :medium
    end
  end
end
</code></pre>

<p><em>Josh Broughton</em>, <em>Hartley McGuire</em></p>
</li><li>
<p>Trying to set a config key with the same name of a method now raises:</p>

<pre><code>config.load_defaults = 7.0
# NoMethodError: Cannot assign to `load_defaults`, it is a configuration method
</code></pre>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Deprecate <code>secrets:edit/show</code> and remove <code>secrets:setup</code></p>

<p><code>bin/rails secrets:setup</code> has been deprecated since <a href="../../../classes/Rails.html"><code>Rails</code></a> 5.2 in favor of credentials. This command has been removed.</p>

<p><code>bin/rails secrets:show</code> and <code>bin/rails secrets:edit</code> have been deprecated in favor of credentials.</p>

<p>Run <code>bin/rails credentials:help</code> for more information</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p><code>bin/rails --help</code> will now list only framework and plugin commands. Rake tasks defined in <code>lib/tasks/*.rake</code> files will no longer be included. For a list of those tasks, use <code>rake -T</code>.</p>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Allow calling <code>bin/rails restart</code> outside of app directory.</p>

<p>The following would previously fail with a "No <a href="../Rakefile.html">Rakefile</a> found" error.</p>

<pre><code>$ blog/bin/rails restart
</code></pre>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Support prerelease rubies in <a href="../Gemfile.html">Gemfile</a> template if RubyGems version is 3.3.13 or higher.</p>

<p><em>Yasuo Honda</em>, <em>David Rodríguez</em></p>
</li><li>
<p>Autoloading setup honors root directories manually set by the user.</p>

<p>This is relevant for custom namespaces. For example, if you'd like classes and modules under <code>app/services</code> to be defined in the <code>Services</code> namespace without an extra <code>app/services/services</code> directory, this is now enough:</p>

<pre><code># config/initializers/autoloading.rb

# The namespace has to exist.
#
# In this example we define the module on the spot. Could also be created
# elsewhere and its definition loaded here with an ordinary `require`. In
# any case, `push_dir` expects a class or module object.
module Services; end

Rails.autoloaders.main.push_dir(&quot;#{Rails.root}/app/services&quot;, namespace: Services)
</code></pre>

<p>Check the autoloading guide for further details.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Railties now requires the irb gem as a dependency, which means when you install <a href="../../../classes/Rails.html"><code>Rails</code></a>, irb will also be installed as a gem. <a href="../../../classes/Rails.html"><code>Rails</code></a> will then use the installed version of irb for its console instead of relying on Ruby's built-in version. This ensures that <a href="../../../classes/Rails.html"><code>Rails</code></a> has access to the most up-to-date and reliable version of irb for its console.</p>

<p><em>Stan Lo</em></p>
</li><li>
<p>Use infinitive form for all rails command descriptions verbs.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Credentials commands (e.g. <code>bin/rails credentials:edit</code>) now respect <code>config.credentials.content_path</code> and <code>config.credentials.key_path</code> when set in <code>config/application.rb</code> or <code>config/environments/#{Rails.env}.rb</code>.</p>

<p>Before:</p>
<ul><li>
<p><code>bin/rails credentials:edit</code> ignored <code>RAILS_ENV</code>, and would always edit <code>config/credentials.yml.enc</code>.</p>
</li><li>
<p><code>bin/rails credentials:edit --environment foo</code> would create and edit <code>config/credentials/foo.yml.enc</code>.</p>
</li><li>
<p>If <code>config.credentials.content_path</code> or <code>config.credentials.key_path</code> was set, <code>bin/rails credentials:edit</code> could not be used to edit the credentials. Editing credentials required using <code>bin/rails encrypted:edit path/to/credentials --key path/to/key</code>.</p>
</li></ul>

<p>After:</p>
<ul><li>
<p><code>bin/rails credentials:edit</code> will edit the credentials file that the app would load for the current <code>RAILS_ENV</code>.</p>
</li><li>
<p><code>bin/rails credentials:edit</code> respects <code>config.credentials.content_path</code> and <code>config.credentials.key_path</code> when set in <code>config/application.rb</code> or <code>config/environments/#{Rails.env}.rb</code>.</p>
</li><li>
<p><code>bin/rails credentials:edit --environment foo</code> will create and edit <code>config/credentials/foo.yml.enc</code> <em>if</em> <code>config.credentials.content_path</code> has not been set for the <code>foo</code> environment. Ultimately, it will edit the credentials file that the app would load for the <code>foo</code> environment.</p>
</li></ul>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Add descriptions for non-Rake commands when running <code>rails -h</code>.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Show relevant commands when calling help</p>

<p>When running <code>rails -h</code> or just <code>rails</code> outside a <a href="../../../classes/Rails.html"><code>Rails</code></a> application, <a href="../../../classes/Rails.html"><code>Rails</code></a> outputs all options for running the <code>rails new</code> command. This can be confusing to users when they probably want to see the common <a href="../../../classes/Rails.html"><code>Rails</code></a> commands.</p>

<p>Instead, we should always show the common commands when running <code>rails -h</code> inside or outside a <a href="../../../classes/Rails.html"><code>Rails</code></a> application.</p>

<p>As the relevant commands inside a <a href="../../../classes/Rails.html"><code>Rails</code></a> application differ from the commands outside an application, the help <a href="../actioncable/lib/rails/generators/channel/USAGE.html">USAGE</a> file has been split to show the most relevant commands for the context.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Add <a href="../../../classes/Rails/HealthController.html#method-i-show"><code>Rails::HealthController#show</code></a> and map it to /up for newly generated applications. Load balancers and uptime monitors all need a basic endpoint to tell whether the app is up. This is a good starting point that'll work in many situations.</p>

<p><em>DHH</em></p>
</li><li>
<p>Only use HostAuthorization middleware if <code>config.hosts</code> is not empty</p>

<p><em>Hartley McGuire</em></p>
</li><li>
<p>Raise an exception when a <code>before_action</code>'s "only" or "except" filter options reference an action that doesn't exist. This will be enabled by default but can be overridden via config.</p>

<pre><code># config/environments/production.rb
config.action_controller.raise_on_missing_callback_actions = false
</code></pre>

<p><em>Jess Bees</em></p>
</li><li>
<p>Use physical processor count as the default Puma worker count in production. This can be overridden by setting <code>ENV[&quot;WEB_CONCURRENCY&quot;]</code> or editing the generated "config/puma.rb" directly.</p>

<p><em>DHH</em></p>
</li><li>
<p>Add Docker files by default to new apps: Dockerfile, .dockerignore, bin/docker-entrypoint. These files can be skipped with <code>--skip-docker</code>. They're intended as a starting point for a production deploy of the application. Not intended for development (see Docked <a href="../../../classes/Rails.html"><code>Rails</code></a> for that).</p>

<p>Example:</p>

<pre><code>$ docker build -t app .
$ docker volume create app-storage
$ docker run --rm -it -v app-storage:/rails/storage -p 3000:3000 --env RAILS_MASTER_KEY=&lt;see config/master.key&gt; app
</code></pre>

<p>You can also start a console or a runner from this image:</p>

<pre><code>$ docker run --rm -it -v app-storage:/rails/storage --env RAILS_MASTER_KEY=&lt;see config/master.key&gt; app console
</code></pre>

<p>To create a multi-platform image on Apple Silicon to deploy on AMD or Intel and push to Docker Hub for user/app:</p>

<pre><code>$ docker login -u &lt;user&gt;
$ docker buildx create --use
$ docker buildx build --push --platform=linux/amd64,linux/arm64 -t &lt;user/image&gt; .
</code></pre>

<p><em>DHH, Sam Ruby</em></p>
</li><li>
<p>Add <a href=""SECRET_KEY_BASE_DUMMY"">ENV</a> for starting production environment with a generated secret base key, which can be used to run tasks like <code>assets:precompile</code> without making the RAILS_MASTER_KEY available to the build process.</p>

<p>Dockerfile layer example:</p>

<pre><code>RUN SECRET_KEY_BASE_DUMMY=1 bundle exec rails assets:precompile
</code></pre>

<p><em>DHH</em></p>
</li><li>
<p>Show descriptions for all commands in <a href="../../../classes/Rails.html"><code>Rails</code></a> help</p>

<p>When calling <code>rails help</code> most commands missed their description. We now show the same descriptions as shown in <code>rails -T</code>.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Always generate the storage/ directory with rails new to ensure there's a stable place to put permanent files, and a single mount point for containers to map. Then default sqlite3 databases to live there instead of db/, which is only meant for configuration, not data.</p>

<p><em>DHH</em></p>
</li><li>
<p><a href="../../../classes/Rails.html"><code>Rails</code></a> console now disables <code>IRB</code>‘s autocompletion feature in production by default.</p>

<p>Setting <code>IRB_USE_AUTOCOMPLETE=true</code> can override this default.</p>

<p><em>Stan Lo</em></p>
</li><li>
<p>Add <code>config.precompile_filter_parameters</code>, which enables precompilation of <code>config.filter_parameters</code> using <code>ActiveSupport::ParameterFilter.precompile_filters</code>. Precompilation can improve filtering performance, depending on the quantity and types of filters.</p>

<p><code>config.precompile_filter_parameters</code> defaults to <code>true</code> for <code>config.load_defaults 7.1</code> and above.</p>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Add <code>after_routes_loaded</code> hook to <code>Rails::Railtie::Configuration</code> for engines to add a hook to be called after application routes have been loaded.</p>

<pre><code>MyEngine.config.after_routes_loaded do
  # code that must happen after routes have been loaded
end
</code></pre>

<p><em>Chris Salzberg</em></p>
</li><li>
<p>Send 303 See Other status code back for the destroy action on newly generated scaffold controllers.</p>

<p><em>Tony Drake</em></p>
</li><li>
<p>Add <code>Rails.application.deprecators</code> as a central point to manage deprecators for an application.</p>

<p>Individual deprecators can be added and retrieved from the collection:</p>

<pre><code>Rails.application.deprecators[:my_gem] = ActiveSupport::Deprecation.new(&quot;2.0&quot;, &quot;MyGem&quot;)
Rails.application.deprecators[:other_gem] = ActiveSupport::Deprecation.new(&quot;3.0&quot;, &quot;OtherGem&quot;)
</code></pre>

<p>And the collection's configuration methods affect all deprecators in the collection:</p>

<pre><code>Rails.application.deprecators.debug = true

Rails.application.deprecators[:my_gem].debug
# =&gt; true
Rails.application.deprecators[:other_gem].debug
# =&gt; true
</code></pre>

<p>Additionally, all deprecators in the collection can be silenced for the duration of a given block:</p>

<pre><code>Rails.application.deprecators.silence do
  Rails.application.deprecators[:my_gem].warn    # =&gt; silenced (no warning)
  Rails.application.deprecators[:other_gem].warn # =&gt; silenced (no warning)
end
</code></pre>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Move dbconsole logic to Active Record connection adapter.</p>

<p>Instead of hosting the connection logic in the command object, the database adapter should be responsible for connecting to a console session. This patch moves find_cmd_and_exec to the adapter and exposes a new API to lookup the adapter class without instantiating it.</p>

<p><em>Gannon McGibbon</em>, <em>Paarth Madan</em></p>
</li><li>
<p>Add <code>Rails.application.message_verifiers</code> as a central point to configure and create message verifiers for an application.</p>

<p>This allows applications to, for example, rotate old <code>secret_key_base</code> values:</p>

<pre><code>config.before_initialize do |app|
  app.message_verifiers.rotate(secret_key_base: &quot;old secret_key_base&quot;)
end
</code></pre>

<p>And for libraries to create preconfigured message verifiers:</p>

<pre><code>ActiveStorage.verifier = Rails.application.message_verifiers[&quot;ActiveStorage&quot;]
</code></pre>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Support MySQL's ssl-mode option for the dbconsole command.</p>

<p>Verifying the identity of the database server requires setting the ssl-mode option to VERIFY_CA or VERIFY_IDENTITY. This option was previously ignored for the dbconsole command.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Delegate application record generator description to orm hooked generator.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Show BCC recipients when present in Action Mailer previews.</p>

<p><em>Akshay Birajdar</em></p>
</li><li>
<p>Extend <code>routes --grep</code> to also filter routes by matching against path.</p>

<p>Example:</p>

<pre><code>$ bin/rails routes --grep /cats/1
Prefix Verb   URI Pattern         Controller#Action
   cat GET    /cats/:id(.:format) cats#show
       PATCH  /cats/:id(.:format) cats#update
       PUT    /cats/:id(.:format) cats#update
       DELETE /cats/:id(.:format) cats#destroy
</code></pre>

<p><em>Orhan Toy</em></p>
</li><li>
<p>Improve <code>rails runner</code> output when given a file path that doesn't exist.</p>

<p><em>Tekin Suleyman</em></p>
</li><li>
<p><code>config.allow_concurrency = false</code> now use a <code>Monitor</code> instead of a <code>Mutex</code></p>

<p>This allows to enable <code>config.active_support.executor_around_test_case</code> even when <code>config.allow_concurrency</code> is disabled.</p>

<p><em>Jean Boussier</em></p>
</li><li>
<p>Add <code>routes --unused</code> option to detect extraneous routes.</p>

<p>Example:</p>

<pre><code>$ bin/rails routes --unused

Found 2 unused routes:

Prefix Verb URI Pattern    Controller#Action
   one GET  /one(.:format) action#one
   two GET  /two(.:format) action#two
</code></pre>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Add <code>--parent</code> option to controller generator to specify parent class of job.</p>

<p>Example:</p>

<p><code>bin/rails g controller admin/users --parent=admin_controller</code> generates:</p>

<pre><code>class Admin::UsersController &lt; AdminController
  # ...
end
</code></pre>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>In-app custom credentials templates are now supported. When a credentials file does not exist, <code>rails credentials:edit</code> will now try to use <code>lib/templates/rails/credentials/credentials.yml.tt</code> to generate the credentials file, before falling back to the default template.</p>

<p>This allows e.g. an open-source <a href="../../../classes/Rails.html"><code>Rails</code></a> app (which would not include encrypted credentials files in its repo) to include a credentials template, so that users who install the app will get a custom pre-filled credentials file when they run <code>rails credentials:edit</code>.</p>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Except for <code>dev</code> and <code>test</code> environments, newly generated per-environment credentials files (e.g. <code>config/credentials/production.yml.enc</code>) now include a <code>secret_key_base</code> for convenience, just as <code>config/credentials.yml.enc</code> does.</p>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p><code>--no-*</code> options now work with the app generator’s <code>--minimal</code> option, and are both comprehensive and precise. For example:</p>

<pre><code>$ rails new my_cool_app --minimal
Based on the specified options, the following options will also be activated:

  --skip-active-job [due to --minimal]
  --skip-action-mailer [due to --skip-active-job, --minimal]
  --skip-active-storage [due to --skip-active-job, --minimal]
  --skip-action-mailbox [due to --skip-active-storage, --minimal]
  --skip-action-text [due to --skip-active-storage, --minimal]
  --skip-javascript [due to --minimal]
  --skip-hotwire [due to --skip-javascript, --minimal]
  --skip-action-cable [due to --minimal]
  --skip-bootsnap [due to --minimal]
  --skip-dev-gems [due to --minimal]
  --skip-system-test [due to --minimal]

...

$ rails new my_cool_app --minimal --no-skip-active-storage
Based on the specified options, the following options will also be activated:

  --skip-action-mailer [due to --minimal]
  --skip-action-mailbox [due to --minimal]
  --skip-action-text [due to --minimal]
  --skip-javascript [due to --minimal]
  --skip-hotwire [due to --skip-javascript, --minimal]
  --skip-action-cable [due to --minimal]
  --skip-bootsnap [due to --minimal]
  --skip-dev-gems [due to --minimal]
  --skip-system-test [due to --minimal]

...
</code></pre>

<p><em>Brad Trick</em> and <em>Jonathan Hefner</em></p>
</li><li>
<p>Add <code>--skip-dev-gems</code> option to app generator to skip adding development gems (like <code>web-console</code>) to the <a href="../Gemfile.html">Gemfile</a>.</p>

<p><em>Brad Trick</em></p>
</li><li>
<p>Skip Active Storage and Action Mailer if Active Job is skipped.</p>

<p><em>Étienne Barrié</em></p>
</li><li>
<p>Correctly check if frameworks are disabled when running app:update.</p>

<p><em>Étienne Barrié</em> and <em>Paulo Barros</em></p>
</li><li>
<p>Delegate model generator description to orm hooked generator.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Execute <code>rails runner</code> scripts inside the executor.</p>

<p>Enables error reporting, query cache, etc.</p>

<p><em>Jean Boussier</em></p>
</li><li>
<p>Avoid booting in development then test for test tasks.</p>

<p>Running one of the rails test subtasks (e.g. test:system, test:models) would go through Rake and cause the app to be booted twice. Now all the test:* subtasks are defined as Thor tasks and directly load the test environment.</p>

<p><em>Étienne Barrié</em></p>
</li><li>
<p>Deprecate <code>Rails::Generators::Testing::Behaviour</code> in favor of <code>Rails::Generators::Testing::Behavior</code>.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Allow configuration of logger size for local and test environments</p>

<p><code>config.log_file_size</code></p>

<p>Defaults to <code>100</code> megabytes.</p>

<p><em>Bernie Chiu</em></p>
</li><li>
<p>Enroll new apps in decrypted diffs of credentials by default. This behavior can be opted out of with the app generator's <code>--skip-decrypted-diffs</code> flag.</p>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Support declarative-style test name filters with <code>bin/rails test</code>.</p>

<p>This makes it possible to run a declarative-style test such as:</p>

<pre><code>class MyTest &lt; ActiveSupport::TestCase
  test &quot;does something&quot; do
    # ...
  end
end
</code></pre>

<p>Using its declared name:</p>

<pre><code>$ bin/rails test test/my_test.rb -n &quot;does something&quot;
</code></pre>

<p>Instead of having to specify its expanded method name:</p>

<pre><code>$ bin/rails test test/my_test.rb -n test_does_something
</code></pre>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Add <code>--js</code> and <code>--skip-javascript</code> options to <code>rails new</code></p>

<p><code>--js</code> alias to <code>rails new --javascript ...</code></p>

<p>Same as <code>-j</code>, e.g. <code>rails new --js esbuild ...</code></p>

<p><code>--skip-js</code> alias to <code>rails new --skip-javascript ...</code></p>

<p>Same as <code>-J</code>, e.g. <code>rails new --skip-js ...</code></p>

<p><em>Dorian Marié</em></p>
</li><li>
<p>Allow relative paths with leading dot slash to be passed to <code>rails test</code>.</p>

<p>Fix <code>rails test ./test/model/post_test.rb</code> to run a single test file.</p>

<p><em>Shouichi Kamiya</em> and <em>oljfte</em></p>
</li><li>
<p>Deprecate <code>config.enable_dependency_loading</code>. This flag addressed a limitation of the <code>classic</code> autoloader and has no effect nowadays. To fix this deprecation, please just delete the reference.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Define <code>config.enable_reloading</code> to be <code>!config.cache_classes</code> for a more intuitive name. While <code>config.enable_reloading</code> and <code>config.reloading_enabled?</code> are preferred from now on, <code>config.cache_classes</code> is supported for backwards compatibility.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Add JavaScript dependencies installation on bin/setup</p>

<p>Add <code>yarn install</code> to bin/setup when using esbuild, webpack, or rollout.</p>

<p><em>Carlos Ribeiro</em></p>
</li><li>
<p>Use <code>controller_class_path</code> in <code>Rails::Generators::NamedBase#route_url</code></p>

<p>The <code>route_url</code> method now returns the correct path when generating a namespaced controller with a top-level model using <code>--model-name</code>.</p>

<p>Previously, when running this command:</p>

<pre><code>$ bin/rails generate scaffold_controller Admin/Post --model-name Post
</code></pre>

<p>the comments above the controller action would look like:</p>

<pre><code># GET /posts
def index
  @posts = Post.all
end
</code></pre>

<p>afterwards, they now look like this:</p>

<pre><code># GET /admin/posts
def index
  @posts = Post.all
end
</code></pre>

<p>Fixes #44662.</p>

<p><em>Andrew White</em></p>
</li><li>
<p>No longer add autoloaded paths to <code>$LOAD_PATH</code>.</p>

<p>This means it won't be possible to load them with a manual <code>require</code> call, the class or module can be referenced instead.</p>

<p>Reducing the size of <code>$LOAD_PATH</code> speed-up <code>require</code> calls for apps not using <code>bootsnap</code>, and reduce the size of the <code>bootsnap</code> cache for the others.</p>

<p><em>Jean Boussier</em></p>
</li><li>
<p>Remove default <code>X-Download-Options</code> header</p>

<p>This header is currently only used by Internet Explorer which will be discontinued in 2022 and since <a href="../../../classes/Rails.html"><code>Rails</code></a> 7 does not fully support Internet Explorer this header should not be a default one.</p>

<p><em>Harun Sabljaković</em></p>
</li><li>
<p>Add .node-version files for <a href="../../../classes/Rails.html"><code>Rails</code></a> apps that use Node.js</p>

<p>Node version managers that make use of this file:  <a href="https://github.com/shadowspawn/node-version-usage#node-version-file-usage">github.com/shadowspawn/node-version-usage#node-version-file-usage</a></p>

<p>The generated Dockerfile will use the same node version.</p>

<p><em>Sam Ruby</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/7-0-stable/railties/CHANGELOG.md">7-0-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </main>
  </body>
</html>
