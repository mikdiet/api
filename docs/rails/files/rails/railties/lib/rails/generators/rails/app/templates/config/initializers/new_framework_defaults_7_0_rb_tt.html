<!DOCTYPE html>
<html lang="en">
<head>
    <title>new_framework_defaults_7_0.rb.tt</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='[]'>

</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            new_framework_defaults_7_0.rb.tt
        </h2>
        <ul class="files">
            
            <li>
                rails/railties/lib/rails/generators/rails/app/templates/config/initializers/new_framework_defaults_7_0.rb.tt
                
                    <a href="https://github.com/rails/rails/blob/7b55c452b7d9a295d148ff882e0197cd139a9f8f/railties/lib/rails/generators/rails/app/templates/config/initializers/new_framework_defaults_7_0.rb.tt" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2024-05-24 23:57:11 +0300</li>
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p># Be sure to restart your server when you modify this file. # # This file eases your <a href="../../../../../../../../../../../classes/Rails.html"><code>Rails</code></a> 7.0 framework defaults upgrade. # # Uncomment each configuration one by one to switch to the new default. # Once your application is ready to run with all new defaults, you can remove # this file and set the ‘config.load_defaults` to `7.0`. # # Read the Guide for Upgrading Ruby on <a href="../../../../../../../../../../../classes/Rails.html"><code>Rails</code></a> for more info on each option. # <a href="https://guides.rubyonrails.org/upgrading_ruby_on_rails.html">guides.rubyonrails.org/upgrading_ruby_on_rails.html</a></p>

<p># ‘button_to` view helper will render `&lt;button&gt;` element, regardless of whether # or not the content is passed as the first argument or as a block. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_view.button_to_generates_button_tag = true</p>

<p># ‘stylesheet_link_tag` view helper will not render the media attribute by default. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_view.apply_stylesheet_media_default = false</p>

<p># Change the digest class for the key generators to ‘OpenSSL::Digest::SHA256`. # Changing this default means invalidate all encrypted messages generated by # your application and, all the encrypted cookies. Only change this after you # rotated all the messages using the key rotator. # # See upgrading guide for more information on how to build a rotator. # <a href="https://guides.rubyonrails.org/v7.0/upgrading_ruby_on_rails.html">guides.rubyonrails.org/v7.0/upgrading_ruby_on_rails.html</a> # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_support.key_generator_hash_digest_class = OpenSSL::Digest::SHA256</p>

<p># Change the digest class for <a href="../../../../../../../../../../../classes/Digest.html"><code>ActiveSupport::Digest</code></a>. # Changing this default means that for example Etags change and # various cache keys leading to cache invalidation. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_support.hash_digest_class = OpenSSL::Digest::SHA256</p>

<p># Don’t override <a href="../../../../../../../../../../../classes/ActiveSupport/TimeWithZone.html#method-c-name"><code>ActiveSupport::TimeWithZone.name</code></a> and use the default Ruby # implementation. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_support.remove_deprecated_time_with_zone_name = true</p>

<p># Calls ‘Rails.application.executor.wrap` around test cases. # This makes test cases behave closer to an actual request or job. # Several features that are normally disabled in test, such as Active Record query cache # and asynchronous queries will then be enabled. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_support.executor_around_test_case = true</p>

<p># Set both the ‘:open_timeout` and `:read_timeout` values for `:smtp` delivery method. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_mailer.smtp_timeout = 5</p>

<p># The ActiveStorage video previewer will now use scene change detection to generate # better preview images (rather than the previous default of using the first frame # of the video). # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_storage.video_preview_arguments = #   “-vf ‘select=eq(n\,0)+eq(key\,1)+gt(scene\,0.015),loop=loop=-1:size=2,trim=start_frame=1’ -frames:v 1 -f image2”</p>

<p># Automatically infer ‘inverse_of` for associations with a scope. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_record.automatic_scope_inversing = true</p>

<p># Raise when running tests if fixtures contained foreign key violations # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_record.verify_foreign_keys_for_fixtures = true</p>

<p># Disable partial inserts. # This default means that all columns will be referenced in INSERT queries # regardless of whether they have a default or not. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_record.partial_inserts = false</p>

<p># Protect from open redirect attacks in ‘redirect_back_or_to` and `redirect_to`. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_controller.raise_on_open_redirects = true</p>

<p># Change the variant processor for Active Storage. # Changing this default means updating all places in your code that # generate variants to use image processing macros and ruby-vips # operations. See the upgrading guide for detail on the changes required. # The ‘:mini_magick` option is not deprecated; it’s fine to keep using it. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_storage.variant_processor = :vips</p>

<p># Enable parameter wrapping for JSON. # Previously this was set in an initializer. It’s fine to keep using that initializer if you’ve customized it. # To disable parameter wrapping entirely, set this config to ‘false`. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_controller.wrap_parameters_by_default = true</p>

<p># Specifies whether generated namespaced UUIDs follow the RFC 4122 standard for namespace IDs provided as a # ‘String` to `Digest::UUID.uuid_v3` or `Digest::UUID.uuid_v5` method calls. # # See <a href="https://guides.rubyonrails.org/configuring.html#config-active-support-use-rfc4122-namespaced-uuids">guides.rubyonrails.org/configuring.html#config-active-support-use-rfc4122-namespaced-uuids</a> for # more information. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_support.use_rfc4122_namespaced_uuids = true</p>

<p># Change the default headers to disable browsers’ flawed legacy XSS protection. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_dispatch.default_headers = { #   “X-Frame-Options” =&gt; “SAMEORIGIN”, #   “X-XSS-Protection” =&gt; “0”, #   “X-Content-Type-Options” =&gt; “nosniff”, #   “X-Download-Options” =&gt; “noopen”, #   “X-Permitted-Cross-Domain-Policies” =&gt; “none”, #   “Referrer-Policy” =&gt; “strict-origin-when-cross-origin” # }</p>

<p># ** Please read carefully, this must be configured in config/application.rb ** # Change the format of the cache entry. # Changing this default means that all new cache entries added to the cache # will have a different format that is not supported by <a href="../../../../../../../../../../../classes/Rails.html"><code>Rails</code></a> 6.1 applications. # Only change this value after your application is fully deployed to <a href="../../../../../../../../../../../classes/Rails.html"><code>Rails</code></a> 7.0 # and you have no plans to rollback. # When you’re ready to change format, add this to ‘config/application.rb` (NOT this file): #  config.active_support.cache_format_version = 7.0</p>

<p># Cookie serializer: 2 options # # If you’re upgrading and haven’t set ‘cookies_serializer` previously, your cookie serializer # is `:marshal`. The default for new apps is `:json`. # # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_dispatch.cookies_serializer = :json # # # To migrate an existing application to the `:json` serializer, use the `:hybrid` option. # # <a href="../../../../../../../../../../../classes/Rails.html"><code>Rails</code></a> transparently deserializes existing (Marshal-serialized) cookies on read and # re-writes them in the JSON format. # # It is fine to use `:hybrid` long term; you should do that until you’re confident <strong>all</strong> your cookies # have been converted to JSON. To keep using ‘:hybrid` long term, move this config to its own # initializer or to `config/application.rb`. # # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_dispatch.cookies_serializer = :hybrid # # # If your cookies can’t yet be serialized to JSON, keep using ‘:marshal` for backward-compatibility. # # If you have configured the serializer elsewhere, you can remove this section of the file. # # See <a href="https://guides.rubyonrails.org/action_controller_overview.html#cookies">guides.rubyonrails.org/action_controller_overview.html#cookies</a> for more information.</p>

<p># Change the return value of ‘ActionDispatch::Request#content_type` to the Content-Type header without modification. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.action_dispatch.return_only_request_media_type_on_content_type = false</p>

<p># Active Storage ‘has_many_attached` relationships will default to replacing the current collection instead of appending to it. # Thus, to support submitting an empty collection, the `file_field` helper will render an hidden field `include_hidden` by default when `multiple_file_field_include_hidden` is set to `true`. # See <a href="https://guides.rubyonrails.org/configuring.html#config-active-storage-multiple-file-field-include-hidden">guides.rubyonrails.org/configuring.html#config-active-storage-multiple-file-field-include-hidden</a> for more information. # <a href="../../../../../../../../../../../classes/Rails.html#method-c-application"><code>Rails.application</code></a>.config.active_storage.multiple_file_field_include_hidden = true</p>

<p># ** Please read carefully, this must be configured in config/application.rb (NOT this file) ** # Disables the deprecated to_s override in some Ruby core classes # See <a href="https://guides.rubyonrails.org/configuring.html#config-active-support-disable-to-s-conversion">guides.rubyonrails.org/configuring.html#config-active-support-disable-to-s-conversion</a> for more information. # config.active_support.disable_to_s_conversion = true</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </main>
  </body>
</html>
