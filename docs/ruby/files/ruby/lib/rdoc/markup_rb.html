<!DOCTYPE html>
<html lang="en">
<head>
    <title>markup.rb</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='[]'>

</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            markup.rb
        </h2>
        <ul class="files">
            
            <li>
                ruby/lib/rdoc/markup.rb
                
                    <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/rdoc/markup.rb" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2024-06-28 01:29:37 +0300</li>
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> parses plain text documents and attempts to decompose them into their constituent parts.  Some of these parts are high-level: paragraphs, chunks of verbatim text, list entries and the like.  Other parts happen at the character level: a piece of bold text, a word in code font.  This markup is similar in spirit to that used on WikiWiki webs, where folks create web pages using a simple set of formatting rules.</p>

<p><a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> and other markup formats do no output formatting, this is handled by the RDoc::Markup::Formatter subclasses.</p>

<h1 id="label-Supported+Formats">Supported Formats</h1>

<p>Besides the <a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> format, the following formats are built in to RDoc:</p>
<dl class="rdoc-list note-list"><dt>markdown
<dd>
<p>The markdown format as described by <a href="http://daringfireball.net/projects/markdown">daringfireball.net/projects/markdown</a>/.  See <a href="../../../../classes/RDoc/Markdown.html"><code>RDoc::Markdown</code></a> for details on the parser and supported extensions.</p>
</dd><dt>rd
<dd>
<p>The rdtool format.  See <a href="../../../../classes/RDoc/RD.html"><code>RDoc::RD</code></a> for details on the parser and format.</p>
</dd><dt>tomdoc
<dd>
<p>The TomDoc format as described by <a href="http://tomdoc.org">tomdoc.org</a>/.  See <a href="../../../../classes/RDoc/TomDoc.html"><code>RDoc::TomDoc</code></a> for details on the parser and supported extensions.</p>
</dd></dl>

<p>You can choose a markup format using the following methods:</p>
<dl class="rdoc-list note-list"><dt>per project
<dd>
<p>If you build your documentation with rake use <a href="../../../../classes/RDoc/Task.html#attribute-i-markup"><code>RDoc::Task#markup</code></a>.</p>

<p>If you build your documentation by hand run:</p>

<pre><code>rdoc --markup your_favorite_format --write-options
</code></pre>

<p>and commit <code>.rdoc_options</code> and ship it with your packaged gem.</p>
</dd><dt>per file
<dd>
<p>At the top of the file use the <code>:markup:</code> directive to set the default format for the rest of the file.</p>
</dd><dt>per comment
<dd>
<p>Use the <code>:markup:</code> directive at the top of a comment you want to write in a different format.</p>
</dd></dl>

<h1 id="label-RDoc-3A-3AMarkup"><a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a></h1>

<p><a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> is extensible at runtime: you can add new markup elements to be recognized in the documents that <a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> parses.</p>

<p><a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> is intended to be the basis for a family of tools which share the common requirement that simple, plain-text should be rendered in a variety of different output formats and media.  It is envisaged that <a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> could be the basis for formatting <a href="../../../../classes/RDoc.html"><code>RDoc</code></a> style comment blocks, Wiki entries, and online FAQs.</p>

<h2 id="label-Synopsis">Synopsis</h2>

<p>This code converts <code>input_string</code> to HTML.  The conversion takes place in the <code>convert</code> method, so you can use the same <a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> converter to convert multiple input strings.</p>

<pre><code>require &#39;rdoc&#39;

h = RDoc::Markup::ToHtml.new(RDoc::Options.new)

puts h.convert(input_string)
</code></pre>

<p>You can extend the <a href="../../../../classes/RDoc/Markup.html"><code>RDoc::Markup</code></a> parser to recognize new markup sequences, and to add regexp handling. Here we make WikiWords significant to the parser, and also make the sequences {word} and &lt;no&gt;textâ€¦&lt;/no&gt; signify strike-through text.  We then subclass the HTML output class to deal with these:</p>

<pre><code>require &#39;rdoc&#39;

class WikiHtml &lt; RDoc::Markup::ToHtml
  def handle_regexp_WIKIWORD(target)
    &quot;&lt;font color=red&gt;&quot; + target.text + &quot;&lt;/font&gt;&quot;
  end
end

markup = RDoc::Markup.new
markup.add_word_pair(&quot;{&quot;, &quot;}&quot;, :STRIKE)
markup.add_html(&quot;no&quot;, :STRIKE)

markup.add_regexp_handling(/\b([A-Z][a-z]+[A-Z]\w+)/, :WIKIWORD)

wh = WikiHtml.new RDoc::Options.new, markup
wh.add_tag(:STRIKE, &quot;&lt;strike&gt;&quot;, &quot;&lt;/strike&gt;&quot;)

puts &quot;&lt;body&gt;#{wh.convert ARGF.read}&lt;/body&gt;&quot;
</code></pre>

<h2 id="label-Encoding"><a href="../../../../classes/Encoding.html"><code>Encoding</code></a></h2>

<p>Where <a href="../../../../classes/Encoding.html"><code>Encoding</code></a> support is available, <a href="../../../../classes/RDoc.html"><code>RDoc</code></a> will automatically convert all documents to the same output encoding.  The output encoding can be set via <a href="../../../../classes/RDoc/Options.html#attribute-i-encoding"><code>RDoc::Options#encoding</code></a> and defaults to <a href="../../../../classes/Encoding.html#method-c-default_external"><code>Encoding.default_external</code></a>.</p>

<h1 id="label-RDoc+Markup+Reference">RDoc Markup Reference</h1>

<p>See <a href="../../../../classes/RDoc/MarkupReference.html"><code>RDoc::MarkupReference</code></a>.</p>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="../../../../classes/RDoc.html">RDoc</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="../../../../classes/RDoc/Markup.html">RDoc::Markup</a>
        </li>
      
    </ul>
  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </main>
  </body>
</html>
