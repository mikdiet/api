<!DOCTYPE html>
<html lang="en">
<head>
    <title>ENV</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["ENV"]'>


    <meta property="og:title" value="ENV">

  
    
    <meta name="description" content="ENV is a hash-like accessor for environment variables.">
    <meta property="og:description" content="ENV is a hash-like accessor for environment variables.">
  

    <meta name="keywords" content="ENV class, [], fetch, []=, store, each, each_pair, each_key, each_value, delete, delete_if, keep_if, slice, except, clear, reject, reject!, select, select!, filter, filter!, shift, freeze, invert, replace, update, merge!, inspect, rehash, to_a, to_s, key, size, length, empty?, keys, values, values_at, include?, member?, has_key?, has_value?, key?, value?, to_hash, to_h, assoc, rassoc, clone, dup">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Class</span>
            ENV
            
                <span class="parent">&lt;
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/hash_c.html">ruby/hash.c</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>ENV is a hash-like accessor for environment variables.</p>

<h3 id="class-ENV-label-Interaction+with+the+Operating+System">Interaction with the Operating System</h3>

<p>The ENV object interacts with the operating system’s environment variables:</p>
<ul><li>
<p>When you get the value for a name in ENV, the value is retrieved from among the current environment variables.</p>
</li><li>
<p>When you create or set a name-value pair in ENV, the name and value are immediately set in the environment variables.</p>
</li><li>
<p>When you delete a name-value pair in ENV, it is immediately deleted from the environment variables.</p>
</li></ul>

<h3 id="class-ENV-label-Names+and+Values">Names and Values</h3>

<p>Generally, a name or value is a <a href="String.html"><code>String</code></a>.</p>

<h4 id="class-ENV-label-Valid+Names+and+Values">Valid Names and Values</h4>

<p>Each name or value must be one of the following:</p>
<ul><li>
<p>A <a href="String.html"><code>String</code></a>.</p>
</li><li>
<p>An object that responds to #to_str by returning a <a href="String.html"><code>String</code></a>, in which case that <a href="String.html"><code>String</code></a> will be used as the name or value.</p>
</li></ul>

<h4 id="class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</h4>

<p>A new name:</p>
<ul><li>
<p>May not be the empty string:</p>

<pre><code>ENV[&#39;&#39;] = &#39;0&#39;
# Raises Errno::EINVAL (Invalid argument - ruby_setenv())
</code></pre>
</li><li>
<p>May not contain character <code>&quot;=&quot;</code>:</p>

<pre><code>ENV[&#39;=&#39;] = &#39;0&#39;
# Raises Errno::EINVAL (Invalid argument - ruby_setenv(=))
</code></pre>
</li></ul>

<p>A new name or value:</p>
<ul><li>
<p>May not be a non-String that does not respond to #to_str:</p>

<pre><code>ENV[&#39;foo&#39;] = Object.new
# Raises TypeError (no implicit conversion of Object into String)
ENV[Object.new] = &#39;0&#39;
# Raises TypeError (no implicit conversion of Object into String)
</code></pre>
</li><li>
<p>May not contain the NUL character <code>&quot;\0&quot;</code>:</p>

<pre><code>ENV[&#39;foo&#39;] = &quot;\0&quot;
# Raises ArgumentError (bad environment variable value: contains null byte)
ENV[&quot;\0&quot;] == &#39;0&#39;
# Raises ArgumentError (bad environment variable name: contains null byte)
</code></pre>
</li><li>
<p>May not have an ASCII-incompatible encoding such as UTF-16LE or ISO-2022-JP:</p>

<pre><code>ENV[&#39;foo&#39;] = &#39;0&#39;.force_encoding(Encoding::ISO_2022_JP)
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: ISO-2022-JP)
ENV[&quot;foo&quot;.force_encoding(Encoding::ISO_2022_JP)] = &#39;0&#39;
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: ISO-2022-JP)
</code></pre>
</li></ul>

<h3 id="class-ENV-label-About+Ordering">About Ordering</h3>

<p>ENV enumerates its name/value pairs in the order found in the operating system’s environment variables. Therefore the ordering of ENV content is OS-dependent, and may be indeterminate.</p>

<p>This will be seen in:</p>
<ul><li>
<p>A <a href="Hash.html"><code>Hash</code></a> returned by an ENV method.</p>
</li><li>
<p>An <a href="Enumerator.html"><code>Enumerator</code></a> returned by an ENV method.</p>
</li><li>
<p>An <a href="Array.html"><code>Array</code></a> returned by <a href="ENV.html#method-c-keys"><code>ENV.keys</code></a>, <a href="ENV.html#method-c-values"><code>ENV.values</code></a>, or <a href="ENV.html#method-c-to_a"><code>ENV.to_a</code></a>.</p>
</li><li>
<p>The <a href="String.html"><code>String</code></a> returned by <a href="ENV.html#method-c-inspect"><code>ENV.inspect</code></a>.</p>
</li><li>
<p>The <a href="Array.html"><code>Array</code></a> returned by <a href="ENV.html#method-c-shift"><code>ENV.shift</code></a>.</p>
</li><li>
<p>The name returned by <a href="ENV.html#method-c-key"><code>ENV.key</code></a>.</p>
</li></ul>

<h3 id="class-ENV-label-About+the+Examples">About the Examples</h3>

<p>Some methods in ENV return ENV itself. Typically, there are many environment variables. It’s not useful to display a large ENV in the examples here, so most example snippets begin by resetting the contents of ENV:</p>
<ul><li>
<p><a href="ENV.html#method-c-replace"><code>ENV.replace</code></a> replaces ENV with a new collection of entries.</p>
</li><li>
<p><a href="ENV.html#method-c-clear"><code>ENV.clear</code></a> empties ENV.</p>
</li></ul>

<h2 id="class-ENV-label-What-27s+Here">What’s Here</h2>

<p>First, what’s elsewhere. Class ENV:</p>
<ul><li>
<p>Inherits from <a href="Object.html#class-Object-label-What-27s+Here">class Object</a>.</p>
</li><li>
<p>Extends <a href="Enumerable.html#module-Enumerable-label-What-27s+Here">module Enumerable</a>,</p>
</li></ul>

<p>Here, class ENV provides methods that are useful for:</p>
<ul><li>
<p><a href="ENV.html#class-ENV-label-Methods+for+Querying">Querying</a></p>
</li><li>
<p><a href="ENV.html#class-ENV-label-Methods+for+Assigning">Assigning</a></p>
</li><li>
<p><a href="ENV.html#class-ENV-label-Methods+for+Deleting">Deleting</a></p>
</li><li>
<p><a href="ENV.html#class-ENV-label-Methods+for+Iterating">Iterating</a></p>
</li><li>
<p><a href="ENV.html#class-ENV-label-Methods+for+Converting">Converting</a></p>
</li><li>
<p><a href="ENV.html#class-ENV-label-More+Methods">And more .…</a></p>
</li></ul>

<h3 id="class-ENV-label-Methods+for+Querying">Methods for Querying</h3>
<ul><li>
<p><a href="ENV.html#method-c-5B-5D"><code>::[]</code></a>: Returns the value for the given environment variable name if it exists:</p>
</li><li>
<p><a href="ENV.html#method-c-empty-3F"><code>::empty?</code></a>: Returns whether ENV is empty.</p>
</li><li>
<p><a href="ENV.html#method-c-has_value-3F"><code>::has_value?</code></a>, <a href="ENV.html#method-c-value-3F"><code>::value?</code></a>: Returns whether the given value is in ENV.</p>
</li><li>
<p><a href="ENV.html#method-c-include-3F"><code>::include?</code></a>, <a href="ENV.html#method-c-has_key-3F"><code>::has_key?</code></a>, <a href="ENV.html#method-c-key-3F"><code>::key?</code></a>, <a href="ENV.html#method-c-member-3F"><code>::member?</code></a>: Returns whether the given name is in ENV.</p>
</li><li>
<p><a href="ENV.html#method-c-key"><code>::key</code></a>: Returns the name of the first entry with the given value.</p>
</li><li>
<p><a href="ENV.html#method-c-size"><code>::size</code></a>, <a href="ENV.html#method-c-length"><code>::length</code></a>: Returns the number of entries.</p>
</li><li>
<p><a href="ENV.html#method-c-value-3F"><code>::value?</code></a>: Returns whether any entry has the given value.</p>
</li></ul>

<h3 id="class-ENV-label-Methods+for+Assigning">Methods for Assigning</h3>
<ul><li>
<p><a href="ENV.html#method-c-5B-5D-3D"><code>::[]=</code></a>, <a href="ENV.html#method-c-store"><code>::store</code></a>: Creates, updates, or deletes the named environment variable.</p>
</li><li>
<p><a href="ENV.html#method-c-clear"><code>::clear</code></a>: Removes every environment variable; returns ENV:</p>
</li><li>
<p><a href="ENV.html#method-c-update"><code>::update</code></a>, <a href="ENV.html#method-c-merge-21"><code>::merge!</code></a>: Adds to ENV each key/value pair in the given hash.</p>
</li><li>
<p><a href="ENV.html#method-c-replace"><code>::replace</code></a>: Replaces the entire content of the ENV with the name/value pairs in the given hash.</p>
</li></ul>

<h3 id="class-ENV-label-Methods+for+Deleting">Methods for Deleting</h3>
<ul><li>
<p><a href="ENV.html#method-c-delete"><code>::delete</code></a>: Deletes the named environment variable name if it exists.</p>
</li><li>
<p><a href="ENV.html#method-c-delete_if"><code>::delete_if</code></a>: Deletes entries selected by the block.</p>
</li><li>
<p><a href="ENV.html#method-c-keep_if"><code>::keep_if</code></a>: Deletes entries not selected by the block.</p>
</li><li>
<p><a href="ENV.html#method-c-reject-21"><code>::reject!</code></a>: Similar to delete_if, but returns <code>nil</code> if no change was made.</p>
</li><li>
<p><a href="ENV.html#method-c-select-21"><code>::select!</code></a>, <a href="ENV.html#method-c-filter-21"><code>::filter!</code></a>: Deletes entries selected by the block.</p>
</li><li>
<p><a href="ENV.html#method-c-shift"><code>::shift</code></a>: Removes and returns the first entry.</p>
</li></ul>

<h3 id="class-ENV-label-Methods+for+Iterating">Methods for Iterating</h3>
<ul><li>
<p><a href="ENV.html#method-c-each"><code>::each</code></a>, <a href="ENV.html#method-c-each_pair"><code>::each_pair</code></a>: Calls the block with each name/value pair.</p>
</li><li>
<p><a href="ENV.html#method-c-each_key"><code>::each_key</code></a>: Calls the block with each name.</p>
</li><li>
<p><a href="ENV.html#method-c-each_value"><code>::each_value</code></a>: Calls the block with each value.</p>
</li></ul>

<h3 id="class-ENV-label-Methods+for+Converting">Methods for Converting</h3>
<ul><li>
<p><a href="ENV.html#method-c-assoc"><code>::assoc</code></a>: Returns a 2-element array containing the name and value of the named environment variable if it exists:</p>
</li><li>
<p><a href="ENV.html#method-c-clone"><code>::clone</code></a>: Returns ENV (and issues a warning).</p>
</li><li>
<p><a href="ENV.html#method-c-except"><code>::except</code></a>: Returns a hash of all name/value pairs except those given.</p>
</li><li>
<p><a href="ENV.html#method-c-fetch"><code>::fetch</code></a>: Returns the value for the given name.</p>
</li><li>
<p><a href="ENV.html#method-c-inspect"><code>::inspect</code></a>: Returns the contents of ENV as a string.</p>
</li><li>
<p><a href="ENV.html#method-c-invert"><code>::invert</code></a>: Returns a hash whose keys are the ENV values, and whose values are the corresponding ENV names.</p>
</li><li>
<p><a href="ENV.html#method-c-keys"><code>::keys</code></a>: Returns an array of all names.</p>
</li><li>
<p><a href="ENV.html#method-c-rassoc"><code>::rassoc</code></a>: Returns the name and value of the first found entry that has the given value.</p>
</li><li>
<p><a href="ENV.html#method-c-reject"><code>::reject</code></a>: Returns a hash of those entries not rejected by the block.</p>
</li><li>
<p><a href="ENV.html#method-c-select"><code>::select</code></a>, <a href="ENV.html#method-c-filter"><code>::filter</code></a>: Returns a hash of name/value pairs selected by the block.</p>
</li><li>
<p><a href="ENV.html#method-c-slice"><code>::slice</code></a>: Returns a hash of the given names and their corresponding values.</p>
</li><li>
<p><a href="ENV.html#method-c-to_a"><code>::to_a</code></a>: Returns the entries as an array of 2-element Arrays.</p>
</li><li>
<p><a href="ENV.html#method-c-to_h"><code>::to_h</code></a>: Returns a hash of entries selected by the block.</p>
</li><li>
<p><a href="ENV.html#method-c-to_hash"><code>::to_hash</code></a>: Returns a hash of all entries.</p>
</li><li>
<p><a href="ENV.html#method-c-to_s"><code>::to_s</code></a>: Returns the string <code>&#39;ENV&#39;</code>.</p>
</li><li>
<p><a href="ENV.html#method-c-values"><code>::values</code></a>: Returns all values as an array.</p>
</li><li>
<p><a href="ENV.html#method-c-values_at"><code>::values_at</code></a>: Returns an array of the values for the given name.</p>
</li></ul>

<h3 id="class-ENV-label-More+Methods">More Methods</h3>
<ul><li>
<p><a href="ENV.html#method-c-dup"><code>::dup</code></a>: Raises an exception.</p>
</li><li>
<p><a href="ENV.html#method-c-freeze"><code>::freeze</code></a>: Raises an exception.</p>
</li><li>
<p><a href="ENV.html#method-c-rehash"><code>::rehash</code></a>: Returns <code>nil</code>, without modifying ENV.</p>
</li></ul>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-5B-5D">[]</a>,
              </li>
            
              
              <li>
                <a href="#method-c-5B-5D-3D">[]=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-assoc">assoc</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-clear">clear</a>,
              </li>
            
              
              <li>
                <a href="#method-c-clone">clone</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-delete">delete</a>,
              </li>
            
              
              <li>
                <a href="#method-c-delete_if">delete_if</a>,
              </li>
            
              
              <li>
                <a href="#method-c-dup">dup</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-each">each</a>,
              </li>
            
              
              <li>
                <a href="#method-c-each_key">each_key</a>,
              </li>
            
              
              <li>
                <a href="#method-c-each_pair">each_pair</a>,
              </li>
            
              
              <li>
                <a href="#method-c-each_value">each_value</a>,
              </li>
            
              
              <li>
                <a href="#method-c-empty-3F">empty?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-except">except</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-fetch">fetch</a>,
              </li>
            
              
              <li>
                <a href="#method-c-filter">filter</a>,
              </li>
            
              
              <li>
                <a href="#method-c-filter-21">filter!</a>,
              </li>
            
              
              <li>
                <a href="#method-c-freeze">freeze</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-has_key-3F">has_key?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-has_value-3F">has_value?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-include-3F">include?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-inspect">inspect</a>,
              </li>
            
              
              <li>
                <a href="#method-c-invert">invert</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>K</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-keep_if">keep_if</a>,
              </li>
            
              
              <li>
                <a href="#method-c-key">key</a>,
              </li>
            
              
              <li>
                <a href="#method-c-key-3F">key?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-keys">keys</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-length">length</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-member-3F">member?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-merge-21">merge!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-rassoc">rassoc</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rehash">rehash</a>,
              </li>
            
              
              <li>
                <a href="#method-c-reject">reject</a>,
              </li>
            
              
              <li>
                <a href="#method-c-reject-21">reject!</a>,
              </li>
            
              
              <li>
                <a href="#method-c-replace">replace</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-select">select</a>,
              </li>
            
              
              <li>
                <a href="#method-c-select-21">select!</a>,
              </li>
            
              
              <li>
                <a href="#method-c-shift">shift</a>,
              </li>
            
              
              <li>
                <a href="#method-c-size">size</a>,
              </li>
            
              
              <li>
                <a href="#method-c-slice">slice</a>,
              </li>
            
              
              <li>
                <a href="#method-c-store">store</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-to_a">to_a</a>,
              </li>
            
              
              <li>
                <a href="#method-c-to_h">to_h</a>,
              </li>
            
              
              <li>
                <a href="#method-c-to_hash">to_hash</a>,
              </li>
            
              
              <li>
                <a href="#method-c-to_s">to_s</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-update">update</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-value-3F">value?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-values">values</a>,
              </li>
            
              
              <li>
                <a href="#method-c-values_at">values_at</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-5B-5D">
            
              <b>ENV[name] &rarr; value
</b>
            
            <a href="../classes/ENV.html#method-c-5B-5D" name="method-c-5B-5D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the value for the environment variable <code>name</code> if it exists:</p>

<pre><code>ENV[&#39;foo&#39;] = &#39;0&#39;
ENV[&#39;foo&#39;] # =&gt; &quot;0&quot;
</code></pre>

<p>Returns <code>nil</code> if the named variable does not exist.</p>

<p>Raises an exception if <code>name</code> is invalid. See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-5B-5D_source')" id="l_method-c-5B-5D_source">show</a>
                
              </p>
              <div id="method-c-5B-5D_source" class="dyn-source">
                <pre>static VALUE
rb_f_getenv(VALUE obj, VALUE name)
{
    const char *nam = env_name(name);
    VALUE env = getenv_with_lock(nam);
    return env;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-5B-5D-3D">
            
              <b>ENV[name] = value      &rarr; value<br />ENV.store(name, value) &rarr; value
</b>
            
            <a href="../classes/ENV.html#method-c-5B-5D-3D" name="method-c-5B-5D-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates, updates, or deletes the named environment variable, returning the value. Both <code>name</code> and <code>value</code> may be instances of <a href="String.html"><code>String</code></a>. See <a href="ENV.html#class-ENV-label-Valid+Names+and+Values">Valid Names and Values</a>.</p>
<ul><li>
<p>If the named environment variable does not exist:</p>
<ul><li>
<p>If <code>value</code> is <code>nil</code>, does nothing.</p>

<pre><code>ENV.clear
ENV[&#39;foo&#39;] = nil # =&gt; nil
ENV.include?(&#39;foo&#39;) # =&gt; false
ENV.store(&#39;bar&#39;, nil) # =&gt; nil
ENV.include?(&#39;bar&#39;) # =&gt; false
</code></pre>
</li><li>
<p>If <code>value</code> is not <code>nil</code>, creates the environment variable with <code>name</code> and <code>value</code>:</p>

<pre><code># Create &#39;foo&#39; using ENV.[]=.
ENV[&#39;foo&#39;] = &#39;0&#39; # =&gt; &#39;0&#39;
ENV[&#39;foo&#39;] # =&gt; &#39;0&#39;
# Create &#39;bar&#39; using ENV.store.
ENV.store(&#39;bar&#39;, &#39;1&#39;) # =&gt; &#39;1&#39;
ENV[&#39;bar&#39;] # =&gt; &#39;1&#39;
</code></pre>
</li></ul>
</li><li>
<p>If the named environment variable exists:</p>
<ul><li>
<p>If <code>value</code> is not <code>nil</code>, updates the environment variable with value <code>value</code>:</p>

<pre><code># Update &#39;foo&#39; using ENV.[]=.
ENV[&#39;foo&#39;] = &#39;2&#39; # =&gt; &#39;2&#39;
ENV[&#39;foo&#39;] # =&gt; &#39;2&#39;
# Update &#39;bar&#39; using ENV.store.
ENV.store(&#39;bar&#39;, &#39;3&#39;) # =&gt; &#39;3&#39;
ENV[&#39;bar&#39;] # =&gt; &#39;3&#39;
</code></pre>
</li><li>
<p>If <code>value</code> is <code>nil</code>, deletes the environment variable:</p>

<pre><code># Delete &#39;foo&#39; using ENV.[]=.
ENV[&#39;foo&#39;] = nil # =&gt; nil
ENV.include?(&#39;foo&#39;) # =&gt; false
# Delete &#39;bar&#39; using ENV.store.
ENV.store(&#39;bar&#39;, nil) # =&gt; nil
ENV.include?(&#39;bar&#39;) # =&gt; false
</code></pre>
</li></ul>
</li></ul>

<p>Raises an exception if <code>name</code> or <code>value</code> is invalid. See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-5B-5D-3D_source')" id="l_method-c-5B-5D-3D_source">show</a>
                
              </p>
              <div id="method-c-5B-5D-3D_source" class="dyn-source">
                <pre>static VALUE
env_aset_m(VALUE obj, VALUE nm, VALUE val)
{
    return env_aset(nm, val);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-assoc">
            
              <b>ENV.assoc(name) &rarr; [name, value] or nil
</b>
            
            <a href="../classes/ENV.html#method-c-assoc" name="method-c-assoc" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a 2-element <a href="Array.html"><code>Array</code></a> containing the name and value of the environment variable for <code>name</code> if it exists:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.assoc(&#39;foo&#39;) # =&gt; [&#39;foo&#39;, &#39;0&#39;]
</code></pre>

<p>Returns <code>nil</code> if <code>name</code> is a valid <a href="String.html"><code>String</code></a> and there is no such environment variable.</p>

<p>Returns <code>nil</code> if <code>name</code> is the empty <a href="String.html"><code>String</code></a> or is a <a href="String.html"><code>String</code></a> containing character <code>&#39;=&#39;</code>.</p>

<p>Raises an exception if <code>name</code> is a <a href="String.html"><code>String</code></a> containing the NUL character <code>&quot;\0&quot;</code>:</p>

<pre><code>ENV.assoc(&quot;\0&quot;) # Raises ArgumentError (bad environment variable name: contains null byte)
</code></pre>

<p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p>

<pre><code>ENV.assoc(&quot;\xa1\xa1&quot;.force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</code></pre>

<p>Raises an exception if <code>name</code> is not a String:</p>

<pre><code>ENV.assoc(Object.new) # TypeError (no implicit conversion of Object into String)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-assoc_source')" id="l_method-c-assoc_source">show</a>
                
              </p>
              <div id="method-c-assoc_source" class="dyn-source">
                <pre>static VALUE
env_assoc(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    VALUE e = getenv_with_lock(s);

    if (!NIL_P(e)) {
        return rb_assoc_new(key, e);
    }
    else {
        return Qnil;
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-clear">
            
              <b>ENV.clear &rarr; ENV
</b>
            
            <a href="../classes/ENV.html#method-c-clear" name="method-c-clear" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes every environment variable; returns ENV:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.size # =&gt; 2
ENV.clear # =&gt; ENV
ENV.size # =&gt; 0
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-clear_source')" id="l_method-c-clear_source">show</a>
                
              </p>
              <div id="method-c-clear_source" class="dyn-source">
                <pre>static VALUE
env_clear(VALUE _)
{
    return rb_env_clear();
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-clone">
            
              <b>ENV.clone(freeze: nil) # raises TypeError
</b>
            
            <a href="../classes/ENV.html#method-c-clone" name="method-c-clone" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Raises <a href="TypeError.html"><code>TypeError</code></a>, because <a href="ENV.html"><code>ENV</code></a> is a wrapper for the process-wide environment variables and a clone is useless. Use to_h to get a copy of <a href="ENV.html"><code>ENV</code></a> data as a hash.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-clone_source')" id="l_method-c-clone_source">show</a>
                
              </p>
              <div id="method-c-clone_source" class="dyn-source">
                <pre>static VALUE
env_clone(int argc, VALUE *argv, VALUE obj)
{
    if (argc) {
        VALUE opt;
        if (rb_scan_args(argc, argv, &quot;0:&quot;, &amp;opt) &lt; argc) {
            rb_get_freeze_opt(1, &amp;opt);
        }
    }

    rb_raise(rb_eTypeError, &quot;Cannot clone ENV, use ENV.to_h to get a copy of ENV as a hash&quot;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-delete">
            
              <b>ENV.delete(name)                           &rarr; value<br />ENV.delete(name) { |name| block }          &rarr; value<br />ENV.delete(missing_name)                   &rarr; nil<br />ENV.delete(missing_name) { |name| block }  &rarr; block_value
</b>
            
            <a href="../classes/ENV.html#method-c-delete" name="method-c-delete" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Deletes the environment variable with <code>name</code> if it exists and returns its value:</p>

<pre><code>ENV[&#39;foo&#39;] = &#39;0&#39;
ENV.delete(&#39;foo&#39;) # =&gt; &#39;0&#39;
</code></pre>

<p>If a block is not given and the named environment variable does not exist, returns <code>nil</code>.</p>

<p>If a block given and the environment variable does not exist, yields <code>name</code> to the block and returns the value of the block:</p>

<pre><code>ENV.delete(&#39;foo&#39;) { |name| name * 2 } # =&gt; &quot;foofoo&quot;
</code></pre>

<p>If a block given and the environment variable exists, deletes the environment variable and returns its value (ignoring the block):</p>

<pre><code>ENV[&#39;foo&#39;] = &#39;0&#39;
ENV.delete(&#39;foo&#39;) { |name| raise &#39;ignored&#39; } # =&gt; &quot;0&quot;
</code></pre>

<p>Raises an exception if <code>name</code> is invalid. See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-delete_source')" id="l_method-c-delete_source">show</a>
                
              </p>
              <div id="method-c-delete_source" class="dyn-source">
                <pre>static VALUE
env_delete_m(VALUE obj, VALUE name)
{
    VALUE val;

    val = env_delete(name);
    if (NIL_P(val) &amp;&amp; rb_block_given_p()) val = rb_yield(name);
    return val;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-delete_if">
            
              <b>ENV.delete_if { |name, value| block } &rarr; ENV<br />ENV.delete_if                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-delete_if" name="method-c-delete_if" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, deleting each environment variable for which the block returns a truthy value, and returning <a href="ENV.html"><code>ENV</code></a> (regardless of whether any deletions):</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.delete_if { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;}
ENV.delete_if { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.delete_if # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:delete_if!&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;}
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-delete_if_source')" id="l_method-c-delete_if_source">show</a>
                
              </p>
              <div id="method-c-delete_if_source" class="dyn-source">
                <pre>static VALUE
env_delete_if(VALUE ehash)
{
    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    env_reject_bang(ehash);
    return envtbl;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-dup">
            
              <b>ENV.dup # raises TypeError
</b>
            
            <a href="../classes/ENV.html#method-c-dup" name="method-c-dup" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Raises <a href="TypeError.html"><code>TypeError</code></a>, because <a href="ENV.html"><code>ENV</code></a> is a singleton object. Use to_h to get a copy of <a href="ENV.html"><code>ENV</code></a> data as a hash.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-dup_source')" id="l_method-c-dup_source">show</a>
                
              </p>
              <div id="method-c-dup_source" class="dyn-source">
                <pre>static VALUE
env_dup(VALUE obj)
{
    rb_raise(rb_eTypeError, &quot;Cannot dup ENV, use ENV.to_h to get a copy of ENV as a hash&quot;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-each">
            
              <b>ENV.each      { |name, value| block } &rarr; ENV<br />ENV.each                              &rarr; an_enumerator<br />ENV.each_pair { |name, value| block } &rarr; ENV<br />ENV.each_pair                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-each" name="method-c-each" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element Array:</p>

<pre><code>h = {}
ENV.each_pair { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>h = {}
e = ENV.each_pair # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:each_pair&gt;
e.each { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-each_source')" id="l_method-c-each_source">show</a>
                
              </p>
              <div id="method-c-each_source" class="dyn-source">
                <pre>static VALUE
env_each_pair(VALUE ehash)
{
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);

    VALUE ary = rb_ary_new();

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);

        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);
            if (s) {
                rb_ary_push(ary, env_str_new(*env, s-*env));
                rb_ary_push(ary, env_str_new2(s+1));
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    if (rb_block_pair_yield_optimizable()) {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield_values(2, RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1));
        }
    }
    else {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield(rb_assoc_new(RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1)));
        }
    }

    return ehash;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-each_key">
            
              <b>ENV.each_key { |name| block } &rarr; ENV<br />ENV.each_key                  &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-each_key" name="method-c-each_key" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;) # =&gt; ENV
names = []
ENV.each_key { |name| names.push(name) } # =&gt; ENV
names # =&gt; [&quot;bar&quot;, &quot;foo&quot;]
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>e = ENV.each_key # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:each_key&gt;
names = []
e.each { |name| names.push(name) } # =&gt; ENV
names # =&gt; [&quot;bar&quot;, &quot;foo&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-each_key_source')" id="l_method-c-each_key_source">show</a>
                
              </p>
              <div id="method-c-each_key_source" class="dyn-source">
                <pre>static VALUE
env_each_key(VALUE ehash)
{
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        rb_yield(RARRAY_AREF(keys, i));
    }
    return ehash;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-each_pair">
            
              <b>ENV.each      { |name, value| block } &rarr; ENV<br />ENV.each                              &rarr; an_enumerator<br />ENV.each_pair { |name, value| block } &rarr; ENV<br />ENV.each_pair                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-each_pair" name="method-c-each_pair" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element Array:</p>

<pre><code>h = {}
ENV.each_pair { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>h = {}
e = ENV.each_pair # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:each_pair&gt;
e.each { |name, value| h[name] = value } # =&gt; ENV
h # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-each_pair_source')" id="l_method-c-each_pair_source">show</a>
                
              </p>
              <div id="method-c-each_pair_source" class="dyn-source">
                <pre>static VALUE
env_each_pair(VALUE ehash)
{
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);

    VALUE ary = rb_ary_new();

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);

        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);
            if (s) {
                rb_ary_push(ary, env_str_new(*env, s-*env));
                rb_ary_push(ary, env_str_new2(s+1));
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    if (rb_block_pair_yield_optimizable()) {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield_values(2, RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1));
        }
    }
    else {
        for (i=0; i&lt;RARRAY_LEN(ary); i+=2) {
            rb_yield(rb_assoc_new(RARRAY_AREF(ary, i), RARRAY_AREF(ary, i+1)));
        }
    }

    return ehash;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-each_value">
            
              <b>ENV.each_value { |value| block } &rarr; ENV<br />ENV.each_value                   &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-each_value" name="method-c-each_value" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable value:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;) # =&gt; ENV
values = []
ENV.each_value { |value| values.push(value) } # =&gt; ENV
values # =&gt; [&quot;1&quot;, &quot;0&quot;]
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>e = ENV.each_value # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:each_value&gt;
values = []
e.each { |value| values.push(value) } # =&gt; ENV
values # =&gt; [&quot;1&quot;, &quot;0&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-each_value_source')" id="l_method-c-each_value_source">show</a>
                
              </p>
              <div id="method-c-each_value_source" class="dyn-source">
                <pre>static VALUE
env_each_value(VALUE ehash)
{
    VALUE values;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    values = env_values();
    for (i=0; i&lt;RARRAY_LEN(values); i++) {
        rb_yield(RARRAY_AREF(values, i));
    }
    return ehash;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-empty-3F">
            
              <b>ENV.empty? &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-empty-3F" name="method-c-empty-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> when there are no environment variables, <code>false</code> otherwise:</p>

<pre><code>ENV.clear
ENV.empty? # =&gt; true
ENV[&#39;foo&#39;] = &#39;0&#39;
ENV.empty? # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-empty-3F_source')" id="l_method-c-empty-3F_source">show</a>
                
              </p>
              <div id="method-c-empty-3F_source" class="dyn-source">
                <pre>static VALUE
env_empty_p(VALUE _)
{
    bool empty = true;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        if (env[0] != 0) {
            empty = false;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return RBOOL(empty);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-except">
            
              <b>ENV.except(*keys) &rarr; a_hash
</b>
            
            <a href="../classes/ENV.html#method-c-except" name="method-c-except" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a hash except the given keys from <a href="ENV.html"><code>ENV</code></a> and their values.</p>

<pre><code>ENV                       #=&gt; {&quot;LANG&quot;=&gt;&quot;en_US.UTF-8&quot;, &quot;TERM&quot;=&gt;&quot;xterm-256color&quot;, &quot;HOME&quot;=&gt;&quot;/Users/rhc&quot;}
ENV.except(&quot;TERM&quot;,&quot;HOME&quot;) #=&gt; {&quot;LANG&quot;=&gt;&quot;en_US.UTF-8&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-except_source')" id="l_method-c-except_source">show</a>
                
              </p>
              <div id="method-c-except_source" class="dyn-source">
                <pre>static VALUE
env_except(int argc, VALUE *argv, VALUE _)
{
    int i;
    VALUE key, hash = env_to_hash();

    for (i = 0; i &lt; argc; i++) {
        key = argv[i];
        rb_hash_delete(hash, key);
    }

    return hash;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-fetch">
            
              <b>ENV.fetch(name)                  &rarr; value<br />ENV.fetch(name, default)         &rarr; value<br />ENV.fetch(name) { |name| block } &rarr; value
</b>
            
            <a href="../classes/ENV.html#method-c-fetch" name="method-c-fetch" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>If <code>name</code> is the name of an environment variable, returns its value:</p>

<pre><code>ENV[&#39;foo&#39;] = &#39;0&#39;
ENV.fetch(&#39;foo&#39;) # =&gt; &#39;0&#39;
</code></pre>

<p>Otherwise if a block is given (but not a default value), yields <code>name</code> to the block and returns the block’s return value:</p>

<pre><code>ENV.fetch(&#39;foo&#39;) { |name| :need_not_return_a_string } # =&gt; :need_not_return_a_string
</code></pre>

<p>Otherwise if a default value is given (but not a block), returns the default value:</p>

<pre><code>ENV.delete(&#39;foo&#39;)
ENV.fetch(&#39;foo&#39;, :default_need_not_be_a_string) # =&gt; :default_need_not_be_a_string
</code></pre>

<p>If the environment variable does not exist and both default and block are given, issues a warning (“warning: block supersedes default value argument”), yields <code>name</code> to the block, and returns the block’s return value:</p>

<pre><code>ENV.fetch(&#39;foo&#39;, :default) { |name| :block_return } # =&gt; :block_return
</code></pre>

<p>Raises <a href="KeyError.html"><code>KeyError</code></a> if <code>name</code> is valid, but not found, and neither default value nor block is given:</p>

<pre><code>ENV.fetch(&#39;foo&#39;) # Raises KeyError (key not found: &quot;foo&quot;)
</code></pre>

<p>Raises an exception if <code>name</code> is invalid. See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-fetch_source')" id="l_method-c-fetch_source">show</a>
                
              </p>
              <div id="method-c-fetch_source" class="dyn-source">
                <pre>static VALUE
env_fetch(int argc, VALUE *argv, VALUE _)
{
    VALUE key;
    long block_given;
    const char *nam;
    VALUE env;

    rb_check_arity(argc, 1, 2);
    key = argv[0];
    block_given = rb_block_given_p();
    if (block_given &amp;&amp; argc == 2) {
        rb_warn(&quot;block supersedes default value argument&quot;);
    }
    nam = env_name(key);
    env = getenv_with_lock(nam);

    if (NIL_P(env)) {
        if (block_given) return rb_yield(key);
        if (argc == 1) {
            rb_key_err_raise(rb_sprintf(&quot;key not found: \&quot;%&quot;PRIsVALUE&quot;\&quot;&quot;, key), envtbl, key);
        }
        return argv[1];
    }
    return env;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-filter">
            
              <b>ENV.select { |name, value| block } &rarr; hash of name/value pairs<br />ENV.select                         &rarr; an_enumerator<br />ENV.filter { |name, value| block } &rarr; hash of name/value pairs<br />ENV.filter                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-filter" name="method-c-filter" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, returning a <a href="Hash.html"><code>Hash</code></a> of the names and values for which the block returns a truthy value:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.select { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.filter { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>e = ENV.select # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:select&gt;
e.each { |name, value | name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
e = ENV.filter # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:filter&gt;
e.each { |name, value | name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-filter_source')" id="l_method-c-filter_source">show</a>
                
              </p>
              <div id="method-c-filter_source" class="dyn-source">
                <pre>static VALUE
env_select(VALUE ehash)
{
    VALUE result;
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    result = rb_hash_new();
    keys = env_keys(FALSE);
    for (i = 0; i &lt; RARRAY_LEN(keys); ++i) {
        VALUE key = RARRAY_AREF(keys, i);
        VALUE val = rb_f_getenv(Qnil, key);
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, key, val))) {
                rb_hash_aset(result, key, val);
            }
        }
    }
    RB_GC_GUARD(keys);

    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-filter-21">
            
              <b>ENV.select! { |name, value| block } &rarr; ENV or nil<br />ENV.select!                         &rarr; an_enumerator<br />ENV.filter! { |name, value| block } &rarr; ENV or nil<br />ENV.filter!                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-filter-21" name="method-c-filter-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, deleting each entry for which the block returns <code>false</code> or <code>nil</code>, and returning <a href="ENV.html"><code>ENV</code></a> if any deletions made, or <code>nil</code> otherwise:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.select! { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.select! { |name, value| true } # =&gt; nil

ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.filter! { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.filter! { |name, value| true } # =&gt; nil
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.select! # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}:select!&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
e.each { |name, value| true } # =&gt; nil

ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.filter! # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}:filter!&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
e.each { |name, value| true } # =&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-filter-21_source')" id="l_method-c-filter-21_source">show</a>
                
              </p>
              <div id="method-c-filter-21_source" class="dyn-source">
                <pre>static VALUE
env_select_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (!RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                env_delete(RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-freeze">
            
              <b>ENV.freeze
</b>
            
            <a href="../classes/ENV.html#method-c-freeze" name="method-c-freeze" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Raises an exception:</p>

<pre><code>ENV.freeze # Raises TypeError (cannot freeze ENV)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-freeze_source')" id="l_method-c-freeze_source">show</a>
                
              </p>
              <div id="method-c-freeze_source" class="dyn-source">
                <pre>static VALUE
env_freeze(VALUE self)
{
    rb_raise(rb_eTypeError, &quot;cannot freeze ENV&quot;);
    UNREACHABLE_RETURN(self);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-has_key-3F">
            
              <b>ENV.include?(name) &rarr; true or false<br />ENV.has_key?(name) &rarr; true or false<br />ENV.member?(name)  &rarr; true or false<br />ENV.key?(name)     &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-has_key-3F" name="method-c-has_key-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.include?(&#39;foo&#39;) # =&gt; true
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is a valid <a href="String.html"><code>String</code></a> and there is no such environment variable:</p>

<pre><code>ENV.include?(&#39;baz&#39;) # =&gt; false
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is the empty <a href="String.html"><code>String</code></a> or is a <a href="String.html"><code>String</code></a> containing character <code>&#39;=&#39;</code>:</p>

<pre><code>ENV.include?(&#39;&#39;) # =&gt; false
ENV.include?(&#39;=&#39;) # =&gt; false
</code></pre>

<p>Raises an exception if <code>name</code> is a <a href="String.html"><code>String</code></a> containing the NUL character <code>&quot;\0&quot;</code>:</p>

<pre><code>ENV.include?(&quot;\0&quot;) # Raises ArgumentError (bad environment variable name: contains null byte)
</code></pre>

<p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p>

<pre><code>ENV.include?(&quot;\xa1\xa1&quot;.force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</code></pre>

<p>Raises an exception if <code>name</code> is not a String:</p>

<pre><code>ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-has_key-3F_source')" id="l_method-c-has_key-3F_source">show</a>
                
              </p>
              <div id="method-c-has_key-3F_source" class="dyn-source">
                <pre>static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-has_value-3F">
            
              <b>ENV.value?(value)     &rarr; true or false<br />ENV.has_value?(value) &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-has_value-3F" name="method-c-has_value-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>value</code> is the value for some environment variable name, <code>false</code> otherwise:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.value?(&#39;0&#39;) # =&gt; true
ENV.has_value?(&#39;0&#39;) # =&gt; true
ENV.value?(&#39;2&#39;) # =&gt; false
ENV.has_value?(&#39;2&#39;) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-has_value-3F_source')" id="l_method-c-has_value-3F_source">show</a>
                
              </p>
              <div id="method-c-has_value-3F_source" class="dyn-source">
                <pre>static VALUE
env_has_value(VALUE dmy, VALUE obj)
{
    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;

    VALUE ret = Qfalse;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                    ret = Qtrue;
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-include-3F">
            
              <b>ENV.include?(name) &rarr; true or false<br />ENV.has_key?(name) &rarr; true or false<br />ENV.member?(name)  &rarr; true or false<br />ENV.key?(name)     &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-include-3F" name="method-c-include-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.include?(&#39;foo&#39;) # =&gt; true
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is a valid <a href="String.html"><code>String</code></a> and there is no such environment variable:</p>

<pre><code>ENV.include?(&#39;baz&#39;) # =&gt; false
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is the empty <a href="String.html"><code>String</code></a> or is a <a href="String.html"><code>String</code></a> containing character <code>&#39;=&#39;</code>:</p>

<pre><code>ENV.include?(&#39;&#39;) # =&gt; false
ENV.include?(&#39;=&#39;) # =&gt; false
</code></pre>

<p>Raises an exception if <code>name</code> is a <a href="String.html"><code>String</code></a> containing the NUL character <code>&quot;\0&quot;</code>:</p>

<pre><code>ENV.include?(&quot;\0&quot;) # Raises ArgumentError (bad environment variable name: contains null byte)
</code></pre>

<p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p>

<pre><code>ENV.include?(&quot;\xa1\xa1&quot;.force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</code></pre>

<p>Raises an exception if <code>name</code> is not a String:</p>

<pre><code>ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-include-3F_source')" id="l_method-c-include-3F_source">show</a>
                
              </p>
              <div id="method-c-include-3F_source" class="dyn-source">
                <pre>static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-inspect">
            
              <b>ENV.inspect &rarr; a_string
</b>
            
            <a href="../classes/ENV.html#method-c-inspect" name="method-c-inspect" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the contents of the environment as a String:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.inspect # =&gt; &quot;{\&quot;bar\&quot;=&gt;\&quot;1\&quot;, \&quot;foo\&quot;=&gt;\&quot;0\&quot;}&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-inspect_source')" id="l_method-c-inspect_source">show</a>
                
              </p>
              <div id="method-c-inspect_source" class="dyn-source">
                <pre>static VALUE
env_inspect(VALUE _)
{
    VALUE i;
    VALUE str = rb_str_buf_new2(&quot;{&quot;);

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);

            if (env != environ) {
                rb_str_buf_cat2(str, &quot;, &quot;);
            }
            if (s) {
                rb_str_buf_cat2(str, &quot;\&quot;&quot;);
                rb_str_buf_cat(str, *env, s-*env);
                rb_str_buf_cat2(str, &quot;\&quot;=&gt;&quot;);
                i = rb_inspect(rb_str_new2(s+1));
                rb_str_buf_append(str, i);
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    rb_str_buf_cat2(str, &quot;}&quot;);

    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-invert">
            
              <b>ENV.invert &rarr; hash of value/name pairs
</b>
            
            <a href="../classes/ENV.html#method-c-invert" name="method-c-invert" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a <a href="Hash.html"><code>Hash</code></a> whose keys are the <a href="ENV.html"><code>ENV</code></a> values, and whose values are the corresponding <a href="ENV.html"><code>ENV</code></a> names:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.invert # =&gt; {&quot;1&quot;=&gt;&quot;bar&quot;, &quot;0&quot;=&gt;&quot;foo&quot;}
</code></pre>

<p>For a duplicate <a href="ENV.html"><code>ENV</code></a> value, overwrites the hash entry:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;0&#39;)
ENV.invert # =&gt; {&quot;0&quot;=&gt;&quot;foo&quot;}
</code></pre>

<p>Note that the order of the <a href="ENV.html"><code>ENV</code></a> processing is OS-dependent, which means that the order of overwriting is also OS-dependent. See <a href="ENV.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-invert_source')" id="l_method-c-invert_source">show</a>
                
              </p>
              <div id="method-c-invert_source" class="dyn-source">
                <pre>static VALUE
env_invert(VALUE _)
{
    return rb_hash_invert(env_to_hash());
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-keep_if">
            
              <b>ENV.keep_if { |name, value| block } &rarr; ENV<br />ENV.keep_if                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-keep_if" name="method-c-keep_if" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, deleting each environment variable for which the block returns <code>false</code> or <code>nil</code>, and returning ENV:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.keep_if { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.keep_if # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:keep_if&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-keep_if_source')" id="l_method-c-keep_if_source">show</a>
                
              </p>
              <div id="method-c-keep_if_source" class="dyn-source">
                <pre>static VALUE
env_keep_if(VALUE ehash)
{
    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    env_select_bang(ehash);
    return envtbl;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-key">
            
              <b>ENV.key(value) &rarr; name or nil
</b>
            
            <a href="../classes/ENV.html#method-c-key" name="method-c-key" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the name of the first environment variable with <code>value</code>, if it exists:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;0&#39;)
ENV.key(&#39;0&#39;) # =&gt; &quot;foo&quot;
</code></pre>

<p>The order in which environment variables are examined is OS-dependent. See <a href="ENV.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>

<p>Returns <code>nil</code> if there is no such value.</p>

<p>Raises an exception if <code>value</code> is invalid:</p>

<pre><code>ENV.key(Object.new) # raises TypeError (no implicit conversion of Object into String)
</code></pre>

<p>See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-key_source')" id="l_method-c-key_source">show</a>
                
              </p>
              <div id="method-c-key_source" class="dyn-source">
                <pre>static VALUE
env_key(VALUE dmy, VALUE value)
{
    SafeStringValue(value);
    VALUE str = Qnil;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(value) == len &amp;&amp; strncmp(s, RSTRING_PTR(value), len) == 0) {
                    str = env_str_new(*env, s-*env-1);
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-key-3F">
            
              <b>ENV.include?(name) &rarr; true or false<br />ENV.has_key?(name) &rarr; true or false<br />ENV.member?(name)  &rarr; true or false<br />ENV.key?(name)     &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-key-3F" name="method-c-key-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.include?(&#39;foo&#39;) # =&gt; true
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is a valid <a href="String.html"><code>String</code></a> and there is no such environment variable:</p>

<pre><code>ENV.include?(&#39;baz&#39;) # =&gt; false
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is the empty <a href="String.html"><code>String</code></a> or is a <a href="String.html"><code>String</code></a> containing character <code>&#39;=&#39;</code>:</p>

<pre><code>ENV.include?(&#39;&#39;) # =&gt; false
ENV.include?(&#39;=&#39;) # =&gt; false
</code></pre>

<p>Raises an exception if <code>name</code> is a <a href="String.html"><code>String</code></a> containing the NUL character <code>&quot;\0&quot;</code>:</p>

<pre><code>ENV.include?(&quot;\0&quot;) # Raises ArgumentError (bad environment variable name: contains null byte)
</code></pre>

<p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p>

<pre><code>ENV.include?(&quot;\xa1\xa1&quot;.force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</code></pre>

<p>Raises an exception if <code>name</code> is not a String:</p>

<pre><code>ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-key-3F_source')" id="l_method-c-key-3F_source">show</a>
                
              </p>
              <div id="method-c-key-3F_source" class="dyn-source">
                <pre>static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-keys">
            
              <b>ENV.keys &rarr; array of names
</b>
            
            <a href="../classes/ENV.html#method-c-keys" name="method-c-keys" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns all variable names in an Array:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.keys # =&gt; [&#39;bar&#39;, &#39;foo&#39;]
</code></pre>

<p>The order of the names is OS-dependent. See <a href="ENV.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>

<p>Returns the empty <a href="Array.html"><code>Array</code></a> if <a href="ENV.html"><code>ENV</code></a> is empty.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-keys_source')" id="l_method-c-keys_source">show</a>
                
              </p>
              <div id="method-c-keys_source" class="dyn-source">
                <pre>static VALUE
env_f_keys(VALUE _)
{
    return env_keys(FALSE);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-length">
            
              <b>ENV.length &rarr; an_integer<br />ENV.size   &rarr; an_integer
</b>
            
            <a href="../classes/ENV.html#method-c-length" name="method-c-length" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the count of environment variables:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.length # =&gt; 2
ENV.size # =&gt; 2
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-length_source')" id="l_method-c-length_source">show</a>
                
              </p>
              <div id="method-c-length_source" class="dyn-source">
                <pre>static VALUE
env_size(VALUE _)
{
    return INT2FIX(env_size_with_lock());
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-member-3F">
            
              <b>ENV.include?(name) &rarr; true or false<br />ENV.has_key?(name) &rarr; true or false<br />ENV.member?(name)  &rarr; true or false<br />ENV.key?(name)     &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-member-3F" name="method-c-member-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if there is an environment variable with the given <code>name</code>:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.include?(&#39;foo&#39;) # =&gt; true
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is a valid <a href="String.html"><code>String</code></a> and there is no such environment variable:</p>

<pre><code>ENV.include?(&#39;baz&#39;) # =&gt; false
</code></pre>

<p>Returns <code>false</code> if <code>name</code> is the empty <a href="String.html"><code>String</code></a> or is a <a href="String.html"><code>String</code></a> containing character <code>&#39;=&#39;</code>:</p>

<pre><code>ENV.include?(&#39;&#39;) # =&gt; false
ENV.include?(&#39;=&#39;) # =&gt; false
</code></pre>

<p>Raises an exception if <code>name</code> is a <a href="String.html"><code>String</code></a> containing the NUL character <code>&quot;\0&quot;</code>:</p>

<pre><code>ENV.include?(&quot;\0&quot;) # Raises ArgumentError (bad environment variable name: contains null byte)
</code></pre>

<p>Raises an exception if <code>name</code> has an encoding that is not ASCII-compatible:</p>

<pre><code>ENV.include?(&quot;\xa1\xa1&quot;.force_encoding(Encoding::UTF_16LE))
# Raises ArgumentError (bad environment variable name: ASCII incompatible encoding: UTF-16LE)
</code></pre>

<p>Raises an exception if <code>name</code> is not a String:</p>

<pre><code>ENV.include?(Object.new) # TypeError (no implicit conversion of Object into String)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-member-3F_source')" id="l_method-c-member-3F_source">show</a>
                
              </p>
              <div id="method-c-member-3F_source" class="dyn-source">
                <pre>static VALUE
env_has_key(VALUE env, VALUE key)
{
    const char *s = env_name(key);
    return RBOOL(has_env_with_lock(s));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-merge-21">
            
              <b>ENV.update                                              &rarr; ENV<br />ENV.update(*hashes)                                     &rarr; ENV<br />ENV.update(*hashes) { |name, env_val, hash_val| block } &rarr; ENV<br />ENV.merge!                                              &rarr; ENV<br />ENV.merge!(*hashes)                                     &rarr; ENV<br />ENV.merge!(*hashes) { |name, env_val, hash_val| block } &rarr; ENV
</b>
            
            <a href="../classes/ENV.html#method-c-merge-21" name="method-c-merge-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Adds to <a href="ENV.html"><code>ENV</code></a> each key/value pair in the given <code>hash</code>; returns ENV:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.merge!(&#39;baz&#39; =&gt; &#39;2&#39;, &#39;bat&#39; =&gt; &#39;3&#39;) # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;bat&quot;=&gt;&quot;3&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Deletes the <a href="ENV.html"><code>ENV</code></a> entry for a hash value that is <code>nil</code>:</p>

<pre><code>ENV.merge!(&#39;baz&#39; =&gt; nil, &#39;bat&#39; =&gt; nil) # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>For an already-existing name, if no block given, overwrites the <a href="ENV.html"><code>ENV</code></a> value:</p>

<pre><code>ENV.merge!(&#39;foo&#39; =&gt; &#39;4&#39;) # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;4&quot;}
</code></pre>

<p>For an already-existing name, if block given, yields the name, its <a href="ENV.html"><code>ENV</code></a> value, and its hash value; the block’s return value becomes the new name:</p>

<pre><code>ENV.merge!(&#39;foo&#39; =&gt; &#39;5&#39;) { |name, env_val, hash_val | env_val + hash_val } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;45&quot;}
</code></pre>

<p>Raises an exception if a name or value is invalid (see <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>);</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.merge!(&#39;foo&#39; =&gt; &#39;6&#39;, :bar =&gt; &#39;7&#39;, &#39;baz&#39; =&gt; &#39;9&#39;) # Raises TypeError (no implicit conversion of Symbol into String)
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;6&quot;}
ENV.merge!(&#39;foo&#39; =&gt; &#39;7&#39;, &#39;bar&#39; =&gt; 8, &#39;baz&#39; =&gt; &#39;9&#39;) # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;7&quot;}
</code></pre>

<p>Raises an exception if the block returns an invalid name: (see <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p>

<pre><code>ENV.merge!(&#39;bat&#39; =&gt; &#39;8&#39;, &#39;foo&#39; =&gt; &#39;9&#39;) { |name, env_val, hash_val | 10 } # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;bat&quot;=&gt;&quot;8&quot;, &quot;foo&quot;=&gt;&quot;7&quot;}
</code></pre>

<p>Note that for the exceptions above, hash pairs preceding an invalid name or value are processed normally; those following are ignored.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-merge-21_source')" id="l_method-c-merge-21_source">show</a>
                
              </p>
              <div id="method-c-merge-21_source" class="dyn-source">
                <pre>static VALUE
env_update(int argc, VALUE *argv, VALUE env)
{
    rb_foreach_func *func = rb_block_given_p() ?
        env_update_block_i : env_update_i;
    for (int i = 0; i &lt; argc; ++i) {
        VALUE hash = argv[i];
        if (env == hash) continue;
        hash = to_hash(hash);
        rb_hash_foreach(hash, func, 0);
    }
    return env;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rassoc">
            
              <b>ENV.rassoc(value) &rarr; [name, value] or nil
</b>
            
            <a href="../classes/ENV.html#method-c-rassoc" name="method-c-rassoc" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a 2-element <a href="Array.html"><code>Array</code></a> containing the name and value of the <strong>first</strong> <strong>found</strong> environment variable that has value <code>value</code>, if one exists:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;0&#39;)
ENV.rassoc(&#39;0&#39;) # =&gt; [&quot;bar&quot;, &quot;0&quot;]
</code></pre>

<p>The order in which environment variables are examined is OS-dependent. See <a href="ENV.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>

<p>Returns <code>nil</code> if there is no such environment variable.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rassoc_source')" id="l_method-c-rassoc_source">show</a>
                
              </p>
              <div id="method-c-rassoc_source" class="dyn-source">
                <pre>static VALUE
env_rassoc(VALUE dmy, VALUE obj)
{
    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;

    VALUE result = Qnil;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);

        while (*env) {
            const char *p = *env;
            char *s = strchr(p, &#39;=&#39;);
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                    result = rb_assoc_new(rb_str_new(p, s-p-1), obj);
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rehash">
            
              <b>ENV.rehash &rarr; nil
</b>
            
            <a href="../classes/ENV.html#method-c-rehash" name="method-c-rehash" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>(Provided for compatibility with <a href="Hash.html"><code>Hash</code></a>.)</p>

<p>Does not modify <a href="ENV.html"><code>ENV</code></a>; returns <code>nil</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rehash_source')" id="l_method-c-rehash_source">show</a>
                
              </p>
              <div id="method-c-rehash_source" class="dyn-source">
                <pre>static VALUE
env_none(VALUE _)
{
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-reject">
            
              <b>ENV.reject { |name, value| block } &rarr; hash of name/value pairs<br />ENV.reject                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-reject" name="method-c-reject" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>. Returns a <a href="Hash.html"><code>Hash</code></a> whose items are determined by the block. When the block returns a truthy value, the name/value pair is added to the return <a href="Hash.html"><code>Hash</code></a>; otherwise the pair is ignored:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.reject { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>e = ENV.reject
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-reject_source')" id="l_method-c-reject_source">show</a>
                
              </p>
              <div id="method-c-reject_source" class="dyn-source">
                <pre>static VALUE
env_reject(VALUE _)
{
    return rb_hash_delete_if(env_to_hash());
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-reject-21">
            
              <b>ENV.reject! { |name, value| block } &rarr; ENV or nil<br />ENV.reject!                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-reject-21" name="method-c-reject-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Similar to <a href="ENV.html#method-c-delete_if"><code>ENV.delete_if</code></a>, but returns <code>nil</code> if no changes were made.</p>

<p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, deleting each environment variable for which the block returns a truthy value, and returning <a href="ENV.html"><code>ENV</code></a> (if any deletions) or <code>nil</code> (if not):</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.reject! { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;}
ENV.reject! { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; nil
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.reject! # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:reject!&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;}
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-reject-21_source')" id="l_method-c-reject-21_source">show</a>
                
              </p>
              <div id="method-c-reject-21_source" class="dyn-source">
                <pre>static VALUE
env_reject_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                env_delete(RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-replace">
            
              <b>ENV.replace(hash) &rarr; ENV
</b>
            
            <a href="../classes/ENV.html#method-c-replace" name="method-c-replace" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Replaces the entire content of the environment variables with the name/value pairs in the given <code>hash</code>; returns <a href="ENV.html"><code>ENV</code></a>.</p>

<p>Replaces the content of <a href="ENV.html"><code>ENV</code></a> with the given pairs:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;) # =&gt; ENV
ENV.to_hash # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Raises an exception if a name or value is invalid (see <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, :bar =&gt; &#39;1&#39;) # Raises TypeError (no implicit conversion of Symbol into String)
ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; 1) # Raises TypeError (no implicit conversion of Integer into String)
ENV.to_hash # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-replace_source')" id="l_method-c-replace_source">show</a>
                
              </p>
              <div id="method-c-replace_source" class="dyn-source">
                <pre>static VALUE
env_replace(VALUE env, VALUE hash)
{
    VALUE keys;
    long i;

    keys = env_keys(TRUE);
    if (env == hash) return env;
    hash = to_hash(hash);
    rb_hash_foreach(hash, env_replace_i, keys);

    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        env_delete(RARRAY_AREF(keys, i));
    }
    RB_GC_GUARD(keys);
    return env;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-select">
            
              <b>ENV.select { |name, value| block } &rarr; hash of name/value pairs<br />ENV.select                         &rarr; an_enumerator<br />ENV.filter { |name, value| block } &rarr; hash of name/value pairs<br />ENV.filter                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-select" name="method-c-select" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, returning a <a href="Hash.html"><code>Hash</code></a> of the names and values for which the block returns a truthy value:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.select { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.filter { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>e = ENV.select # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:select&gt;
e.each { |name, value | name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
e = ENV.filter # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}:filter&gt;
e.each { |name, value | name.start_with?(&#39;b&#39;) } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-select_source')" id="l_method-c-select_source">show</a>
                
              </p>
              <div id="method-c-select_source" class="dyn-source">
                <pre>static VALUE
env_select(VALUE ehash)
{
    VALUE result;
    VALUE keys;
    long i;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    result = rb_hash_new();
    keys = env_keys(FALSE);
    for (i = 0; i &lt; RARRAY_LEN(keys); ++i) {
        VALUE key = RARRAY_AREF(keys, i);
        VALUE val = rb_f_getenv(Qnil, key);
        if (!NIL_P(val)) {
            if (RTEST(rb_yield_values(2, key, val))) {
                rb_hash_aset(result, key, val);
            }
        }
    }
    RB_GC_GUARD(keys);

    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-select-21">
            
              <b>ENV.select! { |name, value| block } &rarr; ENV or nil<br />ENV.select!                         &rarr; an_enumerator<br />ENV.filter! { |name, value| block } &rarr; ENV or nil<br />ENV.filter!                         &rarr; an_enumerator
</b>
            
            <a href="../classes/ENV.html#method-c-select-21" name="method-c-select-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Yields each environment variable name and its value as a 2-element <a href="Array.html"><code>Array</code></a>, deleting each entry for which the block returns <code>false</code> or <code>nil</code>, and returning <a href="ENV.html"><code>ENV</code></a> if any deletions made, or <code>nil</code> otherwise:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.select! { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.select! { |name, value| true } # =&gt; nil

ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.filter! { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.filter! { |name, value| true } # =&gt; nil
</code></pre>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no block given:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.select! # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}:select!&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
e.each { |name, value| true } # =&gt; nil

ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
e = ENV.filter! # =&gt; #&lt;Enumerator: {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}:filter!&gt;
e.each { |name, value| name.start_with?(&#39;b&#39;) } # =&gt; ENV
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
e.each { |name, value| true } # =&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-select-21_source')" id="l_method-c-select-21_source">show</a>
                
              </p>
              <div id="method-c-select-21_source" class="dyn-source">
                <pre>static VALUE
env_select_bang(VALUE ehash)
{
    VALUE keys;
    long i;
    int del = 0;

    RETURN_SIZED_ENUMERATOR(ehash, 0, 0, rb_env_size);
    keys = env_keys(FALSE);
    RBASIC_CLEAR_CLASS(keys);
    for (i=0; i&lt;RARRAY_LEN(keys); i++) {
        VALUE val = rb_f_getenv(Qnil, RARRAY_AREF(keys, i));
        if (!NIL_P(val)) {
            if (!RTEST(rb_yield_values(2, RARRAY_AREF(keys, i), val))) {
                env_delete(RARRAY_AREF(keys, i));
                del++;
            }
        }
    }
    RB_GC_GUARD(keys);
    if (del == 0) return Qnil;
    return envtbl;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-shift">
            
              <b>ENV.shift &rarr; [name, value] or nil
</b>
            
            <a href="../classes/ENV.html#method-c-shift" name="method-c-shift" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes the first environment variable from <a href="ENV.html"><code>ENV</code></a> and returns a 2-element <a href="Array.html"><code>Array</code></a> containing its name and value:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.to_hash # =&gt; {&#39;bar&#39; =&gt; &#39;1&#39;, &#39;foo&#39; =&gt; &#39;0&#39;}
ENV.shift # =&gt; [&#39;bar&#39;, &#39;1&#39;]
ENV.to_hash # =&gt; {&#39;foo&#39; =&gt; &#39;0&#39;}
</code></pre>

<p>Exactly which environment variable is “first” is OS-dependent. See <a href="ENV.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>

<p>Returns <code>nil</code> if the environment is empty.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-shift_source')" id="l_method-c-shift_source">show</a>
                
              </p>
              <div id="method-c-shift_source" class="dyn-source">
                <pre>static VALUE
env_shift(VALUE _)
{
    VALUE result = Qnil;
    VALUE key = Qnil;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        if (*env) {
            const char *p = *env;
            char *s = strchr(p, &#39;=&#39;);
            if (s) {
                key = env_str_new(p, s-p);
                VALUE val = env_str_new2(getenv(RSTRING_PTR(key)));
                result = rb_assoc_new(key, val);
            }
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    if (!NIL_P(key)) {
        env_delete(key);
    }

    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-size">
            
              <b>ENV.length &rarr; an_integer<br />ENV.size   &rarr; an_integer
</b>
            
            <a href="../classes/ENV.html#method-c-size" name="method-c-size" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the count of environment variables:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.length # =&gt; 2
ENV.size # =&gt; 2
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-size_source')" id="l_method-c-size_source">show</a>
                
              </p>
              <div id="method-c-size_source" class="dyn-source">
                <pre>static VALUE
env_size(VALUE _)
{
    return INT2FIX(env_size_with_lock());
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-slice">
            
              <b>ENV.slice(*names) &rarr; hash of name/value pairs
</b>
            
            <a href="../classes/ENV.html#method-c-slice" name="method-c-slice" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a <a href="Hash.html"><code>Hash</code></a> of the given <a href="ENV.html"><code>ENV</code></a> names and their corresponding values:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;, &#39;bat&#39; =&gt; &#39;3&#39;)
ENV.slice(&#39;foo&#39;, &#39;baz&#39;) # =&gt; {&quot;foo&quot;=&gt;&quot;0&quot;, &quot;baz&quot;=&gt;&quot;2&quot;}
ENV.slice(&#39;baz&#39;, &#39;foo&#39;) # =&gt; {&quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Raises an exception if any of the <code>names</code> is invalid (see <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p>

<pre><code>ENV.slice(&#39;foo&#39;, &#39;bar&#39;, :bat) # Raises TypeError (no implicit conversion of Symbol into String)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-slice_source')" id="l_method-c-slice_source">show</a>
                
              </p>
              <div id="method-c-slice_source" class="dyn-source">
                <pre>static VALUE
env_slice(int argc, VALUE *argv, VALUE _)
{
    int i;
    VALUE key, value, result;

    if (argc == 0) {
        return rb_hash_new();
    }
    result = rb_hash_new_with_size(argc);

    for (i = 0; i &lt; argc; i++) {
        key = argv[i];
        value = rb_f_getenv(Qnil, key);
        if (value != Qnil)
            rb_hash_aset(result, key, value);
    }

    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-store">
            
              <b>ENV[name] = value      &rarr; value<br />ENV.store(name, value) &rarr; value
</b>
            
            <a href="../classes/ENV.html#method-c-store" name="method-c-store" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates, updates, or deletes the named environment variable, returning the value. Both <code>name</code> and <code>value</code> may be instances of <a href="String.html"><code>String</code></a>. See <a href="ENV.html#class-ENV-label-Valid+Names+and+Values">Valid Names and Values</a>.</p>
<ul><li>
<p>If the named environment variable does not exist:</p>
<ul><li>
<p>If <code>value</code> is <code>nil</code>, does nothing.</p>

<pre><code>ENV.clear
ENV[&#39;foo&#39;] = nil # =&gt; nil
ENV.include?(&#39;foo&#39;) # =&gt; false
ENV.store(&#39;bar&#39;, nil) # =&gt; nil
ENV.include?(&#39;bar&#39;) # =&gt; false
</code></pre>
</li><li>
<p>If <code>value</code> is not <code>nil</code>, creates the environment variable with <code>name</code> and <code>value</code>:</p>

<pre><code># Create &#39;foo&#39; using ENV.[]=.
ENV[&#39;foo&#39;] = &#39;0&#39; # =&gt; &#39;0&#39;
ENV[&#39;foo&#39;] # =&gt; &#39;0&#39;
# Create &#39;bar&#39; using ENV.store.
ENV.store(&#39;bar&#39;, &#39;1&#39;) # =&gt; &#39;1&#39;
ENV[&#39;bar&#39;] # =&gt; &#39;1&#39;
</code></pre>
</li></ul>
</li><li>
<p>If the named environment variable exists:</p>
<ul><li>
<p>If <code>value</code> is not <code>nil</code>, updates the environment variable with value <code>value</code>:</p>

<pre><code># Update &#39;foo&#39; using ENV.[]=.
ENV[&#39;foo&#39;] = &#39;2&#39; # =&gt; &#39;2&#39;
ENV[&#39;foo&#39;] # =&gt; &#39;2&#39;
# Update &#39;bar&#39; using ENV.store.
ENV.store(&#39;bar&#39;, &#39;3&#39;) # =&gt; &#39;3&#39;
ENV[&#39;bar&#39;] # =&gt; &#39;3&#39;
</code></pre>
</li><li>
<p>If <code>value</code> is <code>nil</code>, deletes the environment variable:</p>

<pre><code># Delete &#39;foo&#39; using ENV.[]=.
ENV[&#39;foo&#39;] = nil # =&gt; nil
ENV.include?(&#39;foo&#39;) # =&gt; false
# Delete &#39;bar&#39; using ENV.store.
ENV.store(&#39;bar&#39;, nil) # =&gt; nil
ENV.include?(&#39;bar&#39;) # =&gt; false
</code></pre>
</li></ul>
</li></ul>

<p>Raises an exception if <code>name</code> or <code>value</code> is invalid. See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-store_source')" id="l_method-c-store_source">show</a>
                
              </p>
              <div id="method-c-store_source" class="dyn-source">
                <pre>static VALUE
env_aset_m(VALUE obj, VALUE nm, VALUE val)
{
    return env_aset(nm, val);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-to_a">
            
              <b>ENV.to_a &rarr; array of 2-element arrays
</b>
            
            <a href="../classes/ENV.html#method-c-to_a" name="method-c-to_a" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the contents of <a href="ENV.html"><code>ENV</code></a> as an <a href="Array.html"><code>Array</code></a> of 2-element Arrays, each of which is a name/value pair:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.to_a # =&gt; [[&quot;bar&quot;, &quot;1&quot;], [&quot;foo&quot;, &quot;0&quot;]]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-to_a_source')" id="l_method-c-to_a_source">show</a>
                
              </p>
              <div id="method-c-to_a_source" class="dyn-source">
                <pre>static VALUE
env_to_a(VALUE _)
{
    VALUE ary = rb_ary_new();

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);
            if (s) {
                rb_ary_push(ary, rb_assoc_new(env_str_new(*env, s-*env),
                                              env_str_new2(s+1)));
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return ary;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-to_h">
            
              <b>ENV.to_h                        &rarr; hash of name/value pairs<br />ENV.to_h {|name, value| block } &rarr; hash of name/value pairs
</b>
            
            <a href="../classes/ENV.html#method-c-to_h" name="method-c-to_h" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>With no block, returns a <a href="Hash.html"><code>Hash</code></a> containing all name/value pairs from ENV:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.to_h # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>With a block, returns a <a href="Hash.html"><code>Hash</code></a> whose items are determined by the block. Each name/value pair in <a href="ENV.html"><code>ENV</code></a> is yielded to the block. The block must return a 2-element <a href="Array.html"><code>Array</code></a> (name/value pair) that is added to the return <a href="Hash.html"><code>Hash</code></a> as a key and value:</p>

<pre><code>ENV.to_h { |name, value| [name.to_sym, value.to_i] } # =&gt; {:bar=&gt;1, :foo=&gt;0}
</code></pre>

<p>Raises an exception if the block does not return an Array:</p>

<pre><code>ENV.to_h { |name, value| name } # Raises TypeError (wrong element type String (expected array))
</code></pre>

<p>Raises an exception if the block returns an <a href="Array.html"><code>Array</code></a> of the wrong size:</p>

<pre><code>ENV.to_h { |name, value| [name] } # Raises ArgumentError (element has wrong array length (expected 2, was 1))
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-to_h_source')" id="l_method-c-to_h_source">show</a>
                
              </p>
              <div id="method-c-to_h_source" class="dyn-source">
                <pre>static VALUE
env_to_h(VALUE _)
{
    VALUE hash = env_to_hash();
    if (rb_block_given_p()) {
        hash = rb_hash_to_h_block(hash);
    }
    return hash;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-to_hash">
            
              <b>ENV.to_hash &rarr; hash of name/value pairs
</b>
            
            <a href="../classes/ENV.html#method-c-to_hash" name="method-c-to_hash" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a <a href="Hash.html"><code>Hash</code></a> containing all name/value pairs from ENV:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.to_hash # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-to_hash_source')" id="l_method-c-to_hash_source">show</a>
                
              </p>
              <div id="method-c-to_hash_source" class="dyn-source">
                <pre>static VALUE
env_f_to_hash(VALUE _)
{
    return env_to_hash();
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-to_s">
            
              <b>ENV.to_s &rarr; "ENV"
</b>
            
            <a href="../classes/ENV.html#method-c-to_s" name="method-c-to_s" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <a href="String.html"><code>String</code></a> ‘ENV’:</p>

<pre><code>ENV.to_s # =&gt; &quot;ENV&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-to_s_source')" id="l_method-c-to_s_source">show</a>
                
              </p>
              <div id="method-c-to_s_source" class="dyn-source">
                <pre>static VALUE
env_to_s(VALUE _)
{
    return rb_usascii_str_new2(&quot;ENV&quot;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-update">
            
              <b>ENV.update                                              &rarr; ENV<br />ENV.update(*hashes)                                     &rarr; ENV<br />ENV.update(*hashes) { |name, env_val, hash_val| block } &rarr; ENV<br />ENV.merge!                                              &rarr; ENV<br />ENV.merge!(*hashes)                                     &rarr; ENV<br />ENV.merge!(*hashes) { |name, env_val, hash_val| block } &rarr; ENV
</b>
            
            <a href="../classes/ENV.html#method-c-update" name="method-c-update" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Adds to <a href="ENV.html"><code>ENV</code></a> each key/value pair in the given <code>hash</code>; returns ENV:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.merge!(&#39;baz&#39; =&gt; &#39;2&#39;, &#39;bat&#39; =&gt; &#39;3&#39;) # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;bat&quot;=&gt;&quot;3&quot;, &quot;baz&quot;=&gt;&quot;2&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>Deletes the <a href="ENV.html"><code>ENV</code></a> entry for a hash value that is <code>nil</code>:</p>

<pre><code>ENV.merge!(&#39;baz&#39; =&gt; nil, &#39;bat&#39; =&gt; nil) # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;0&quot;}
</code></pre>

<p>For an already-existing name, if no block given, overwrites the <a href="ENV.html"><code>ENV</code></a> value:</p>

<pre><code>ENV.merge!(&#39;foo&#39; =&gt; &#39;4&#39;) # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;4&quot;}
</code></pre>

<p>For an already-existing name, if block given, yields the name, its <a href="ENV.html"><code>ENV</code></a> value, and its hash value; the block’s return value becomes the new name:</p>

<pre><code>ENV.merge!(&#39;foo&#39; =&gt; &#39;5&#39;) { |name, env_val, hash_val | env_val + hash_val } # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;45&quot;}
</code></pre>

<p>Raises an exception if a name or value is invalid (see <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>);</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.merge!(&#39;foo&#39; =&gt; &#39;6&#39;, :bar =&gt; &#39;7&#39;, &#39;baz&#39; =&gt; &#39;9&#39;) # Raises TypeError (no implicit conversion of Symbol into String)
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;6&quot;}
ENV.merge!(&#39;foo&#39; =&gt; &#39;7&#39;, &#39;bar&#39; =&gt; 8, &#39;baz&#39; =&gt; &#39;9&#39;) # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;foo&quot;=&gt;&quot;7&quot;}
</code></pre>

<p>Raises an exception if the block returns an invalid name: (see <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>):</p>

<pre><code>ENV.merge!(&#39;bat&#39; =&gt; &#39;8&#39;, &#39;foo&#39; =&gt; &#39;9&#39;) { |name, env_val, hash_val | 10 } # Raises TypeError (no implicit conversion of Integer into String)
ENV # =&gt; {&quot;bar&quot;=&gt;&quot;1&quot;, &quot;bat&quot;=&gt;&quot;8&quot;, &quot;foo&quot;=&gt;&quot;7&quot;}
</code></pre>

<p>Note that for the exceptions above, hash pairs preceding an invalid name or value are processed normally; those following are ignored.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-update_source')" id="l_method-c-update_source">show</a>
                
              </p>
              <div id="method-c-update_source" class="dyn-source">
                <pre>static VALUE
env_update(int argc, VALUE *argv, VALUE env)
{
    rb_foreach_func *func = rb_block_given_p() ?
        env_update_block_i : env_update_i;
    for (int i = 0; i &lt; argc; ++i) {
        VALUE hash = argv[i];
        if (env == hash) continue;
        hash = to_hash(hash);
        rb_hash_foreach(hash, func, 0);
    }
    return env;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-value-3F">
            
              <b>ENV.value?(value)     &rarr; true or false<br />ENV.has_value?(value) &rarr; true or false
</b>
            
            <a href="../classes/ENV.html#method-c-value-3F" name="method-c-value-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>value</code> is the value for some environment variable name, <code>false</code> otherwise:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.value?(&#39;0&#39;) # =&gt; true
ENV.has_value?(&#39;0&#39;) # =&gt; true
ENV.value?(&#39;2&#39;) # =&gt; false
ENV.has_value?(&#39;2&#39;) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-value-3F_source')" id="l_method-c-value-3F_source">show</a>
                
              </p>
              <div id="method-c-value-3F_source" class="dyn-source">
                <pre>static VALUE
env_has_value(VALUE dmy, VALUE obj)
{
    obj = rb_check_string_type(obj);
    if (NIL_P(obj)) return Qnil;

    VALUE ret = Qfalse;

    ENV_LOCK();
    {
        char **env = GET_ENVIRON(environ);
        while (*env) {
            char *s = strchr(*env, &#39;=&#39;);
            if (s++) {
                long len = strlen(s);
                if (RSTRING_LEN(obj) == len &amp;&amp; strncmp(s, RSTRING_PTR(obj), len) == 0) {
                    ret = Qtrue;
                    break;
                }
            }
            env++;
        }
        FREE_ENVIRON(environ);
    }
    ENV_UNLOCK();

    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-values">
            
              <b>ENV.values &rarr; array of values
</b>
            
            <a href="../classes/ENV.html#method-c-values" name="method-c-values" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns all environment variable values in an Array:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;)
ENV.values # =&gt; [&#39;1&#39;, &#39;0&#39;]
</code></pre>

<p>The order of the values is OS-dependent. See <a href="ENV.html#class-ENV-label-About+Ordering">About Ordering</a>.</p>

<p>Returns the empty <a href="Array.html"><code>Array</code></a> if <a href="ENV.html"><code>ENV</code></a> is empty.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-values_source')" id="l_method-c-values_source">show</a>
                
              </p>
              <div id="method-c-values_source" class="dyn-source">
                <pre>static VALUE
env_f_values(VALUE _)
{
    return env_values();
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-values_at">
            
              <b>ENV.values_at(*names) &rarr; array of values
</b>
            
            <a href="../classes/ENV.html#method-c-values_at" name="method-c-values_at" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an <a href="Array.html"><code>Array</code></a> containing the environment variable values associated with the given names:</p>

<pre><code>ENV.replace(&#39;foo&#39; =&gt; &#39;0&#39;, &#39;bar&#39; =&gt; &#39;1&#39;, &#39;baz&#39; =&gt; &#39;2&#39;)
ENV.values_at(&#39;foo&#39;, &#39;baz&#39;) # =&gt; [&quot;0&quot;, &quot;2&quot;]
</code></pre>

<p>Returns <code>nil</code> in the <a href="Array.html"><code>Array</code></a> for each name that is not an <a href="ENV.html"><code>ENV</code></a> name:</p>

<pre><code>ENV.values_at(&#39;foo&#39;, &#39;bat&#39;, &#39;bar&#39;, &#39;bam&#39;) # =&gt; [&quot;0&quot;, nil, &quot;1&quot;, nil]
</code></pre>

<p>Returns an empty <a href="Array.html"><code>Array</code></a> if no names given.</p>

<p>Raises an exception if any name is invalid. See <a href="ENV.html#class-ENV-label-Invalid+Names+and+Values">Invalid Names and Values</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-values_at_source')" id="l_method-c-values_at_source">show</a>
                
              </p>
              <div id="method-c-values_at_source" class="dyn-source">
                <pre>static VALUE
env_values_at(int argc, VALUE *argv, VALUE _)
{
    VALUE result;
    long i;

    result = rb_ary_new();
    for (i=0; i&lt;argc; i++) {
        rb_ary_push(result, rb_f_getenv(Qnil, argv[i]));
    }
    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
    
  
</div>

    </main>
  </body>
</html>
