<!DOCTYPE html>
<html lang="en">
<head>
    <title>SyntaxSuggest::ParseBlocksFromIndentLine</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["SyntaxSuggest", "ParseBlocksFromIndentLine"]'>


    <meta property="og:title" value="SyntaxSuggest::ParseBlocksFromIndentLine">

  
    
    <meta name="description" content="This class is responsible for generating initial code blocks that will then later be expanded.  The biggest concern when guessing code blocks, is accidentally grabbing one that contains only an “end”.">
    <meta property="og:description" content="This class is responsible for generating initial code blocks that will then later be expanded.  The biggest concern when guessing code blocks, is accidentally grabbing one that contains only an “end”.">
  

    <meta name="keywords" content="SyntaxSuggest::ParseBlocksFromIndentLine class, new, each_neighbor_block">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Class</span>
            SyntaxSuggest::ParseBlocksFromIndentLine
            
                <span class="parent">&lt;
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h2>
        <ul class="files">
            
            <li><a href="../../files/ruby/lib/syntax_suggest/parse_blocks_from_indent_line_rb.html">ruby/lib/syntax_suggest/parse_blocks_from_indent_line.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This class is responsible for generating initial code blocks that will then later be expanded.</p>

<p>The biggest concern when guessing code blocks, is accidentally grabbing one that contains only an “end”. In this example:</p>

<pre><code>def dog
  begonn # mispelled `begin`
  puts &quot;bark&quot;
  end
end
</code></pre>

<p>The following lines would be matched (from bottom to top):</p>

<pre><code>1) end

2) puts &quot;bark&quot;
   end

3) begonn
   puts &quot;bark&quot;
   end
</code></pre>

<p>At this point it has no where else to expand, and it will yield this inner code as a block</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-each_neighbor_block">each_neighbor_block</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    
      <!-- Section attributes -->
      <h2 class="sectiontitle">Attributes</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>code_lines</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-new">
            
              <b>new</b>(code_lines:)
            
            <a href="../../classes/SyntaxSuggest/ParseBlocksFromIndentLine.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/syntax_suggest/parse_blocks_from_indent_line.rb#L32" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/syntax_suggest/parse_blocks_from_indent_line.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-value">code_lines:</span>)
  <span class="ruby-ivar">@code_lines</span> = <span class="ruby-identifier">code_lines</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-each_neighbor_block">
            
              <b>each_neighbor_block</b>(target_line)
            
            <a href="../../classes/SyntaxSuggest/ParseBlocksFromIndentLine.html#method-i-each_neighbor_block" name="method-i-each_neighbor_block" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Builds blocks from bottom up</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-each_neighbor_block_source')" id="l_method-i-each_neighbor_block_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/syntax_suggest/parse_blocks_from_indent_line.rb#L37" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-each_neighbor_block_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/syntax_suggest/parse_blocks_from_indent_line.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">each_neighbor_block</span>(<span class="ruby-identifier">target_line</span>)
  <span class="ruby-identifier">scan</span> = <span class="ruby-constant">AroundBlockScan</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">code_lines:</span> <span class="ruby-identifier">code_lines</span>, <span class="ruby-value">block:</span> <span class="ruby-constant">CodeBlock</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">lines:</span> <span class="ruby-identifier">target_line</span>))
    .<span class="ruby-identifier">force_add_empty</span>
    .<span class="ruby-identifier">force_add_hidden</span>
    .<span class="ruby-identifier">scan_while</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">target_line</span>.<span class="ruby-identifier">indent</span> }

  <span class="ruby-identifier">neighbors</span> = <span class="ruby-identifier">scan</span>.<span class="ruby-identifier">code_block</span>.<span class="ruby-identifier">lines</span>

  <span class="ruby-identifier">block</span> = <span class="ruby-constant">CodeBlock</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">lines:</span> <span class="ruby-identifier">neighbors</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">neighbors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">2</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">valid?</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">block</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">until</span> <span class="ruby-identifier">neighbors</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">lines</span> = [<span class="ruby-identifier">neighbors</span>.<span class="ruby-identifier">pop</span>]
      <span class="ruby-keyword">while</span> (<span class="ruby-identifier">block</span> = <span class="ruby-constant">CodeBlock</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">lines:</span> <span class="ruby-identifier">lines</span>)) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">invalid?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">neighbors</span>.<span class="ruby-identifier">any?</span>
        <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">prepend</span> <span class="ruby-identifier">neighbors</span>.<span class="ruby-identifier">pop</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">block</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
