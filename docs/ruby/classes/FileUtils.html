<!DOCTYPE html>
<html lang="en">
<head>
    <title>FileUtils</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["FileUtils"]'>


    <meta property="og:title" value="FileUtils">

  
    
    <meta name="description" content="Namespace for file utility methods for copying, moving, removing, etc.  What’s Here  First, what’s elsewhere. Module FileUtils:  Inherits from class Object.">
    <meta property="og:description" content="Namespace for file utility methods for copying, moving, removing, etc.  What’s Here  First, what’s elsewhere. Module FileUtils:  Inherits from class Object.">
  

    <meta name="keywords" content="FileUtils class, pwd, getwd, cd, chdir, uptodate?, mkdir, mkdir_p, mkpath, makedirs, rmdir, ln, link, cp_lr, ln_s, symlink, ln_sf, ln_sr, link_entry, cp, copy, cp_r, copy_entry, copy_file, copy_stream, mv, move, rm, remove, rm_f, safe_unlink, rm_r, rm_rf, rmtree, remove_entry_secure, remove_entry, remove_file, remove_dir, compare_file, identical?, cmp, compare_stream, install, chmod, chmod_R, chown, chown_R, touch, commands, options, have_option?, options_of, collect_method">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Module</span>
            FileUtils
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/lib/fileutils_rb.html">ruby/lib/fileutils.rb</a></li>
            
            <li><a href="../files/ruby/lib/rubygems/ext/ext_conf_builder_rb.html">ruby/lib/rubygems/ext/ext_conf_builder.rb</a></li>
            
            <li><a href="../files/ruby/lib/un_rb.html">ruby/lib/un.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Namespace for file utility methods for copying, moving, removing, etc.</p>

<h2 id="module-FileUtils-label-What-27s+Here">What’s Here</h2>

<p>First, what’s elsewhere. Module FileUtils:</p>
<ul><li>
<p>Inherits from <a href="Object.html">class Object</a>.</p>
</li><li>
<p>Supplements <a href="File.html">class File</a> (but is not included or extended there).</p>
</li></ul>

<p>Here, module FileUtils provides methods that are useful for:</p>
<ul><li>
<p><a href="FileUtils.html#module-FileUtils-label-Creating">Creating</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Deleting">Deleting</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Querying">Querying</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Setting">Setting</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Comparing">Comparing</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Copying">Copying</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Moving">Moving</a>.</p>
</li><li>
<p><a href="FileUtils.html#module-FileUtils-label-Options">Options</a>.</p>
</li></ul>

<h3 id="module-FileUtils-label-Creating">Creating</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-mkdir"><code>::mkdir</code></a>: Creates directories.</p>
</li><li>
<p><a href="FileUtils.html#method-c-mkdir_p"><code>::mkdir_p</code></a>, <a href="FileUtils.html#method-c-makedirs"><code>::makedirs</code></a>, <a href="FileUtils.html#method-c-mkpath"><code>::mkpath</code></a>: Creates directories, also creating ancestor directories as needed.</p>
</li><li>
<p><a href="FileUtils.html#method-c-link_entry"><code>::link_entry</code></a>: Creates a hard link.</p>
</li><li>
<p><a href="FileUtils.html#method-c-ln"><code>::ln</code></a>, <a href="FileUtils.html#method-c-link"><code>::link</code></a>: Creates hard links.</p>
</li><li>
<p><a href="FileUtils.html#method-c-ln_s"><code>::ln_s</code></a>, <a href="FileUtils.html#method-c-symlink"><code>::symlink</code></a>: Creates symbolic links.</p>
</li><li>
<p><a href="FileUtils.html#method-c-ln_sf"><code>::ln_sf</code></a>: Creates symbolic links, overwriting if necessary.</p>
</li><li>
<p><a href="FileUtils.html#method-c-ln_sr"><code>::ln_sr</code></a>: Creates symbolic links relative to targets</p>
</li></ul>

<h3 id="module-FileUtils-label-Deleting">Deleting</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-remove_dir"><code>::remove_dir</code></a>: Removes a directory and its descendants.</p>
</li><li>
<p><a href="FileUtils.html#method-c-remove_entry"><code>::remove_entry</code></a>: Removes an entry, including its descendants if it is a directory.</p>
</li><li>
<p><a href="FileUtils.html#method-c-remove_entry_secure"><code>::remove_entry_secure</code></a>: Like <a href="FileUtils.html#method-c-remove_entry"><code>::remove_entry</code></a>, but removes securely.</p>
</li><li>
<p><a href="FileUtils.html#method-c-remove_file"><code>::remove_file</code></a>: Removes a file entry.</p>
</li><li>
<p><a href="FileUtils.html#method-c-rm"><code>::rm</code></a>, <a href="FileUtils.html#method-c-remove"><code>::remove</code></a>: Removes entries.</p>
</li><li>
<p><a href="FileUtils.html#method-c-rm_f"><code>::rm_f</code></a>, <a href="FileUtils.html#method-c-safe_unlink"><code>::safe_unlink</code></a>: Like <a href="FileUtils.html#method-c-rm"><code>::rm</code></a>, but removes forcibly.</p>
</li><li>
<p><a href="FileUtils.html#method-c-rm_r"><code>::rm_r</code></a>: Removes entries and their descendants.</p>
</li><li>
<p><a href="FileUtils.html#method-c-rm_rf"><code>::rm_rf</code></a>, <a href="FileUtils.html#method-c-rmtree"><code>::rmtree</code></a>: Like <a href="FileUtils.html#method-c-rm_r"><code>::rm_r</code></a>, but removes forcibly.</p>
</li><li>
<p><a href="FileUtils.html#method-c-rmdir"><code>::rmdir</code></a>: Removes directories.</p>
</li></ul>

<h3 id="module-FileUtils-label-Querying">Querying</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-pwd"><code>::pwd</code></a>, <a href="FileUtils.html#method-c-getwd"><code>::getwd</code></a>: Returns the path to the working directory.</p>
</li><li>
<p><a href="FileUtils.html#method-c-uptodate-3F"><code>::uptodate?</code></a>: Returns whether a given entry is newer than given other entries.</p>
</li></ul>

<h3 id="module-FileUtils-label-Setting">Setting</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-cd"><code>::cd</code></a>, <a href="FileUtils.html#method-c-chdir"><code>::chdir</code></a>: Sets the working directory.</p>
</li><li>
<p><a href="FileUtils.html#method-c-chmod"><code>::chmod</code></a>: Sets permissions for an entry.</p>
</li><li>
<p><a href="FileUtils.html#method-c-chmod_R"><code>::chmod_R</code></a>: Sets permissions for an entry and its descendants.</p>
</li><li>
<p><a href="FileUtils.html#method-c-chown"><code>::chown</code></a>: Sets the owner and group for entries.</p>
</li><li>
<p><a href="FileUtils.html#method-c-chown_R"><code>::chown_R</code></a>: Sets the owner and group for entries and their descendants.</p>
</li><li>
<p><a href="FileUtils.html#method-c-touch"><code>::touch</code></a>: Sets modification and access times for entries, creating if necessary.</p>
</li></ul>

<h3 id="module-FileUtils-label-Comparing">Comparing</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-compare_file"><code>::compare_file</code></a>, <a href="FileUtils.html#method-c-cmp"><code>::cmp</code></a>, <a href="FileUtils.html#method-c-identical-3F"><code>::identical?</code></a>: Returns whether two entries are identical.</p>
</li><li>
<p><a href="FileUtils.html#method-c-compare_stream"><code>::compare_stream</code></a>: Returns whether two streams are identical.</p>
</li></ul>

<h3 id="module-FileUtils-label-Copying">Copying</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-copy_entry"><code>::copy_entry</code></a>: Recursively copies an entry.</p>
</li><li>
<p><a href="FileUtils.html#method-c-copy_file"><code>::copy_file</code></a>: Copies an entry.</p>
</li><li>
<p><a href="FileUtils.html#method-c-copy_stream"><code>::copy_stream</code></a>: Copies a stream.</p>
</li><li>
<p><a href="FileUtils.html#method-c-cp"><code>::cp</code></a>, <a href="FileUtils.html#method-c-copy"><code>::copy</code></a>: Copies files.</p>
</li><li>
<p><a href="FileUtils.html#method-c-cp_lr"><code>::cp_lr</code></a>: Recursively creates hard links.</p>
</li><li>
<p><a href="FileUtils.html#method-c-cp_r"><code>::cp_r</code></a>: Recursively copies files, retaining mode, owner, and group.</p>
</li><li>
<p><a href="FileUtils.html#method-c-install"><code>::install</code></a>: Recursively copies files, optionally setting mode, owner, and group.</p>
</li></ul>

<h3 id="module-FileUtils-label-Moving">Moving</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-mv"><code>::mv</code></a>, <a href="FileUtils.html#method-c-move"><code>::move</code></a>: Moves entries.</p>
</li></ul>

<h3 id="module-FileUtils-label-Options">Options</h3>
<ul><li>
<p><a href="FileUtils.html#method-c-collect_method"><code>::collect_method</code></a>: Returns the names of methods that accept a given option.</p>
</li><li>
<p><a href="FileUtils.html#method-c-commands"><code>::commands</code></a>: Returns the names of methods that accept options.</p>
</li><li>
<p><a href="FileUtils.html#method-c-have_option-3F"><code>::have_option?</code></a>: Returns whether a given method accepts a given option.</p>
</li><li>
<p><a href="FileUtils.html#method-c-options"><code>::options</code></a>: Returns all option names.</p>
</li><li>
<p><a href="FileUtils.html#method-c-options_of"><code>::options_of</code></a>: Returns the names of the options for a given method.</p>
</li></ul>

<h2 id="module-FileUtils-label-Path+Arguments">Path Arguments</h2>

<p>Some methods in FileUtils accept <em>path</em> arguments, which are interpreted as paths to filesystem entries:</p>
<ul><li>
<p>If the argument is a string, that value is the path.</p>
</li><li>
<p>If the argument has method <code>:to_path</code>, it is converted via that method.</p>
</li><li>
<p>If the argument has method <code>:to_str</code>, it is converted via that method.</p>
</li></ul>

<h2 id="module-FileUtils-label-About+the+Examples">About the Examples</h2>

<p>Some examples here involve trees of file entries. For these, we sometimes display trees using the <a href="https://en.wikipedia.org/wiki/Tree_(command)">tree command-line utility</a>, which is a recursive directory-listing utility that produces a depth-indented listing of files and directories.</p>

<p>We use a helper method to launch the command and control the format:</p>

<pre><code>def tree(dirpath = &#39;.&#39;)
  command = &quot;tree --noreport --charset=ascii #{dirpath}&quot;
  system(command)
end
</code></pre>

<p>To illustrate:</p>

<pre><code>tree(&#39;src0&#39;)
# =&gt; src0
#    |-- sub0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- sub1
#        |-- src2.txt
#        `-- src3.txt
</code></pre>

<h2 id="module-FileUtils-label-Avoiding+the+TOCTTOU+Vulnerability">Avoiding the TOCTTOU Vulnerability</h2>

<p>For certain methods that recursively remove entries, there is a potential vulnerability called the <a href="https://en.wikipedia.org/wiki/Time-of-check_to_time-of-use">Time-of-check to time-of-use</a>, or TOCTTOU, vulnerability that can exist when:</p>
<ul><li>
<p>An ancestor directory of the entry at the target path is world writable; such directories include <code>/tmp</code>.</p>
</li><li>
<p>The directory tree at the target path includes:</p>
<ul><li>
<p>A world-writable descendant directory.</p>
</li><li>
<p>A symbolic link.</p>
</li></ul>
</li></ul>

<p>To avoid that vulnerability, you can use this method to remove entries:</p>
<ul><li>
<p><a href="FileUtils.html#method-c-remove_entry_secure"><code>FileUtils.remove_entry_secure</code></a>: removes recursively if the target path points to a directory.</p>
</li></ul>

<p>Also available are these methods, each of which calls FileUtils.remove_entry_secure:</p>
<ul><li>
<p><a href="FileUtils.html#method-c-rm_r"><code>FileUtils.rm_r</code></a> with keyword argument <code>secure: true</code>.</p>
</li><li>
<p><a href="FileUtils.html#method-c-rm_rf"><code>FileUtils.rm_rf</code></a> with keyword argument <code>secure: true</code>.</p>
</li></ul>

<p>Finally, this method for moving entries calls FileUtils.remove_entry_secure if the source and destination are on different file systems (which means that the “move” is really a copy and remove):</p>
<ul><li>
<p><a href="FileUtils.html#method-c-mv"><code>FileUtils.mv</code></a> with keyword argument <code>secure: true</code>.</p>
</li></ul>

<p>Method FileUtils.remove_entry_secure removes securely by applying a special pre-process:</p>
<ul><li>
<p>If the target path points to a directory, this method uses methods <a href="File.html#method-i-chown"><code>File#chown</code></a> and <a href="File.html#method-i-chmod"><code>File#chmod</code></a> in removing directories.</p>
</li><li>
<p>The owner of the target directory should be either the current process or the super user (root).</p>
</li></ul>

<p>WARNING: You must ensure that <strong>ALL</strong> parent directories cannot be moved by other untrusted users.  For example, parent directories should not be owned by untrusted users, and should not be world writable except when the sticky bit is set.</p>

<p>For details of this security vulnerability, see Perl cases:</p>
<ul><li>
<p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448">CVE-2005-0448</a>.</p>
</li><li>
<p><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452">CVE-2004-0452</a>.</p>
</li></ul>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="FileUtils/DryRun.html">FileUtils::DryRun</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="FileUtils/NoWrite.html">FileUtils::NoWrite</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="FileUtils/StreamUtils_.html">FileUtils::StreamUtils_</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="FileUtils/Verbose.html">FileUtils::Verbose</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-cd">cd</a>,
              </li>
            
              
              <li>
                <a href="#method-c-chdir">chdir</a>,
              </li>
            
              
              <li>
                <a href="#method-c-chmod">chmod</a>,
              </li>
            
              
              <li>
                <a href="#method-c-chmod_R">chmod_R</a>,
              </li>
            
              
              <li>
                <a href="#method-c-chown">chown</a>,
              </li>
            
              
              <li>
                <a href="#method-c-chown_R">chown_R</a>,
              </li>
            
              
              <li>
                <a href="#method-c-cmp">cmp</a>,
              </li>
            
              
              <li>
                <a href="#method-c-collect_method">collect_method</a>,
              </li>
            
              
              <li>
                <a href="#method-c-commands">commands</a>,
              </li>
            
              
              <li>
                <a href="#method-c-compare_file">compare_file</a>,
              </li>
            
              
              <li>
                <a href="#method-c-compare_stream">compare_stream</a>,
              </li>
            
              
              <li>
                <a href="#method-c-copy">copy</a>,
              </li>
            
              
              <li>
                <a href="#method-c-copy_entry">copy_entry</a>,
              </li>
            
              
              <li>
                <a href="#method-c-copy_file">copy_file</a>,
              </li>
            
              
              <li>
                <a href="#method-c-copy_stream">copy_stream</a>,
              </li>
            
              
              <li>
                <a href="#method-c-cp">cp</a>,
              </li>
            
              
              <li>
                <a href="#method-c-cp_lr">cp_lr</a>,
              </li>
            
              
              <li>
                <a href="#method-c-cp_r">cp_r</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-getwd">getwd</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-have_option-3F">have_option?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-identical-3F">identical?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-install">install</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-link">link</a>,
              </li>
            
              
              <li>
                <a href="#method-c-link_entry">link_entry</a>,
              </li>
            
              
              <li>
                <a href="#method-c-ln">ln</a>,
              </li>
            
              
              <li>
                <a href="#method-c-ln_s">ln_s</a>,
              </li>
            
              
              <li>
                <a href="#method-c-ln_sf">ln_sf</a>,
              </li>
            
              
              <li>
                <a href="#method-c-ln_sr">ln_sr</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-makedirs">makedirs</a>,
              </li>
            
              
              <li>
                <a href="#method-c-mkdir">mkdir</a>,
              </li>
            
              
              <li>
                <a href="#method-c-mkdir_p">mkdir_p</a>,
              </li>
            
              
              <li>
                <a href="#method-c-mkpath">mkpath</a>,
              </li>
            
              
              <li>
                <a href="#method-c-move">move</a>,
              </li>
            
              
              <li>
                <a href="#method-c-mv">mv</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-options">options</a>,
              </li>
            
              
              <li>
                <a href="#method-c-options_of">options_of</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-pwd">pwd</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-remove">remove</a>,
              </li>
            
              
              <li>
                <a href="#method-c-remove_dir">remove_dir</a>,
              </li>
            
              
              <li>
                <a href="#method-c-remove_entry">remove_entry</a>,
              </li>
            
              
              <li>
                <a href="#method-c-remove_entry_secure">remove_entry_secure</a>,
              </li>
            
              
              <li>
                <a href="#method-c-remove_file">remove_file</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rm">rm</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rm_f">rm_f</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rm_r">rm_r</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rm_rf">rm_rf</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rmdir">rmdir</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rmtree">rmtree</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-safe_unlink">safe_unlink</a>,
              </li>
            
              
              <li>
                <a href="#method-c-symlink">symlink</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-touch">touch</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-uptodate-3F">uptodate?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="FileUtils/StreamUtils_.html">
              FileUtils::StreamUtils_
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    
      <!-- Section constants -->
      <h2 class="sectiontitle">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">VERSION</td>
            <td>=</td>
            <td class="attr-value">&quot;1.7.2&quot;</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-cd">
            
              <b>cd</b>(dir, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-cd" name="method-c-cd" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Changes the working directory to the given <code>dir</code>, which should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>:</p>

<p>With no block given, changes the current directory to the directory at <code>dir</code>; returns zero:</p>

<pre><code>FileUtils.pwd # =&gt; &quot;/rdoc/fileutils&quot;
FileUtils.cd(&#39;..&#39;)
FileUtils.pwd # =&gt; &quot;/rdoc&quot;
FileUtils.cd(&#39;fileutils&#39;)
</code></pre>

<p>With a block given, changes the current directory to the directory at <code>dir</code>, calls the block with argument <code>dir</code>, and restores the original current directory; returns the block’s value:</p>

<pre><code>FileUtils.pwd                                     # =&gt; &quot;/rdoc/fileutils&quot;
FileUtils.cd(&#39;..&#39;) { |arg| [arg, FileUtils.pwd] } # =&gt; [&quot;..&quot;, &quot;/rdoc&quot;]
FileUtils.pwd                                     # =&gt; &quot;/rdoc/fileutils&quot;
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.cd(&#39;..&#39;)
FileUtils.cd(&#39;fileutils&#39;)
</code></pre>

<p>Output:</p>

<pre><code>cd ..
cd fileutils
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#method-c-pwd"><code>FileUtils.pwd</code></a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-chdir">chdir</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-cd_source')" id="l_method-c-cd_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L238" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-cd_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yield: dir</span>
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cd #{dir}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-string">&#39;cd -&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">block</span>
  <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-chdir">
            
              <b>chdir</b>(dir, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-chdir" name="method-c-chdir" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-cd">cd</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-chmod">
            
              <b>chmod</b>(mode, list, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-chmod" name="method-c-chmod" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Changes permissions on the entries at the paths given in <code>list</code> (a single path or an array of paths) to the permissions given by <code>mode</code>; returns <code>list</code> if it is an array, <code>[list]</code> otherwise:</p>
<ul><li>
<p>Modifies each entry that is a regular file using <a href="File.html#method-c-chmod"><code>File.chmod</code></a>.</p>
</li><li>
<p>Modifies each entry that is a symbolic link using <a href="File.html#method-c-lchmod"><code>File.lchmod</code></a>.</p>
</li></ul>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>Argument <code>mode</code> may be either an integer or a string:</p>
<ul><li>
<p>Integer <code>mode</code>: represents the permission bits to be set:</p>

<pre><code>FileUtils.chmod(0755, &#39;src0.txt&#39;)
FileUtils.chmod(0644, [&#39;src0.txt&#39;, &#39;src0.dat&#39;])
</code></pre>
</li><li>
<p>String <code>mode</code>: represents the permissions to be set:</p>

<p>The string is of the form <code>[targets][[operator][perms[,perms]]</code>, where:</p>
<ul><li>
<p><code>targets</code> may be any combination of these letters:</p>
<ul><li>
<p><code>&#39;u&#39;</code>: permissions apply to the file’s owner.</p>
</li><li>
<p><code>&#39;g&#39;</code>: permissions apply to users in the file’s group.</p>
</li><li>
<p><code>&#39;o&#39;</code>: permissions apply to other users not in the file’s group.</p>
</li><li>
<p><code>&#39;a&#39;</code> (the default): permissions apply to all users.</p>
</li></ul>
</li><li>
<p><code>operator</code> may be one of these letters:</p>
<ul><li>
<p><code>&#39;+&#39;</code>: adds permissions.</p>
</li><li>
<p><code>&#39;-&#39;</code>: removes permissions.</p>
</li><li>
<p><code>&#39;=&#39;</code>: sets (replaces) permissions.</p>
</li></ul>
</li><li>
<p><code>perms</code> (may be repeated, with separating commas) may be any combination of these letters:</p>
<ul><li>
<p><code>&#39;r&#39;</code>: Read.</p>
</li><li>
<p><code>&#39;w&#39;</code>: Write.</p>
</li><li>
<p><code>&#39;x&#39;</code>: Execute (search, for a directory).</p>
</li><li>
<p><code>&#39;X&#39;</code>: Search (for a directories only; must be used with <code>&#39;+&#39;</code>)</p>
</li><li>
<p><code>&#39;s&#39;</code>: Uid or gid.</p>
</li><li>
<p><code>&#39;t&#39;</code>: Sticky bit.</p>
</li></ul>
</li></ul>

<p>Examples:</p>

<pre><code>FileUtils.chmod(&#39;u=wrx,go=rx&#39;, &#39;src1.txt&#39;)
FileUtils.chmod(&#39;u=wrx,go=rx&#39;, &#39;/usr/bin/ruby&#39;)
</code></pre>
</li></ul>

<p>Keyword arguments:</p>
<ul><li>
<p><code>noop: true</code> - does not change permissions; returns <code>nil</code>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.chmod(0755, &#39;src0.txt&#39;, noop: true, verbose: true)
FileUtils.chmod(0644, [&#39;src0.txt&#39;, &#39;src0.dat&#39;], noop: true, verbose: true)
FileUtils.chmod(&#39;u=wrx,go=rx&#39;, &#39;src1.txt&#39;, noop: true, verbose: true)
FileUtils.chmod(&#39;u=wrx,go=rx&#39;, &#39;/usr/bin/ruby&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>chmod 755 src0.txt
chmod 644 src0.txt src0.dat
chmod u=wrx,go=rx src1.txt
chmod u=wrx,go=rx /usr/bin/ruby
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#method-c-chmod_R"><code>FileUtils.chmod_R</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-chmod_source')" id="l_method-c-chmod_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1803" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-chmod_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1803</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chmod %s %s&#39;</span>, <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>), <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">path</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-chmod_R">
            
              <b>chmod_R</b>(mode, list, noop: nil, verbose: nil, force: nil)
            
            <a href="../classes/FileUtils.html#method-c-chmod_R" name="method-c-chmod_R" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="FileUtils.html#method-c-chmod"><code>FileUtils.chmod</code></a>, but changes permissions recursively.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-chmod_R_source')" id="l_method-c-chmod_R_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1815" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-chmod_R_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1815</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chmod -R%s %s %s&#39;</span>,
                            (<span class="ruby-identifier">force</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;f&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>),
                            <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>), <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">path</span>))
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-chown">
            
              <b>chown</b>(user, group, list, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-chown" name="method-c-chown" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Changes the owner and group on the entries at the paths given in <code>list</code> (a single path or an array of paths) to the given <code>user</code> and <code>group</code>; returns <code>list</code> if it is an array, <code>[list]</code> otherwise:</p>
<ul><li>
<p>Modifies each entry that is a regular file using <a href="File.html#method-c-chown"><code>File.chown</code></a>.</p>
</li><li>
<p>Modifies each entry that is a symbolic link using <a href="File.html#method-c-lchown"><code>File.lchown</code></a>.</p>
</li></ul>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>User and group:</p>
<ul><li>
<p>Argument <code>user</code> may be a user name or a user id; if <code>nil</code> or <code>-1</code>, the user is not changed.</p>
</li><li>
<p>Argument <code>group</code> may be a group name or a group id; if <code>nil</code> or <code>-1</code>, the group is not changed.</p>
</li><li>
<p>The user must be a member of the group.</p>
</li></ul>

<p>Examples:</p>

<pre><code># One path.
# User and group as string names.
File.stat(&#39;src0.txt&#39;).uid # =&gt; 1004
File.stat(&#39;src0.txt&#39;).gid # =&gt; 1004
FileUtils.chown(&#39;user2&#39;, &#39;group1&#39;, &#39;src0.txt&#39;)
File.stat(&#39;src0.txt&#39;).uid # =&gt; 1006
File.stat(&#39;src0.txt&#39;).gid # =&gt; 1005

# User and group as uid and gid.
FileUtils.chown(1004, 1004, &#39;src0.txt&#39;)
File.stat(&#39;src0.txt&#39;).uid # =&gt; 1004
File.stat(&#39;src0.txt&#39;).gid # =&gt; 1004

# Array of paths.
FileUtils.chown(1006, 1005, [&#39;src0.txt&#39;, &#39;src0.dat&#39;])

# Directory (not recursive).
FileUtils.chown(&#39;user2&#39;, &#39;group1&#39;, &#39;.&#39;)
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>noop: true</code> - does not change permissions; returns <code>nil</code>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.chown(&#39;user2&#39;, &#39;group1&#39;, &#39;src0.txt&#39;, noop: true, verbose: true)
FileUtils.chown(1004, 1004, &#39;src0.txt&#39;, noop: true, verbose: true)
FileUtils.chown(1006, 1005, [&#39;src0.txt&#39;, &#39;src0.dat&#39;], noop: true, verbose: true)
FileUtils.chown(&#39;user2&#39;, &#39;group1&#39;, path, noop: true, verbose: true)
FileUtils.chown(&#39;user2&#39;, &#39;group1&#39;, &#39;.&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>chown user2:group1 src0.txt
chown 1004:1004 src0.txt
chown 1006:1005 src0.txt src0.dat
chown user2:group1 src0.txt
chown user2:group1 .
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#method-c-chown_R"><code>FileUtils.chown_R</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-chown_source')" id="l_method-c-chown_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1896" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-chown_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1896</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chown %s %s&#39;</span>,
                            (<span class="ruby-identifier">group</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{user}:#{group}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;:&#39;</span>),
                            <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-chown_R">
            
              <b>chown_R</b>(user, group, list, noop: nil, verbose: nil, force: nil)
            
            <a href="../classes/FileUtils.html#method-c-chown_R" name="method-c-chown_R" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="FileUtils.html#method-c-chown"><code>FileUtils.chown</code></a>, but changes owner and group recursively.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-chown_R_source')" id="l_method-c-chown_R_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1912" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-chown_R_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1912</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-string">&#39;chown -R%s %s %s&#39;</span>,
                            (<span class="ruby-identifier">force</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;f&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-string">&#39;&#39;</span>),
                            (<span class="ruby-identifier">group</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{user}:#{group}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">||</span> <span class="ruby-string">&#39;:&#39;</span>),
                            <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-cmp">
            
              <b>cmp</b>(a, b)
            
            <a href="../classes/FileUtils.html#method-c-cmp" name="method-c-cmp" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-compare_file">compare_file</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-collect_method">
            
              <b>collect_method</b>(opt)
            
            <a href="../classes/FileUtils.html#method-c-collect_method" name="method-c-collect_method" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the string method names of the methods that accept the given keyword option <code>opt</code>; the argument must be a symbol:</p>

<pre><code>FileUtils.collect_method(:preserve) # =&gt; [&quot;cp&quot;, &quot;copy&quot;, &quot;cp_r&quot;, &quot;install&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-collect_method_source')" id="l_method-c-collect_method_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L2609" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-collect_method_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 2609</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">collect_method</span>(<span class="ruby-identifier">opt</span>)
  <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">m</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">opt</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-commands">
            
              <b>commands</b>()
            
            <a href="../classes/FileUtils.html#method-c-commands" name="method-c-commands" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the string names of FileUtils methods that accept one or more keyword arguments:</p>

<pre><code>FileUtils.commands.sort.take(3) # =&gt; [&quot;cd&quot;, &quot;chdir&quot;, &quot;chmod&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-commands_source')" id="l_method-c-commands_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L2570" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-commands_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 2570</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">commands</span>
  <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-compare_file">
            
              <b>compare_file</b>(a, b)
            
            <a href="../classes/FileUtils.html#method-c-compare_file" name="method-c-compare_file" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the contents of files <code>a</code> and <code>b</code> are identical, <code>false</code> otherwise.</p>

<p>Arguments <code>a</code> and <code>b</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>.</p>

<p><a href="FileUtils.html#method-c-identical-3F"><code>FileUtils.identical?</code></a> and <a href="FileUtils.html#method-c-cmp"><code>FileUtils.cmp</code></a> are aliases for <a href="FileUtils.html#method-c-compare_file"><code>FileUtils.compare_file</code></a>.</p>

<p>Related: <a href="FileUtils.html#method-c-compare_stream"><code>FileUtils.compare_stream</code></a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-identical-3F">identical?</a>, <a href="FileUtils.html#method-i-cmp">cmp</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-compare_file_source')" id="l_method-c-compare_file_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1507" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-compare_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1507</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compare_file</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">a</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">b</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">a</span>, <span class="ruby-string">&#39;rb&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fa</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">b</span>, <span class="ruby-string">&#39;rb&#39;</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fb</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">fa</span>, <span class="ruby-identifier">fb</span>)
    }
  }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-compare_stream">
            
              <b>compare_stream</b>(a, b)
            
            <a href="../classes/FileUtils.html#method-c-compare_stream" name="method-c-compare_stream" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the contents of streams <code>a</code> and <code>b</code> are identical, <code>false</code> otherwise.</p>

<p>Arguments <code>a</code> and <code>b</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>.</p>

<p>Related: <a href="FileUtils.html#method-c-compare_file"><code>FileUtils.compare_file</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-compare_stream_source')" id="l_method-c-compare_stream_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1530" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-compare_stream_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1530</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">compare_stream</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
  <span class="ruby-identifier">bsize</span> = <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)

  <span class="ruby-identifier">sa</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">capacity:</span> <span class="ruby-identifier">bsize</span>)
  <span class="ruby-identifier">sb</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">capacity:</span> <span class="ruby-identifier">bsize</span>)

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">a</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>, <span class="ruby-identifier">sa</span>)
    <span class="ruby-identifier">b</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>, <span class="ruby-identifier">sb</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">sa</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">sb</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">while</span> <span class="ruby-identifier">sa</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sb</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-copy">
            
              <b>copy</b>(src, dest, preserve: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-copy" name="method-c-copy" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-cp">cp</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-copy_entry">
            
              <b>copy_entry</b>(src, dest, preserve = false, dereference_root = false, remove_destination = false)
            
            <a href="../classes/FileUtils.html#method-c-copy_entry" name="method-c-copy_entry" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Recursively copies files from <code>src</code> to <code>dest</code>.</p>

<p>Arguments <code>src</code> and <code>dest</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>If <code>src</code> is the path to a file, copies <code>src</code> to <code>dest</code>:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;)
File.exist?(&#39;dest0.txt&#39;) # =&gt; false
FileUtils.copy_entry(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.file?(&#39;dest0.txt&#39;)  # =&gt; true
</code></pre>

<p>If <code>src</code> is a directory, recursively copies <code>src</code> to <code>dest</code>:</p>

<pre><code>tree(&#39;src1&#39;)
# =&gt; src1
#    |-- dir0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- dir1
#        |-- src2.txt
#        `-- src3.txt
FileUtils.copy_entry(&#39;src1&#39;, &#39;dest1&#39;)
tree(&#39;dest1&#39;)
# =&gt; dest1
#    |-- dir0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- dir1
#        |-- src2.txt
#        `-- src3.txt
</code></pre>

<p>The recursive copying preserves file types for regular files, directories, and symbolic links; other file types (FIFO streams, device files, etc.) are not supported.</p>

<p>Keyword arguments:</p>
<ul><li>
<p><code>dereference_root: true</code> - if <code>src</code> is a symbolic link, follows the link.</p>
</li><li>
<p><code>preserve: true</code> - preserves file times.</p>
</li><li>
<p><code>remove_destination: true</code> - removes <code>dest</code> before copying files.</p>
</li></ul>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-copy_entry_source')" id="l_method-c-copy_entry_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1040" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-copy_entry_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1040</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">dereference_root</span>
    <span class="ruby-identifier">src</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">src</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">false</span>).<span class="ruby-identifier">wrap_traverse</span>(<span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>))
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>, <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
  <span class="ruby-keyword">end</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-copy_file">
            
              <b>copy_file</b>(src, dest, preserve = false, dereference = true)
            
            <a href="../classes/FileUtils.html#method-c-copy_file" name="method-c-copy_file" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Copies file from <code>src</code> to <code>dest</code>, which should not be directories.</p>

<p>Arguments <code>src</code> and <code>dest</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>Examples:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;)
FileUtils.copy_file(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.file?(&#39;dest0.txt&#39;) # =&gt; true
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>dereference: false</code> - if <code>src</code> is a symbolic link, does not follow the link.</p>
</li><li>
<p><code>preserve: true</code> - preserves file times.</p>
</li><li>
<p><code>remove_destination: true</code> - removes <code>dest</code> before copying files.</p>
</li></ul>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-copy_file_source')" id="l_method-c-copy_file_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1076" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-copy_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1076</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">ent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference</span>)
  <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">dest</span>
  <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-copy_stream">
            
              <b>copy_stream</b>(src, dest)
            
            <a href="../classes/FileUtils.html#method-c-copy_stream" name="method-c-copy_stream" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Copies IO stream <code>src</code> to IO stream <code>dest</code> via <a href="IO.html#method-c-copy_stream"><code>IO.copy_stream</code></a>.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-copy_stream_source')" id="l_method-c-copy_stream_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1088" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-copy_stream_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1088</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
  <span class="ruby-constant">IO</span>.<span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-cp">
            
              <b>cp</b>(src, dest, preserve: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-cp" name="method-c-cp" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Copies files.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>If <code>src</code> is the path to a file and <code>dest</code> is not the path to a directory, copies <code>src</code> to <code>dest</code>:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;)
File.exist?(&#39;dest0.txt&#39;) # =&gt; false
FileUtils.cp(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.file?(&#39;dest0.txt&#39;)  # =&gt; true
</code></pre>

<p>If <code>src</code> is the path to a file and <code>dest</code> is the path to a directory, copies <code>src</code> to <code>dest/src</code>:</p>

<pre><code>FileUtils.touch(&#39;src1.txt&#39;)
FileUtils.mkdir(&#39;dest1&#39;)
FileUtils.cp(&#39;src1.txt&#39;, &#39;dest1&#39;)
File.file?(&#39;dest1/src1.txt&#39;) # =&gt; true
</code></pre>

<p>If <code>src</code> is an array of paths to files and <code>dest</code> is the path to a directory, copies from each <code>src</code> to <code>dest</code>:</p>

<pre><code>src_file_paths = [&#39;src2.txt&#39;, &#39;src2.dat&#39;]
FileUtils.touch(src_file_paths)
FileUtils.mkdir(&#39;dest2&#39;)
FileUtils.cp(src_file_paths, &#39;dest2&#39;)
File.file?(&#39;dest2/src2.txt&#39;) # =&gt; true
File.file?(&#39;dest2/src2.dat&#39;) # =&gt; true
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>preserve: true</code> - preserves file times.</p>
</li><li>
<p><code>noop: true</code> - does not copy files.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.cp(&#39;src0.txt&#39;, &#39;dest0.txt&#39;, noop: true, verbose: true)
FileUtils.cp(&#39;src1.txt&#39;, &#39;dest1&#39;, noop: true, verbose: true)
FileUtils.cp(src_file_paths, &#39;dest2&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>cp src0.txt dest0.txt
cp src1.txt dest1
cp src2.txt src2.dat dest2
</code></pre>
</li></ul>

<p>Raises an exception if <code>src</code> is a directory.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-copy">copy</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-cp_source')" id="l_method-c-cp_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L873" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-cp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 873</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp#{preserve ? &#39; -p&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">preserve</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-cp_lr">
            
              <b>cp_lr</b>(src, dest, noop: nil, verbose: nil, dereference_root: true, remove_destination: false)
            
            <a href="../classes/FileUtils.html#method-c-cp_lr" name="method-c-cp_lr" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates <a href="https://en.wikipedia.org/wiki/Hard_link">hard links</a>.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>If <code>src</code> is the path to a directory and <code>dest</code> does not exist, creates links <code>dest</code> and descendents pointing to <code>src</code> and its descendents:</p>

<pre><code>tree(&#39;src0&#39;)
# =&gt; src0
#    |-- sub0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- sub1
#        |-- src2.txt
#        `-- src3.txt
File.exist?(&#39;dest0&#39;) # =&gt; false
FileUtils.cp_lr(&#39;src0&#39;, &#39;dest0&#39;)
tree(&#39;dest0&#39;)
# =&gt; dest0
#    |-- sub0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- sub1
#        |-- src2.txt
#        `-- src3.txt
</code></pre>

<p>If <code>src</code> and <code>dest</code> are both paths to directories, creates links <code>dest/src</code> and descendents pointing to <code>src</code> and its descendents:</p>

<pre><code>tree(&#39;src1&#39;)
# =&gt; src1
#    |-- sub0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- sub1
#        |-- src2.txt
#        `-- src3.txt
FileUtils.mkdir(&#39;dest1&#39;)
FileUtils.cp_lr(&#39;src1&#39;, &#39;dest1&#39;)
tree(&#39;dest1&#39;)
# =&gt; dest1
#    `-- src1
#        |-- sub0
#        |   |-- src0.txt
#        |   `-- src1.txt
#        `-- sub1
#            |-- src2.txt
#            `-- src3.txt
</code></pre>

<p>If <code>src</code> is an array of paths to entries and <code>dest</code> is the path to a directory, for each path <code>filepath</code> in <code>src</code>, creates a link at <code>dest/filepath</code> pointing to that path:</p>

<pre><code>tree(&#39;src2&#39;)
# =&gt; src2
#    |-- sub0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- sub1
#        |-- src2.txt
#        `-- src3.txt
FileUtils.mkdir(&#39;dest2&#39;)
FileUtils.cp_lr([&#39;src2/sub0&#39;, &#39;src2/sub1&#39;], &#39;dest2&#39;)
tree(&#39;dest2&#39;)
# =&gt; dest2
#    |-- sub0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- sub1
#        |-- src2.txt
#        `-- src3.txt
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>dereference_root: false</code> - if <code>src</code> is a symbolic link, does not dereference it.</p>
</li><li>
<p><code>noop: true</code> - does not create links.</p>
</li><li>
<p><code>remove_destination: true</code> - removes <code>dest</code> before creating links.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.cp_lr(&#39;src0&#39;, &#39;dest0&#39;, noop: true, verbose: true)
FileUtils.cp_lr(&#39;src1&#39;, &#39;dest1&#39;, noop: true, verbose: true)
FileUtils.cp_lr([&#39;src2/sub0&#39;, &#39;src2/sub1&#39;], &#39;dest2&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>cp -lr src0 dest0
cp -lr src1 dest1
cp -lr src2/sub0 src2/sub1 dest2
</code></pre>
</li></ul>

<p>Raises an exception if <code>dest</code> is the path to an existing file or directory and keyword argument <code>remove_destination: true</code> is not given.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-cp_lr_source')" id="l_method-c-cp_lr_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L627" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-cp_lr_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 627</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp_lr</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>,
          <span class="ruby-value">dereference_root:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">remove_destination:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -lr#{remove_destination ? &#39; --remove-destination&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">link_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">dereference_root</span>, <span class="ruby-identifier">remove_destination</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-cp_r">
            
              <b>cp_r</b>(src, dest, preserve: nil, noop: nil, verbose: nil, dereference_root: true, remove_destination: nil)
            
            <a href="../classes/FileUtils.html#method-c-cp_r" name="method-c-cp_r" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Recursively copies files.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>The mode, owner, and group are retained in the copy; to change those, use <a href="FileUtils.html#method-c-install"><code>FileUtils.install</code></a> instead.</p>

<p>If <code>src</code> is the path to a file and <code>dest</code> is not the path to a directory, copies <code>src</code> to <code>dest</code>:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;)
File.exist?(&#39;dest0.txt&#39;) # =&gt; false
FileUtils.cp_r(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.file?(&#39;dest0.txt&#39;)  # =&gt; true
</code></pre>

<p>If <code>src</code> is the path to a file and <code>dest</code> is the path to a directory, copies <code>src</code> to <code>dest/src</code>:</p>

<pre><code>FileUtils.touch(&#39;src1.txt&#39;)
FileUtils.mkdir(&#39;dest1&#39;)
FileUtils.cp_r(&#39;src1.txt&#39;, &#39;dest1&#39;)
File.file?(&#39;dest1/src1.txt&#39;) # =&gt; true
</code></pre>

<p>If <code>src</code> is the path to a directory and <code>dest</code> does not exist, recursively copies <code>src</code> to <code>dest</code>:</p>

<pre><code>tree(&#39;src2&#39;)
# =&gt; src2
#    |-- dir0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- dir1
#    |-- src2.txt
#    `-- src3.txt
FileUtils.exist?(&#39;dest2&#39;) # =&gt; false
FileUtils.cp_r(&#39;src2&#39;, &#39;dest2&#39;)
tree(&#39;dest2&#39;)
# =&gt; dest2
#    |-- dir0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- dir1
#    |-- src2.txt
#    `-- src3.txt
</code></pre>

<p>If <code>src</code> and <code>dest</code> are paths to directories, recursively copies <code>src</code> to <code>dest/src</code>:</p>

<pre><code>tree(&#39;src3&#39;)
# =&gt; src3
#    |-- dir0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- dir1
#    |-- src2.txt
#    `-- src3.txt
FileUtils.mkdir(&#39;dest3&#39;)
FileUtils.cp_r(&#39;src3&#39;, &#39;dest3&#39;)
tree(&#39;dest3&#39;)
# =&gt; dest3
#    `-- src3
#      |-- dir0
#      |   |-- src0.txt
#      |   `-- src1.txt
#      `-- dir1
#          |-- src2.txt
#          `-- src3.txt
</code></pre>

<p>If <code>src</code> is an array of paths and <code>dest</code> is a directory, recursively copies from each path in <code>src</code> to <code>dest</code>; the paths in <code>src</code> may point to files and/or directories.</p>

<p>Keyword arguments:</p>
<ul><li>
<p><code>dereference_root: false</code> - if <code>src</code> is a symbolic link, does not dereference it.</p>
</li><li>
<p><code>noop: true</code> - does not copy files.</p>
</li><li>
<p><code>preserve: true</code> - preserves file times.</p>
</li><li>
<p><code>remove_destination: true</code> - removes <code>dest</code> before copying files.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.cp_r(&#39;src0.txt&#39;, &#39;dest0.txt&#39;, noop: true, verbose: true)
FileUtils.cp_r(&#39;src1.txt&#39;, &#39;dest1&#39;, noop: true, verbose: true)
FileUtils.cp_r(&#39;src2&#39;, &#39;dest2&#39;, noop: true, verbose: true)
FileUtils.cp_r(&#39;src3&#39;, &#39;dest3&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>cp -r src0.txt dest0.txt
cp -r src1.txt dest1
cp -r src2 dest2
cp -r src3 dest3
</code></pre>
</li></ul>

<p>Raises an exception of <code>src</code> is the path to a directory and <code>dest</code> is the path to a file.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-cp_r_source')" id="l_method-c-cp_r_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L985" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-cp_r_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 985</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>,
         <span class="ruby-value">dereference_root:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">remove_destination:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -r#{preserve ? &#39;p&#39; : &#39;&#39;}#{remove_destination ? &#39; --remove-destination&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">preserve</span>, <span class="ruby-identifier">dereference_root</span>, <span class="ruby-identifier">remove_destination</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-getwd">
            
              <b>getwd</b>()
            
            <a href="../classes/FileUtils.html#method-c-getwd" name="method-c-getwd" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-pwd">pwd</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-have_option-3F">
            
              <b>have_option?</b>(mid, opt)
            
            <a href="../classes/FileUtils.html#method-c-have_option-3F" name="method-c-have_option-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if method <code>mid</code> accepts the given option <code>opt</code>, <code>false</code> otherwise; the arguments may be strings or symbols:</p>

<pre><code>FileUtils.have_option?(:chmod, :noop) # =&gt; true
FileUtils.have_option?(&#39;chmod&#39;, &#39;secure&#39;) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-have_option-3F_source')" id="l_method-c-have_option-3F_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L2588" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-have_option-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 2588</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">have_option?</span>(<span class="ruby-identifier">mid</span>, <span class="ruby-identifier">opt</span>)
  <span class="ruby-identifier">li</span> = <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">mid</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;no such method: #{mid}&quot;</span>
  <span class="ruby-identifier">li</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">opt</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-identical-3F">
            
              <b>identical?</b>(a, b)
            
            <a href="../classes/FileUtils.html#method-c-identical-3F" name="method-c-identical-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-compare_file">compare_file</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-install">
            
              <b>install</b>(src, dest, mode: nil, owner: nil, group: nil, preserve: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-install" name="method-c-install" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Copies a file entry. See <a href="https://man7.org/linux/man-pages/man1/install.1.html">install(1)</a>.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>;</p>

<p>If the entry at <code>dest</code> does not exist, copies from <code>src</code> to <code>dest</code>:</p>

<pre><code>File.read(&#39;src0.txt&#39;)    # =&gt; &quot;aaa\n&quot;
File.exist?(&#39;dest0.txt&#39;) # =&gt; false
FileUtils.install(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.read(&#39;dest0.txt&#39;)   # =&gt; &quot;aaa\n&quot;
</code></pre>

<p>If <code>dest</code> is a file entry, copies from <code>src</code> to <code>dest</code>, overwriting:</p>

<pre><code>File.read(&#39;src1.txt&#39;)  # =&gt; &quot;aaa\n&quot;
File.read(&#39;dest1.txt&#39;) # =&gt; &quot;bbb\n&quot;
FileUtils.install(&#39;src1.txt&#39;, &#39;dest1.txt&#39;)
File.read(&#39;dest1.txt&#39;) # =&gt; &quot;aaa\n&quot;
</code></pre>

<p>If <code>dest</code> is a directory entry, copies from <code>src</code> to <code>dest/src</code>, overwriting if necessary:</p>

<pre><code>File.read(&#39;src2.txt&#39;)       # =&gt; &quot;aaa\n&quot;
File.read(&#39;dest2/src2.txt&#39;) # =&gt; &quot;bbb\n&quot;
FileUtils.install(&#39;src2.txt&#39;, &#39;dest2&#39;)
File.read(&#39;dest2/src2.txt&#39;) # =&gt; &quot;aaa\n&quot;
</code></pre>

<p>If <code>src</code> is an array of paths and <code>dest</code> points to a directory, copies each path <code>path</code> in <code>src</code> to <code>dest/path</code>:</p>

<pre><code>File.file?(&#39;src3.txt&#39;) # =&gt; true
File.file?(&#39;src3.dat&#39;) # =&gt; true
FileUtils.mkdir(&#39;dest3&#39;)
FileUtils.install([&#39;src3.txt&#39;, &#39;src3.dat&#39;], &#39;dest3&#39;)
File.file?(&#39;dest3/src3.txt&#39;) # =&gt; true
File.file?(&#39;dest3/src3.dat&#39;) # =&gt; true
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>group: <em>group</em></code> - changes the group if not <code>nil</code>, using <a href="File.html#method-c-chown"><code>File.chown</code></a>.</p>
</li><li>
<p><code>mode: <em>permissions</em></code> - changes the permissions. using <a href="File.html#method-c-chmod"><code>File.chmod</code></a>.</p>
</li><li>
<p><code>noop: true</code> - does not copy entries; returns <code>nil</code>.</p>
</li><li>
<p><code>owner: <em>owner</em></code> - changes the owner if not <code>nil</code>, using <a href="File.html#method-c-chown"><code>File.chown</code></a>.</p>
</li><li>
<p><code>preserve: true</code> - preserve timestamps using <a href="File.html#method-c-utime"><code>File.utime</code></a>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.install(&#39;src0.txt&#39;, &#39;dest0.txt&#39;, noop: true, verbose: true)
FileUtils.install(&#39;src1.txt&#39;, &#39;dest1.txt&#39;, noop: true, verbose: true)
FileUtils.install(&#39;src2.txt&#39;, &#39;dest2&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>install -c src0.txt dest0.txt
install -c src1.txt dest1.txt
install -c src2.txt dest2
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Copying">methods for copying</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-install_source')" id="l_method-c-install_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1609" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-install_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1609</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">owner:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">group:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">preserve:</span> <span class="ruby-keyword">nil</span>,
            <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-identifier">msg</span> = <span class="ruby-string">+&quot;install -c&quot;</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; -p&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; -m &#39;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">mode_to_s</span>(<span class="ruby-identifier">mode</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; -o #{owner}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">owner</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; -g #{group}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">group</span>
    <span class="ruby-identifier">msg</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39; &#39;</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">src</span>,<span class="ruby-identifier">dest</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>)
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">msg</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">owner</span>)
  <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">s</span>)
    <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>)
      <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&#39;/&#39;</span>)
        <span class="ruby-identifier">mkdir_p</span> <span class="ruby-identifier">d</span>
        <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span> <span class="ruby-operator">+</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">s</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">mkdir_p</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;..&#39;</span>, <span class="ruby-identifier">d</span>)
        <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">st</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">preserve</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">fu_mode</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">st</span>), <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uid</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">gid</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-link">
            
              <b>link</b>(src, dest, force: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-link" name="method-c-link" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-ln">ln</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-link_entry">
            
              <b>link_entry</b>(src, dest, dereference_root = false, remove_destination = false)
            
            <a href="../classes/FileUtils.html#method-c-link_entry" name="method-c-link_entry" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates <a href="https://en.wikipedia.org/wiki/Hard_link">hard links</a>; returns <code>nil</code>.</p>

<p>Arguments <code>src</code> and <code>dest</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>If <code>src</code> is the path to a file and <code>dest</code> does not exist, creates a hard link at <code>dest</code> pointing to <code>src</code>:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;)
File.exist?(&#39;dest0.txt&#39;) # =&gt; false
FileUtils.link_entry(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.file?(&#39;dest0.txt&#39;)  # =&gt; true
</code></pre>

<p>If <code>src</code> is the path to a directory and <code>dest</code> does not exist, recursively creates hard links at <code>dest</code> pointing to paths in <code>src</code>:</p>

<pre><code>FileUtils.mkdir_p([&#39;src1/dir0&#39;, &#39;src1/dir1&#39;])
src_file_paths = [
  &#39;src1/dir0/t0.txt&#39;,
  &#39;src1/dir0/t1.txt&#39;,
  &#39;src1/dir1/t2.txt&#39;,
  &#39;src1/dir1/t3.txt&#39;,
  ]
FileUtils.touch(src_file_paths)
File.directory?(&#39;dest1&#39;)        # =&gt; true
FileUtils.link_entry(&#39;src1&#39;, &#39;dest1&#39;)
File.file?(&#39;dest1/dir0/t0.txt&#39;) # =&gt; true
File.file?(&#39;dest1/dir0/t1.txt&#39;) # =&gt; true
File.file?(&#39;dest1/dir1/t2.txt&#39;) # =&gt; true
File.file?(&#39;dest1/dir1/t3.txt&#39;) # =&gt; true
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>dereference_root: true</code> - dereferences <code>src</code> if it is a symbolic link.</p>
</li><li>
<p><code>remove_destination: true</code> - removes <code>dest</code> before creating links.</p>
</li></ul>

<p>Raises an exception if <code>dest</code> is the path to an existing file or directory and keyword argument <code>remove_destination: true</code> is not given.</p>

<p>Related: <a href="FileUtils.html#method-c-ln"><code>FileUtils.ln</code></a> (has different options).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-link_entry_source')" id="l_method-c-link_entry_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L812" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-link_entry_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 812</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">link_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
    <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-ln">
            
              <b>ln</b>(src, dest, force: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-ln" name="method-c-ln" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates <a href="https://en.wikipedia.org/wiki/Hard_link">hard links</a>.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>When <code>src</code> is the path to an existing file and <code>dest</code> is the path to a non-existent file, creates a hard link at <code>dest</code> pointing to <code>src</code>; returns zero:</p>

<pre><code>Dir.children(&#39;tmp0/&#39;)                    # =&gt; [&quot;t.txt&quot;]
Dir.children(&#39;tmp1/&#39;)                    # =&gt; []
FileUtils.ln(&#39;tmp0/t.txt&#39;, &#39;tmp1/t.lnk&#39;) # =&gt; 0
Dir.children(&#39;tmp1/&#39;)                    # =&gt; [&quot;t.lnk&quot;]
</code></pre>

<p>When <code>src</code> is the path to an existing file and <code>dest</code> is the path to an existing directory, creates a hard link at <code>dest/src</code> pointing to <code>src</code>; returns zero:</p>

<pre><code>Dir.children(&#39;tmp2&#39;)               # =&gt; [&quot;t.dat&quot;]
Dir.children(&#39;tmp3&#39;)               # =&gt; []
FileUtils.ln(&#39;tmp2/t.dat&#39;, &#39;tmp3&#39;) # =&gt; 0
Dir.children(&#39;tmp3&#39;)               # =&gt; [&quot;t.dat&quot;]
</code></pre>

<p>When <code>src</code> is an array of paths to existing files and <code>dest</code> is the path to an existing directory, then for each path <code>target</code> in <code>src</code>, creates a hard link at <code>dest/target</code> pointing to <code>target</code>; returns <code>src</code>:</p>

<pre><code>Dir.children(&#39;tmp4/&#39;)                               # =&gt; []
FileUtils.ln([&#39;tmp0/t.txt&#39;, &#39;tmp2/t.dat&#39;], &#39;tmp4/&#39;) # =&gt; [&quot;tmp0/t.txt&quot;, &quot;tmp2/t.dat&quot;]
Dir.children(&#39;tmp4/&#39;)                               # =&gt; [&quot;t.dat&quot;, &quot;t.txt&quot;]
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>force: true</code> - overwrites <code>dest</code> if it exists.</p>
</li><li>
<p><code>noop: true</code> - does not create links.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.ln(&#39;tmp0/t.txt&#39;, &#39;tmp1/t.lnk&#39;, verbose: true)
FileUtils.ln(&#39;tmp2/t.dat&#39;, &#39;tmp3&#39;, verbose: true)
FileUtils.ln([&#39;tmp0/t.txt&#39;, &#39;tmp2/t.dat&#39;], &#39;tmp4/&#39;, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>ln tmp0/t.txt tmp1/t.lnk
ln tmp2/t.dat tmp3
ln tmp0/t.txt tmp2/t.dat tmp4/
</code></pre>
</li></ul>

<p>Raises an exception if <code>dest</code> is the path to an existing file and keyword argument <code>force</code> is not <code>true</code>.</p>

<p>Related: <a href="FileUtils.html#method-c-link_entry"><code>FileUtils.link_entry</code></a> (has different options).</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-link">link</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-ln_source')" id="l_method-c-ln_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L516" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-ln_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 516</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln#{force ? &#39; -f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-ln_s">
            
              <b>ln_s</b>(src, dest, force: nil, relative: false, target_directory: true, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-ln_s" name="method-c-ln_s" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates <a href="https://en.wikipedia.org/wiki/Symbolic_link">symbolic links</a>.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>If <code>src</code> is the path to an existing file:</p>
<ul><li>
<p>When <code>dest</code> is the path to a non-existent file, creates a symbolic link at <code>dest</code> pointing to <code>src</code>:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;)
File.exist?(&#39;dest0.txt&#39;)   # =&gt; false
FileUtils.ln_s(&#39;src0.txt&#39;, &#39;dest0.txt&#39;)
File.symlink?(&#39;dest0.txt&#39;) # =&gt; true
</code></pre>
</li><li>
<p>When <code>dest</code> is the path to an existing file, creates a symbolic link at <code>dest</code> pointing to <code>src</code> if and only if keyword argument <code>force: true</code> is given (raises an exception otherwise):</p>

<pre><code>FileUtils.touch(&#39;src1.txt&#39;)
FileUtils.touch(&#39;dest1.txt&#39;)
FileUtils.ln_s(&#39;src1.txt&#39;, &#39;dest1.txt&#39;, force: true)
FileTest.symlink?(&#39;dest1.txt&#39;) # =&gt; true

FileUtils.ln_s(&#39;src1.txt&#39;, &#39;dest1.txt&#39;) # Raises Errno::EEXIST.
</code></pre>
</li></ul>

<p>If <code>dest</code> is the path to a directory, creates a symbolic link at <code>dest/src</code> pointing to <code>src</code>:</p>

<pre><code>FileUtils.touch(&#39;src2.txt&#39;)
FileUtils.mkdir(&#39;destdir2&#39;)
FileUtils.ln_s(&#39;src2.txt&#39;, &#39;destdir2&#39;)
File.symlink?(&#39;destdir2/src2.txt&#39;) # =&gt; true
</code></pre>

<p>If <code>src</code> is an array of paths to existing files and <code>dest</code> is a directory, for each child <code>child</code> in <code>src</code> creates a symbolic link <code>dest/child</code> pointing to <code>child</code>:</p>

<pre><code>FileUtils.mkdir(&#39;srcdir3&#39;)
FileUtils.touch(&#39;srcdir3/src0.txt&#39;)
FileUtils.touch(&#39;srcdir3/src1.txt&#39;)
FileUtils.mkdir(&#39;destdir3&#39;)
FileUtils.ln_s([&#39;srcdir3/src0.txt&#39;, &#39;srcdir3/src1.txt&#39;], &#39;destdir3&#39;)
File.symlink?(&#39;destdir3/src0.txt&#39;) # =&gt; true
File.symlink?(&#39;destdir3/src1.txt&#39;) # =&gt; true
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>force: true</code> - overwrites <code>dest</code> if it exists.</p>
</li><li>
<p><code>relative: false</code> - create links relative to <code>dest</code>.</p>
</li><li>
<p><code>noop: true</code> - does not create links.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.ln_s(&#39;src0.txt&#39;, &#39;dest0.txt&#39;, noop: true, verbose: true)
FileUtils.ln_s(&#39;src1.txt&#39;, &#39;destdir1&#39;, noop: true, verbose: true)
FileUtils.ln_s(&#39;src2.txt&#39;, &#39;dest2.txt&#39;, force: true, noop: true, verbose: true)
FileUtils.ln_s([&#39;srcdir3/src0.txt&#39;, &#39;srcdir3/src1.txt&#39;], &#39;destdir3&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>ln -s src0.txt dest0.txt
ln -s src1.txt destdir1
ln -sf src2.txt dest2.txt
ln -s srcdir3/src0.txt srcdir3/src1.txt destdir3
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#method-c-ln_sf"><code>FileUtils.ln_sf</code></a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-symlink">symlink</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-ln_s_source')" id="l_method-c-ln_s_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L706" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-ln_s_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 706</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_s</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">relative:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">target_directory:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">relative</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">ln_sr</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-identifier">force</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{force ? &#39;f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-ln_sf">
            
              <b>ln_sf</b>(src, dest, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-ln_sf" name="method-c-ln_sf" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="FileUtils.html#method-c-ln_s"><code>FileUtils.ln_s</code></a>, but always with keyword argument <code>force: true</code> given.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-ln_sf_source')" id="l_method-c-ln_sf_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L724" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-ln_sf_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 724</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_sf</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ln_s</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-ln_sr">
            
              <b>ln_sr</b>(src, dest, target_directory: true, force: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-ln_sr" name="method-c-ln_sr" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="FileUtils.html#method-c-ln_s"><code>FileUtils.ln_s</code></a>, but create links relative to <code>dest</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-ln_sr_source')" id="l_method-c-ln_sr_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L731" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-ln_sr_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 731</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">ln_sr</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">target_directory:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">options</span> = <span class="ruby-node">&quot;#{force ? &#39;f&#39; : &#39;&#39;}#{target_directory ? &#39;&#39; : &#39;T&#39;}&quot;</span>
  <span class="ruby-identifier">dest</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">path</span>(<span class="ruby-identifier">dest</span>)
  <span class="ruby-identifier">srcs</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">src</span>)
  <span class="ruby-identifier">link</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">target_dir_p</span> = <span class="ruby-keyword">true</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">s</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">path</span>(<span class="ruby-identifier">s</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_dir_p</span>
      <span class="ruby-identifier">d</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">destdirs</span> = <span class="ruby-identifier">dest</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">s</span>))
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">destdirs</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">d</span> = <span class="ruby-identifier">dest</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">destdirs</span> = <span class="ruby-identifier">fu_split_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">realpath</span>(<span class="ruby-identifier">destdirs</span>))
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">fu_starting_path?</span>(<span class="ruby-identifier">s</span>)
      <span class="ruby-identifier">srcdirs</span> = <span class="ruby-identifier">fu_split_path</span>((<span class="ruby-constant">File</span>.<span class="ruby-identifier">realdirpath</span>(<span class="ruby-identifier">s</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">s</span>)))
      <span class="ruby-identifier">base</span> = <span class="ruby-identifier">fu_relative_components_from</span>(<span class="ruby-identifier">srcdirs</span>, <span class="ruby-identifier">destdirs</span>)
      <span class="ruby-identifier">s</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">base</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">srcdirs</span> = <span class="ruby-identifier">fu_clean_components</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">fu_split_path</span>(<span class="ruby-identifier">s</span>))
      <span class="ruby-identifier">base</span> = <span class="ruby-identifier">fu_relative_components_from</span>(<span class="ruby-identifier">fu_split_path</span>(<span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>), <span class="ruby-identifier">destdirs</span>)
      <span class="ruby-keyword">while</span> <span class="ruby-identifier">srcdirs</span>.<span class="ruby-identifier">first</span>&amp;. <span class="ruby-identifier">==</span> <span class="ruby-string">&quot;..&quot;</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">base</span>.<span class="ruby-identifier">last</span>&amp;.<span class="ruby-identifier">!=</span>(<span class="ruby-string">&quot;..&quot;</span>) <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">fu_starting_path?</span>(<span class="ruby-identifier">base</span>.<span class="ruby-identifier">last</span>)
        <span class="ruby-identifier">srcdirs</span>.<span class="ruby-identifier">shift</span>
        <span class="ruby-identifier">base</span>.<span class="ruby-identifier">pop</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">s</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">base</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">srcdirs</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{options} #{s} #{d}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">force</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">srcs</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">link</span>[<span class="ruby-identifier">srcs</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">target_directory</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dest</span>)]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">srcs</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">link</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-makedirs">
            
              <b>makedirs</b>(list, mode: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-makedirs" name="method-c-makedirs" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-mkdir_p">mkdir_p</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-mkdir">
            
              <b>mkdir</b>(list, mode: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-mkdir" name="method-c-mkdir" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates directories at the paths in the given <code>list</code> (a single path or an array of paths); returns <code>list</code> if it is an array, <code>[list]</code> otherwise.</p>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>With no keyword arguments, creates a directory at each <code>path</code> in <code>list</code> by calling: <code>Dir.mkdir(path, mode)</code>; see <a href="Dir.html#method-c-mkdir"><code>Dir.mkdir</code></a>:</p>

<pre><code>FileUtils.mkdir(%w[tmp0 tmp1]) # =&gt; [&quot;tmp0&quot;, &quot;tmp1&quot;]
FileUtils.mkdir(&#39;tmp4&#39;)        # =&gt; [&quot;tmp4&quot;]
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>mode: <em>mode</em></code> - also calls <code>File.chmod(mode, path)</code>; see <a href="File.html#method-c-chmod"><code>File.chmod</code></a>.</p>
</li><li>
<p><code>noop: true</code> - does not create directories.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.mkdir(%w[tmp0 tmp1], verbose: true)
FileUtils.mkdir(%w[tmp2 tmp3], mode: 0700, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>mkdir tmp0 tmp1
mkdir -m 700 tmp2 tmp3
</code></pre>
</li></ul>

<p>Raises an exception if any path points to an existing file or directory, or if for any reason a directory cannot be created.</p>

<p>Related: <a href="FileUtils.html#method-c-mkdir_p"><code>FileUtils.mkdir_p</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-mkdir_source')" id="l_method-c-mkdir_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L316" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-mkdir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 316</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir #{mode ? (&#39;-m %03o &#39; % mode) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-mkdir_p">
            
              <b>mkdir_p</b>(list, mode: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-mkdir_p" name="method-c-mkdir_p" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates directories at the paths in the given <code>list</code> (a single path or an array of paths), also creating ancestor directories as needed; returns <code>list</code> if it is an array, <code>[list]</code> otherwise.</p>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>With no keyword arguments, creates a directory at each <code>path</code> in <code>list</code>, along with any needed ancestor directories, by calling: <code>Dir.mkdir(path, mode)</code>; see <a href="Dir.html#method-c-mkdir"><code>Dir.mkdir</code></a>:</p>

<pre><code>FileUtils.mkdir_p(%w[tmp0/tmp1 tmp2/tmp3]) # =&gt; [&quot;tmp0/tmp1&quot;, &quot;tmp2/tmp3&quot;]
FileUtils.mkdir_p(&#39;tmp4/tmp5&#39;)             # =&gt; [&quot;tmp4/tmp5&quot;]
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>mode: <em>mode</em></code> - also calls <code>File.chmod(mode, path)</code>; see <a href="File.html#method-c-chmod"><code>File.chmod</code></a>.</p>
</li><li>
<p><code>noop: true</code> - does not create directories.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.mkdir_p(%w[tmp0 tmp1], verbose: true)
FileUtils.mkdir_p(%w[tmp2 tmp3], mode: 0700, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>mkdir -p tmp0 tmp1
mkdir -p -m 700 tmp2 tmp3
</code></pre>
</li></ul>

<p>Raises an exception if for any reason a directory cannot be created.</p>

<p><a href="FileUtils.html#method-c-mkpath"><code>FileUtils.mkpath</code></a> and <a href="FileUtils.html#method-c-makedirs"><code>FileUtils.makedirs</code></a> are aliases for <a href="FileUtils.html#method-c-mkdir_p"><code>FileUtils.mkdir_p</code></a>.</p>

<p>Related: <a href="FileUtils.html#method-c-mkdir"><code>FileUtils.mkdir</code></a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-mkpath">mkpath</a>, <a href="FileUtils.html#method-i-makedirs">makedirs</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-mkdir_p_source')" id="l_method-c-mkdir_p_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L365" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-mkdir_p_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 365</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">mode:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir -p #{mode ? (&#39;-m %03o &#39; % mode) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">item</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">remove_trailing_slash</span>(<span class="ruby-identifier">item</span>)

    <span class="ruby-identifier">stack</span> = []
    <span class="ruby-keyword">until</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>) <span class="ruby-operator">||</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">path</span>
      <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">path</span>
      <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">dir</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-mkpath">
            
              <b>mkpath</b>(list, mode: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-mkpath" name="method-c-mkpath" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-mkdir_p">mkdir_p</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-move">
            
              <b>move</b>(src, dest, force: nil, noop: nil, verbose: nil, secure: nil)
            
            <a href="../classes/FileUtils.html#method-c-move" name="method-c-move" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-mv">mv</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-mv">
            
              <b>mv</b>(src, dest, force: nil, noop: nil, verbose: nil, secure: nil)
            
            <a href="../classes/FileUtils.html#method-c-mv" name="method-c-mv" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Moves entries.</p>

<p>Arguments <code>src</code> (a single path or an array of paths) and <code>dest</code> (a single path) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>If <code>src</code> and <code>dest</code> are on different file systems, first copies, then removes <code>src</code>.</p>

<p>May cause a local vulnerability if not called with keyword argument <code>secure: true</code>; see <a href="FileUtils.html#module-FileUtils-label-Avoiding+the+TOCTTOU+Vulnerability">Avoiding the TOCTTOU Vulnerability</a>.</p>

<p>If <code>src</code> is the path to a single file or directory and <code>dest</code> does not exist, moves <code>src</code> to <code>dest</code>:</p>

<pre><code>tree(&#39;src0&#39;)
# =&gt; src0
#    |-- src0.txt
#    `-- src1.txt
File.exist?(&#39;dest0&#39;) # =&gt; false
FileUtils.mv(&#39;src0&#39;, &#39;dest0&#39;)
File.exist?(&#39;src0&#39;)  # =&gt; false
tree(&#39;dest0&#39;)
# =&gt; dest0
#    |-- src0.txt
#    `-- src1.txt
</code></pre>

<p>If <code>src</code> is an array of paths to files and directories and <code>dest</code> is the path to a directory, copies from each path in the array to <code>dest</code>:</p>

<pre><code>File.file?(&#39;src1.txt&#39;) # =&gt; true
tree(&#39;src1&#39;)
# =&gt; src1
#    |-- src.dat
#    `-- src.txt
Dir.empty?(&#39;dest1&#39;)    # =&gt; true
FileUtils.mv([&#39;src1.txt&#39;, &#39;src1&#39;], &#39;dest1&#39;)
tree(&#39;dest1&#39;)
# =&gt; dest1
#    |-- src1
#    |   |-- src.dat
#    |   `-- src.txt
#    `-- src1.txt
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>force: true</code> - if the move includes removing <code>src</code> (that is, if <code>src</code> and <code>dest</code> are on different file systems), ignores raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>
</li><li>
<p><code>noop: true</code> - does not move files.</p>
</li><li>
<p><code>secure: true</code> - removes <code>src</code> securely; see details at <a href="FileUtils.html#method-c-remove_entry_secure"><code>FileUtils.remove_entry_secure</code></a>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.mv(&#39;src0&#39;, &#39;dest0&#39;, noop: true, verbose: true)
FileUtils.mv([&#39;src1.txt&#39;, &#39;src1&#39;], &#39;dest1&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>mv src0 dest0
mv src1.txt src1 dest1
</code></pre>
</li></ul>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-move">move</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-mv_source')" id="l_method-c-mv_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1157" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-mv_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mv#{force ? &#39; -f&#39; : &#39;&#39;} #{[src,dest].flatten.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">exist?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">directory?</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-identifier">d</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EXDEV</span>,
             <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EPERM</span> <span class="ruby-comment"># move from unencrypted to encrypted dir (ext4)</span>
        <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">secure</span>
          <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">force</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">force</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-options">
            
              <b>options</b>()
            
            <a href="../classes/FileUtils.html#method-c-options" name="method-c-options" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the string keyword names:</p>

<pre><code>FileUtils.options.take(3) # =&gt; [&quot;noop&quot;, &quot;verbose&quot;, &quot;force&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-options_source')" id="l_method-c-options_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L2578" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-options_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 2578</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">options</span>
  <span class="ruby-constant">OPT_TABLE</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-options_of">
            
              <b>options_of</b>(mid)
            
            <a href="../classes/FileUtils.html#method-c-options_of" name="method-c-options_of" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the string keyword name for method <code>mid</code>; the argument may be a string or a symbol:</p>

<pre><code>FileUtils.options_of(:rm) # =&gt; [&quot;force&quot;, &quot;noop&quot;, &quot;verbose&quot;]
FileUtils.options_of(&#39;mv&#39;) # =&gt; [&quot;force&quot;, &quot;noop&quot;, &quot;verbose&quot;, &quot;secure&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-options_of_source')" id="l_method-c-options_of_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L2599" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-options_of_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 2599</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">options_of</span>(<span class="ruby-identifier">mid</span>)
  <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-identifier">mid</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sym</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sym</span>.<span class="ruby-identifier">to_s</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-pwd">
            
              <b>pwd</b>()
            
            <a href="../classes/FileUtils.html#method-c-pwd" name="method-c-pwd" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string containing the path to the current directory:</p>

<pre><code>FileUtils.pwd # =&gt; &quot;/rdoc/fileutils&quot;
</code></pre>

<p>Related: <a href="FileUtils.html#method-c-cd"><code>FileUtils.cd</code></a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-getwd">getwd</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-pwd_source')" id="l_method-c-pwd_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L197" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-pwd_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 197</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">pwd</span>
  <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-remove">
            
              <b>remove</b>(list, force: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-remove" name="method-c-remove" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-rm">rm</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-remove_dir">
            
              <b>remove_dir</b>(path, force = false)
            
            <a href="../classes/FileUtils.html#method-c-remove_dir" name="method-c-remove_dir" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Recursively removes the directory entry given by <code>path</code>, which should be the entry for a regular file, a symbolic link, or a directory.</p>

<p>Argument <code>path</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>.</p>

<p>Optional argument <code>force</code> specifies whether to ignore raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-remove_dir_source')" id="l_method-c-remove_dir_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1492" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-remove_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1492</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_dir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>   <span class="ruby-comment"># FIXME?? check if it is a directory</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-remove_entry">
            
              <b>remove_entry</b>(path, force = false)
            
            <a href="../classes/FileUtils.html#method-c-remove_entry" name="method-c-remove_entry" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes the entry given by <code>path</code>, which should be the entry for a regular file, a symbolic link, or a directory.</p>

<p>Argument <code>path</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>.</p>

<p>Optional argument <code>force</code> specifies whether to ignore raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>

<p>Related: <a href="FileUtils.html#method-c-remove_entry_secure"><code>FileUtils.remove_entry_secure</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-remove_entry_source')" id="l_method-c-remove_entry_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1449" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-remove_entry_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1449</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-remove_entry_secure">
            
              <b>remove_entry_secure</b>(path, force = false)
            
            <a href="../classes/FileUtils.html#method-c-remove_entry_secure" name="method-c-remove_entry_secure" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Securely removes the entry given by <code>path</code>, which should be the entry for a regular file, a symbolic link, or a directory.</p>

<p>Argument <code>path</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>.</p>

<p>Avoids a local vulnerability that can exist in certain circumstances; see <a href="FileUtils.html#module-FileUtils-label-Avoiding+the+TOCTTOU+Vulnerability">Avoiding the TOCTTOU Vulnerability</a>.</p>

<p>Optional argument <code>force</code> specifies whether to ignore raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-remove_entry_secure_source')" id="l_method-c-remove_entry_secure_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1351" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-remove_entry_secure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1351</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_have_symlink?</span>
    <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">fullpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">directory?</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># is a directory.</span>
  <span class="ruby-identifier">parent_st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">fullpath</span>))
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">world_writable?</span>
    <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">sticky?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: #{path.inspect} (parent directory mode #{&#39;%o&#39; % parent_st.mode})&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># freeze tree root</span>
  <span class="ruby-identifier">euid</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">euid</span>
  <span class="ruby-identifier">dot_file</span> = <span class="ruby-identifier">fullpath</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/.&quot;</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">dot_file</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">stat</span>)
        <span class="ruby-comment"># symlink (TOC-to-TOU attack?)</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
    }
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EISDIR</span> <span class="ruby-comment"># JRuby in non-native mode can&#39;t open files as dirs</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">dot_file</span>).<span class="ruby-identifier">tap</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">fstat</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">fstat</span>)
        <span class="ruby-comment"># symlink (TOC-to-TOU attack?)</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>, <span class="ruby-identifier">dot_file</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>, <span class="ruby-identifier">dot_file</span>
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>))
    <span class="ruby-comment"># TOC-to-TOU attack?</span>
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># ---- tree root is frozen ----</span>
  <span class="ruby-identifier">root</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">preorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">directory?</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">root</span>.<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-remove_file">
            
              <b>remove_file</b>(path, force = false)
            
            <a href="../classes/FileUtils.html#method-c-remove_file" name="method-c-remove_file" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes the file entry given by <code>path</code>, which should be the entry for a regular file or a symbolic link.</p>

<p>Argument <code>path</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as a path</a>.</p>

<p>Optional argument <code>force</code> specifies whether to ignore raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-remove_file_source')" id="l_method-c-remove_file_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1473" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-remove_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1473</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">remove_file</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">force</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rm">
            
              <b>rm</b>(list, force: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-rm" name="method-c-rm" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes entries at the paths in the given <code>list</code> (a single path or an array of paths) returns <code>list</code>, if it is an array, <code>[list]</code> otherwise.</p>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>With no keyword arguments, removes files at the paths given in <code>list</code>:</p>

<pre><code>FileUtils.touch([&#39;src0.txt&#39;, &#39;src0.dat&#39;])
FileUtils.rm([&#39;src0.dat&#39;, &#39;src0.txt&#39;]) # =&gt; [&quot;src0.dat&quot;, &quot;src0.txt&quot;]
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>force: true</code> - ignores raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>
</li><li>
<p><code>noop: true</code> - does not remove files; returns <code>nil</code>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.rm([&#39;src0.dat&#39;, &#39;src0.txt&#39;], noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>rm src0.dat src0.txt
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-remove">remove</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rm_source')" id="l_method-c-rm_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1216" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-rm_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm#{force ? &#39; -f&#39; : &#39;&#39;} #{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>

  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rm_f">
            
              <b>rm_f</b>(list, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-rm_f" name="method-c-rm_f" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Equivalent to:</p>

<pre><code>FileUtils.rm(list, force: true, **kwargs)
</code></pre>

<p>Argument <code>list</code> (a single path or an array of paths) should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>See <a href="FileUtils.html#method-c-rm"><code>FileUtils.rm</code></a> for keyword arguments.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-safe_unlink">safe_unlink</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rm_f_source')" id="l_method-c-rm_f_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1241" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-rm_f_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1241</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_f</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">rm</span> <span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rm_r">
            
              <b>rm_r</b>(list, force: nil, noop: nil, verbose: nil, secure: nil)
            
            <a href="../classes/FileUtils.html#method-c-rm_r" name="method-c-rm_r" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes entries at the paths in the given <code>list</code> (a single path or an array of paths); returns <code>list</code>, if it is an array, <code>[list]</code> otherwise.</p>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>May cause a local vulnerability if not called with keyword argument <code>secure: true</code>; see <a href="FileUtils.html#module-FileUtils-label-Avoiding+the+TOCTTOU+Vulnerability">Avoiding the TOCTTOU Vulnerability</a>.</p>

<p>For each file path, removes the file at that path:</p>

<pre><code>FileUtils.touch([&#39;src0.txt&#39;, &#39;src0.dat&#39;])
FileUtils.rm_r([&#39;src0.dat&#39;, &#39;src0.txt&#39;])
File.exist?(&#39;src0.txt&#39;) # =&gt; false
File.exist?(&#39;src0.dat&#39;) # =&gt; false
</code></pre>

<p>For each directory path, recursively removes files and directories:</p>

<pre><code>tree(&#39;src1&#39;)
# =&gt; src1
#    |-- dir0
#    |   |-- src0.txt
#    |   `-- src1.txt
#    `-- dir1
#        |-- src2.txt
#        `-- src3.txt
FileUtils.rm_r(&#39;src1&#39;)
File.exist?(&#39;src1&#39;) # =&gt; false
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>force: true</code> - ignores raised exceptions of <a href="StandardError.html"><code>StandardError</code></a> and its descendants.</p>
</li><li>
<p><code>noop: true</code> - does not remove entries; returns <code>nil</code>.</p>
</li><li>
<p><code>secure: true</code> - removes <code>src</code> securely; see details at <a href="FileUtils.html#method-c-remove_entry_secure"><code>FileUtils.remove_entry_secure</code></a>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.rm_r([&#39;src0.dat&#39;, &#39;src0.txt&#39;], noop: true, verbose: true)
FileUtils.rm_r(&#39;src1&#39;, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>rm -r src0.dat src0.txt
rm -r src1
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rm_r_source')" id="l_method-c-rm_r_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1299" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-rm_r_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1299</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm -r#{force ? &#39;f&#39; : &#39;&#39;} #{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">secure</span>
      <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rm_rf">
            
              <b>rm_rf</b>(list, noop: nil, verbose: nil, secure: nil)
            
            <a href="../classes/FileUtils.html#method-c-rm_rf" name="method-c-rm_rf" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Equivalent to:</p>

<pre><code>FileUtils.rm_r(list, force: true, **kwargs)
</code></pre>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>May cause a local vulnerability if not called with keyword argument <code>secure: true</code>; see <a href="FileUtils.html#module-FileUtils-label-Avoiding+the+TOCTTOU+Vulnerability">Avoiding the TOCTTOU Vulnerability</a>.</p>

<p>See <a href="FileUtils.html#method-c-rm_r"><code>FileUtils.rm_r</code></a> for keyword arguments.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="FileUtils.html#method-i-rmtree">rmtree</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rm_rf_source')" id="l_method-c-rm_rf_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L1328" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-rm_rf_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 1328</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">secure:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">list</span>, <span class="ruby-value">force:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">noop:</span> <span class="ruby-identifier">noop</span>, <span class="ruby-value">verbose:</span> <span class="ruby-identifier">verbose</span>, <span class="ruby-value">secure:</span> <span class="ruby-identifier">secure</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rmdir">
            
              <b>rmdir</b>(list, parents: nil, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-rmdir" name="method-c-rmdir" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes directories at the paths in the given <code>list</code> (a single path or an array of paths); returns <code>list</code>, if it is an array, <code>[list]</code> otherwise.</p>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>With no keyword arguments, removes the directory at each <code>path</code> in <code>list</code>, by calling: <code>Dir.rmdir(path)</code>; see <a href="Dir.html#method-c-rmdir"><code>Dir.rmdir</code></a>:</p>

<pre><code>FileUtils.rmdir(%w[tmp0/tmp1 tmp2/tmp3]) # =&gt; [&quot;tmp0/tmp1&quot;, &quot;tmp2/tmp3&quot;]
FileUtils.rmdir(&#39;tmp4/tmp5&#39;)             # =&gt; [&quot;tmp4/tmp5&quot;]
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>parents: true</code> - removes successive ancestor directories if empty.</p>
</li><li>
<p><code>noop: true</code> - does not remove directories.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.rmdir(%w[tmp0/tmp1 tmp2/tmp3], parents: true, verbose: true)
FileUtils.rmdir(&#39;tmp4/tmp5&#39;, parents: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>rmdir -p tmp0/tmp1 tmp2/tmp3
rmdir -p tmp4/tmp5
</code></pre>
</li></ul>

<p>Raises an exception if a directory does not exist or if for any reason a directory cannot be removed.</p>

<p>Related: <a href="FileUtils.html#module-FileUtils-label-Deleting">methods for deleting</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rmdir_source')" id="l_method-c-rmdir_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L442" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-rmdir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 442</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">parents:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rmdir #{parents ? &#39;-p &#39; : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-identifier">remove_trailing_slash</span>(<span class="ruby-identifier">dir</span>))
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">parents</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">until</span> (<span class="ruby-identifier">parent</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">dir</span>)) <span class="ruby-operator">==</span> <span class="ruby-string">&#39;.&#39;</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span>
          <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">parent</span>
          <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dir</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOTEMPTY</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rmtree">
            
              <b>rmtree</b>(list, noop: nil, verbose: nil, secure: nil)
            
            <a href="../classes/FileUtils.html#method-c-rmtree" name="method-c-rmtree" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-rm_rf">rm_rf</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-safe_unlink">
            
              <b>safe_unlink</b>(list, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-safe_unlink" name="method-c-safe_unlink" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-rm_f">rm_f</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-symlink">
            
              <b>symlink</b>(src, dest, force: nil, relative: false, target_directory: true, noop: nil, verbose: nil)
            
            <a href="../classes/FileUtils.html#method-c-symlink" name="method-c-symlink" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="FileUtils.html#method-i-ln_s">ln_s</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-touch">
            
              <b>touch</b>(list, noop: nil, verbose: nil, mtime: nil, nocreate: nil)
            
            <a href="../classes/FileUtils.html#method-c-touch" name="method-c-touch" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Updates modification times (mtime) and access times (atime) of the entries given by the paths in <code>list</code> (a single path or an array of paths); returns <code>list</code> if it is an array, <code>[list]</code> otherwise.</p>

<p>By default, creates an empty file for any path to a non-existent entry; use keyword argument <code>nocreate</code> to raise an exception instead.</p>

<p>Argument <code>list</code> or its elements should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>.</p>

<p>Examples:</p>

<pre><code># Single path.
f = File.new(&#39;src0.txt&#39;) # Existing file.
f.atime # =&gt; 2022-06-10 11:11:21.200277 -0700
f.mtime # =&gt; 2022-06-10 11:11:21.200277 -0700
FileUtils.touch(&#39;src0.txt&#39;)
f = File.new(&#39;src0.txt&#39;)
f.atime # =&gt; 2022-06-11 08:28:09.8185343 -0700
f.mtime # =&gt; 2022-06-11 08:28:09.8185343 -0700

# Array of paths.
FileUtils.touch([&#39;src0.txt&#39;, &#39;src0.dat&#39;])
</code></pre>

<p>Keyword arguments:</p>
<ul><li>
<p><code>mtime: <em>time</em></code> - sets the entry’s mtime to the given time, instead of the current time.</p>
</li><li>
<p><code>nocreate: true</code> - raises an exception if the entry does not exist.</p>
</li><li>
<p><code>noop: true</code> - does not touch entries; returns <code>nil</code>.</p>
</li><li>
<p><code>verbose: true</code> - prints an equivalent command:</p>

<pre><code>FileUtils.touch(&#39;src0.txt&#39;, noop: true, verbose: true)
FileUtils.touch([&#39;src0.txt&#39;, &#39;src0.dat&#39;], noop: true, verbose: true)
FileUtils.touch(path, noop: true, verbose: true)
</code></pre>

<p>Output:</p>

<pre><code>touch src0.txt
touch src0.txt src0.dat
touch src0.txt
</code></pre>
</li></ul>

<p>Related: <a href="FileUtils.html#method-c-uptodate-3F"><code>FileUtils.uptodate?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-touch_source')" id="l_method-c-touch_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L2006" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-touch_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 2006</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-value">noop:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">verbose:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">mtime:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">nocreate:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">mtime</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose</span>
    <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;touch #{nocreate ? &#39;-c &#39; : &#39;&#39;}#{t ? t.strftime(&#39;-t %Y%m%d%H%M.%S &#39;) : &#39;&#39;}#{list.join &#39; &#39;}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">noop</span>
  <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">path</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">created</span>
      <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-string">&#39;a&#39;</span>) {
        ;
      }
      <span class="ruby-identifier">created</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">retry</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">t</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-uptodate-3F">
            
              <b>uptodate?</b>(new, old_list)
            
            <a href="../classes/FileUtils.html#method-c-uptodate-3F" name="method-c-uptodate-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the file at path <code>new</code> is newer than all the files at paths in array <code>old_list</code>; <code>false</code> otherwise.</p>

<p>Argument <code>new</code> and the elements of <code>old_list</code> should be <a href="FileUtils.html#module-FileUtils-label-Path+Arguments">interpretable as paths</a>:</p>

<pre><code>FileUtils.uptodate?(&#39;Rakefile&#39;, [&#39;Gemfile&#39;, &#39;README.md&#39;]) # =&gt; true
FileUtils.uptodate?(&#39;Gemfile&#39;, [&#39;Rakefile&#39;, &#39;README.md&#39;]) # =&gt; false
</code></pre>

<p>A non-existent file is considered to be infinitely old.</p>

<p>Related: <a href="FileUtils.html#method-c-touch"><code>FileUtils.touch</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-uptodate-3F_source')" id="l_method-c-uptodate-3F_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/fileutils.rb#L264" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-uptodate-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/fileutils.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">uptodate?</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old_list</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">new_time</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">new</span>)
  <span class="ruby-identifier">old_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">old</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">old</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
    
  
</div>

    </main>
  </body>
</html>
