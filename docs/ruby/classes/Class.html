<!DOCTYPE html>
<html lang="en">
<head>
    <title>Class</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["Class"]'>


    <meta property="og:title" value="Class">

  
    
    <meta name="description" content="Extends any Class to include json_creatable? method.  Classes in Ruby are first-class objects—each is an instance of class Class.">
    <meta property="og:description" content="Extends any Class to include json_creatable? method.  Classes in Ruby are first-class objects—each is an instance of class Class.">
  

    <meta name="keywords" content="Class class, json_creatable?, allocate, new, new, superclass, subclasses, attached_object">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Class</span>
            Class
            
                <span class="parent">&lt;
                    
                    <a href="Module.html">Module</a>
                    
                </span>
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/ext/json/lib/json/common_rb.html">ruby/ext/json/lib/json/common.rb</a></li>
            
            <li><a href="../files/ruby/object_c.html">ruby/object.c</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>Extends any <a href="Class.html"><code>Class</code></a> to include <em>json_creatable?</em> method.</p>

<p>Classes in Ruby are first-class objects—each is an instance of class <a href="Class.html"><code>Class</code></a>.</p>

<p>Typically, you create a new class by using:</p>

<pre><code>class Name
 # some code describing the class behavior
end
</code></pre>

<p>When a new class is created, an object of type <a href="Class.html"><code>Class</code></a> is initialized and assigned to a global constant (Name in this case).</p>

<p>When <code>Name.new</code> is called to create a new object, the <a href="Class.html#method-i-new"><code>new</code></a> method in <a href="Class.html"><code>Class</code></a> is run by default. This can be demonstrated by overriding <a href="Class.html#method-i-new"><code>new</code></a> in Class:</p>

<pre><code>class Class
  alias old_new new
  def new(*args)
    print &quot;Creating a new &quot;, self.name, &quot;\n&quot;
    old_new(*args)
  end
end

class Name
end

n = Name.new
</code></pre>

<p><em>produces:</em></p>

<pre><code>Creating a new Name
</code></pre>

<p>Classes, modules, and objects are interrelated. In the diagram that follows, the vertical arrows represent inheritance, and the parentheses metaclasses. All metaclasses are instances of the class ‘Class’.</p>

<pre><code>                         +---------+             +-...
                         |         |             |
         BasicObject-----|--&gt;(BasicObject)-------|-...
             ^           |         ^             |
             |           |         |             |
          Object---------|-----&gt;(Object)---------|-...
             ^           |         ^             |
             |           |         |             |
             +-------+   |         +--------+    |
             |       |   |         |        |    |
             |    Module-|---------|---&gt;(Module)-|-...
             |       ^   |         |        ^    |
             |       |   |         |        |    |
             |     Class-|---------|----&gt;(Class)-|-...
             |       ^   |         |        ^    |
             |       +---+         |        +----+
             |                     |
obj---&gt;OtherClass----------&gt;(OtherClass)-----------...
</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-allocate">allocate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-attached_object">attached_object</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>J</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-json_creatable-3F">json_creatable?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-subclasses">subclasses</a>,
              </li>
            
              
              <li>
                <a href="#method-i-superclass">superclass</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-new">
            
              <b>Class.new(super_class=Object)               &rarr; a_class<br />Class.new(super_class=Object) { |mod| ... } &rarr; a_class
</b>
            
            <a href="../classes/Class.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates a new anonymous (unnamed) class with the given superclass (or <a href="Object.html"><code>Object</code></a> if no parameter is given). You can give a class a name by assigning the class object to a constant.</p>

<p>If a block is given, it is passed the class object, and the block is evaluated in the context of this class like <a href="Module.html#method-i-class_eval"><code>class_eval</code></a>.</p>

<pre><code>fred = Class.new do
  def meth1
    &quot;hello&quot;
  end
  def meth2
    &quot;bye&quot;
  end
end

a = fred.new     #=&gt; #&lt;#&lt;Class:0x100381890&gt;:0x100376b98&gt;
a.meth1          #=&gt; &quot;hello&quot;
a.meth2          #=&gt; &quot;bye&quot;
</code></pre>

<p>Assign the class to a constant (name starting uppercase) if you want to treat it like a regular class.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre>static VALUE
rb_class_initialize(int argc, VALUE *argv, VALUE klass)
{
    VALUE super;

    if (RCLASS_SUPER(klass) != 0 || klass == rb_cBasicObject) {
        rb_raise(rb_eTypeError, &quot;already initialized class&quot;);
    }
    if (rb_check_arity(argc, 0, 1) == 0) {
        super = rb_cObject;
    }
    else {
        super = argv[0];
        rb_check_inheritable(super);
        if (super != rb_cBasicObject &amp;&amp; !RCLASS_SUPER(super)) {
            rb_raise(rb_eTypeError, &quot;can&#39;t inherit uninitialized class&quot;);
        }
    }
    RCLASS_SET_SUPER(klass, super);
    rb_make_metaclass(klass, RBASIC(super)-&gt;klass);
    rb_class_inherited(super, klass);
    rb_mod_initialize_exec(klass);

    return klass;
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-allocate">
            
              <b>class.allocate()   &rarr;   obj
</b>
            
            <a href="../classes/Class.html#method-i-allocate" name="method-i-allocate" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Allocates space for a new object of <em>class</em>’s class and does not call initialize on the new instance. The returned object must be an instance of <em>class</em>.</p>

<pre><code>klass = Class.new do
  def initialize(*args)
    @initialized = true
  end

  def initialized?
    @initialized || false
  end
end

klass.allocate.initialized? #=&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-allocate_source')" id="l_method-i-allocate_source">show</a>
                
              </p>
              <div id="method-i-allocate_source" class="dyn-source">
                <pre>static VALUE
rb_class_alloc_m(VALUE klass)
{
    rb_alloc_func_t allocator = class_get_alloc_func(klass);
    if (!rb_obj_respond_to(klass, rb_intern(&quot;allocate&quot;), 1)) {
        rb_raise(rb_eTypeError, &quot;calling %&quot;PRIsVALUE&quot;.allocate is prohibited&quot;,
                 klass);
    }
    return class_call_alloc_func(allocator, klass);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-attached_object">
            
              <b>attached_object &rarr; object
</b>
            
            <a href="../classes/Class.html#method-i-attached_object" name="method-i-attached_object" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the object for which the receiver is the singleton class.</p>

<p>Raises an <a href="TypeError.html"><code>TypeError</code></a> if the class is not a singleton class.</p>

<pre><code>class Foo; end

Foo.singleton_class.attached_object        #=&gt; Foo
Foo.attached_object                        #=&gt; TypeError: `Foo&#39; is not a singleton class
Foo.new.singleton_class.attached_object    #=&gt; #&lt;Foo:0x000000010491a370&gt;
TrueClass.attached_object                  #=&gt; TypeError: `TrueClass&#39; is not a singleton class
NilClass.attached_object                   #=&gt; TypeError: `NilClass&#39; is not a singleton class
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-attached_object_source')" id="l_method-i-attached_object_source">show</a>
                
              </p>
              <div id="method-i-attached_object_source" class="dyn-source">
                <pre>VALUE
rb_class_attached_object(VALUE klass)
{
    if (!FL_TEST(klass, FL_SINGLETON)) {
        rb_raise(rb_eTypeError, &quot;`%&quot;PRIsVALUE&quot;&#39; is not a singleton class&quot;, klass);
    }

    return RCLASS_ATTACHED_OBJECT(klass);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-json_creatable-3F">
            
              <b>json_creatable?</b>()
            
            <a href="../classes/Class.html#method-i-json_creatable-3F" name="method-i-json_creatable-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns true if this class can be used to create an instance from a serialised <a href="JSON.html"><code>JSON</code></a> string. The class has to implement a class method <em>json_create</em> that expects a hash as first parameter. The hash should include the required data.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-json_creatable-3F_source')" id="l_method-i-json_creatable-3F_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/7b55c452b7d9a295d148ff882e0197cd139a9f8f/ext/json/lib/json/common.rb#L694" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-json_creatable-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/json/lib/json/common.rb, line 694</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">json_creatable?</span>
  <span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:json_create</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-new">
            
              <b>class.new(args, ...)    &rarr;  obj
</b>
            
            <a href="../classes/Class.html#method-i-new" name="method-i-new" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Calls <a href="Class.html#method-i-allocate"><code>allocate</code></a> to create a new object of <em>class</em>’s class, then invokes that object’s initialize method, passing it <em>args</em>.  This is the method that ends up getting called whenever an object is constructed using <code>.new</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-new_source')" id="l_method-i-new_source">show</a>
                
              </p>
              <div id="method-i-new_source" class="dyn-source">
                <pre>VALUE
rb_class_new_instance_pass_kw(int argc, const VALUE *argv, VALUE klass)
{
    VALUE obj;

    obj = rb_class_alloc(klass);
    rb_obj_call_init_kw(obj, argc, argv, RB_PASS_CALLED_KEYWORDS);

    return obj;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-subclasses">
            
              <b>subclasses &rarr; array
</b>
            
            <a href="../classes/Class.html#method-i-subclasses" name="method-i-subclasses" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of classes where the receiver is the direct superclass of the class, excluding singleton classes. The order of the returned array is not defined.</p>

<pre><code>class A; end
class B &lt; A; end
class C &lt; B; end
class D &lt; A; end

A.subclasses        #=&gt; [D, B]
B.subclasses        #=&gt; [C]
C.subclasses        #=&gt; []
</code></pre>

<p>Anonymous subclasses (not associated with a constant) are returned, too:</p>

<pre><code>c = Class.new(A)
A.subclasses        # =&gt; [#&lt;Class:0x00007f003c77bd78&gt;, D, B]
</code></pre>

<p>Note that the parent does not hold references to subclasses and doesn’t prevent them from being garbage collected. This means that the subclass might disappear when all references to it are dropped:</p>

<pre><code># drop the reference to subclass, it can be garbage-collected now
c = nil

A.subclasses
# It can be
#  =&gt; [#&lt;Class:0x00007f003c77bd78&gt;, D, B]
# ...or just
#  =&gt; [D, B]
# ...depending on whether garbage collector was run
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-subclasses_source')" id="l_method-i-subclasses_source">show</a>
                
              </p>
              <div id="method-i-subclasses_source" class="dyn-source">
                <pre>VALUE
rb_class_subclasses(VALUE klass)
{
    return class_descendants(klass, true);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-superclass">
            
              <b>class.superclass &rarr; a_super_class or nil
</b>
            
            <a href="../classes/Class.html#method-i-superclass" name="method-i-superclass" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the superclass of <em>class</em>, or <code>nil</code>.</p>

<pre><code>File.superclass          #=&gt; IO
IO.superclass            #=&gt; Object
Object.superclass        #=&gt; BasicObject
class Foo; end
class Bar &lt; Foo; end
Bar.superclass           #=&gt; Foo
</code></pre>

<p>Returns nil when the given class does not have a parent class:</p>

<pre><code>BasicObject.superclass   #=&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-superclass_source')" id="l_method-i-superclass_source">show</a>
                
              </p>
              <div id="method-i-superclass_source" class="dyn-source">
                <pre>VALUE
rb_class_superclass(VALUE klass)
{
    RUBY_ASSERT(RB_TYPE_P(klass, T_CLASS));

    VALUE super = RCLASS_SUPER(klass);

    if (!super) {
        if (klass == rb_cBasicObject) return Qnil;
        rb_raise(rb_eTypeError, &quot;uninitialized class&quot;);
    }

    if (!RCLASS_SUPERCLASS_DEPTH(klass)) {
        return Qnil;
    }
    else {
        super = RCLASS_SUPERCLASSES(klass)[RCLASS_SUPERCLASS_DEPTH(klass) - 1];
        RUBY_ASSERT(RB_TYPE_P(klass, T_CLASS));
        return super;
    }
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
