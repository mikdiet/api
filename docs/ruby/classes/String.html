<!DOCTYPE html>
<html lang="en">
<head>
    <title>String</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["String"]'>


    <meta property="og:title" value="String">

  
    
    <meta name="description" content="A String object has an arbitrary sequence of bytes, typically representing text or binary data. A String object may be created using String::new or as literals.">
    <meta property="og:description" content="A String object has an arbitrary sequence of bytes, typically representing text or binary data. A String object may be created using String::new or as literals.">
  

    <meta name="keywords" content="String class, to_c, to_d, kconv, tojis, toeuc, tosjis, toutf8, toutf16, toutf32, tolocale, iseuc, issjis, isjis, isutf8, shellsplit, shellescape, unpack, unpack1, to_r, try_convert, new, initialize_copy, <=>, ==, ===, eql?, hash, casecmp, casecmp?, +, *, %, [], []=, insert, length, size, bytesize, empty?, =~, match, match?, succ, succ!, next, next!, upto, index, byteindex, rindex, byterindex, replace, clear, chr, getbyte, setbyte, byteslice, bytesplice, scrub, scrub!, +@, -@, to_i, to_f, to_s, to_str, inspect, dump, undump, upcase, downcase, capitalize, swapcase, upcase!, downcase!, capitalize!, swapcase!, hex, oct, split, lines, bytes, chars, codepoints, grapheme_clusters, reverse, reverse!, concat, <<, prepend, crypt, intern, to_sym, ord, include?, start_with?, end_with?, scan, ljust, rjust, center, sub, gsub, chop, chomp, strip, lstrip, rstrip, delete_prefix, delete_suffix, sub!, gsub!, chop!, chomp!, strip!, lstrip!, rstrip!, delete_prefix!, delete_suffix!, tr, tr_s, delete, squeeze, count, tr!, tr_s!, delete!, squeeze!, each_line, each_byte, each_char, each_codepoint, each_grapheme_cluster, sum, slice, slice!, partition, rpartition, encoding, force_encoding, b, valid_encoding?, ascii_only?, unicode_normalize, unicode_normalize!, unicode_normalized?, dedup, encode, encode!">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Class</span>
            String
            
                <span class="parent">&lt;
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/complex_c.html">ruby/complex.c</a></li>
            
            <li><a href="../files/ruby/ext/bigdecimal/lib/bigdecimal/util_rb.html">ruby/ext/bigdecimal/lib/bigdecimal/util.rb</a></li>
            
            <li><a href="../files/ruby/ext/nkf/lib/kconv_rb.html">ruby/ext/nkf/lib/kconv.rb</a></li>
            
            <li><a href="../files/ruby/lib/csv/core_ext/string_rb.html">ruby/lib/csv/core_ext/string.rb</a></li>
            
            <li><a href="../files/ruby/lib/mkmf_rb.html">ruby/lib/mkmf.rb</a></li>
            
            <li><a href="../files/ruby/lib/pp_rb.html">ruby/lib/pp.rb</a></li>
            
            <li><a href="../files/ruby/lib/shellwords_rb.html">ruby/lib/shellwords.rb</a></li>
            
            <li><a href="../files/ruby/pack_rb.html">ruby/pack.rb</a></li>
            
            <li><a href="../files/ruby/rational_c.html">ruby/rational.c</a></li>
            
            <li><a href="../files/ruby/string_c.html">ruby/string.c</a></li>
            
            <li><a href="../files/ruby/string_rb.html">ruby/string.rb</a></li>
            
            <li><a href="../files/ruby/transcode_c.html">ruby/transcode.c</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>A String object has an arbitrary sequence of bytes, typically representing text or binary data. A String object may be created using <a href="String.html#method-c-new"><code>String::new</code></a> or as literals.</p>

<p><a href="String.html"><code>String</code></a> objects differ from <a href="Symbol.html"><code>Symbol</code></a> objects in that <a href="Symbol.html"><code>Symbol</code></a> objects are designed to be used as identifiers, instead of text or data.</p>

<p>You can create a String object explicitly with:</p>
<ul><li>
<p>A string literal.</p>
</li><li>
<p>A string literal.</p>
</li></ul>

<p>You can convert certain objects to Strings with:</p>
<ul><li>
<p>Method <a href="Kernel.html#method-i-String"><code>String</code></a>.</p>
</li></ul>

<p>Some String methods modify <code>self</code>. Typically, a method whose name ends with <code>!</code> modifies <code>self</code> and returns <code>self</code>; often a similarly named method (without the <code>!</code>) returns a new string.</p>

<p>In general, if there exist both bang and non-bang version of method, the bang! mutates and the non-bang! does not. However, a method without a bang can also mutate, such as <a href="String.html#method-i-replace"><code>String#replace</code></a>.</p>

<h2 id="class-String-label-Substitution+Methods">Substitution Methods</h2>

<p>These methods perform substitutions:</p>
<ul><li>
<p><a href="String.html#method-i-sub"><code>String#sub</code></a>: One substitution (or none); returns a new string.</p>
</li><li>
<p><a href="String.html#method-i-sub-21"><code>String#sub!</code></a>: One substitution (or none); returns <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-gsub"><code>String#gsub</code></a>: Zero or more substitutions; returns a new string.</p>
</li><li>
<p><a href="String.html#method-i-gsub-21"><code>String#gsub!</code></a>: Zero or more substitutions; returns <code>self</code>.</p>
</li></ul>

<p>Each of these methods takes:</p>
<ul><li>
<p>A first argument, <code>pattern</code> (string or regexp), that specifies the substring(s) to be replaced.</p>
</li><li>
<p>Either of these:</p>
<ul><li>
<p>A second argument, <code>replacement</code> (string or hash), that determines the replacing string.</p>
</li><li>
<p>A block that will determine the replacing string.</p>
</li></ul>
</li></ul>

<p>The examples in this section mostly use methods <a href="String.html#method-i-sub"><code>String#sub</code></a> and <a href="String.html#method-i-gsub"><code>String#gsub</code></a>; the principles illustrated apply to all four substitution methods.</p>

<p><strong>Argument <code>pattern</code></strong></p>

<p>Argument <code>pattern</code> is commonly a regular expression:</p>

<pre><code>s = &#39;hello&#39;
s.sub(/[aeiou]/, &#39;*&#39;)# =&gt; &quot;h*llo&quot;
s.gsub(/[aeiou]/, &#39;*&#39;) # =&gt; &quot;h*ll*&quot;
s.gsub(/[aeiou]/, &#39;&#39;)# =&gt; &quot;hll&quot;
s.sub(/ell/, &#39;al&#39;)   # =&gt; &quot;halo&quot;
s.gsub(/xyzzy/, &#39;*&#39;) # =&gt; &quot;hello&quot;
&#39;THX1138&#39;.gsub(/\d+/, &#39;00&#39;) # =&gt; &quot;THX00&quot;
</code></pre>

<p>When <code>pattern</code> is a string, all its characters are treated as ordinary characters (not as regexp special characters):</p>

<pre><code>&#39;THX1138&#39;.gsub(&#39;\d+&#39;, &#39;00&#39;) # =&gt; &quot;THX1138&quot;
</code></pre>

<p><strong>String <code>replacement</code></strong></p>

<p>If <code>replacement</code> is a string, that string will determine the replacing string that is to be substituted for the matched text.</p>

<p>Each of the examples above uses a simple string as the replacing string.</p>

<p>String <code>replacement</code> may contain back-references to the pattern’s captures:</p>
<ul><li>
<p><code>\n</code> (<em>n</em> a non-negative integer) refers to <code>$n</code>.</p>
</li><li>
<p><code>\k&lt;name&gt;</code> refers to the named capture <code>name</code>.</p>
</li></ul>

<p>See <a href="Regexp.html"><code>Regexp</code></a> for details.</p>

<p>Note that within the string <code>replacement</code>, a character combination such as <code>$&amp;</code> is treated as ordinary text, and not as a special match variable. However, you may refer to some special match variables using these combinations:</p>
<ul><li>
<p><code>\&amp;</code> and <code>\0</code> correspond to <code>$&amp;</code>, which contains the complete matched text.</p>
</li><li>
<p><code>\&#39;</code> corresponds to <code>$&#39;</code>, which contains string after match.</p>
</li><li>
<p><code>\`</code> corresponds to <code>$`</code>, which contains string before match.</p>
</li><li>
<p><code>\+</code> corresponds to <code>$+</code>, which contains last capture group.</p>
</li></ul>

<p>See <a href="Regexp.html"><code>Regexp</code></a> for details.</p>

<p>Note that <code>\\</code> is interpreted as an escape, i.e., a single backslash.</p>

<p>Note also that a string literal consumes backslashes. See string literal for details about string literals.</p>

<p>A back-reference is typically preceded by an additional backslash. For example, if you want to write a back-reference <code>\&amp;</code> in <code>replacement</code> with a double-quoted string literal, you need to write <code>&quot;..\\&amp;..&quot;</code>.</p>

<p>If you want to write a non-back-reference string <code>\&amp;</code> in <code>replacement</code>, you need first to escape the backslash to prevent this method from interpreting it as a back-reference, and then you need to escape the backslashes again to prevent a string literal from consuming them: <code>&quot;..\\\\&amp;..&quot;</code>.</p>

<p>You may want to use the block form to avoid a lot of backslashes.</p>

<p><strong>Hash <code>replacement</code></strong></p>

<p>If argument <code>replacement</code> is a hash, and <code>pattern</code> matches one of its keys, the replacing string is the value for that key:</p>

<pre><code>h = {&#39;foo&#39; =&gt; &#39;bar&#39;, &#39;baz&#39; =&gt; &#39;bat&#39;}
&#39;food&#39;.sub(&#39;foo&#39;, h) # =&gt; &quot;bard&quot;
</code></pre>

<p>Note that a symbol key does not match:</p>

<pre><code>h = {foo: &#39;bar&#39;, baz: &#39;bat&#39;}
&#39;food&#39;.sub(&#39;foo&#39;, h) # =&gt; &quot;d&quot;
</code></pre>

<p><strong>Block</strong></p>

<p>In the block form, the current match string is passed to the block; the block’s return value becomes the replacing string:</p>

<pre><code> s = &#39;@&#39;
&#39;1234&#39;.gsub(/\d/) {|match| s.succ! } # =&gt; &quot;ABCD&quot;
</code></pre>

<p>Special match variables such as <code>$1</code>, <code>$2</code>, <code>$`</code>, <code>$&amp;</code>, and <code>$&#39;</code> are set appropriately.</p>

<h2 id="class-String-label-Whitespace+in+Strings">Whitespace in Strings</h2>

<p>In class String, <em>whitespace</em> is defined as a contiguous sequence of characters consisting of any mixture of the following:</p>
<ul><li>
<p>NL (null): <code>&quot;\x00&quot;</code>, <code>&quot;\u0000&quot;</code>.</p>
</li><li>
<p>HT (horizontal tab): <code>&quot;\x09&quot;</code>, <code>&quot;\t&quot;</code>.</p>
</li><li>
<p>LF (line feed): <code>&quot;\x0a&quot;</code>, <code>&quot;\n&quot;</code>.</p>
</li><li>
<p>VT (vertical tab): <code>&quot;\x0b&quot;</code>, <code>&quot;\v&quot;</code>.</p>
</li><li>
<p>FF (form feed): <code>&quot;\x0c&quot;</code>, <code>&quot;\f&quot;</code>.</p>
</li><li>
<p>CR (carriage return): <code>&quot;\x0d&quot;</code>, <code>&quot;\r&quot;</code>.</p>
</li><li>
<p>SP (space): <code>&quot;\x20&quot;</code>, <code>&quot; &quot;</code>.</p>
</li></ul>

<p>Whitespace is relevant for these methods:</p>
<ul><li>
<p><a href="String.html#method-i-lstrip"><code>lstrip</code></a>, <a href="String.html#method-i-lstrip-21"><code>lstrip!</code></a>: strip leading whitespace.</p>
</li><li>
<p><a href="String.html#method-i-rstrip"><code>rstrip</code></a>, <a href="String.html#method-i-rstrip-21"><code>rstrip!</code></a>: strip trailing whitespace.</p>
</li><li>
<p><a href="String.html#method-i-strip"><code>strip</code></a>, <a href="String.html#method-i-strip-21"><code>strip!</code></a>: strip leading and trailing whitespace.</p>
</li></ul>

<h2 id="class-String-label-String+Slices">String Slices</h2>

<p>A <em>slice</em> of a string is a substring that is selected by certain criteria.</p>

<p>These instance methods make use of slicing:</p>
<ul><li>
<p><a href="String.html#method-i-5B-5D"><code>String#[]</code></a> (also aliased as <a href="String.html#method-i-slice"><code>String#slice</code></a>) returns a slice copied from <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-5B-5D-3D"><code>String#[]=</code></a> returns a copy of <code>self</code> with a slice replaced.</p>
</li><li>
<p><a href="String.html#method-i-slice-21"><code>String#slice!</code></a> returns <code>self</code> with a slice removed.</p>
</li></ul>

<p>Each of the above methods takes arguments that determine the slice to be copied or replaced.</p>

<p>The arguments have several forms. For string <code>string</code>,  the forms are:</p>
<ul><li>
<p><code>string[index]</code>.</p>
</li><li>
<p><code>string[start, length]</code>.</p>
</li><li>
<p><code>string[range]</code>.</p>
</li><li>
<p><code>string[regexp, capture = 0]</code>.</p>
</li><li>
<p><code>string[substring]</code>.</p>
</li></ul>

<p><strong><code>string[index]</code></strong></p>

<p>When non-negative integer argument <code>index</code> is given, the slice is the 1-character substring found in <code>self</code> at character offset <code>index</code>:</p>

<pre><code>&#39;bar&#39;[0]       # =&gt; &quot;b&quot;
&#39;bar&#39;[2]       # =&gt; &quot;r&quot;
&#39;bar&#39;[20]      # =&gt; nil
&#39;тест&#39;[2]      # =&gt; &quot;с&quot;
&#39;こんにちは&#39;[4]  # =&gt; &quot;は&quot;
</code></pre>

<p>When negative integer <code>index</code> is given, the slice begins at the offset given by counting backward from the end of <code>self</code>:</p>

<pre><code>&#39;bar&#39;[-3]         # =&gt; &quot;b&quot;
&#39;bar&#39;[-1]         # =&gt; &quot;r&quot;
&#39;bar&#39;[-20]        # =&gt; nil
</code></pre>

<p><strong><code>string[start, length]</code></strong></p>

<p>When non-negative integer arguments <code>start</code> and <code>length</code> are given, the slice begins at character offset <code>start</code>, if it exists, and continues for <code>length</code> characters, if available:</p>

<pre><code>&#39;foo&#39;[0, 2]       # =&gt; &quot;fo&quot;
&#39;тест&#39;[1, 2]      # =&gt; &quot;ес&quot;
&#39;こんにちは&#39;[2, 2]  # =&gt; &quot;にち&quot;
# Zero length.
&#39;foo&#39;[2, 0]       # =&gt; &quot;&quot;
# Length not entirely available.
&#39;foo&#39;[1, 200]     # =&gt; &quot;oo&quot;
# Start out of range.
&#39;foo&#39;[4, 2]      # =&gt; nil
</code></pre>

<p>Special case: if <code>start</code> is equal to the length of <code>self</code>, the slice is a new empty string:</p>

<pre><code>&#39;foo&#39;[3, 2]   # =&gt; &quot;&quot;
&#39;foo&#39;[3, 200] # =&gt; &quot;&quot;
</code></pre>

<p>When negative <code>start</code> and non-negative <code>length</code> are given, the slice beginning is determined by counting backward from the end of <code>self</code>, and the slice continues for <code>length</code> characters, if available:</p>

<pre><code>&#39;foo&#39;[-2, 2]    # =&gt; &quot;oo&quot;
&#39;foo&#39;[-2, 200]  # =&gt; &quot;oo&quot;
# Start out of range.
&#39;foo&#39;[-4, 2]     # =&gt; nil
</code></pre>

<p>When negative <code>length</code> is given, there is no slice:</p>

<pre><code>&#39;foo&#39;[1, -1]  # =&gt; nil
&#39;foo&#39;[-2, -1] # =&gt; nil
</code></pre>

<p><strong><code>string[range]</code></strong></p>

<p>When <a href="Range.html"><code>Range</code></a> argument <code>range</code> is given, creates a substring of <code>string</code> using the indices in <code>range</code>. The slice is then determined as above:</p>

<pre><code>&#39;foo&#39;[0..1]    # =&gt; &quot;fo&quot;
&#39;foo&#39;[0, 2]    # =&gt; &quot;fo&quot;

&#39;foo&#39;[2...2]   # =&gt; &quot;&quot;
&#39;foo&#39;[2, 0]    # =&gt; &quot;&quot;

&#39;foo&#39;[1..200]  # =&gt; &quot;oo&quot;
&#39;foo&#39;[1, 200]  # =&gt; &quot;oo&quot;

&#39;foo&#39;[4..5]    # =&gt; nil
&#39;foo&#39;[4, 2]    # =&gt; nil

&#39;foo&#39;[-4..-3]  # =&gt; nil
&#39;foo&#39;[-4, 2]   # =&gt; nil

&#39;foo&#39;[3..4]    # =&gt; &quot;&quot;
&#39;foo&#39;[3, 2]    # =&gt; &quot;&quot;

&#39;foo&#39;[-2..-1]  # =&gt; &quot;oo&quot;
&#39;foo&#39;[-2, 2]   # =&gt; &quot;oo&quot;

&#39;foo&#39;[-2..197] # =&gt; &quot;oo&quot;
&#39;foo&#39;[-2, 200] # =&gt; &quot;oo&quot;
</code></pre>

<p><strong><code>string[regexp, capture = 0]</code></strong></p>

<p>When the <a href="Regexp.html"><code>Regexp</code></a> argument <code>regexp</code> is given, and the <code>capture</code> argument is <code>0</code>, the slice is the first matching substring found in <code>self</code>:</p>

<pre><code>&#39;foo&#39;[/o/] # =&gt; &quot;o&quot;
&#39;foo&#39;[/x/] # =&gt; nil
s = &#39;hello there&#39;
s[/[aeiou](.)\1/] # =&gt; &quot;ell&quot;
s[/[aeiou](.)\1/, 0] # =&gt; &quot;ell&quot;
</code></pre>

<p>If argument <code>capture</code> is given and not <code>0</code>, it should be either an capture group index (integer) or a capture group name (string or symbol); the slice is the specified capture (see <a href="Regexp.html#class-Regexp-label-Groups+and+Captures">Groups and Captures at <code>Regexp</code></a>):</p>

<pre><code>s = &#39;hello there&#39;
s[/[aeiou](.)\1/, 1] # =&gt; &quot;l&quot;
s[/(?&lt;vowel&gt;[aeiou])(?&lt;non_vowel&gt;[^aeiou])/, &quot;non_vowel&quot;] # =&gt; &quot;l&quot;
s[/(?&lt;vowel&gt;[aeiou])(?&lt;non_vowel&gt;[^aeiou])/, :vowel] # =&gt; &quot;e&quot;
</code></pre>

<p>If an invalid capture group index is given, there is no slice. If an invalid capture group name is given, <code>IndexError</code> is raised.</p>

<p><strong><code>string[substring]</code></strong></p>

<p>When the single String argument <code>substring</code> is given, returns the substring from <code>self</code> if found, otherwise <code>nil</code>:</p>

<pre><code>&#39;foo&#39;[&#39;oo&#39;] # =&gt; &quot;oo&quot;
&#39;foo&#39;[&#39;xx&#39;] # =&gt; nil
</code></pre>

<h2 id="class-String-label-What-27s+Here">What’s Here</h2>

<p>First, what’s elsewhere. Class String:</p>
<ul><li>
<p>Inherits from <a href="Object.html#class-Object-label-What-27s+Here">class Object</a>.</p>
</li><li>
<p>Includes <a href="Comparable.html#module-Comparable-label-What-27s+Here">module Comparable</a>.</p>
</li></ul>

<p>Here, class String provides methods that are useful for:</p>
<ul><li>
<p><a href="String.html#class-String-label-Methods+for+Creating+a+String">Creating a String</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+a+Frozen-2FUnfrozen+String">Frozen/Unfrozen Strings</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+Querying">Querying</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+Comparing">Comparing</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+Modifying+a+String">Modifying a String</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+Converting+to+New+String">Converting to New String</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+Converting+to+Non--5CString">Converting to Non-String</a></p>
</li><li>
<p><a href="String.html#class-String-label-Methods+for+Iterating">Iterating</a></p>
</li></ul>

<h3 id="class-String-label-Methods+for+Creating+a+String">Methods for Creating a String</h3>
<ul><li>
<p><a href="String.html#method-c-new"><code>::new</code></a>: Returns a new string.</p>
</li><li>
<p><a href="String.html#method-c-try_convert"><code>::try_convert</code></a>: Returns a new string created from a given object.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+a+Frozen-2FUnfrozen+String">Methods for a Frozen/Unfrozen <a href="String.html"><code>String</code></a></h3>
<ul><li>
<p><a href="String.html#method-i-2B-40"><code>+@</code></a>: Returns a string that is not frozen: <code>self</code>, if not frozen; <code>self.dup</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-2D-40"><code>-@</code></a>: Returns a string that is frozen: <code>self</code>, if already frozen; <code>self.freeze</code> otherwise.</p>
</li><li>
<p><a href="Object.html#method-i-freeze"><code>freeze</code></a>: Freezes <code>self</code>, if not already frozen; returns <code>self</code>.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+Querying">Methods for Querying</h3>

<p><em>Counts</em></p>
<ul><li>
<p><a href="String.html#method-i-length"><code>length</code></a>, <a href="String.html#method-i-size"><code>size</code></a>: Returns the count of characters (not bytes).</p>
</li><li>
<p><a href="String.html#method-i-empty-3F"><code>empty?</code></a>: Returns <code>true</code> if <code>self.length</code> is zero; <code>false</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-bytesize"><code>bytesize</code></a>: Returns the count of bytes.</p>
</li><li>
<p><a href="String.html#method-i-count"><code>count</code></a>: Returns the count of substrings matching given strings.</p>
</li></ul>

<p><em>Substrings</em></p>
<ul><li>
<p>#=~: Returns the index of the first substring that matches a given <a href="Regexp.html"><code>Regexp</code></a> or other object; returns <code>nil</code> if no match is found.</p>
</li><li>
<p><a href="String.html#method-i-index"><code>index</code></a>: Returns the index of the <em>first</em> occurrence of a given substring; returns <code>nil</code> if none found.</p>
</li><li>
<p><a href="String.html#method-i-rindex"><code>rindex</code></a>: Returns the index of the <em>last</em> occurrence of a given substring; returns <code>nil</code> if none found.</p>
</li><li>
<p><a href="String.html#method-i-include-3F"><code>include?</code></a>: Returns <code>true</code> if the string contains a given substring; <code>false</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-match"><code>match</code></a>: Returns a <a href="MatchData.html"><code>MatchData</code></a> object if the string matches a given <a href="Regexp.html"><code>Regexp</code></a>; <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-match-3F"><code>match?</code></a>: Returns <code>true</code> if the string matches a given <a href="Regexp.html"><code>Regexp</code></a>; <code>false</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-start_with-3F"><code>start_with?</code></a>: Returns <code>true</code> if the string begins with any of the given substrings.</p>
</li><li>
<p><a href="String.html#method-i-end_with-3F"><code>end_with?</code></a>: Returns <code>true</code> if the string ends with any of the given substrings.</p>
</li></ul>

<p><em>Encodings</em></p>
<ul><li>
<p><a href="String.html#method-i-encoding"><code>encoding</code></a>: Returns the <a href="Encoding.html"><code>Encoding</code></a> object that represents the encoding of the string.</p>
</li><li>
<p><a href="String.html#method-i-unicode_normalized-3F"><code>unicode_normalized?</code></a>: Returns <code>true</code> if the string is in Unicode normalized form; <code>false</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-valid_encoding-3F"><code>valid_encoding?</code></a>: Returns <code>true</code> if the string contains only characters that are valid for its encoding.</p>
</li><li>
<p><a href="String.html#method-i-ascii_only-3F"><code>ascii_only?</code></a>: Returns <code>true</code> if the string has only ASCII characters; <code>false</code> otherwise.</p>
</li></ul>

<p><em>Other</em></p>
<ul><li>
<p><a href="String.html#method-i-sum"><code>sum</code></a>: Returns a basic checksum for the string: the sum of each byte.</p>
</li><li>
<p><a href="String.html#method-i-hash"><code>hash</code></a>: Returns the integer hash code.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+Comparing">Methods for Comparing</h3>
<ul><li>
<p><a href="String.html#method-i-3D-3D"><code>==</code></a>, <a href="String.html#method-i-3D-3D-3D"><code>===</code></a>: Returns <code>true</code> if a given other string has the same content as <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-eql-3F"><code>eql?</code></a>: Returns <code>true</code> if the content is the same as the given other string.</p>
</li><li>
<p>#&lt;=&gt;: Returns -1, 0, or 1 as a given other string is smaller than, equal to, or larger than <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-casecmp"><code>casecmp</code></a>: Ignoring case, returns -1, 0, or 1 as a given other string is smaller than, equal to, or larger than <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-casecmp-3F"><code>casecmp?</code></a>: Returns <code>true</code> if the string is equal to a given string after Unicode case folding; <code>false</code> otherwise.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+Modifying+a+String">Methods for Modifying a String</h3>

<p>Each of these methods modifies <code>self</code>.</p>

<p><em>Insertion</em></p>
<ul><li>
<p><a href="String.html#method-i-insert"><code>insert</code></a>: Returns <code>self</code> with a given string inserted at a given offset.</p>
</li><li>
<p><a href="String.html#method-i-3C-3C"><code>&lt;&lt;</code></a>: Returns <code>self</code> concatenated with a given string or integer.</p>
</li></ul>

<p><em>Substitution</em></p>
<ul><li>
<p><a href="String.html#method-i-sub-21"><code>sub!</code></a>: Replaces the first substring that matches a given pattern with a given replacement string; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-gsub-21"><code>gsub!</code></a>: Replaces each substring that matches a given pattern with a given replacement string; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-succ-21"><code>succ!</code></a>, <a href="String.html#method-i-next-21"><code>next!</code></a>: Returns <code>self</code> modified to become its own successor.</p>
</li><li>
<p><a href="String.html#method-i-replace"><code>replace</code></a>: Returns <code>self</code> with its entire content replaced by a given string.</p>
</li><li>
<p><a href="String.html#method-i-reverse-21"><code>reverse!</code></a>: Returns <code>self</code> with its characters in reverse order.</p>
</li><li>
<p><a href="String.html#method-i-setbyte"><code>setbyte</code></a>: Sets the byte at a given integer offset to a given value; returns the argument.</p>
</li><li>
<p><a href="String.html#method-i-tr-21"><code>tr!</code></a>: Replaces specified characters in <code>self</code> with specified replacement characters; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-tr_s-21"><code>tr_s!</code></a>: Replaces specified characters in <code>self</code> with specified replacement characters, removing duplicates from the substrings that were modified; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li></ul>

<p><em>Casing</em></p>
<ul><li>
<p><a href="String.html#method-i-capitalize-21"><code>capitalize!</code></a>: Upcases the initial character and downcases all others; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-downcase-21"><code>downcase!</code></a>: Downcases all characters; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-upcase-21"><code>upcase!</code></a>: Upcases all characters; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-swapcase-21"><code>swapcase!</code></a>: Upcases each downcase character and downcases each upcase character; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li></ul>

<p><em>Encoding</em></p>
<ul><li>
<p><a href="String.html#method-i-encode-21"><code>encode!</code></a>: Returns <code>self</code> with all characters transcoded from one given encoding into another.</p>
</li><li>
<p><a href="String.html#method-i-unicode_normalize-21"><code>unicode_normalize!</code></a>: Unicode-normalizes <code>self</code>; returns <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-scrub-21"><code>scrub!</code></a>: Replaces each invalid byte with a given character; returns <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-force_encoding"><code>force_encoding</code></a>: Changes the encoding to a given encoding; returns <code>self</code>.</p>
</li></ul>

<p><em>Deletion</em></p>
<ul><li>
<p><a href="String.html#method-i-clear"><code>clear</code></a>: Removes all content, so that <code>self</code> is empty; returns <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-slice-21"><code>slice!</code></a>, <a href="String.html#method-i-5B-5D-3D"><code>[]=</code></a>: Removes a substring determined by a given index, start/length, range, regexp, or substring.</p>
</li><li>
<p><a href="String.html#method-i-squeeze-21"><code>squeeze!</code></a>: Removes contiguous duplicate characters; returns <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-delete-21"><code>delete!</code></a>: Removes characters as determined by the intersection of substring arguments.</p>
</li><li>
<p><a href="String.html#method-i-lstrip-21"><code>lstrip!</code></a>: Removes leading whitespace; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-rstrip-21"><code>rstrip!</code></a>: Removes trailing whitespace; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-strip-21"><code>strip!</code></a>: Removes leading and trailing whitespace; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-chomp-21"><code>chomp!</code></a>: Removes trailing record separator, if found; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li><li>
<p><a href="String.html#method-i-chop-21"><code>chop!</code></a>: Removes trailing newline characters if found; otherwise removes the last character; returns <code>self</code> if any changes, <code>nil</code> otherwise.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+Converting+to+New+String">Methods for Converting to New String</h3>

<p>Each of these methods returns a new String based on <code>self</code>, often just a modified copy of <code>self</code>.</p>

<p><em>Extension</em></p>
<ul><li>
<p><a href="String.html#method-i-2A"><code>*</code></a>: Returns the concatenation of multiple copies of <code>self</code>,</p>
</li><li>
<p><a href="String.html#method-i-2B"><code>+</code></a>: Returns the concatenation of <code>self</code> and a given other string.</p>
</li><li>
<p><a href="String.html#method-i-center"><code>center</code></a>: Returns a copy of <code>self</code> centered between pad substring.</p>
</li><li>
<p><a href="String.html#method-i-concat"><code>concat</code></a>: Returns the concatenation of <code>self</code> with given other strings.</p>
</li><li>
<p><a href="String.html#method-i-prepend"><code>prepend</code></a>: Returns the concatenation of a given other string with <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-ljust"><code>ljust</code></a>: Returns a copy of <code>self</code> of a given length, right-padded with a given other string.</p>
</li><li>
<p><a href="String.html#method-i-rjust"><code>rjust</code></a>: Returns a copy of <code>self</code> of a given length, left-padded with a given other string.</p>
</li></ul>

<p><em>Encoding</em></p>
<ul><li>
<p><a href="String.html#method-i-b"><code>b</code></a>: Returns a copy of <code>self</code> with ASCII-8BIT encoding.</p>
</li><li>
<p><a href="String.html#method-i-scrub"><code>scrub</code></a>: Returns a copy of <code>self</code> with each invalid byte replaced with a given character.</p>
</li><li>
<p><a href="String.html#method-i-unicode_normalize"><code>unicode_normalize</code></a>: Returns a copy of <code>self</code> with each character Unicode-normalized.</p>
</li><li>
<p><a href="String.html#method-i-encode"><code>encode</code></a>: Returns a copy of <code>self</code> with all characters transcoded from one given encoding into another.</p>
</li></ul>

<p><em>Substitution</em></p>
<ul><li>
<p><a href="String.html#method-i-dump"><code>dump</code></a>: Returns a copy of <code>self</code> with all non-printing characters replaced by xHH notation and all special characters escaped.</p>
</li><li>
<p><a href="String.html#method-i-undump"><code>undump</code></a>: Returns a copy of <code>self</code> with all <code>\xNN</code> notation replace by <code>\uNNNN</code> notation and all escaped characters unescaped.</p>
</li><li>
<p><a href="String.html#method-i-sub"><code>sub</code></a>: Returns a copy of <code>self</code> with the first substring matching a given pattern replaced with a given replacement string;.</p>
</li><li>
<p><a href="String.html#method-i-gsub"><code>gsub</code></a>: Returns a copy of <code>self</code> with each substring that matches a given pattern replaced with a given replacement string.</p>
</li><li>
<p><a href="String.html#method-i-succ"><code>succ</code></a>, <a href="String.html#method-i-next"><code>next</code></a>: Returns the string that is the successor to <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-reverse"><code>reverse</code></a>: Returns a copy of <code>self</code> with its characters in reverse order.</p>
</li><li>
<p><a href="String.html#method-i-tr"><code>tr</code></a>: Returns a copy of <code>self</code> with specified characters replaced with specified      replacement characters.</p>
</li><li>
<p><a href="String.html#method-i-tr_s"><code>tr_s</code></a>: Returns a copy of <code>self</code> with specified characters replaced with specified replacement characters, removing duplicates from the substrings that were modified.</p>
</li><li>
<p><a href="String.html#method-i-25"><code>%</code></a>: Returns the string resulting from formatting a given object into <code>self</code></p>
</li></ul>

<p><em>Casing</em></p>
<ul><li>
<p><a href="String.html#method-i-capitalize"><code>capitalize</code></a>: Returns a copy of <code>self</code> with the first character upcased and all other characters downcased.</p>
</li><li>
<p><a href="String.html#method-i-downcase"><code>downcase</code></a>: Returns a copy of <code>self</code> with all characters downcased.</p>
</li><li>
<p><a href="String.html#method-i-upcase"><code>upcase</code></a>: Returns a copy of <code>self</code> with all characters upcased.</p>
</li><li>
<p><a href="String.html#method-i-swapcase"><code>swapcase</code></a>: Returns a copy of <code>self</code> with all upcase characters downcased and all downcase characters upcased.</p>
</li></ul>

<p><em>Deletion</em></p>
<ul><li>
<p><a href="String.html#method-i-delete"><code>delete</code></a>: Returns a copy of <code>self</code> with characters removed</p>
</li><li>
<p><a href="String.html#method-i-delete_prefix"><code>delete_prefix</code></a>: Returns a copy of <code>self</code> with a given prefix removed.</p>
</li><li>
<p><a href="String.html#method-i-delete_suffix"><code>delete_suffix</code></a>: Returns a copy of <code>self</code> with a given suffix removed.</p>
</li><li>
<p><a href="String.html#method-i-lstrip"><code>lstrip</code></a>: Returns a copy of <code>self</code> with leading whitespace removed.</p>
</li><li>
<p><a href="String.html#method-i-rstrip"><code>rstrip</code></a>: Returns a copy of <code>self</code> with trailing whitespace removed.</p>
</li><li>
<p><a href="String.html#method-i-strip"><code>strip</code></a>: Returns a copy of <code>self</code> with leading and trailing whitespace removed.</p>
</li><li>
<p><a href="String.html#method-i-chomp"><code>chomp</code></a>: Returns a copy of <code>self</code> with a trailing record separator removed, if found.</p>
</li><li>
<p><a href="String.html#method-i-chop"><code>chop</code></a>: Returns a copy of <code>self</code> with trailing newline characters or the last character removed.</p>
</li><li>
<p><a href="String.html#method-i-squeeze"><code>squeeze</code></a>: Returns a copy of <code>self</code> with contiguous duplicate characters removed.</p>
</li><li>
<p><a href="String.html#method-i-5B-5D"><code>[]</code></a>, <a href="String.html#method-i-slice"><code>slice</code></a>: Returns a substring determined by a given index, start/length, or range, or string.</p>
</li><li>
<p><a href="String.html#method-i-byteslice"><code>byteslice</code></a>: Returns a substring determined by a given index, start/length, or range.</p>
</li><li>
<p><a href="String.html#method-i-chr"><code>chr</code></a>: Returns the first character.</p>
</li></ul>

<p><em>Duplication</em></p>
<ul><li>
<p><a href="String.html#method-i-to_s"><code>to_s</code></a>, $to_str: If <code>self</code> is a subclass of String, returns <code>self</code> copied into a String; otherwise, returns <code>self</code>.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+Converting+to+Non--5CString">Methods for Converting to Non-String</h3>

<p>Each of these methods converts the contents of <code>self</code> to a non-String.</p>

<p><em>Characters, Bytes, and Clusters</em></p>
<ul><li>
<p><a href="String.html#method-i-bytes"><code>bytes</code></a>: Returns an array of the bytes in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-chars"><code>chars</code></a>: Returns an array of the characters in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-codepoints"><code>codepoints</code></a>: Returns an array of the integer ordinals in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-getbyte"><code>getbyte</code></a>: Returns an integer byte as determined by a given index.</p>
</li><li>
<p><a href="String.html#method-i-grapheme_clusters"><code>grapheme_clusters</code></a>: Returns an array of the grapheme clusters in <code>self</code>.</p>
</li></ul>

<p><em>Splitting</em></p>
<ul><li>
<p><a href="String.html#method-i-lines"><code>lines</code></a>: Returns an array of the lines in <code>self</code>, as determined by a given record separator.</p>
</li><li>
<p><a href="String.html#method-i-partition"><code>partition</code></a>: Returns a 3-element array determined by the first substring that matches a given substring or regexp,</p>
</li><li>
<p><a href="String.html#method-i-rpartition"><code>rpartition</code></a>: Returns a 3-element array determined by the last substring that matches a given substring or regexp,</p>
</li><li>
<p><a href="String.html#method-i-split"><code>split</code></a>: Returns an array of substrings determined by a given delimiter – regexp or string – or, if a block given, passes those substrings to the block.</p>
</li></ul>

<p><em>Matching</em></p>
<ul><li>
<p><a href="String.html#method-i-scan"><code>scan</code></a>: Returns an array of substrings matching a given regexp or string, or, if a block given, passes each matching substring to the  block.</p>
</li><li>
<p><a href="String.html#method-i-unpack"><code>unpack</code></a>: Returns an array of substrings extracted from <code>self</code> according to a given format.</p>
</li><li>
<p><a href="String.html#method-i-unpack1"><code>unpack1</code></a>: Returns the first substring extracted from <code>self</code> according to a given format.</p>
</li></ul>

<p><em>Numerics</em></p>
<ul><li>
<p><a href="String.html#method-i-hex"><code>hex</code></a>: Returns the integer value of the leading characters, interpreted as hexadecimal digits.</p>
</li><li>
<p><a href="String.html#method-i-oct"><code>oct</code></a>: Returns the integer value of the leading characters, interpreted as octal digits.</p>
</li><li>
<p><a href="String.html#method-i-ord"><code>ord</code></a>: Returns the integer ordinal of the first character in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-to_i"><code>to_i</code></a>: Returns the integer value of leading characters, interpreted as an integer.</p>
</li><li>
<p><a href="String.html#method-i-to_f"><code>to_f</code></a>: Returns the floating-point value of leading characters, interpreted as a floating-point number.</p>
</li></ul>

<p><em>Strings and Symbols</em></p>
<ul><li>
<p><a href="String.html#method-i-inspect"><code>inspect</code></a>: Returns copy of <code>self</code>, enclosed in double-quotes, with special characters escaped.</p>
</li><li>
<p><a href="String.html#method-i-to_sym"><code>to_sym</code></a>, <a href="String.html#method-i-intern"><code>intern</code></a>: Returns the symbol corresponding to <code>self</code>.</p>
</li></ul>

<h3 id="class-String-label-Methods+for+Iterating">Methods for Iterating</h3>
<ul><li>
<p><a href="String.html#method-i-each_byte"><code>each_byte</code></a>: Calls the given block with each successive byte in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-each_char"><code>each_char</code></a>: Calls the given block with each successive character in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-each_codepoint"><code>each_codepoint</code></a>: Calls the given block with each successive integer codepoint in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-each_grapheme_cluster"><code>each_grapheme_cluster</code></a>: Calls the given block with each successive grapheme cluster in <code>self</code>.</p>
</li><li>
<p><a href="String.html#method-i-each_line"><code>each_line</code></a>: Calls the given block with each successive line in <code>self</code>, as determined by a given record separator.</p>
</li><li>
<p><a href="String.html#method-i-upto"><code>upto</code></a>: Calls the given block with each string value returned by successive calls to <a href="String.html#method-i-succ"><code>succ</code></a>.</p>
</li></ul>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-25">%</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2A">*</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2B">+</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2B-40">+@</a>,
              </li>
            
              
              <li>
                <a href="#method-i-2D-40">-@</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3C-3C">&lt;&lt;</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3C-3D-3E">&lt;=&gt;</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3D-3D">==</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3D-3D-3D">===</a>,
              </li>
            
              
              <li>
                <a href="#method-i-3D~">=~</a>,
              </li>
            
              
              <li>
                <a href="#method-i-5B-5D">[]</a>,
              </li>
            
              
              <li>
                <a href="#method-i-5B-5D-3D">[]=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-ascii_only-3F">ascii_only?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-b">b</a>,
              </li>
            
              
              <li>
                <a href="#method-i-byteindex">byteindex</a>,
              </li>
            
              
              <li>
                <a href="#method-i-byterindex">byterindex</a>,
              </li>
            
              
              <li>
                <a href="#method-i-bytes">bytes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-bytesize">bytesize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-byteslice">byteslice</a>,
              </li>
            
              
              <li>
                <a href="#method-i-bytesplice">bytesplice</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-capitalize">capitalize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-capitalize-21">capitalize!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-casecmp">casecmp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-casecmp-3F">casecmp?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-center">center</a>,
              </li>
            
              
              <li>
                <a href="#method-i-chars">chars</a>,
              </li>
            
              
              <li>
                <a href="#method-i-chomp">chomp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-chomp-21">chomp!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-chop">chop</a>,
              </li>
            
              
              <li>
                <a href="#method-i-chop-21">chop!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-chr">chr</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear">clear</a>,
              </li>
            
              
              <li>
                <a href="#method-i-codepoints">codepoints</a>,
              </li>
            
              
              <li>
                <a href="#method-i-concat">concat</a>,
              </li>
            
              
              <li>
                <a href="#method-i-count">count</a>,
              </li>
            
              
              <li>
                <a href="#method-i-crypt">crypt</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-dedup">dedup</a>,
              </li>
            
              
              <li>
                <a href="#method-i-delete">delete</a>,
              </li>
            
              
              <li>
                <a href="#method-i-delete-21">delete!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-delete_prefix">delete_prefix</a>,
              </li>
            
              
              <li>
                <a href="#method-i-delete_prefix-21">delete_prefix!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-delete_suffix">delete_suffix</a>,
              </li>
            
              
              <li>
                <a href="#method-i-delete_suffix-21">delete_suffix!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-downcase">downcase</a>,
              </li>
            
              
              <li>
                <a href="#method-i-downcase-21">downcase!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-dump">dump</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-each_byte">each_byte</a>,
              </li>
            
              
              <li>
                <a href="#method-i-each_char">each_char</a>,
              </li>
            
              
              <li>
                <a href="#method-i-each_codepoint">each_codepoint</a>,
              </li>
            
              
              <li>
                <a href="#method-i-each_grapheme_cluster">each_grapheme_cluster</a>,
              </li>
            
              
              <li>
                <a href="#method-i-each_line">each_line</a>,
              </li>
            
              
              <li>
                <a href="#method-i-empty-3F">empty?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-encode">encode</a>,
              </li>
            
              
              <li>
                <a href="#method-i-encode-21">encode!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-encoding">encoding</a>,
              </li>
            
              
              <li>
                <a href="#method-i-end_with-3F">end_with?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-eql-3F">eql?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-force_encoding">force_encoding</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-getbyte">getbyte</a>,
              </li>
            
              
              <li>
                <a href="#method-i-grapheme_clusters">grapheme_clusters</a>,
              </li>
            
              
              <li>
                <a href="#method-i-gsub">gsub</a>,
              </li>
            
              
              <li>
                <a href="#method-i-gsub-21">gsub!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-hash">hash</a>,
              </li>
            
              
              <li>
                <a href="#method-i-hex">hex</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-include-3F">include?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-index">index</a>,
              </li>
            
              
              <li>
                <a href="#method-i-initialize_copy">initialize_copy</a>,
              </li>
            
              
              <li>
                <a href="#method-i-insert">insert</a>,
              </li>
            
              
              <li>
                <a href="#method-i-inspect">inspect</a>,
              </li>
            
              
              <li>
                <a href="#method-i-intern">intern</a>,
              </li>
            
              
              <li>
                <a href="#method-i-iseuc">iseuc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-isjis">isjis</a>,
              </li>
            
              
              <li>
                <a href="#method-i-issjis">issjis</a>,
              </li>
            
              
              <li>
                <a href="#method-i-isutf8">isutf8</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>K</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-kconv">kconv</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-length">length</a>,
              </li>
            
              
              <li>
                <a href="#method-i-lines">lines</a>,
              </li>
            
              
              <li>
                <a href="#method-i-ljust">ljust</a>,
              </li>
            
              
              <li>
                <a href="#method-i-lstrip">lstrip</a>,
              </li>
            
              
              <li>
                <a href="#method-i-lstrip-21">lstrip!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-match">match</a>,
              </li>
            
              
              <li>
                <a href="#method-i-match-3F">match?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-i-next">next</a>,
              </li>
            
              
              <li>
                <a href="#method-i-next-21">next!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-oct">oct</a>,
              </li>
            
              
              <li>
                <a href="#method-i-ord">ord</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-partition">partition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-prepend">prepend</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-replace">replace</a>,
              </li>
            
              
              <li>
                <a href="#method-i-reverse">reverse</a>,
              </li>
            
              
              <li>
                <a href="#method-i-reverse-21">reverse!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rindex">rindex</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rjust">rjust</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rpartition">rpartition</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rstrip">rstrip</a>,
              </li>
            
              
              <li>
                <a href="#method-i-rstrip-21">rstrip!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-scan">scan</a>,
              </li>
            
              
              <li>
                <a href="#method-i-scrub">scrub</a>,
              </li>
            
              
              <li>
                <a href="#method-i-scrub-21">scrub!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setbyte">setbyte</a>,
              </li>
            
              
              <li>
                <a href="#method-i-shellescape">shellescape</a>,
              </li>
            
              
              <li>
                <a href="#method-i-shellsplit">shellsplit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-size">size</a>,
              </li>
            
              
              <li>
                <a href="#method-i-slice">slice</a>,
              </li>
            
              
              <li>
                <a href="#method-i-slice-21">slice!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-split">split</a>,
              </li>
            
              
              <li>
                <a href="#method-i-squeeze">squeeze</a>,
              </li>
            
              
              <li>
                <a href="#method-i-squeeze-21">squeeze!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_with-3F">start_with?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strip">strip</a>,
              </li>
            
              
              <li>
                <a href="#method-i-strip-21">strip!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sub">sub</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sub-21">sub!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-succ">succ</a>,
              </li>
            
              
              <li>
                <a href="#method-i-succ-21">succ!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sum">sum</a>,
              </li>
            
              
              <li>
                <a href="#method-i-swapcase">swapcase</a>,
              </li>
            
              
              <li>
                <a href="#method-i-swapcase-21">swapcase!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-to_c">to_c</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_d">to_d</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_f">to_f</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_i">to_i</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_r">to_r</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_s">to_s</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_str">to_str</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_sym">to_sym</a>,
              </li>
            
              
              <li>
                <a href="#method-i-toeuc">toeuc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tojis">tojis</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tolocale">tolocale</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tosjis">tosjis</a>,
              </li>
            
              
              <li>
                <a href="#method-i-toutf16">toutf16</a>,
              </li>
            
              
              <li>
                <a href="#method-i-toutf32">toutf32</a>,
              </li>
            
              
              <li>
                <a href="#method-i-toutf8">toutf8</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tr">tr</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tr-21">tr!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tr_s">tr_s</a>,
              </li>
            
              
              <li>
                <a href="#method-i-tr_s-21">tr_s!</a>,
              </li>
            
              
              <li>
                <a href="#method-c-try_convert">try_convert</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-undump">undump</a>,
              </li>
            
              
              <li>
                <a href="#method-i-unicode_normalize">unicode_normalize</a>,
              </li>
            
              
              <li>
                <a href="#method-i-unicode_normalize-21">unicode_normalize!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-unicode_normalized-3F">unicode_normalized?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-unpack">unpack</a>,
              </li>
            
              
              <li>
                <a href="#method-i-unpack1">unpack1</a>,
              </li>
            
              
              <li>
                <a href="#method-i-upcase">upcase</a>,
              </li>
            
              
              <li>
                <a href="#method-i-upcase-21">upcase!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-upto">upto</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-valid_encoding-3F">valid_encoding?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="Comparable.html">
              Comparable
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-new">
            
              <b>String.new(string = '', **opts) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new String that is a copy of <code>string</code>.</p>

<p>With no arguments, returns the empty string with the <a href="Encoding.html"><code>Encoding</code></a> <code>ASCII-8BIT</code>:</p>

<pre><code>s = String.new
s # =&gt; &quot;&quot;
s.encoding # =&gt; #&lt;Encoding:ASCII-8BIT&gt;
</code></pre>

<p>With optional argument <code>string</code> and no keyword arguments, returns a copy of <code>string</code> with the same encoding:</p>

<pre><code>String.new(&#39;foo&#39;)               # =&gt; &quot;foo&quot;
String.new(&#39;тест&#39;)              # =&gt; &quot;тест&quot;
String.new(&#39;こんにちは&#39;)          # =&gt; &quot;こんにちは&quot;
</code></pre>

<p>(Unlike String.new, a string literal like <code>&#39;&#39;</code> or a string literal always has <a href="../files/ruby/doc/encodings_rdoc.html#label-Script+Encoding">script encoding</a>.)</p>

<p>With optional keyword argument <code>encoding</code>, returns a copy of <code>string</code> with the specified encoding; the <code>encoding</code> may be an <a href="Encoding.html"><code>Encoding</code></a> object, an encoding name, or an encoding name alias:</p>

<pre><code>String.new(&#39;foo&#39;, encoding: Encoding::US_ASCII).encoding # =&gt; #&lt;Encoding:US-ASCII&gt;
String.new(&#39;foo&#39;, encoding: &#39;US-ASCII&#39;).encoding         # =&gt; #&lt;Encoding:US-ASCII&gt;
String.new(&#39;foo&#39;, encoding: &#39;ASCII&#39;).encoding            # =&gt; #&lt;Encoding:US-ASCII&gt;
</code></pre>

<p>The given encoding need not be valid for the string’s content, and that validity is not checked:</p>

<pre><code>s = String.new(&#39;こんにちは&#39;, encoding: &#39;ascii&#39;)
s.valid_encoding? # =&gt; false
</code></pre>

<p>But the given <code>encoding</code> itself is checked:</p>

<pre><code>String.new(&#39;foo&#39;, encoding: &#39;bar&#39;) # Raises ArgumentError.
</code></pre>

<p>With optional keyword argument <code>capacity</code>, returns a copy of <code>string</code> (or an empty string, if <code>string</code> is not given); the given <code>capacity</code> is advisory only, and may or may not set the size of the internal buffer, which may in turn affect performance:</p>

<pre><code>String.new(capacity: 1)
String.new(&#39;foo&#39;, capacity: 4096)
</code></pre>

<p>The <code>string</code>, <code>encoding</code>, and <code>capacity</code> arguments may all be used together:</p>

<pre><code>String.new(&#39;hello&#39;, encoding: &#39;UTF-8&#39;, capacity: 25)
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre>static VALUE
rb_str_init(int argc, VALUE *argv, VALUE str)
{
    static ID keyword_ids[2];
    VALUE orig, opt, venc, vcapa;
    VALUE kwargs[2];
    rb_encoding *enc = 0;
    int n;

    if (!keyword_ids[0]) {
        keyword_ids[0] = rb_id_encoding();
        CONST_ID(keyword_ids[1], &quot;capacity&quot;);
    }

    n = rb_scan_args(argc, argv, &quot;01:&quot;, &amp;orig, &amp;opt);
    if (!NIL_P(opt)) {
        rb_get_kwargs(opt, keyword_ids, 0, 2, kwargs);
        venc = kwargs[0];
        vcapa = kwargs[1];
        if (!UNDEF_P(venc) &amp;&amp; !NIL_P(venc)) {
            enc = rb_to_encoding(venc);
        }
        if (!UNDEF_P(vcapa) &amp;&amp; !NIL_P(vcapa)) {
            long capa = NUM2LONG(vcapa);
            long len = 0;
            int termlen = enc ? rb_enc_mbminlen(enc) : 1;

            if (capa &lt; STR_BUF_MIN_SIZE) {
                capa = STR_BUF_MIN_SIZE;
            }
            if (n == 1) {
                StringValue(orig);
                len = RSTRING_LEN(orig);
                if (capa &lt; len) {
                    capa = len;
                }
                if (orig == str) n = 0;
            }
            str_modifiable(str);
            if (STR_EMBED_P(str) || FL_TEST(str, STR_SHARED|STR_NOFREE)) {
                /* make noembed always */
                const size_t size = (size_t)capa + termlen;
                const char *const old_ptr = RSTRING_PTR(str);
                const size_t osize = RSTRING_LEN(str) + TERM_LEN(str);
                char *new_ptr = ALLOC_N(char, size);
                if (STR_EMBED_P(str)) RUBY_ASSERT(osize &lt;= str_embed_capa(str));
                memcpy(new_ptr, old_ptr, osize &lt; size ? osize : size);
                FL_UNSET_RAW(str, STR_SHARED|STR_NOFREE);
                RSTRING(str)-&gt;as.heap.ptr = new_ptr;
            }
            else if (STR_HEAP_SIZE(str) != (size_t)capa + termlen) {
                SIZED_REALLOC_N(RSTRING(str)-&gt;as.heap.ptr, char,
                        (size_t)capa + termlen, STR_HEAP_SIZE(str));
            }
            STR_SET_LEN(str, len);
            TERM_FILL(&amp;RSTRING(str)-&gt;as.heap.ptr[len], termlen);
            if (n == 1) {
                memcpy(RSTRING(str)-&gt;as.heap.ptr, RSTRING_PTR(orig), len);
                rb_enc_cr_str_exact_copy(str, orig);
            }
            FL_SET(str, STR_NOEMBED);
            RSTRING(str)-&gt;as.heap.aux.capa = capa;
        }
        else if (n == 1) {
            rb_str_replace(str, orig);
        }
        if (enc) {
            rb_enc_associate(str, enc);
            ENC_CODERANGE_CLEAR(str);
        }
    }
    else if (n == 1) {
        rb_str_replace(str, orig);
    }
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-try_convert">
            
              <b>String.try_convert(object) &rarr; object, new_string, or nil
</b>
            
            <a href="../classes/String.html#method-c-try_convert" name="method-c-try_convert" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>If <code>object</code> is a String object, returns <code>object</code>.</p>

<p>Otherwise if <code>object</code> responds to <code>:to_str</code>, calls <code>object.to_str</code> and returns the result.</p>

<p>Returns <code>nil</code> if <code>object</code> does not respond to <code>:to_str</code>.</p>

<p>Raises an exception unless <code>object.to_str</code> returns a String object.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-try_convert_source')" id="l_method-c-try_convert_source">show</a>
                
              </p>
              <div id="method-c-try_convert_source" class="dyn-source">
                <pre>static VALUE
rb_str_s_try_convert(VALUE dummy, VALUE str)
{
    return rb_check_string_type(str);
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-25">
            
              <b>string % object &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-25" name="method-i-25" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the result of formatting <code>object</code> into the format specification <code>self</code> (see <a href="Kernel.html#method-i-sprintf"><code>Kernel#sprintf</code></a> for formatting details):</p>

<pre><code>&quot;%05d&quot; % 123 # =&gt; &quot;00123&quot;
</code></pre>

<p>If <code>self</code> contains multiple substitutions, <code>object</code> must be an <a href="Array.html"><code>Array</code></a> or <a href="Hash.html"><code>Hash</code></a> containing the values to be substituted:</p>

<pre><code>&quot;%-5s: %016x&quot; % [ &quot;ID&quot;, self.object_id ] # =&gt; &quot;ID   : 00002b054ec93168&quot;
&quot;foo = %{foo}&quot; % {foo: &#39;bar&#39;} # =&gt; &quot;foo = bar&quot;
&quot;foo = %{foo}, baz = %{baz}&quot; % {foo: &#39;bar&#39;, baz: &#39;bat&#39;} # =&gt; &quot;foo = bar, baz = bat&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-25_source')" id="l_method-i-25_source">show</a>
                
              </p>
              <div id="method-i-25_source" class="dyn-source">
                <pre>static VALUE
rb_str_format_m(VALUE str, VALUE arg)
{
    VALUE tmp = rb_check_array_type(arg);

    if (!NIL_P(tmp)) {
        return rb_str_format(RARRAY_LENINT(tmp), RARRAY_CONST_PTR(tmp), str);
    }
    return rb_str_format(1, &amp;arg, str);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-2A">
            
              <b>string * integer &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-2A" name="method-i-2A" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new String containing <code>integer</code> copies of <code>self</code>:</p>

<pre><code>&quot;Ho! &quot; * 3 # =&gt; &quot;Ho! Ho! Ho! &quot;
&quot;Ho! &quot; * 0 # =&gt; &quot;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-2A_source')" id="l_method-i-2A_source">show</a>
                
              </p>
              <div id="method-i-2A_source" class="dyn-source">
                <pre>VALUE
rb_str_times(VALUE str, VALUE times)
{
    VALUE str2;
    long n, len;
    char *ptr2;
    int termlen;

    if (times == INT2FIX(1)) {
        return str_duplicate(rb_cString, str);
    }
    if (times == INT2FIX(0)) {
        str2 = str_alloc_embed(rb_cString, 0);
        rb_enc_copy(str2, str);
        return str2;
    }
    len = NUM2LONG(times);
    if (len &lt; 0) {
        rb_raise(rb_eArgError, &quot;negative argument&quot;);
    }
    if (RSTRING_LEN(str) == 1 &amp;&amp; RSTRING_PTR(str)[0] == 0) {
        if (STR_EMBEDDABLE_P(len, 1)) {
            str2 = str_alloc_embed(rb_cString, len + 1);
            memset(RSTRING_PTR(str2), 0, len + 1);
        }
        else {
            str2 = str_alloc_heap(rb_cString);
            RSTRING(str2)-&gt;as.heap.aux.capa = len;
            RSTRING(str2)-&gt;as.heap.ptr = ZALLOC_N(char, (size_t)len + 1);
        }
        STR_SET_LEN(str2, len);
        rb_enc_copy(str2, str);
        return str2;
    }
    if (len &amp;&amp; LONG_MAX/len &lt;  RSTRING_LEN(str)) {
        rb_raise(rb_eArgError, &quot;argument too big&quot;);
    }

    len *= RSTRING_LEN(str);
    termlen = TERM_LEN(str);
    str2 = str_new0(rb_cString, 0, len, termlen);
    ptr2 = RSTRING_PTR(str2);
    if (len) {
        n = RSTRING_LEN(str);
        memcpy(ptr2, RSTRING_PTR(str), n);
        while (n &lt;= len/2) {
            memcpy(ptr2 + n, ptr2, n);
            n *= 2;
        }
        memcpy(ptr2 + n, ptr2, len-n);
    }
    STR_SET_LEN(str2, len);
    TERM_FILL(&amp;ptr2[len], termlen);
    rb_enc_cr_str_copy_for_substr(str2, str);

    return str2;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-2B">
            
              <b>string + other_string &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-2B" name="method-i-2B" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new String containing <code>other_string</code> concatenated to <code>self</code>:</p>

<pre><code>&quot;Hello from &quot; + self.to_s # =&gt; &quot;Hello from main&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-2B_source')" id="l_method-i-2B_source">show</a>
                
              </p>
              <div id="method-i-2B_source" class="dyn-source">
                <pre>VALUE
rb_str_plus(VALUE str1, VALUE str2)
{
    VALUE str3;
    rb_encoding *enc;
    char *ptr1, *ptr2, *ptr3;
    long len1, len2;
    int termlen;

    StringValue(str2);
    enc = rb_enc_check_str(str1, str2);
    RSTRING_GETMEM(str1, ptr1, len1);
    RSTRING_GETMEM(str2, ptr2, len2);
    termlen = rb_enc_mbminlen(enc);
    if (len1 &gt; LONG_MAX - len2) {
        rb_raise(rb_eArgError, &quot;string size too big&quot;);
    }
    str3 = str_new0(rb_cString, 0, len1+len2, termlen);
    ptr3 = RSTRING_PTR(str3);
    memcpy(ptr3, ptr1, len1);
    memcpy(ptr3+len1, ptr2, len2);
    TERM_FILL(&amp;ptr3[len1+len2], termlen);

    ENCODING_CODERANGE_SET(str3, rb_enc_to_index(enc),
                           ENC_CODERANGE_AND(ENC_CODERANGE(str1), ENC_CODERANGE(str2)));
    RB_GC_GUARD(str1);
    RB_GC_GUARD(str2);
    return str3;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-2B-40">
            
              <b>+string &rarr; new_string or self
</b>
            
            <a href="../classes/String.html#method-i-2B-40" name="method-i-2B-40" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>self</code> if <code>self</code> is not frozen.</p>

<p>Otherwise returns <code>self.dup</code>, which is not frozen.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-2B-40_source')" id="l_method-i-2B-40_source">show</a>
                
              </p>
              <div id="method-i-2B-40_source" class="dyn-source">
                <pre>static VALUE
str_uplus(VALUE str)
{
    if (OBJ_FROZEN(str)) {
        return rb_str_dup(str);
    }
    else {
        return str;
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-2D-40">
            
              <b>-string &rarr; frozen_string</b>
            
            <a href="../classes/String.html#method-i-2D-40" name="method-i-2D-40" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a frozen, possibly pre-existing copy of the string.</p>

<p>The returned String will be deduplicated as long as it does not have any instance variables set on it and is not a <a href="String.html"><code>String</code></a> subclass.</p>

<p>Note that <code>-string</code> variant is more convenient for defining constants:</p>

<pre><code>FILENAME = -&#39;config/database.yml&#39;
</code></pre>

<p>while <code>dedup</code> is better suitable for using the method in chains of calculations:</p>

<pre><code>@url_list.concat(urls.map(&amp;:dedup))
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-dedup">dedup</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-2D-40_source')" id="l_method-i-2D-40_source">show</a>
                
              </p>
              <div id="method-i-2D-40_source" class="dyn-source">
                <pre>static VALUE
str_uminus(VALUE str)
{
    if (!BARE_STRING_P(str) &amp;&amp; !rb_obj_frozen_p(str)) {
        str = rb_str_dup(str);
    }
    return rb_fstring(str);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-3C-3C">
            
              <b>string << object &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-3C-3C" name="method-i-3C-3C" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Concatenates <code>object</code> to <code>self</code> and returns <code>self</code>:</p>

<pre><code>s = &#39;foo&#39;
s &lt;&lt; &#39;bar&#39; # =&gt; &quot;foobar&quot;
s          # =&gt; &quot;foobar&quot;
</code></pre>

<p>If <code>object</code> is an <a href="Integer.html"><code>Integer</code></a>, the value is considered a codepoint and converted to a character before concatenation:</p>

<pre><code>s = &#39;foo&#39;
s &lt;&lt; 33 # =&gt; &quot;foo!&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-concat"><code>String#concat</code></a>, which takes multiple arguments.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-3C-3C_source')" id="l_method-i-3C-3C_source">show</a>
                
              </p>
              <div id="method-i-3C-3C_source" class="dyn-source">
                <pre>VALUE
rb_str_concat(VALUE str1, VALUE str2)
{
    unsigned int code;
    rb_encoding *enc = STR_ENC_GET(str1);
    int encidx;

    if (RB_INTEGER_TYPE_P(str2)) {
        if (rb_num_to_uint(str2, &amp;code) == 0) {
        }
        else if (FIXNUM_P(str2)) {
            rb_raise(rb_eRangeError, &quot;%ld out of char range&quot;, FIX2LONG(str2));
        }
        else {
            rb_raise(rb_eRangeError, &quot;bignum out of char range&quot;);
        }
    }
    else {
        return rb_str_append(str1, str2);
    }

    encidx = rb_ascii8bit_appendable_encoding_index(enc, code);
    if (encidx &gt;= 0) {
        char buf[1];
        buf[0] = (char)code;
        rb_str_cat(str1, buf, 1);
        if (encidx != rb_enc_to_index(enc)) {
            rb_enc_associate_index(str1, encidx);
            ENC_CODERANGE_SET(str1, ENC_CODERANGE_VALID);
        }
    }
    else {
        long pos = RSTRING_LEN(str1);
        int cr = ENC_CODERANGE(str1);
        int len;
        char *buf;

        switch (len = rb_enc_codelen(code, enc)) {
          case ONIGERR_INVALID_CODE_POINT_VALUE:
            rb_raise(rb_eRangeError, &quot;invalid codepoint 0x%X in %s&quot;, code, rb_enc_name(enc));
            break;
          case ONIGERR_TOO_BIG_WIDE_CHAR_VALUE:
          case 0:
            rb_raise(rb_eRangeError, &quot;%u out of char range&quot;, code);
            break;
        }
        buf = ALLOCA_N(char, len + 1);
        rb_enc_mbcput(code, buf, enc);
        if (rb_enc_precise_mbclen(buf, buf + len + 1, enc) != len) {
            rb_raise(rb_eRangeError, &quot;invalid codepoint 0x%X in %s&quot;, code, rb_enc_name(enc));
        }
        rb_str_resize(str1, pos+len);
        memcpy(RSTRING_PTR(str1) + pos, buf, len);
        if (cr == ENC_CODERANGE_7BIT &amp;&amp; code &gt; 127) {
            cr = ENC_CODERANGE_VALID;
        }
        else if (cr == ENC_CODERANGE_BROKEN) {
            cr = ENC_CODERANGE_UNKNOWN;
        }
        ENC_CODERANGE_SET(str1, cr);
    }
    return str1;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-3C-3D-3E">
            
              <b>string <=> other_string &rarr; -1, 0, 1, or nil
</b>
            
            <a href="../classes/String.html#method-i-3C-3D-3E" name="method-i-3C-3D-3E" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Compares <code>self</code> and <code>other_string</code>, returning:</p>
<ul><li>
<p>-1 if <code>other_string</code> is larger.</p>
</li><li>
<p>0 if the two are equal.</p>
</li><li>
<p>1 if <code>other_string</code> is smaller.</p>
</li><li>
<p><code>nil</code> if the two are incomparable.</p>
</li></ul>

<p>Examples:</p>

<pre><code>&#39;foo&#39; &lt;=&gt; &#39;foo&#39; # =&gt; 0
&#39;foo&#39; &lt;=&gt; &#39;food&#39; # =&gt; -1
&#39;food&#39; &lt;=&gt; &#39;foo&#39; # =&gt; 1
&#39;FOO&#39; &lt;=&gt; &#39;foo&#39; # =&gt; -1
&#39;foo&#39; &lt;=&gt; &#39;FOO&#39; # =&gt; 1
&#39;foo&#39; &lt;=&gt; 1 # =&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-3C-3D-3E_source')" id="l_method-i-3C-3D-3E_source">show</a>
                
              </p>
              <div id="method-i-3C-3D-3E_source" class="dyn-source">
                <pre>static VALUE
rb_str_cmp_m(VALUE str1, VALUE str2)
{
    int result;
    VALUE s = rb_check_string_type(str2);
    if (NIL_P(s)) {
        return rb_invcmp(str1, str2);
    }
    result = rb_str_cmp(str1, s);
    return INT2FIX(result);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-3D-3D">
            
              <b>string == object &rarr; true or false</b>
            
            <a href="../classes/String.html#method-i-3D-3D" name="method-i-3D-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>object</code> has the same length and content; as <code>self</code>; <code>false</code> otherwise:</p>

<pre><code>s = &#39;foo&#39;
s == &#39;foo&#39; # =&gt; true
s == &#39;food&#39; # =&gt; false
s == &#39;FOO&#39; # =&gt; false
</code></pre>

<p>Returns <code>false</code> if the two strings’ encodings are not compatible:</p>

<pre><code>&quot;\u{e4 f6 fc}&quot;.encode(&quot;ISO-8859-1&quot;) == (&quot;\u{c4 d6 dc}&quot;) # =&gt; false
</code></pre>

<p>If <code>object</code> is not an instance of String but responds to <code>to_str</code>, then the two strings are compared using <code>object.==</code>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-3D-3D-3D">===</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-3D-3D_source')" id="l_method-i-3D-3D_source">show</a>
                
              </p>
              <div id="method-i-3D-3D_source" class="dyn-source">
                <pre>VALUE
rb_str_equal(VALUE str1, VALUE str2)
{
    if (str1 == str2) return Qtrue;
    if (!RB_TYPE_P(str2, T_STRING)) {
        if (!rb_respond_to(str2, idTo_str)) {
            return Qfalse;
        }
        return rb_equal(str2, str1);
    }
    return rb_str_eql_internal(str1, str2);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-3D-3D-3D">
            
              <b>string === object &rarr; true or false</b>
            
            <a href="../classes/String.html#method-i-3D-3D-3D" name="method-i-3D-3D-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>object</code> has the same length and content; as <code>self</code>; <code>false</code> otherwise:</p>

<pre><code>s = &#39;foo&#39;
s == &#39;foo&#39; # =&gt; true
s == &#39;food&#39; # =&gt; false
s == &#39;FOO&#39; # =&gt; false
</code></pre>

<p>Returns <code>false</code> if the two strings’ encodings are not compatible:</p>

<pre><code>&quot;\u{e4 f6 fc}&quot;.encode(&quot;ISO-8859-1&quot;) == (&quot;\u{c4 d6 dc}&quot;) # =&gt; false
</code></pre>

<p>If <code>object</code> is not an instance of String but responds to <code>to_str</code>, then the two strings are compared using <code>object.==</code>.</p>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-3D-3D">==</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-3D~">
            
              <b>string =~ regexp &rarr; integer or nil<br />string =~ object &rarr; integer or nil
</b>
            
            <a href="../classes/String.html#method-i-3D~" name="method-i-3D~" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Integer.html"><code>Integer</code></a> index of the first substring that matches the given <code>regexp</code>, or <code>nil</code> if no match found:</p>

<pre><code>&#39;foo&#39; =~ /f/ # =&gt; 0
&#39;foo&#39; =~ /o/ # =&gt; 1
&#39;foo&#39; =~ /x/ # =&gt; nil
</code></pre>

<p>Note: also updates <a href="Regexp.html#class-Regexp-label-Global+Variables">Global Variables at <code>Regexp</code></a>.</p>

<p>If the given <code>object</code> is not a <a href="Regexp.html"><code>Regexp</code></a>, returns the value returned by <code>object =~ self</code>.</p>

<p>Note that <code>string =~ regexp</code> is different from <code>regexp =~ string</code> (see Regexp#=~):</p>

<pre><code>number= nil
&quot;no. 9&quot; =~ /(?&lt;number&gt;\d+)/
number # =&gt; nil (not assigned)
/(?&lt;number&gt;\d+)/ =~ &quot;no. 9&quot;
number #=&gt; &quot;9&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-3D~_source')" id="l_method-i-3D~_source">show</a>
                
              </p>
              <div id="method-i-3D~_source" class="dyn-source">
                <pre>static VALUE
rb_str_match(VALUE x, VALUE y)
{
    switch (OBJ_BUILTIN_TYPE(y)) {
      case T_STRING:
        rb_raise(rb_eTypeError, &quot;type mismatch: String given&quot;);

      case T_REGEXP:
        return rb_reg_match(y, x);

      default:
        return rb_funcall(y, idEqTilde, 1, x);
    }
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-5B-5D">
            
              <b>string[index] &rarr; new_string or nil<br />string[start, length] &rarr; new_string or nil<br />string[range] &rarr; new_string or nil<br />string[regexp, capture = 0] &rarr; new_string or nil<br />string[substring] &rarr; new_string or nil</b>
            
            <a href="../classes/String.html#method-i-5B-5D" name="method-i-5B-5D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the substring of <code>self</code> specified by the arguments. See examples at <a href="String.html#class-String-label-String+Slices">String Slices</a>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-slice">slice</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-5B-5D_source')" id="l_method-i-5B-5D_source">show</a>
                
              </p>
              <div id="method-i-5B-5D_source" class="dyn-source">
                <pre>static VALUE
rb_str_aref_m(int argc, VALUE *argv, VALUE str)
{
    if (argc == 2) {
        if (RB_TYPE_P(argv[0], T_REGEXP)) {
            return rb_str_subpat(str, argv[0], argv[1]);
        }
        else {
            long beg = NUM2LONG(argv[0]);
            long len = NUM2LONG(argv[1]);
            return rb_str_substr(str, beg, len);
        }
    }
    rb_check_arity(argc, 1, 2);
    return rb_str_aref(str, argv[0]);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-5B-5D-3D">
            
              <b>string[index] = new_string<br />string[start, length] = new_string<br />string[range] = new_string<br />string[regexp, capture = 0] = new_string<br />string[substring] = new_string
</b>
            
            <a href="../classes/String.html#method-i-5B-5D-3D" name="method-i-5B-5D-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Replaces all, some, or none of the contents of <code>self</code>; returns <code>new_string</code>. See <a href="String.html#class-String-label-String+Slices">String Slices</a>.</p>

<p>A few examples:</p>

<pre><code>s = &#39;foo&#39;
s[2] = &#39;rtune&#39;     # =&gt; &quot;rtune&quot;
s                  # =&gt; &quot;fortune&quot;
s[1, 5] = &#39;init&#39;   # =&gt; &quot;init&quot;
s                  # =&gt; &quot;finite&quot;
s[3..4] = &#39;al&#39;     # =&gt; &quot;al&quot;
s                  # =&gt; &quot;finale&quot;
s[/e$/] = &#39;ly&#39;     # =&gt; &quot;ly&quot;
s                  # =&gt; &quot;finally&quot;
s[&#39;lly&#39;] = &#39;ncial&#39; # =&gt; &quot;ncial&quot;
s                  # =&gt; &quot;financial&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-5B-5D-3D_source')" id="l_method-i-5B-5D-3D_source">show</a>
                
              </p>
              <div id="method-i-5B-5D-3D_source" class="dyn-source">
                <pre>static VALUE
rb_str_aset_m(int argc, VALUE *argv, VALUE str)
{
    if (argc == 3) {
        if (RB_TYPE_P(argv[0], T_REGEXP)) {
            rb_str_subpat_set(str, argv[0], argv[1], argv[2]);
        }
        else {
            rb_str_update(str, NUM2LONG(argv[0]), NUM2LONG(argv[1]), argv[2]);
        }
        return argv[2];
    }
    rb_check_arity(argc, 2, 3);
    return rb_str_aset(str, argv[0], argv[1]);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-ascii_only-3F">
            
              <b>ascii_only? &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-ascii_only-3F" name="method-i-ascii_only-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>self</code> contains only ASCII characters, <code>false</code> otherwise:</p>

<pre><code>&#39;abc&#39;.ascii_only?         # =&gt; true
&quot;abc\u{6666}&quot;.ascii_only? # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-ascii_only-3F_source')" id="l_method-i-ascii_only-3F_source">show</a>
                
              </p>
              <div id="method-i-ascii_only-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_is_ascii_only_p(VALUE str)
{
    int cr = rb_enc_str_coderange(str);

    return RBOOL(cr == ENC_CODERANGE_7BIT);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-b">
            
              <b>b &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-b" name="method-i-b" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> that has ASCII-8BIT encoding; the underlying bytes are not modified:</p>

<pre><code>s = &quot;\x99&quot;
s.encoding   # =&gt; #&lt;Encoding:UTF-8&gt;
t = s.b      # =&gt; &quot;\x99&quot;
t.encoding   # =&gt; #&lt;Encoding:ASCII-8BIT&gt;

s = &quot;\u4095&quot; # =&gt; &quot;䂕&quot;
s.encoding   # =&gt; #&lt;Encoding:UTF-8&gt;
s.bytes      # =&gt; [228, 130, 149]
t = s.b      # =&gt; &quot;\xE4\x82\x95&quot;
t.encoding   # =&gt; #&lt;Encoding:ASCII-8BIT&gt;
t.bytes      # =&gt; [228, 130, 149]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-b_source')" id="l_method-i-b_source">show</a>
                
              </p>
              <div id="method-i-b_source" class="dyn-source">
                <pre>static VALUE
rb_str_b(VALUE str)
{
    VALUE str2;
    if (STR_EMBED_P(str)) {
        str2 = str_alloc_embed(rb_cString, RSTRING_LEN(str) + TERM_LEN(str));
    }
    else {
        str2 = str_alloc_heap(rb_cString);
    }
    str_replace_shared_without_enc(str2, str);

    if (rb_enc_asciicompat(STR_ENC_GET(str))) {
        // BINARY strings can never be broken; they&#39;re either 7-bit ASCII or VALID.
        // If we know the receiver&#39;s code range then we know the result&#39;s code range.
        int cr = ENC_CODERANGE(str);
        switch (cr) {
          case ENC_CODERANGE_7BIT:
            ENC_CODERANGE_SET(str2, ENC_CODERANGE_7BIT);
            break;
          case ENC_CODERANGE_BROKEN:
          case ENC_CODERANGE_VALID:
            ENC_CODERANGE_SET(str2, ENC_CODERANGE_VALID);
            break;
          default:
            ENC_CODERANGE_CLEAR(str2);
            break;
        }
    }

    return str2;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-byteindex">
            
              <b>byteindex(substring, offset = 0) &rarr; integer or nil<br />byteindex(regexp, offset = 0) &rarr; integer or nil
</b>
            
            <a href="../classes/String.html#method-i-byteindex" name="method-i-byteindex" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Integer.html"><code>Integer</code></a> byte-based index of the first occurrence of the given <code>substring</code>, or <code>nil</code> if none found:</p>

<pre><code>&#39;foo&#39;.byteindex(&#39;f&#39;) # =&gt; 0
&#39;foo&#39;.byteindex(&#39;o&#39;) # =&gt; 1
&#39;foo&#39;.byteindex(&#39;oo&#39;) # =&gt; 1
&#39;foo&#39;.byteindex(&#39;ooo&#39;) # =&gt; nil
</code></pre>

<p>Returns the <a href="Integer.html"><code>Integer</code></a> byte-based index of the first match for the given <a href="Regexp.html"><code>Regexp</code></a> <code>regexp</code>, or <code>nil</code> if none found:</p>

<pre><code>&#39;foo&#39;.byteindex(/f/) # =&gt; 0
&#39;foo&#39;.byteindex(/o/) # =&gt; 1
&#39;foo&#39;.byteindex(/oo/) # =&gt; 1
&#39;foo&#39;.byteindex(/ooo/) # =&gt; nil
</code></pre>

<p><a href="Integer.html"><code>Integer</code></a> argument <code>offset</code>, if given, specifies the byte-based position in the string to begin the search:</p>

<pre><code>&#39;foo&#39;.byteindex(&#39;o&#39;, 1) # =&gt; 1
&#39;foo&#39;.byteindex(&#39;o&#39;, 2) # =&gt; 2
&#39;foo&#39;.byteindex(&#39;o&#39;, 3) # =&gt; nil
</code></pre>

<p>If <code>offset</code> is negative, counts backward from the end of <code>self</code>:</p>

<pre><code>&#39;foo&#39;.byteindex(&#39;o&#39;, -1) # =&gt; 2
&#39;foo&#39;.byteindex(&#39;o&#39;, -2) # =&gt; 1
&#39;foo&#39;.byteindex(&#39;o&#39;, -3) # =&gt; 1
&#39;foo&#39;.byteindex(&#39;o&#39;, -4) # =&gt; nil
</code></pre>

<p>If <code>offset</code> does not land on character (codepoint) boundary, <code>IndexError</code> is raised.</p>

<p>Related: <a href="String.html#method-i-index"><code>String#index</code></a>, <a href="String.html#method-i-byterindex"><code>String#byterindex</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-byteindex_source')" id="l_method-i-byteindex_source">show</a>
                
              </p>
              <div id="method-i-byteindex_source" class="dyn-source">
                <pre>static VALUE
rb_str_byteindex_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    long pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        long slen = RSTRING_LEN(str);
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 ? (pos += slen) &lt; 0 : pos &gt; slen) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
    }
    else {
        pos = 0;
    }

    str_ensure_byte_pos(str, pos);

    if (RB_TYPE_P(sub, T_REGEXP)) {
        if (rb_reg_search(sub, str, pos, 0) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = BEG(0);
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_byteindex(str, sub, pos);
        if (pos &gt;= 0) return LONG2NUM(pos);
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-byterindex">
            
              <b>byterindex(substring, offset = self.bytesize) &rarr; integer or nil<br />byterindex(regexp, offset = self.bytesize) &rarr; integer or nil
</b>
            
            <a href="../classes/String.html#method-i-byterindex" name="method-i-byterindex" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Integer.html"><code>Integer</code></a> byte-based index of the <em>last</em> occurrence of the given <code>substring</code>, or <code>nil</code> if none found:</p>

<pre><code>&#39;foo&#39;.byterindex(&#39;f&#39;) # =&gt; 0
&#39;foo&#39;.byterindex(&#39;o&#39;) # =&gt; 2
&#39;foo&#39;.byterindex(&#39;oo&#39;) # =&gt; 1
&#39;foo&#39;.byterindex(&#39;ooo&#39;) # =&gt; nil
</code></pre>

<p>Returns the <a href="Integer.html"><code>Integer</code></a> byte-based index of the <em>last</em> match for the given <a href="Regexp.html"><code>Regexp</code></a> <code>regexp</code>, or <code>nil</code> if none found:</p>

<pre><code>&#39;foo&#39;.byterindex(/f/) # =&gt; 0
&#39;foo&#39;.byterindex(/o/) # =&gt; 2
&#39;foo&#39;.byterindex(/oo/) # =&gt; 1
&#39;foo&#39;.byterindex(/ooo/) # =&gt; nil
</code></pre>

<p>The <em>last</em> match means starting at the possible last position, not the last of longest matches.</p>

<pre><code>&#39;foo&#39;.byterindex(/o+/) # =&gt; 2
$~ #=&gt; #&lt;MatchData &quot;o&quot;&gt;
</code></pre>

<p>To get the last longest match, needs to combine with negative lookbehind.</p>

<pre><code>&#39;foo&#39;.byterindex(/(?&lt;!o)o+/) # =&gt; 1
$~ #=&gt; #&lt;MatchData &quot;oo&quot;&gt;
</code></pre>

<p>Or <a href="String.html#method-i-byteindex"><code>String#byteindex</code></a> with negative lookforward.</p>

<pre><code>&#39;foo&#39;.byteindex(/o+(?!.*o)/) # =&gt; 1
$~ #=&gt; #&lt;MatchData &quot;oo&quot;&gt;
</code></pre>

<p><a href="Integer.html"><code>Integer</code></a> argument <code>offset</code>, if given and non-negative, specifies the maximum starting byte-based position in the</p>

<pre><code>string to _end_ the search:

 &#39;foo&#39;.byterindex(&#39;o&#39;, 0) # =&gt; nil
 &#39;foo&#39;.byterindex(&#39;o&#39;, 1) # =&gt; 1
 &#39;foo&#39;.byterindex(&#39;o&#39;, 2) # =&gt; 2
 &#39;foo&#39;.byterindex(&#39;o&#39;, 3) # =&gt; 2
</code></pre>

<p>If <code>offset</code> is a negative <a href="Integer.html"><code>Integer</code></a>, the maximum starting position in the string to <em>end</em> the search is the sum of the string’s length and <code>offset</code>:</p>

<pre><code>&#39;foo&#39;.byterindex(&#39;o&#39;, -1) # =&gt; 2
&#39;foo&#39;.byterindex(&#39;o&#39;, -2) # =&gt; 1
&#39;foo&#39;.byterindex(&#39;o&#39;, -3) # =&gt; nil
&#39;foo&#39;.byterindex(&#39;o&#39;, -4) # =&gt; nil
</code></pre>

<p>If <code>offset</code> does not land on character (codepoint) boundary, <code>IndexError</code> is raised.</p>

<p>Related: <a href="String.html#method-i-byteindex"><code>String#byteindex</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-byterindex_source')" id="l_method-i-byterindex_source">show</a>
                
              </p>
              <div id="method-i-byterindex_source" class="dyn-source">
                <pre>static VALUE
rb_str_byterindex_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    long pos, len = RSTRING_LEN(str);

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 &amp;&amp; (pos += len) &lt; 0) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
        if (pos &gt; len) pos = len;
    }
    else {
        pos = len;
    }

    str_ensure_byte_pos(str, pos);

    if (RB_TYPE_P(sub, T_REGEXP)) {
        if (rb_reg_search(sub, str, pos, 1) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = BEG(0);
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_byterindex(str, sub, pos);
        if (pos &gt;= 0) return LONG2NUM(pos);
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-bytes">
            
              <b>bytes &rarr; array_of_bytes
</b>
            
            <a href="../classes/String.html#method-i-bytes" name="method-i-bytes" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the bytes in <code>self</code>:</p>

<pre><code>&#39;hello&#39;.bytes # =&gt; [104, 101, 108, 108, 111]
&#39;тест&#39;.bytes  # =&gt; [209, 130, 208, 181, 209, 129, 209, 130]
&#39;こんにちは&#39;.bytes
# =&gt; [227, 129, 147, 227, 130, 147, 227, 129, 171, 227, 129, 161, 227, 129, 175]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-bytes_source')" id="l_method-i-bytes_source">show</a>
                
              </p>
              <div id="method-i-bytes_source" class="dyn-source">
                <pre>static VALUE
rb_str_bytes(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;bytes&quot;, RSTRING_LEN(str));
    return rb_str_enumerate_bytes(str, ary);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-bytesize">
            
              <b>bytesize &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-bytesize" name="method-i-bytesize" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the count of bytes (not characters) in <code>self</code>:</p>

<pre><code>&#39;foo&#39;.bytesize        # =&gt; 3
&#39;тест&#39;.bytesize       # =&gt; 8
&#39;こんにちは&#39;.bytesize   # =&gt; 15
</code></pre>

<p>Contrast with <a href="String.html#method-i-length"><code>String#length</code></a>:</p>

<pre><code>&#39;foo&#39;.length       # =&gt; 3
&#39;тест&#39;.length      # =&gt; 4
&#39;こんにちは&#39;.length  # =&gt; 5
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-bytesize_source')" id="l_method-i-bytesize_source">show</a>
                
              </p>
              <div id="method-i-bytesize_source" class="dyn-source">
                <pre>VALUE
rb_str_bytesize(VALUE str)
{
    return LONG2NUM(RSTRING_LEN(str));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-byteslice">
            
              <b>byteslice(index, length = 1) &rarr; string or nil<br />byteslice(range)             &rarr; string or nil
</b>
            
            <a href="../classes/String.html#method-i-byteslice" name="method-i-byteslice" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a substring of <code>self</code>, or <code>nil</code> if the substring cannot be constructed.</p>

<p>With integer arguments <code>index</code> and <code>length</code> given, returns the substring beginning at the given <code>index</code> of the given <code>length</code> (if possible), or <code>nil</code> if <code>length</code> is negative or <code>index</code> falls outside of <code>self</code>:</p>

<pre><code>s = &#39;0123456789&#39; # =&gt; &quot;0123456789&quot;
s.byteslice(2)   # =&gt; &quot;2&quot;
s.byteslice(200) # =&gt; nil
s.byteslice(4, 3)  # =&gt; &quot;456&quot;
s.byteslice(4, 30) # =&gt; &quot;456789&quot;
s.byteslice(4, -1) # =&gt; nil
s.byteslice(40, 2) # =&gt; nil
</code></pre>

<p>In either case above, counts backwards from the end of <code>self</code> if <code>index</code> is negative:</p>

<pre><code>s = &#39;0123456789&#39;   # =&gt; &quot;0123456789&quot;
s.byteslice(-4)    # =&gt; &quot;6&quot;
s.byteslice(-4, 3) # =&gt; &quot;678&quot;
</code></pre>

<p>With <a href="Range.html"><code>Range</code></a> argument <code>range</code> given, returns <code>byteslice(range.begin, range.size)</code>:</p>

<pre><code>s = &#39;0123456789&#39;    # =&gt; &quot;0123456789&quot;
s.byteslice(4..6)   # =&gt; &quot;456&quot;
s.byteslice(-6..-4) # =&gt; &quot;456&quot;
s.byteslice(5..2)   # =&gt; &quot;&quot; # range.size is zero.
s.byteslice(40..42) # =&gt; nil
</code></pre>

<p>In all cases, a returned string has the same encoding as <code>self</code>:</p>

<pre><code>s.encoding              # =&gt; #&lt;Encoding:UTF-8&gt;
s.byteslice(4).encoding # =&gt; #&lt;Encoding:UTF-8&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-byteslice_source')" id="l_method-i-byteslice_source">show</a>
                
              </p>
              <div id="method-i-byteslice_source" class="dyn-source">
                <pre>static VALUE
rb_str_byteslice(int argc, VALUE *argv, VALUE str)
{
    if (argc == 2) {
        long beg = NUM2LONG(argv[0]);
        long len = NUM2LONG(argv[1]);
        return str_byte_substr(str, beg, len, TRUE);
    }
    rb_check_arity(argc, 1, 2);
    return str_byte_aref(str, argv[0]);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-bytesplice">
            
              <b>bytesplice(index, length, str) &rarr; string<br />bytesplice(index, length, str, str_index, str_length) &rarr; string<br />bytesplice(range, str) &rarr; string<br />bytesplice(range, str, str_range) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-bytesplice" name="method-i-bytesplice" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Replaces some or all of the content of <code>self</code> with <code>str</code>, and returns <code>self</code>. The portion of the string affected is determined using the same criteria as <a href="String.html#method-i-byteslice"><code>String#byteslice</code></a>, except that <code>length</code> cannot be omitted. If the replacement string is not the same length as the text it is replacing, the string will be adjusted accordingly.</p>

<p>If <code>str_index</code> and <code>str_length</code>, or <code>str_range</code> are given, the content of <code>self</code> is replaced by str.byteslice(str_index, str_length) or str.byteslice(str_range); however the substring of <code>str</code> is not allocated as a new string.</p>

<p>The form that take an <a href="Integer.html"><code>Integer</code></a> will raise an <a href="IndexError.html"><code>IndexError</code></a> if the value is out of range; the <a href="Range.html"><code>Range</code></a> form will raise a <a href="RangeError.html"><code>RangeError</code></a>. If the beginning or ending offset does not land on character (codepoint) boundary, an <a href="IndexError.html"><code>IndexError</code></a> will be raised.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-bytesplice_source')" id="l_method-i-bytesplice_source">show</a>
                
              </p>
              <div id="method-i-bytesplice_source" class="dyn-source">
                <pre>static VALUE
rb_str_bytesplice(int argc, VALUE *argv, VALUE str)
{
    long beg, len, vbeg, vlen;
    VALUE val;
    rb_encoding *enc;
    int cr;

    rb_check_arity(argc, 2, 5);
    if (!(argc == 2 || argc == 3 || argc == 5)) {
        rb_raise(rb_eArgError, &quot;wrong number of arguments (given %d, expected 2, 3, or 5)&quot;, argc);
    }
    if (argc == 2 || (argc == 3 &amp;&amp; !RB_INTEGER_TYPE_P(argv[0]))) {
        if (!rb_range_beg_len(argv[0], &amp;beg, &amp;len, RSTRING_LEN(str), 2)) {
            rb_raise(rb_eTypeError, &quot;wrong argument type %s (expected Range)&quot;,
                     rb_builtin_class_name(argv[0]));
        }
        val = argv[1];
        StringValue(val);
        if (argc == 2) {
            /* bytesplice(range, str) */
            vbeg = 0;
            vlen = RSTRING_LEN(val);
        }
        else {
            /* bytesplice(range, str, str_range) */
            if (!rb_range_beg_len(argv[2], &amp;vbeg, &amp;vlen, RSTRING_LEN(val), 2)) {
                rb_raise(rb_eTypeError, &quot;wrong argument type %s (expected Range)&quot;,
                         rb_builtin_class_name(argv[2]));
            }
        }
    }
    else {
        beg = NUM2LONG(argv[0]);
        len = NUM2LONG(argv[1]);
        val = argv[2];
        StringValue(val);
        if (argc == 3) {
            /* bytesplice(index, length, str) */
            vbeg = 0;
            vlen = RSTRING_LEN(val);
        }
        else {
            /* bytesplice(index, length, str, str_index, str_length) */
            vbeg = NUM2LONG(argv[3]);
            vlen = NUM2LONG(argv[4]);
        }
    }
    str_check_beg_len(str, &amp;beg, &amp;len);
    str_check_beg_len(val, &amp;vbeg, &amp;vlen);
    enc = rb_enc_check(str, val);
    str_modify_keep_cr(str);
    rb_str_update_1(str, beg, len, val, vbeg, vlen);
    rb_enc_associate(str, enc);
    cr = ENC_CODERANGE_AND(ENC_CODERANGE(str), ENC_CODERANGE(val));
    if (cr != ENC_CODERANGE_BROKEN)
        ENC_CODERANGE_SET(str, cr);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-capitalize">
            
              <b>capitalize(*options) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-capitalize" name="method-i-capitalize" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string containing the characters in <code>self</code>; the first character is upcased; the remaining characters are downcased:</p>

<pre><code>s = &#39;hello World!&#39; # =&gt; &quot;hello World!&quot;
s.capitalize       # =&gt; &quot;Hello world!&quot;
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-capitalize-21"><code>String#capitalize!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-capitalize_source')" id="l_method-i-capitalize_source">show</a>
                
              </p>
              <div id="method-i-capitalize_source" class="dyn-source">
                <pre>static VALUE
rb_str_capitalize(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_TITLECASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return str;
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }
    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-capitalize-21">
            
              <b>capitalize!(*options) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-capitalize-21" name="method-i-capitalize-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Upcases the first character in <code>self</code>; downcases the remaining characters; returns <code>self</code> if any changes were made, <code>nil</code> otherwise:</p>

<pre><code>s = &#39;hello World!&#39; # =&gt; &quot;hello World!&quot;
s.capitalize!      # =&gt; &quot;Hello world!&quot;
s                  # =&gt; &quot;Hello world!&quot;
s.capitalize!      # =&gt; nil
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-capitalize"><code>String#capitalize</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-capitalize-21_source')" id="l_method-i-capitalize-21_source">show</a>
                
              </p>
              <div id="method-i-capitalize-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_capitalize_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_TITLECASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return Qnil;
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-casecmp">
            
              <b>casecmp(other_string) &rarr; -1, 0, 1, or nil
</b>
            
            <a href="../classes/String.html#method-i-casecmp" name="method-i-casecmp" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Compares <code>self.downcase</code> and <code>other_string.downcase</code>; returns:</p>
<ul><li>
<p>-1 if <code>other_string.downcase</code> is larger.</p>
</li><li>
<p>0 if the two are equal.</p>
</li><li>
<p>1 if <code>other_string.downcase</code> is smaller.</p>
</li><li>
<p><code>nil</code> if the two are incomparable.</p>
</li></ul>

<p>Examples:</p>

<pre><code>&#39;foo&#39;.casecmp(&#39;foo&#39;) # =&gt; 0
&#39;foo&#39;.casecmp(&#39;food&#39;) # =&gt; -1
&#39;food&#39;.casecmp(&#39;foo&#39;) # =&gt; 1
&#39;FOO&#39;.casecmp(&#39;foo&#39;) # =&gt; 0
&#39;foo&#39;.casecmp(&#39;FOO&#39;) # =&gt; 0
&#39;foo&#39;.casecmp(1) # =&gt; nil
</code></pre>

<p>See <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-casecmp-3F"><code>String#casecmp?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-casecmp_source')" id="l_method-i-casecmp_source">show</a>
                
              </p>
              <div id="method-i-casecmp_source" class="dyn-source">
                <pre>static VALUE
rb_str_casecmp(VALUE str1, VALUE str2)
{
    VALUE s = rb_check_string_type(str2);
    if (NIL_P(s)) {
        return Qnil;
    }
    return str_casecmp(str1, s);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-casecmp-3F">
            
              <b>casecmp?(other_string) &rarr; true, false, or nil
</b>
            
            <a href="../classes/String.html#method-i-casecmp-3F" name="method-i-casecmp-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>self</code> and <code>other_string</code> are equal after Unicode case folding, otherwise <code>false</code>:</p>

<pre><code>&#39;foo&#39;.casecmp?(&#39;foo&#39;) # =&gt; true
&#39;foo&#39;.casecmp?(&#39;food&#39;) # =&gt; false
&#39;food&#39;.casecmp?(&#39;foo&#39;) # =&gt; false
&#39;FOO&#39;.casecmp?(&#39;foo&#39;) # =&gt; true
&#39;foo&#39;.casecmp?(&#39;FOO&#39;) # =&gt; true
</code></pre>

<p>Returns <code>nil</code> if the two values are incomparable:</p>

<pre><code>&#39;foo&#39;.casecmp?(1) # =&gt; nil
</code></pre>

<p>See <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-casecmp"><code>String#casecmp</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-casecmp-3F_source')" id="l_method-i-casecmp-3F_source">show</a>
                
              </p>
              <div id="method-i-casecmp-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_casecmp_p(VALUE str1, VALUE str2)
{
    VALUE s = rb_check_string_type(str2);
    if (NIL_P(s)) {
        return Qnil;
    }
    return str_casecmp_p(str1, s);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-center">
            
              <b>center(size, pad_string = ' ') &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-center" name="method-i-center" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a centered copy of <code>self</code>.</p>

<p>If integer argument <code>size</code> is greater than the size (in characters) of <code>self</code>, returns a new string of length <code>size</code> that is a copy of <code>self</code>, centered and padded on both ends with <code>pad_string</code>:</p>

<pre><code>&#39;hello&#39;.center(10)       # =&gt; &quot;  hello   &quot;
&#39;  hello&#39;.center(10)     # =&gt; &quot;   hello  &quot;
&#39;hello&#39;.center(10, &#39;ab&#39;) # =&gt; &quot;abhelloaba&quot;
&#39;тест&#39;.center(10)        # =&gt; &quot;   тест   &quot;
&#39;こんにちは&#39;.center(10)    # =&gt; &quot;  こんにちは   &quot;
</code></pre>

<p>If <code>size</code> is not greater than the size of <code>self</code>, returns a copy of <code>self</code>:</p>

<pre><code>&#39;hello&#39;.center(5)  # =&gt; &quot;hello&quot;
&#39;hello&#39;.center(1)  # =&gt; &quot;hello&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-ljust"><code>String#ljust</code></a>, <a href="String.html#method-i-rjust"><code>String#rjust</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-center_source')" id="l_method-i-center_source">show</a>
                
              </p>
              <div id="method-i-center_source" class="dyn-source">
                <pre>static VALUE
rb_str_center(int argc, VALUE *argv, VALUE str)
{
    return rb_str_justify(argc, argv, str, &#39;c&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-chars">
            
              <b>chars &rarr; array_of_characters
</b>
            
            <a href="../classes/String.html#method-i-chars" name="method-i-chars" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the characters in <code>self</code>:</p>

<pre><code>&#39;hello&#39;.chars     # =&gt; [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
&#39;тест&#39;.chars      # =&gt; [&quot;т&quot;, &quot;е&quot;, &quot;с&quot;, &quot;т&quot;]
&#39;こんにちは&#39;.chars # =&gt; [&quot;こ&quot;, &quot;ん&quot;, &quot;に&quot;, &quot;ち&quot;, &quot;は&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-chars_source')" id="l_method-i-chars_source">show</a>
                
              </p>
              <div id="method-i-chars_source" class="dyn-source">
                <pre>static VALUE
rb_str_chars(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;chars&quot;, rb_str_strlen(str));
    return rb_str_enumerate_chars(str, ary);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-chomp">
            
              <b>chomp(line_sep = $/) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-chomp" name="method-i-chomp" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new string copied from <code>self</code>, with trailing characters possibly removed:</p>

<p>When <code>line_sep</code> is <code>&quot;\n&quot;</code>, removes the last one or two characters if they are <code>&quot;\r&quot;</code>, <code>&quot;\n&quot;</code>, or <code>&quot;\r\n&quot;</code> (but not <code>&quot;\n\r&quot;</code>):</p>

<pre><code>$/                    # =&gt; &quot;\n&quot;
&quot;abc\r&quot;.chomp         # =&gt; &quot;abc&quot;
&quot;abc\n&quot;.chomp         # =&gt; &quot;abc&quot;
&quot;abc\r\n&quot;.chomp       # =&gt; &quot;abc&quot;
&quot;abc\n\r&quot;.chomp       # =&gt; &quot;abc\n&quot;
&quot;тест\r\n&quot;.chomp      # =&gt; &quot;тест&quot;
&quot;こんにちは\r\n&quot;.chomp  # =&gt; &quot;こんにちは&quot;
</code></pre>

<p>When <code>line_sep</code> is <code>&#39;&#39;</code> (an empty string), removes multiple trailing occurrences of <code>&quot;\n&quot;</code> or <code>&quot;\r\n&quot;</code> (but not <code>&quot;\r&quot;</code> or <code>&quot;\n\r&quot;</code>):</p>

<pre><code>&quot;abc\n\n\n&quot;.chomp(&#39;&#39;)           # =&gt; &quot;abc&quot;
&quot;abc\r\n\r\n\r\n&quot;.chomp(&#39;&#39;)     # =&gt; &quot;abc&quot;
&quot;abc\n\n\r\n\r\n\n\n&quot;.chomp(&#39;&#39;) # =&gt; &quot;abc&quot;
&quot;abc\n\r\n\r\n\r&quot;.chomp(&#39;&#39;)     # =&gt; &quot;abc\n\r\n\r\n\r&quot;
&quot;abc\r\r\r&quot;.chomp(&#39;&#39;)           # =&gt; &quot;abc\r\r\r&quot;
</code></pre>

<p>When <code>line_sep</code> is neither <code>&quot;\n&quot;</code> nor <code>&#39;&#39;</code>, removes a single trailing line separator if there is one:</p>

<pre><code>&#39;abcd&#39;.chomp(&#39;d&#39;)  # =&gt; &quot;abc&quot;
&#39;abcdd&#39;.chomp(&#39;d&#39;) # =&gt; &quot;abcd&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-chomp_source')" id="l_method-i-chomp_source">show</a>
                
              </p>
              <div id="method-i-chomp_source" class="dyn-source">
                <pre>static VALUE
rb_str_chomp(int argc, VALUE *argv, VALUE str)
{
    VALUE rs = chomp_rs(argc, argv);
    if (NIL_P(rs)) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, 0, chompped_length(str, rs));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-chomp-21">
            
              <b>chomp!(line_sep = $/) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-chomp-21" name="method-i-chomp-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-chomp"><code>String#chomp</code></a>, but modifies <code>self</code> in place; returns <code>nil</code> if no modification made, <code>self</code> otherwise.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-chomp-21_source')" id="l_method-i-chomp-21_source">show</a>
                
              </p>
              <div id="method-i-chomp-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_chomp_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE rs;
    str_modifiable(str);
    if (RSTRING_LEN(str) == 0 &amp;&amp; argc &lt; 2) return Qnil;
    rs = chomp_rs(argc, argv);
    if (NIL_P(rs)) return Qnil;
    return rb_str_chomp_string(str, rs);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-chop">
            
              <b>chop &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-chop" name="method-i-chop" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new string copied from <code>self</code>, with trailing characters possibly removed.</p>

<p>Removes <code>&quot;\r\n&quot;</code> if those are the last two characters.</p>

<pre><code>&quot;abc\r\n&quot;.chop      # =&gt; &quot;abc&quot;
&quot;тест\r\n&quot;.chop     # =&gt; &quot;тест&quot;
&quot;こんにちは\r\n&quot;.chop # =&gt; &quot;こんにちは&quot;
</code></pre>

<p>Otherwise removes the last character if it exists.</p>

<pre><code>&#39;abcd&#39;.chop     # =&gt; &quot;abc&quot;
&#39;тест&#39;.chop     # =&gt; &quot;тес&quot;
&#39;こんにちは&#39;.chop # =&gt; &quot;こんにち&quot;
&#39;&#39;.chop         # =&gt; &quot;&quot;
</code></pre>

<p>If you only need to remove the newline separator at the end of the string, <a href="String.html#method-i-chomp"><code>String#chomp</code></a> is a better alternative.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-chop_source')" id="l_method-i-chop_source">show</a>
                
              </p>
              <div id="method-i-chop_source" class="dyn-source">
                <pre>static VALUE
rb_str_chop(VALUE str)
{
    return rb_str_subseq(str, 0, chopped_length(str));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-chop-21">
            
              <b>chop! &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-chop-21" name="method-i-chop-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-chop"><code>String#chop</code></a>, but modifies <code>self</code> in place; returns <code>nil</code> if <code>self</code> is empty, <code>self</code> otherwise.</p>

<p>Related: <a href="String.html#method-i-chomp-21"><code>String#chomp!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-chop-21_source')" id="l_method-i-chop-21_source">show</a>
                
              </p>
              <div id="method-i-chop-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_chop_bang(VALUE str)
{
    str_modify_keep_cr(str);
    if (RSTRING_LEN(str) &gt; 0) {
        long len;
        len = chopped_length(str);
        STR_SET_LEN(str, len);
        TERM_FILL(&amp;RSTRING_PTR(str)[len], TERM_LEN(str));
        if (ENC_CODERANGE(str) != ENC_CODERANGE_7BIT) {
            ENC_CODERANGE_CLEAR(str);
        }
        return str;
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-chr">
            
              <b>chr &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-chr" name="method-i-chr" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string containing the first character of <code>self</code>:</p>

<pre><code>s = &#39;foo&#39; # =&gt; &quot;foo&quot;
s.chr     # =&gt; &quot;f&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-chr_source')" id="l_method-i-chr_source">show</a>
                
              </p>
              <div id="method-i-chr_source" class="dyn-source">
                <pre>static VALUE
rb_str_chr(VALUE str)
{
    return rb_str_substr(str, 0, 1);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-clear">
            
              <b>clear &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-clear" name="method-i-clear" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes the contents of <code>self</code>:</p>

<pre><code>s = &#39;foo&#39; # =&gt; &quot;foo&quot;
s.clear   # =&gt; &quot;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-clear_source')" id="l_method-i-clear_source">show</a>
                
              </p>
              <div id="method-i-clear_source" class="dyn-source">
                <pre>static VALUE
rb_str_clear(VALUE str)
{
    str_discard(str);
    STR_SET_EMBED(str);
    STR_SET_LEN(str, 0);
    RSTRING_PTR(str)[0] = 0;
    if (rb_enc_asciicompat(STR_ENC_GET(str)))
        ENC_CODERANGE_SET(str, ENC_CODERANGE_7BIT);
    else
        ENC_CODERANGE_SET(str, ENC_CODERANGE_VALID);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-codepoints">
            
              <b>codepoints &rarr; array_of_integers
</b>
            
            <a href="../classes/String.html#method-i-codepoints" name="method-i-codepoints" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the codepoints in <code>self</code>; each codepoint is the integer value for a character:</p>

<pre><code>&#39;hello&#39;.codepoints     # =&gt; [104, 101, 108, 108, 111]
&#39;тест&#39;.codepoints      # =&gt; [1090, 1077, 1089, 1090]
&#39;こんにちは&#39;.codepoints # =&gt; [12371, 12435, 12395, 12385, 12399]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-codepoints_source')" id="l_method-i-codepoints_source">show</a>
                
              </p>
              <div id="method-i-codepoints_source" class="dyn-source">
                <pre>static VALUE
rb_str_codepoints(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;codepoints&quot;, rb_str_strlen(str));
    return rb_str_enumerate_codepoints(str, ary);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-concat">
            
              <b>concat(*objects) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-concat" name="method-i-concat" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Concatenates each object in <code>objects</code> to <code>self</code> and returns <code>self</code>:</p>

<pre><code>s = &#39;foo&#39;
s.concat(&#39;bar&#39;, &#39;baz&#39;) # =&gt; &quot;foobarbaz&quot;
s                      # =&gt; &quot;foobarbaz&quot;
</code></pre>

<p>For each given object <code>object</code> that is an <a href="Integer.html"><code>Integer</code></a>, the value is considered a codepoint and converted to a character before concatenation:</p>

<pre><code>s = &#39;foo&#39;
s.concat(32, &#39;bar&#39;, 32, &#39;baz&#39;) # =&gt; &quot;foo bar baz&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-3C-3C"><code>String#&lt;&lt;</code></a>, which takes a single argument.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-concat_source')" id="l_method-i-concat_source">show</a>
                
              </p>
              <div id="method-i-concat_source" class="dyn-source">
                <pre>static VALUE
rb_str_concat_multi(int argc, VALUE *argv, VALUE str)
{
    str_modifiable(str);

    if (argc == 1) {
        return rb_str_concat(str, argv[0]);
    }
    else if (argc &gt; 1) {
        int i;
        VALUE arg_str = rb_str_tmp_new(0);
        rb_enc_copy(arg_str, str);
        for (i = 0; i &lt; argc; i++) {
            rb_str_concat(arg_str, argv[i]);
        }
        rb_str_buf_append(str, arg_str);
    }

    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-count">
            
              <b>count(*selectors) &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-count" name="method-i-count" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the total number of characters in <code>self</code> that are specified by the given <code>selectors</code> (see <a href="../files/ruby/doc/character_selectors_rdoc.html#label-Multiple+Character+Selectors">Multiple Character Selectors</a>):</p>

<pre><code>a = &quot;hello world&quot;
a.count &quot;lo&quot;                   #=&gt; 5
a.count &quot;lo&quot;, &quot;o&quot;              #=&gt; 2
a.count &quot;hello&quot;, &quot;^l&quot;          #=&gt; 4
a.count &quot;ej-m&quot;                 #=&gt; 4

&quot;hello^world&quot;.count &quot;\\^aeiou&quot; #=&gt; 4
&quot;hello-world&quot;.count &quot;a\\-eo&quot;   #=&gt; 4

c = &quot;hello world\\r\\n&quot;
c.count &quot;\\&quot;                   #=&gt; 2
c.count &quot;\\A&quot;                  #=&gt; 0
c.count &quot;X-\\w&quot;                #=&gt; 3
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-count_source')" id="l_method-i-count_source">show</a>
                
              </p>
              <div id="method-i-count_source" class="dyn-source">
                <pre>static VALUE
rb_str_count(int argc, VALUE *argv, VALUE str)
{
    char table[TR_TABLE_SIZE];
    rb_encoding *enc = 0;
    VALUE del = 0, nodel = 0, tstr;
    char *s, *send;
    int i;
    int ascompat;
    size_t n = 0;

    rb_check_arity(argc, 1, UNLIMITED_ARGUMENTS);

    tstr = argv[0];
    StringValue(tstr);
    enc = rb_enc_check(str, tstr);
    if (argc == 1) {
        const char *ptstr;
        if (RSTRING_LEN(tstr) == 1 &amp;&amp; rb_enc_asciicompat(enc) &amp;&amp;
            (ptstr = RSTRING_PTR(tstr),
             ONIGENC_IS_ALLOWED_REVERSE_MATCH(enc, (const unsigned char *)ptstr, (const unsigned char *)ptstr+1)) &amp;&amp;
            !is_broken_string(str)) {
            int clen;
            unsigned char c = rb_enc_codepoint_len(ptstr, ptstr+1, &amp;clen, enc);

            s = RSTRING_PTR(str);
            if (!s || RSTRING_LEN(str) == 0) return INT2FIX(0);
            send = RSTRING_END(str);
            while (s &lt; send) {
                if (*(unsigned char*)s++ == c) n++;
            }
            return SIZET2NUM(n);
        }
    }

    tr_setup_table(tstr, table, TRUE, &amp;del, &amp;nodel, enc);
    for (i=1; i&lt;argc; i++) {
        tstr = argv[i];
        StringValue(tstr);
        enc = rb_enc_check(str, tstr);
        tr_setup_table(tstr, table, FALSE, &amp;del, &amp;nodel, enc);
    }

    s = RSTRING_PTR(str);
    if (!s || RSTRING_LEN(str) == 0) return INT2FIX(0);
    send = RSTRING_END(str);
    ascompat = rb_enc_asciicompat(enc);
    while (s &lt; send) {
        unsigned int c;

        if (ascompat &amp;&amp; (c = *(unsigned char*)s) &lt; 0x80) {
            if (table[c]) {
                n++;
            }
            s++;
        }
        else {
            int clen;
            c = rb_enc_codepoint_len(s, send, &amp;clen, enc);
            if (tr_find(c, table, del, nodel)) {
                n++;
            }
            s += clen;
        }
    }

    return SIZET2NUM(n);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-crypt">
            
              <b>crypt(salt_str) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-crypt" name="method-i-crypt" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the string generated by calling <code>crypt(3)</code> standard library function with <code>str</code> and <code>salt_str</code>, in this order, as its arguments.  Please do not use this method any longer.  It is legacy; provided only for backward compatibility with ruby scripts in earlier days.  It is bad to use in contemporary programs for several reasons:</p>
<ul><li>
<p>Behaviour of C’s <code>crypt(3)</code> depends on the OS it is run.  The generated string lacks data portability.</p>
</li><li>
<p>On some OSes such as Mac OS, <code>crypt(3)</code> never fails (i.e. silently ends up in unexpected results).</p>
</li><li>
<p>On some OSes such as Mac OS, <code>crypt(3)</code> is not thread safe.</p>
</li><li>
<p>So-called “traditional” usage of <code>crypt(3)</code> is very very very weak.  According to its manpage, Linux’s traditional <code>crypt(3)</code> output has only 2**56 variations; too easy to brute force today.  And this is the default behaviour.</p>
</li><li>
<p>In order to make things robust some OSes implement so-called “modular” usage. To go through, you have to do a complex build-up of the <code>salt_str</code> parameter, by hand. Failure in generation of a proper salt string tends not to yield any errors; typos in parameters are normally not detectable.</p>
<ul><li>
<p>For instance, in the following example, the second invocation of <a href="String.html#method-i-crypt"><code>String#crypt</code></a> is wrong; it has a typo in “round=” (lacks “s”).  However the call does not fail and something unexpected is generated.</p>

<pre><code>&quot;foo&quot;.crypt(&quot;$5$rounds=1000$salt$&quot;) # OK, proper usage
&quot;foo&quot;.crypt(&quot;$5$round=1000$salt$&quot;)  # Typo not detected
</code></pre>
</li></ul>
</li><li>
<p>Even in the “modular” mode, some hash functions are considered archaic and no longer recommended at all; for instance module <code>$1$</code> is officially abandoned by its author: see <a href="http://phk.freebsd.dk/sagas/md5crypt_eol">phk.freebsd.dk/sagas/md5crypt_eol</a>/ .  For another instance module <code>$3$</code> is considered completely broken: see the manpage of FreeBSD.</p>
</li><li>
<p>On some OS such as Mac OS, there is no modular mode. Yet, as written above, <code>crypt(3)</code> on Mac OS never fails. This means even if you build up a proper salt string it generates a traditional DES hash anyways, and there is no way for you to be aware of.</p>

<pre><code>&quot;foo&quot;.crypt(&quot;$5$rounds=1000$salt$&quot;) # =&gt; &quot;$5fNPQMxC5j6.&quot;
</code></pre>
</li></ul>

<p>If for some reason you cannot migrate to other secure contemporary password hashing algorithms, install the string-crypt gem and <code>require &#39;string/crypt&#39;</code> to continue using it.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-crypt_source')" id="l_method-i-crypt_source">show</a>
                
              </p>
              <div id="method-i-crypt_source" class="dyn-source">
                <pre>static VALUE
rb_str_crypt(VALUE str, VALUE salt)
{
#ifdef HAVE_CRYPT_R
    VALUE databuf;
    struct crypt_data *data;
#   define CRYPT_END() ALLOCV_END(databuf)
#else
    extern char *crypt(const char *, const char *);
#   define CRYPT_END() rb_nativethread_lock_unlock(&amp;crypt_mutex.lock)
#endif
    VALUE result;
    const char *s, *saltp;
    char *res;
#ifdef BROKEN_CRYPT
    char salt_8bit_clean[3];
#endif

    StringValue(salt);
    mustnot_wchar(str);
    mustnot_wchar(salt);
    s = StringValueCStr(str);
    saltp = RSTRING_PTR(salt);
    if (RSTRING_LEN(salt) &lt; 2 || !saltp[0] || !saltp[1]) {
        rb_raise(rb_eArgError, &quot;salt too short (need &gt;=2 bytes)&quot;);
    }

#ifdef BROKEN_CRYPT
    if (!ISASCII((unsigned char)saltp[0]) || !ISASCII((unsigned char)saltp[1])) {
        salt_8bit_clean[0] = saltp[0] &amp; 0x7f;
        salt_8bit_clean[1] = saltp[1] &amp; 0x7f;
        salt_8bit_clean[2] = &#39;\0&#39;;
        saltp = salt_8bit_clean;
    }
#endif
#ifdef HAVE_CRYPT_R
    data = ALLOCV(databuf, sizeof(struct crypt_data));
# ifdef HAVE_STRUCT_CRYPT_DATA_INITIALIZED
    data-&gt;initialized = 0;
# endif
    res = crypt_r(s, saltp, data);
#else
    crypt_mutex_initialize();
    rb_nativethread_lock_lock(&amp;crypt_mutex.lock);
    res = crypt(s, saltp);
#endif
    if (!res) {
        int err = errno;
        CRYPT_END();
        rb_syserr_fail(err, &quot;crypt&quot;);
    }
    result = rb_str_new_cstr(res);
    CRYPT_END();
    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-dedup">
            
              <b>-string &rarr; frozen_string<br />dedup &rarr; frozen_string</b>
            
            <a href="../classes/String.html#method-i-dedup" name="method-i-dedup" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a frozen, possibly pre-existing copy of the string.</p>

<p>The returned String will be deduplicated as long as it does not have any instance variables set on it and is not a <a href="String.html"><code>String</code></a> subclass.</p>

<p>Note that <code>-string</code> variant is more convenient for defining constants:</p>

<pre><code>FILENAME = -&#39;config/database.yml&#39;
</code></pre>

<p>while <code>dedup</code> is better suitable for using the method in chains of calculations:</p>

<pre><code>@url_list.concat(urls.map(&amp;:dedup))
</code></pre>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-2D-40">-@</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-delete">
            
              <b>delete(*selectors) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-delete" name="method-i-delete" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with characters specified by <code>selectors</code> removed (see <a href="../files/ruby/doc/character_selectors_rdoc.html#label-Multiple+Character+Selectors">Multiple Character Selectors</a>):</p>

<pre><code>&quot;hello&quot;.delete &quot;l&quot;,&quot;lo&quot;        #=&gt; &quot;heo&quot;
&quot;hello&quot;.delete &quot;lo&quot;            #=&gt; &quot;he&quot;
&quot;hello&quot;.delete &quot;aeiou&quot;, &quot;^e&quot;   #=&gt; &quot;hell&quot;
&quot;hello&quot;.delete &quot;ej-m&quot;          #=&gt; &quot;ho&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-delete_source')" id="l_method-i-delete_source">show</a>
                
              </p>
              <div id="method-i-delete_source" class="dyn-source">
                <pre>static VALUE
rb_str_delete(int argc, VALUE *argv, VALUE str)
{
    str = str_duplicate(rb_cString, str);
    rb_str_delete_bang(argc, argv, str);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-delete-21">
            
              <b>delete!(*selectors) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-delete-21" name="method-i-delete-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-delete"><code>String#delete</code></a>, but modifies <code>self</code> in place. Returns <code>self</code> if any changes were made, <code>nil</code> otherwise.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-delete-21_source')" id="l_method-i-delete-21_source">show</a>
                
              </p>
              <div id="method-i-delete-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_delete_bang(int argc, VALUE *argv, VALUE str)
{
    char squeez[TR_TABLE_SIZE];
    rb_encoding *enc = 0;
    char *s, *send, *t;
    VALUE del = 0, nodel = 0;
    int modify = 0;
    int i, ascompat, cr;

    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return Qnil;
    rb_check_arity(argc, 1, UNLIMITED_ARGUMENTS);
    for (i=0; i&lt;argc; i++) {
        VALUE s = argv[i];

        StringValue(s);
        enc = rb_enc_check(str, s);
        tr_setup_table(s, squeez, i==0, &amp;del, &amp;nodel, enc);
    }

    str_modify_keep_cr(str);
    ascompat = rb_enc_asciicompat(enc);
    s = t = RSTRING_PTR(str);
    send = RSTRING_END(str);
    cr = ascompat ? ENC_CODERANGE_7BIT : ENC_CODERANGE_VALID;
    while (s &lt; send) {
        unsigned int c;
        int clen;

        if (ascompat &amp;&amp; (c = *(unsigned char*)s) &lt; 0x80) {
            if (squeez[c]) {
                modify = 1;
            }
            else {
                if (t != s) *t = c;
                t++;
            }
            s++;
        }
        else {
            c = rb_enc_codepoint_len(s, send, &amp;clen, enc);

            if (tr_find(c, squeez, del, nodel)) {
                modify = 1;
            }
            else {
                if (t != s) rb_enc_mbcput(c, t, enc);
                t += clen;
                if (cr == ENC_CODERANGE_7BIT) cr = ENC_CODERANGE_VALID;
            }
            s += clen;
        }
    }
    TERM_FILL(t, TERM_LEN(str));
    STR_SET_LEN(str, t - RSTRING_PTR(str));
    ENC_CODERANGE_SET(str, cr);

    if (modify) return str;
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-delete_prefix">
            
              <b>delete_prefix(prefix) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-delete_prefix" name="method-i-delete_prefix" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with leading substring <code>prefix</code> removed:</p>

<pre><code>&#39;hello&#39;.delete_prefix(&#39;hel&#39;)      # =&gt; &quot;lo&quot;
&#39;hello&#39;.delete_prefix(&#39;llo&#39;)      # =&gt; &quot;hello&quot;
&#39;тест&#39;.delete_prefix(&#39;те&#39;)        # =&gt; &quot;ст&quot;
&#39;こんにちは&#39;.delete_prefix(&#39;こん&#39;)  # =&gt; &quot;にちは&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-delete_prefix-21"><code>String#delete_prefix!</code></a>, <a href="String.html#method-i-delete_suffix"><code>String#delete_suffix</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-delete_prefix_source')" id="l_method-i-delete_prefix_source">show</a>
                
              </p>
              <div id="method-i-delete_prefix_source" class="dyn-source">
                <pre>static VALUE
rb_str_delete_prefix(VALUE str, VALUE prefix)
{
    long prefixlen;

    prefixlen = deleted_prefix_length(str, prefix);
    if (prefixlen &lt;= 0) return str_duplicate(rb_cString, str);

    return rb_str_subseq(str, prefixlen, RSTRING_LEN(str) - prefixlen);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-delete_prefix-21">
            
              <b>delete_prefix!(prefix) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-delete_prefix-21" name="method-i-delete_prefix-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-delete_prefix"><code>String#delete_prefix</code></a>, except that <code>self</code> is modified in place. Returns <code>self</code> if the prefix is removed, <code>nil</code> otherwise.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-delete_prefix-21_source')" id="l_method-i-delete_prefix-21_source">show</a>
                
              </p>
              <div id="method-i-delete_prefix-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_delete_prefix_bang(VALUE str, VALUE prefix)
{
    long prefixlen;
    str_modify_keep_cr(str);

    prefixlen = deleted_prefix_length(str, prefix);
    if (prefixlen &lt;= 0) return Qnil;

    return rb_str_drop_bytes(str, prefixlen);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-delete_suffix">
            
              <b>delete_suffix(suffix) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-delete_suffix" name="method-i-delete_suffix" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with trailing substring <code>suffix</code> removed:</p>

<pre><code>&#39;hello&#39;.delete_suffix(&#39;llo&#39;)      # =&gt; &quot;he&quot;
&#39;hello&#39;.delete_suffix(&#39;hel&#39;)      # =&gt; &quot;hello&quot;
&#39;тест&#39;.delete_suffix(&#39;ст&#39;)        # =&gt; &quot;те&quot;
&#39;こんにちは&#39;.delete_suffix(&#39;ちは&#39;)  # =&gt; &quot;こんに&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-delete_suffix-21"><code>String#delete_suffix!</code></a>, <a href="String.html#method-i-delete_prefix"><code>String#delete_prefix</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-delete_suffix_source')" id="l_method-i-delete_suffix_source">show</a>
                
              </p>
              <div id="method-i-delete_suffix_source" class="dyn-source">
                <pre>static VALUE
rb_str_delete_suffix(VALUE str, VALUE suffix)
{
    long suffixlen;

    suffixlen = deleted_suffix_length(str, suffix);
    if (suffixlen &lt;= 0) return str_duplicate(rb_cString, str);

    return rb_str_subseq(str, 0, RSTRING_LEN(str) - suffixlen);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-delete_suffix-21">
            
              <b>delete_suffix!(suffix) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-delete_suffix-21" name="method-i-delete_suffix-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-delete_suffix"><code>String#delete_suffix</code></a>, except that <code>self</code> is modified in place. Returns <code>self</code> if the suffix is removed, <code>nil</code> otherwise.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-delete_suffix-21_source')" id="l_method-i-delete_suffix-21_source">show</a>
                
              </p>
              <div id="method-i-delete_suffix-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_delete_suffix_bang(VALUE str, VALUE suffix)
{
    long olen, suffixlen, len;
    str_modifiable(str);

    suffixlen = deleted_suffix_length(str, suffix);
    if (suffixlen &lt;= 0) return Qnil;

    olen = RSTRING_LEN(str);
    str_modify_keep_cr(str);
    len = olen - suffixlen;
    STR_SET_LEN(str, len);
    TERM_FILL(&amp;RSTRING_PTR(str)[len], TERM_LEN(str));
    if (ENC_CODERANGE(str) != ENC_CODERANGE_7BIT) {
        ENC_CODERANGE_CLEAR(str);
    }
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-downcase">
            
              <b>downcase(*options) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-downcase" name="method-i-downcase" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string containing the downcased characters in <code>self</code>:</p>

<pre><code>s = &#39;Hello World!&#39; # =&gt; &quot;Hello World!&quot;
s.downcase         # =&gt; &quot;hello world!&quot;
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-downcase-21"><code>String#downcase!</code></a>, <a href="String.html#method-i-upcase"><code>String#upcase</code></a>, <a href="String.html#method-i-upcase-21"><code>String#upcase!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-downcase_source')" id="l_method-i-downcase_source">show</a>
                
              </p>
              <div id="method-i-downcase_source" class="dyn-source">
                <pre>static VALUE
rb_str_downcase(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_DOWNCASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        ret = rb_str_new(RSTRING_PTR(str), RSTRING_LEN(str));
        str_enc_copy_direct(ret, str);
        downcase_single(ret);
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }

    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-downcase-21">
            
              <b>downcase!(*options) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-downcase-21" name="method-i-downcase-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Downcases the characters in <code>self</code>; returns <code>self</code> if any changes were made, <code>nil</code> otherwise:</p>

<pre><code>s = &#39;Hello World!&#39; # =&gt; &quot;Hello World!&quot;
s.downcase!        # =&gt; &quot;hello world!&quot;
s                  # =&gt; &quot;hello world!&quot;
s.downcase!        # =&gt; nil
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-downcase"><code>String#downcase</code></a>, <a href="String.html#method-i-upcase"><code>String#upcase</code></a>, <a href="String.html#method-i-upcase-21"><code>String#upcase!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-downcase-21_source')" id="l_method-i-downcase-21_source">show</a>
                
              </p>
              <div id="method-i-downcase-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_downcase_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_DOWNCASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        if (downcase_single(str))
            flags |= ONIGENC_CASE_MODIFIED;
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-dump">
            
              <b>dump &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-dump" name="method-i-dump" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a printable version of <code>self</code>, enclosed in double-quotes, with special characters escaped, and with non-printing characters replaced by hexadecimal notation:</p>

<pre><code>&quot;hello \n &#39;&#39;&quot;.dump    # =&gt; &quot;\&quot;hello \\n &#39;&#39;\&quot;&quot;
&quot;\f\x00\xff\\\&quot;&quot;.dump # =&gt; &quot;\&quot;\\f\\x00\\xFF\\\\\\\&quot;\&quot;&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-undump"><code>String#undump</code></a> (inverse of <a href="String.html#method-i-dump"><code>String#dump</code></a>).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-dump_source')" id="l_method-i-dump_source">show</a>
                
              </p>
              <div id="method-i-dump_source" class="dyn-source">
                <pre>VALUE
rb_str_dump(VALUE str)
{
    int encidx = rb_enc_get_index(str);
    rb_encoding *enc = rb_enc_from_index(encidx);
    long len;
    const char *p, *pend;
    char *q, *qend;
    VALUE result;
    int u8 = (encidx == rb_utf8_encindex());
    static const char nonascii_suffix[] = &quot;.dup.force_encoding(\&quot;%s\&quot;)&quot;;

    len = 2;                    /* &quot;&quot; */
    if (!rb_enc_asciicompat(enc)) {
        len += strlen(nonascii_suffix) - rb_strlen_lit(&quot;%s&quot;);
        len += strlen(enc-&gt;name);
    }

    p = RSTRING_PTR(str); pend = p + RSTRING_LEN(str);
    while (p &lt; pend) {
        int clen;
        unsigned char c = *p++;

        switch (c) {
          case &#39;&quot;&#39;:  case &#39;\\&#39;:
          case &#39;\n&#39;: case &#39;\r&#39;:
          case &#39;\t&#39;: case &#39;\f&#39;:
          case &#39;\013&#39;: case &#39;\010&#39;: case &#39;\007&#39;: case &#39;\033&#39;:
            clen = 2;
            break;

          case &#39;#&#39;:
            clen = IS_EVSTR(p, pend) ? 2 : 1;
            break;

          default:
            if (ISPRINT(c)) {
                clen = 1;
            }
            else {
                if (u8 &amp;&amp; c &gt; 0x7F) {   /* \u notation */
                    int n = rb_enc_precise_mbclen(p-1, pend, enc);
                    if (MBCLEN_CHARFOUND_P(n)) {
                        unsigned int cc = rb_enc_mbc_to_codepoint(p-1, pend, enc);
                        if (cc &lt;= 0xFFFF)
                            clen = 6;  /* \uXXXX */
                        else if (cc &lt;= 0xFFFFF)
                            clen = 9;  /* \u{XXXXX} */
                        else
                            clen = 10; /* \u{XXXXXX} */
                        p += MBCLEN_CHARFOUND_LEN(n)-1;
                        break;
                    }
                }
                clen = 4;       /* \xNN */
            }
            break;
        }

        if (clen &gt; LONG_MAX - len) {
            rb_raise(rb_eRuntimeError, &quot;string size too big&quot;);
        }
        len += clen;
    }

    result = rb_str_new(0, len);
    p = RSTRING_PTR(str); pend = p + RSTRING_LEN(str);
    q = RSTRING_PTR(result); qend = q + len + 1;

    *q++ = &#39;&quot;&#39;;
    while (p &lt; pend) {
        unsigned char c = *p++;

        if (c == &#39;&quot;&#39; || c == &#39;\\&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = c;
        }
        else if (c == &#39;#&#39;) {
            if (IS_EVSTR(p, pend)) *q++ = &#39;\\&#39;;
            *q++ = &#39;#&#39;;
        }
        else if (c == &#39;\n&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;n&#39;;
        }
        else if (c == &#39;\r&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;r&#39;;
        }
        else if (c == &#39;\t&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;t&#39;;
        }
        else if (c == &#39;\f&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;f&#39;;
        }
        else if (c == &#39;\013&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;v&#39;;
        }
        else if (c == &#39;\010&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;b&#39;;
        }
        else if (c == &#39;\007&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;a&#39;;
        }
        else if (c == &#39;\033&#39;) {
            *q++ = &#39;\\&#39;;
            *q++ = &#39;e&#39;;
        }
        else if (ISPRINT(c)) {
            *q++ = c;
        }
        else {
            *q++ = &#39;\\&#39;;
            if (u8) {
                int n = rb_enc_precise_mbclen(p-1, pend, enc) - 1;
                if (MBCLEN_CHARFOUND_P(n)) {
                    int cc = rb_enc_mbc_to_codepoint(p-1, pend, enc);
                    p += n;
                    if (cc &lt;= 0xFFFF)
                        snprintf(q, qend-q, &quot;u%04X&quot;, cc);    /* \uXXXX */
                    else
                        snprintf(q, qend-q, &quot;u{%X}&quot;, cc);  /* \u{XXXXX} or \u{XXXXXX} */
                    q += strlen(q);
                    continue;
                }
            }
            snprintf(q, qend-q, &quot;x%02X&quot;, c);
            q += 3;
        }
    }
    *q++ = &#39;&quot;&#39;;
    *q = &#39;\0&#39;;
    if (!rb_enc_asciicompat(enc)) {
        snprintf(q, qend-q, nonascii_suffix, enc-&gt;name);
        encidx = rb_ascii8bit_encindex();
    }
    /* result from dump is ASCII */
    rb_enc_associate_index(result, encidx);
    ENC_CODERANGE_SET(result, ENC_CODERANGE_7BIT);
    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-each_byte">
            
              <b>each_byte {|byte| ... } &rarr; self<br />each_byte               &rarr; enumerator
</b>
            
            <a href="../classes/String.html#method-i-each_byte" name="method-i-each_byte" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Calls the given block with each successive byte from <code>self</code>; returns <code>self</code>:</p>

<pre><code>&#39;hello&#39;.each_byte {|byte| print byte, &#39; &#39; }
print &quot;\n&quot;
&#39;тест&#39;.each_byte {|byte| print byte, &#39; &#39; }
print &quot;\n&quot;
&#39;こんにちは&#39;.each_byte {|byte| print byte, &#39; &#39; }
print &quot;\n&quot;
</code></pre>

<p>Output:</p>

<pre><code>104 101 108 108 111
209 130 208 181 209 129 209 130
227 129 147 227 130 147 227 129 171 227 129 161 227 129 175
</code></pre>

<p>Returns an enumerator if no block is given.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-each_byte_source')" id="l_method-i-each_byte_source">show</a>
                
              </p>
              <div id="method-i-each_byte_source" class="dyn-source">
                <pre>static VALUE
rb_str_each_byte(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_byte_size);
    return rb_str_enumerate_bytes(str, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-each_char">
            
              <b>each_char {|c| ... } &rarr; self<br />each_char            &rarr; enumerator
</b>
            
            <a href="../classes/String.html#method-i-each_char" name="method-i-each_char" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Calls the given block with each successive character from <code>self</code>; returns <code>self</code>:</p>

<pre><code>&#39;hello&#39;.each_char {|char| print char, &#39; &#39; }
print &quot;\n&quot;
&#39;тест&#39;.each_char {|char| print char, &#39; &#39; }
print &quot;\n&quot;
&#39;こんにちは&#39;.each_char {|char| print char, &#39; &#39; }
print &quot;\n&quot;
</code></pre>

<p>Output:</p>

<pre><code>h e l l o
т е с т
こ ん に ち は
</code></pre>

<p>Returns an enumerator if no block is given.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-each_char_source')" id="l_method-i-each_char_source">show</a>
                
              </p>
              <div id="method-i-each_char_source" class="dyn-source">
                <pre>static VALUE
rb_str_each_char(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_char_size);
    return rb_str_enumerate_chars(str, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-each_codepoint">
            
              <b>each_codepoint {|integer| ... } &rarr; self<br />each_codepoint                  &rarr; enumerator
</b>
            
            <a href="../classes/String.html#method-i-each_codepoint" name="method-i-each_codepoint" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Calls the given block with each successive codepoint from <code>self</code>; each codepoint is the integer value for a character; returns <code>self</code>:</p>

<pre><code>&#39;hello&#39;.each_codepoint {|codepoint| print codepoint, &#39; &#39; }
print &quot;\n&quot;
&#39;тест&#39;.each_codepoint {|codepoint| print codepoint, &#39; &#39; }
print &quot;\n&quot;
&#39;こんにちは&#39;.each_codepoint {|codepoint| print codepoint, &#39; &#39; }
print &quot;\n&quot;
</code></pre>

<p>Output:</p>

<pre><code>104 101 108 108 111
1090 1077 1089 1090
12371 12435 12395 12385 12399
</code></pre>

<p>Returns an enumerator if no block is given.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-each_codepoint_source')" id="l_method-i-each_codepoint_source">show</a>
                
              </p>
              <div id="method-i-each_codepoint_source" class="dyn-source">
                <pre>static VALUE
rb_str_each_codepoint(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_char_size);
    return rb_str_enumerate_codepoints(str, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-each_grapheme_cluster">
            
              <b>each_grapheme_cluster {|gc| ... } &rarr; self<br />each_grapheme_cluster             &rarr; enumerator
</b>
            
            <a href="../classes/String.html#method-i-each_grapheme_cluster" name="method-i-each_grapheme_cluster" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Calls the given block with each successive grapheme cluster from <code>self</code> (see <a href="https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries">Unicode Grapheme Cluster Boundaries</a>); returns <code>self</code>:</p>

<pre><code>s = &quot;\u0061\u0308-pqr-\u0062\u0308-xyz-\u0063\u0308&quot; # =&gt; &quot;ä-pqr-b̈-xyz-c̈&quot;
s.each_grapheme_cluster {|gc| print gc, &#39; &#39; }
</code></pre>

<p>Output:</p>

<pre><code>ä - p q r - b̈ - x y z - c̈
</code></pre>

<p>Returns an enumerator if no block is given.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-each_grapheme_cluster_source')" id="l_method-i-each_grapheme_cluster_source">show</a>
                
              </p>
              <div id="method-i-each_grapheme_cluster_source" class="dyn-source">
                <pre>static VALUE
rb_str_each_grapheme_cluster(VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, 0, 0, rb_str_each_grapheme_cluster_size);
    return rb_str_enumerate_grapheme_clusters(str, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-each_line">
            
              <b>each_line(line_sep = $/, chomp: false) {|substring| ... } &rarr; self<br />each_line(line_sep = $/, chomp: false)                    &rarr; enumerator
</b>
            
            <a href="../classes/String.html#method-i-each_line" name="method-i-each_line" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>With a block given, forms the substrings (“lines”) that are the result of splitting <code>self</code> at each occurrence of the given line separator <code>line_sep</code>; passes each line to the block; returns <code>self</code>:</p>

<pre><code>s = &lt;&lt;~EOT
This is the first line.
This is line two.

This is line four.
This is line five.
EOT

s.each_line {|line| p line }
</code></pre>

<p>Output:</p>

<pre><code>&quot;This is the first line.\n&quot;
&quot;This is line two.\n&quot;
&quot;\n&quot;
&quot;This is line four.\n&quot;
&quot;This is line five.\n&quot;
</code></pre>

<p>With a different <code>line_sep</code>:</p>

<pre><code>s.each_line(&#39; is &#39;) {|line| p line }
</code></pre>

<p>Output:</p>

<pre><code>&quot;This is &quot;
&quot;the first line.\nThis is &quot;
&quot;line two.\n\nThis is &quot;
&quot;line four.\nThis is &quot;
&quot;line five.\n&quot;
</code></pre>

<p>With <code>chomp</code> as <code>true</code>, removes the trailing <code>line_sep</code> from each line:</p>

<pre><code>s.each_line(chomp: true) {|line| p line }
</code></pre>

<p>Output:</p>

<pre><code>&quot;This is the first line.&quot;
&quot;This is line two.&quot;
&quot;&quot;
&quot;This is line four.&quot;
&quot;This is line five.&quot;
</code></pre>

<p>With an empty string as <code>line_sep</code>, forms and passes “paragraphs” by splitting at each occurrence of two or more newlines:</p>

<pre><code>s.each_line(&#39;&#39;) {|line| p line }
</code></pre>

<p>Output:</p>

<pre><code>&quot;This is the first line.\nThis is line two.\n\n&quot;
&quot;This is line four.\nThis is line five.\n&quot;
</code></pre>

<p>With no block given, returns an enumerator.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-each_line_source')" id="l_method-i-each_line_source">show</a>
                
              </p>
              <div id="method-i-each_line_source" class="dyn-source">
                <pre>static VALUE
rb_str_each_line(int argc, VALUE *argv, VALUE str)
{
    RETURN_SIZED_ENUMERATOR(str, argc, argv, 0);
    return rb_str_enumerate_lines(argc, argv, str, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-empty-3F">
            
              <b>empty? &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-empty-3F" name="method-i-empty-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if the length of <code>self</code> is zero, <code>false</code> otherwise:</p>

<pre><code>&quot;hello&quot;.empty? # =&gt; false
&quot; &quot;.empty? # =&gt; false
&quot;&quot;.empty? # =&gt; true
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-empty-3F_source')" id="l_method-i-empty-3F_source">show</a>
                
              </p>
              <div id="method-i-empty-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_empty(VALUE str)
{
    return RBOOL(RSTRING_LEN(str) == 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-encode">
            
              <b>encode(dst_encoding = Encoding.default_internal, **enc_opts) &rarr; string<br />encode(dst_encoding, src_encoding, **enc_opts)   &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-encode" name="method-i-encode" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> transcoded as determined by <code>dst_encoding</code>. By default, raises an exception if <code>self</code> contains an invalid byte or a character not defined in <code>dst_encoding</code>; that behavior may be modified by encoding options; see below.</p>

<p>With no arguments:</p>
<ul><li>
<p>Uses the same encoding if <code>Encoding.default_internal</code> is <code>nil</code> (the default):</p>

<pre><code>Encoding.default_internal # =&gt; nil
s = &quot;Ruby\x99&quot;.force_encoding(&#39;Windows-1252&#39;)
s.encoding                # =&gt; #&lt;Encoding:Windows-1252&gt;
s.bytes                   # =&gt; [82, 117, 98, 121, 153]
t = s.encode              # =&gt; &quot;Ruby\x99&quot;
t.encoding                # =&gt; #&lt;Encoding:Windows-1252&gt;
t.bytes                   # =&gt; [82, 117, 98, 121, 226, 132, 162]
</code></pre>
</li><li>
<p>Otherwise, uses the encoding <code>Encoding.default_internal</code>:</p>

<pre><code>Encoding.default_internal = &#39;UTF-8&#39;
t = s.encode              # =&gt; &quot;Ruby™&quot;
t.encoding                # =&gt; #&lt;Encoding:UTF-8&gt;
</code></pre>
</li></ul>

<p>With only argument <code>dst_encoding</code> given, uses that encoding:</p>

<pre><code>s = &quot;Ruby\x99&quot;.force_encoding(&#39;Windows-1252&#39;)
s.encoding            # =&gt; #&lt;Encoding:Windows-1252&gt;
t = s.encode(&#39;UTF-8&#39;) # =&gt; &quot;Ruby™&quot;
t.encoding            # =&gt; #&lt;Encoding:UTF-8&gt;
</code></pre>

<p>With arguments <code>dst_encoding</code> and <code>src_encoding</code> given, interprets <code>self</code> using <code>src_encoding</code>, encodes the new string using <code>dst_encoding</code>:</p>

<pre><code>s = &quot;Ruby\x99&quot;
t = s.encode(&#39;UTF-8&#39;, &#39;Windows-1252&#39;) # =&gt; &quot;Ruby™&quot;
t.encoding                            # =&gt; #&lt;Encoding:UTF-8&gt;
</code></pre>

<p>Optional keyword arguments <code>enc_opts</code> specify encoding options; see <a href="../files/ruby/doc/encodings_rdoc.html#label-Encoding+Options">Encoding Options</a>.</p>

<p>Please note that, unless <code>invalid: :replace</code> option is given, conversion from an encoding <code>enc</code> to the same encoding <code>enc</code> (independent of whether <code>enc</code> is given explicitly or implicitly) is a no-op, i.e. the string is simply copied without any changes, and no exceptions are raised, even if there are invalid bytes.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-encode_source')" id="l_method-i-encode_source">show</a>
                
              </p>
              <div id="method-i-encode_source" class="dyn-source">
                <pre>static VALUE
str_encode(int argc, VALUE *argv, VALUE str)
{
    VALUE newstr = str;
    int encidx = str_transcode(argc, argv, &amp;newstr);
    return encoded_dup(newstr, str, encidx);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-encode-21">
            
              <b>encode!(dst_encoding = Encoding.default_internal, **enc_opts) &rarr; self<br />encode!(dst_encoding, src_encoding, **enc_opts)   &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-encode-21" name="method-i-encode-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-encode"><code>encode</code></a>, but applies encoding changes to <code>self</code>; returns <code>self</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-encode-21_source')" id="l_method-i-encode-21_source">show</a>
                
              </p>
              <div id="method-i-encode-21_source" class="dyn-source">
                <pre>static VALUE
str_encode_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE newstr;
    int encidx;

    rb_check_frozen(str);

    newstr = str;
    encidx = str_transcode(argc, argv, &amp;newstr);

    if (encidx &lt; 0) return str;
    if (newstr == str) {
        rb_enc_associate_index(str, encidx);
        return str;
    }
    rb_str_shared_replace(str, newstr);
    return str_encode_associate(str, encidx);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-encoding">
            
              <b>obj.encoding   &rarr; encoding
</b>
            
            <a href="../classes/String.html#method-i-encoding" name="method-i-encoding" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Encoding.html"><code>Encoding</code></a> object that represents the encoding of obj.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-encoding_source')" id="l_method-i-encoding_source">show</a>
                
              </p>
              <div id="method-i-encoding_source" class="dyn-source">
                <pre>VALUE
rb_obj_encoding(VALUE obj)
{
    int idx = rb_enc_get_index(obj);
    if (idx &lt; 0) {
        rb_raise(rb_eTypeError, &quot;unknown encoding&quot;);
    }
    return rb_enc_from_encoding_index(idx &amp; ENC_INDEX_MASK);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-end_with-3F">
            
              <b>end_with?(*strings) &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-end_with-3F" name="method-i-end_with-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns whether <code>self</code> ends with any of the given <code>strings</code>.</p>

<p>Returns <code>true</code> if any given string matches the end, <code>false</code> otherwise:</p>

<pre><code>&#39;hello&#39;.end_with?(&#39;ello&#39;)               #=&gt; true
&#39;hello&#39;.end_with?(&#39;heaven&#39;, &#39;ello&#39;)     #=&gt; true
&#39;hello&#39;.end_with?(&#39;heaven&#39;, &#39;paradise&#39;) #=&gt; false
&#39;тест&#39;.end_with?(&#39;т&#39;)                   # =&gt; true
&#39;こんにちは&#39;.end_with?(&#39;は&#39;)              # =&gt; true
</code></pre>

<p>Related: <a href="String.html#method-i-start_with-3F"><code>String#start_with?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-end_with-3F_source')" id="l_method-i-end_with-3F_source">show</a>
                
              </p>
              <div id="method-i-end_with-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_end_with(int argc, VALUE *argv, VALUE str)
{
    int i;

    for (i=0; i&lt;argc; i++) {
        VALUE tmp = argv[i];
        const char *p, *s, *e;
        long slen, tlen;
        rb_encoding *enc;

        StringValue(tmp);
        enc = rb_enc_check(str, tmp);
        if ((tlen = RSTRING_LEN(tmp)) == 0) return Qtrue;
        if ((slen = RSTRING_LEN(str)) &lt; tlen) continue;
        p = RSTRING_PTR(str);
        e = p + slen;
        s = e - tlen;
        if (!at_char_boundary(p, s, e, enc))
            continue;
        if (memcmp(s, RSTRING_PTR(tmp), tlen) == 0)
            return Qtrue;
    }
    return Qfalse;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-eql-3F">
            
              <b>eql?(object) &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-eql-3F" name="method-i-eql-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>object</code> has the same length and content; as <code>self</code>; <code>false</code> otherwise:</p>

<pre><code>s = &#39;foo&#39;
s.eql?(&#39;foo&#39;) # =&gt; true
s.eql?(&#39;food&#39;) # =&gt; false
s.eql?(&#39;FOO&#39;) # =&gt; false
</code></pre>

<p>Returns <code>false</code> if the two strings’ encodings are not compatible:</p>

<pre><code>&quot;\u{e4 f6 fc}&quot;.encode(&quot;ISO-8859-1&quot;).eql?(&quot;\u{c4 d6 dc}&quot;) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-eql-3F_source')" id="l_method-i-eql-3F_source">show</a>
                
              </p>
              <div id="method-i-eql-3F_source" class="dyn-source">
                <pre>VALUE
rb_str_eql(VALUE str1, VALUE str2)
{
    if (str1 == str2) return Qtrue;
    if (!RB_TYPE_P(str2, T_STRING)) return Qfalse;
    return rb_str_eql_internal(str1, str2);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-force_encoding">
            
              <b>force_encoding(encoding) &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-force_encoding" name="method-i-force_encoding" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Changes the encoding of <code>self</code> to <code>encoding</code>, which may be a string encoding name or an <a href="Encoding.html"><code>Encoding</code></a> object; returns self:</p>

<pre><code>s = &#39;łał&#39;
s.bytes                   # =&gt; [197, 130, 97, 197, 130]
s.encoding                # =&gt; #&lt;Encoding:UTF-8&gt;
s.force_encoding(&#39;ascii&#39;) # =&gt; &quot;\xC5\x82a\xC5\x82&quot;
s.encoding                # =&gt; #&lt;Encoding:US-ASCII&gt;
</code></pre>

<p>Does not change the underlying bytes:</p>

<pre><code>s.bytes                   # =&gt; [197, 130, 97, 197, 130]
</code></pre>

<p>Makes the change even if the given <code>encoding</code> is invalid for <code>self</code> (as is the change above):</p>

<pre><code>s.valid_encoding?                 # =&gt; false
s.force_encoding(Encoding::UTF_8) # =&gt; &quot;łał&quot;
s.valid_encoding?                 # =&gt; true
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-force_encoding_source')" id="l_method-i-force_encoding_source">show</a>
                
              </p>
              <div id="method-i-force_encoding_source" class="dyn-source">
                <pre>static VALUE
rb_str_force_encoding(VALUE str, VALUE enc)
{
    str_modifiable(str);

    rb_encoding *encoding = rb_to_encoding(enc);
    int idx = rb_enc_to_index(encoding);

    // If the encoding is unchanged, we do nothing.
    if (ENCODING_GET(str) == idx) {
        return str;
    }

    rb_enc_associate_index(str, idx);

    // If the coderange was 7bit and the new encoding is ASCII-compatible
    // we can keep the coderange.
    if (ENC_CODERANGE(str) == ENC_CODERANGE_7BIT &amp;&amp; encoding &amp;&amp; rb_enc_asciicompat(encoding)) {
        return str;
    }

    ENC_CODERANGE_CLEAR(str);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-getbyte">
            
              <b>getbyte(index) &rarr; integer or nil
</b>
            
            <a href="../classes/String.html#method-i-getbyte" name="method-i-getbyte" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the byte at zero-based <code>index</code> as an integer, or <code>nil</code> if <code>index</code> is out of range:</p>

<pre><code>s = &#39;abcde&#39;   # =&gt; &quot;abcde&quot;
s.getbyte(0)  # =&gt; 97
s.getbyte(-1) # =&gt; 101
s.getbyte(5)  # =&gt; nil
</code></pre>

<p>Related: <a href="String.html#method-i-setbyte"><code>String#setbyte</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-getbyte_source')" id="l_method-i-getbyte_source">show</a>
                
              </p>
              <div id="method-i-getbyte_source" class="dyn-source">
                <pre>VALUE
rb_str_getbyte(VALUE str, VALUE index)
{
    long pos = NUM2LONG(index);

    if (pos &lt; 0)
        pos += RSTRING_LEN(str);
    if (pos &lt; 0 ||  RSTRING_LEN(str) &lt;= pos)
        return Qnil;

    return INT2FIX((unsigned char)RSTRING_PTR(str)[pos]);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-grapheme_clusters">
            
              <b>grapheme_clusters &rarr; array_of_grapheme_clusters
</b>
            
            <a href="../classes/String.html#method-i-grapheme_clusters" name="method-i-grapheme_clusters" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of the grapheme clusters in <code>self</code> (see <a href="https://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries">Unicode Grapheme Cluster Boundaries</a>):</p>

<pre><code>s = &quot;\u0061\u0308-pqr-\u0062\u0308-xyz-\u0063\u0308&quot; # =&gt; &quot;ä-pqr-b̈-xyz-c̈&quot;
s.grapheme_clusters
# =&gt; [&quot;ä&quot;, &quot;-&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;-&quot;, &quot;b̈&quot;, &quot;-&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;-&quot;, &quot;c̈&quot;]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-grapheme_clusters_source')" id="l_method-i-grapheme_clusters_source">show</a>
                
              </p>
              <div id="method-i-grapheme_clusters_source" class="dyn-source">
                <pre>static VALUE
rb_str_grapheme_clusters(VALUE str)
{
    VALUE ary = WANTARRAY(&quot;grapheme_clusters&quot;, rb_str_strlen(str));
    return rb_str_enumerate_grapheme_clusters(str, ary);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-gsub">
            
              <b>gsub(pattern, replacement)   &rarr; new_string<br />gsub(pattern) {|match| ... } &rarr; new_string<br />gsub(pattern)                &rarr; enumerator
</b>
            
            <a href="../classes/String.html#method-i-gsub" name="method-i-gsub" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with all occurrences of the given <code>pattern</code> replaced.</p>

<p>See <a href="String.html#class-String-label-Substitution+Methods">Substitution Methods</a>.</p>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no <code>replacement</code> and no block given.</p>

<p>Related: <a href="String.html#method-i-sub"><code>String#sub</code></a>, <a href="String.html#method-i-sub-21"><code>String#sub!</code></a>, <a href="String.html#method-i-gsub-21"><code>String#gsub!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-gsub_source')" id="l_method-i-gsub_source">show</a>
                
              </p>
              <div id="method-i-gsub_source" class="dyn-source">
                <pre>static VALUE
rb_str_gsub(int argc, VALUE *argv, VALUE str)
{
    return str_gsub(argc, argv, str, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-gsub-21">
            
              <b>gsub!(pattern, replacement)   &rarr; self or nil<br />gsub!(pattern) {|match| ... } &rarr; self or nil<br />gsub!(pattern)                &rarr; an_enumerator
</b>
            
            <a href="../classes/String.html#method-i-gsub-21" name="method-i-gsub-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Performs the specified substring replacement(s) on <code>self</code>; returns <code>self</code> if any replacement occurred, <code>nil</code> otherwise.</p>

<p>See <a href="String.html#class-String-label-Substitution+Methods">Substitution Methods</a>.</p>

<p>Returns an <a href="Enumerator.html"><code>Enumerator</code></a> if no <code>replacement</code> and no block given.</p>

<p>Related: <a href="String.html#method-i-sub"><code>String#sub</code></a>, <a href="String.html#method-i-gsub"><code>String#gsub</code></a>, <a href="String.html#method-i-sub-21"><code>String#sub!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-gsub-21_source')" id="l_method-i-gsub-21_source">show</a>
                
              </p>
              <div id="method-i-gsub-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_gsub_bang(int argc, VALUE *argv, VALUE str)
{
    str_modify_keep_cr(str);
    return str_gsub(argc, argv, str, 1);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-hash">
            
              <b>hash &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-hash" name="method-i-hash" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the integer hash value for <code>self</code>. The value is based on the length, content and encoding of <code>self</code>.</p>

<p>Related: <a href="Object.html#method-i-hash"><code>Object#hash</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-hash_source')" id="l_method-i-hash_source">show</a>
                
              </p>
              <div id="method-i-hash_source" class="dyn-source">
                <pre>static VALUE
rb_str_hash_m(VALUE str)
{
    st_index_t hval = rb_str_hash(str);
    return ST2FIX(hval);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-hex">
            
              <b>hex &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-hex" name="method-i-hex" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Interprets the leading substring of <code>self</code> as a string of hexadecimal digits (with an optional sign and an optional <code>0x</code>) and returns the corresponding number; returns zero if there is no such leading substring:</p>

<pre><code>&#39;0x0a&#39;.hex        # =&gt; 10
&#39;-1234&#39;.hex       # =&gt; -4660
&#39;0&#39;.hex           # =&gt; 0
&#39;non-numeric&#39;.hex # =&gt; 0
</code></pre>

<p>Related: <a href="String.html#method-i-oct"><code>String#oct</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-hex_source')" id="l_method-i-hex_source">show</a>
                
              </p>
              <div id="method-i-hex_source" class="dyn-source">
                <pre>static VALUE
rb_str_hex(VALUE str)
{
    return rb_str_to_inum(str, 16, FALSE);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-include-3F">
            
              <b>include? other_string &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-include-3F" name="method-i-include-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>self</code> contains <code>other_string</code>, <code>false</code> otherwise:</p>

<pre><code>s = &#39;foo&#39;
s.include?(&#39;f&#39;)    # =&gt; true
s.include?(&#39;fo&#39;)   # =&gt; true
s.include?(&#39;food&#39;) # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-include-3F_source')" id="l_method-i-include-3F_source">show</a>
                
              </p>
              <div id="method-i-include-3F_source" class="dyn-source">
                <pre>VALUE
rb_str_include(VALUE str, VALUE arg)
{
    long i;

    StringValue(arg);
    i = rb_str_index(str, arg, 0);

    return RBOOL(i != -1);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-index">
            
              <b>index(substring, offset = 0) &rarr; integer or nil<br />index(regexp, offset = 0) &rarr; integer or nil
</b>
            
            <a href="../classes/String.html#method-i-index" name="method-i-index" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the integer index of the first match for the given argument, or <code>nil</code> if none found; the search of <code>self</code> is forward, and begins at position <code>offset</code> (in characters).</p>

<p>With string argument <code>substring</code>, returns the index of the first matching substring in <code>self</code>:</p>

<pre><code>&#39;foo&#39;.index(&#39;f&#39;)         # =&gt; 0
&#39;foo&#39;.index(&#39;o&#39;)         # =&gt; 1
&#39;foo&#39;.index(&#39;oo&#39;)        # =&gt; 1
&#39;foo&#39;.index(&#39;ooo&#39;)       # =&gt; nil
&#39;тест&#39;.index(&#39;с&#39;)        # =&gt; 2
&#39;こんにちは&#39;.index(&#39;ち&#39;)   # =&gt; 3
</code></pre>

<p>With <a href="Regexp.html"><code>Regexp</code></a> argument <code>regexp</code>, returns the index of the first match in <code>self</code>:</p>

<pre><code>&#39;foo&#39;.index(/o./) # =&gt; 1
&#39;foo&#39;.index(/.o/) # =&gt; 0
</code></pre>

<p>With positive integer <code>offset</code>, begins the search at position <code>offset</code>:</p>

<pre><code>&#39;foo&#39;.index(&#39;o&#39;, 1)        # =&gt; 1
&#39;foo&#39;.index(&#39;o&#39;, 2)        # =&gt; 2
&#39;foo&#39;.index(&#39;o&#39;, 3)        # =&gt; nil
&#39;тест&#39;.index(&#39;с&#39;, 1)       # =&gt; 2
&#39;こんにちは&#39;.index(&#39;ち&#39;, 2)  # =&gt; 3
</code></pre>

<p>With negative integer <code>offset</code>, selects the search position by counting backward from the end of <code>self</code>:</p>

<pre><code>&#39;foo&#39;.index(&#39;o&#39;, -1)  # =&gt; 2
&#39;foo&#39;.index(&#39;o&#39;, -2)  # =&gt; 1
&#39;foo&#39;.index(&#39;o&#39;, -3)  # =&gt; 1
&#39;foo&#39;.index(&#39;o&#39;, -4)  # =&gt; nil
&#39;foo&#39;.index(/o./, -2) # =&gt; 1
&#39;foo&#39;.index(/.o/, -2) # =&gt; 1
</code></pre>

<p>Related: <a href="String.html#method-i-rindex"><code>String#rindex</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-index_source')" id="l_method-i-index_source">show</a>
                
              </p>
              <div id="method-i-index_source" class="dyn-source">
                <pre>static VALUE
rb_str_index_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    rb_encoding *enc = STR_ENC_GET(str);
    long pos;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        long slen = str_strlen(str, enc); /* str&#39;s enc */
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 ? (pos += slen) &lt; 0 : pos &gt; slen) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
    }
    else {
        pos = 0;
    }

    if (RB_TYPE_P(sub, T_REGEXP)) {
        pos = str_offset(RSTRING_PTR(str), RSTRING_END(str), pos,
                         enc, single_byte_optimizable(str));

        if (rb_reg_search(sub, str, pos, 0) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = rb_str_sublen(str, BEG(0));
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_index(str, sub, pos);
        if (pos &gt;= 0) {
            pos = rb_str_sublen(str, pos);
            return LONG2NUM(pos);
        }
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-initialize_copy">
            
              <b>initialize_copy</b>(p1)
            
            <a href="../classes/String.html#method-i-initialize_copy" name="method-i-initialize_copy" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Replaces the contents of <code>self</code> with the contents of <code>other_string</code>:</p>

<pre><code>s = &#39;foo&#39;        # =&gt; &quot;foo&quot;
s.replace(&#39;bar&#39;) # =&gt; &quot;bar&quot;
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-replace">replace</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-initialize_copy_source')" id="l_method-i-initialize_copy_source">show</a>
                
              </p>
              <div id="method-i-initialize_copy_source" class="dyn-source">
                <pre>VALUE
rb_str_replace(VALUE str, VALUE str2)
{
    str_modifiable(str);
    if (str == str2) return str;

    StringValue(str2);
    str_discard(str);
    return str_replace(str, str2);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-insert">
            
              <b>insert(index, other_string) &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-insert" name="method-i-insert" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Inserts the given <code>other_string</code> into <code>self</code>; returns <code>self</code>.</p>

<p>If the <a href="Integer.html"><code>Integer</code></a> <code>index</code> is positive, inserts <code>other_string</code> at offset <code>index</code>:</p>

<pre><code>&#39;foo&#39;.insert(1, &#39;bar&#39;) # =&gt; &quot;fbaroo&quot;
</code></pre>

<p>If the <a href="Integer.html"><code>Integer</code></a> <code>index</code> is negative, counts backward from the end of <code>self</code> and inserts <code>other_string</code> at offset <code>index+1</code> (that is, <em>after</em> <code>self[index]</code>):</p>

<pre><code>&#39;foo&#39;.insert(-2, &#39;bar&#39;) # =&gt; &quot;fobaro&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-insert_source')" id="l_method-i-insert_source">show</a>
                
              </p>
              <div id="method-i-insert_source" class="dyn-source">
                <pre>static VALUE
rb_str_insert(VALUE str, VALUE idx, VALUE str2)
{
    long pos = NUM2LONG(idx);

    if (pos == -1) {
        return rb_str_append(str, str2);
    }
    else if (pos &lt; 0) {
        pos++;
    }
    rb_str_update(str, pos, 0, str2);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-inspect">
            
              <b>inspect &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-inspect" name="method-i-inspect" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a printable version of <code>self</code>, enclosed in double-quotes, and with special characters escaped:</p>

<pre><code>s = &quot;foo\tbar\tbaz\n&quot;
s.inspect
# =&gt; &quot;\&quot;foo\\tbar\\tbaz\\n\&quot;&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-inspect_source')" id="l_method-i-inspect_source">show</a>
                
              </p>
              <div id="method-i-inspect_source" class="dyn-source">
                <pre>VALUE
rb_str_inspect(VALUE str)
{
    int encidx = ENCODING_GET(str);
    rb_encoding *enc = rb_enc_from_index(encidx);
    const char *p, *pend, *prev;
    char buf[CHAR_ESC_LEN + 1];
    VALUE result = rb_str_buf_new(0);
    rb_encoding *resenc = rb_default_internal_encoding();
    int unicode_p = rb_enc_unicode_p(enc);
    int asciicompat = rb_enc_asciicompat(enc);

    if (resenc == NULL) resenc = rb_default_external_encoding();
    if (!rb_enc_asciicompat(resenc)) resenc = rb_usascii_encoding();
    rb_enc_associate(result, resenc);
    str_buf_cat2(result, &quot;\&quot;&quot;);

    p = RSTRING_PTR(str); pend = RSTRING_END(str);
    prev = p;
    while (p &lt; pend) {
        unsigned int c, cc;
        int n;

        n = rb_enc_precise_mbclen(p, pend, enc);
        if (!MBCLEN_CHARFOUND_P(n)) {
            if (p &gt; prev) str_buf_cat(result, prev, p - prev);
            n = rb_enc_mbminlen(enc);
            if (pend &lt; p + n)
                n = (int)(pend - p);
            while (n--) {
                snprintf(buf, CHAR_ESC_LEN, &quot;\\x%02X&quot;, *p &amp; 0377);
                str_buf_cat(result, buf, strlen(buf));
                prev = ++p;
            }
            continue;
        }
        n = MBCLEN_CHARFOUND_LEN(n);
        c = rb_enc_mbc_to_codepoint(p, pend, enc);
        p += n;
        if ((asciicompat || unicode_p) &amp;&amp;
          (c == &#39;&quot;&#39;|| c == &#39;\\&#39; ||
            (c == &#39;#&#39; &amp;&amp;
             p &lt; pend &amp;&amp;
             MBCLEN_CHARFOUND_P(rb_enc_precise_mbclen(p,pend,enc)) &amp;&amp;
             (cc = rb_enc_codepoint(p,pend,enc),
              (cc == &#39;$&#39; || cc == &#39;@&#39; || cc == &#39;{&#39;))))) {
            if (p - n &gt; prev) str_buf_cat(result, prev, p - n - prev);
            str_buf_cat2(result, &quot;\\&quot;);
            if (asciicompat || enc == resenc) {
                prev = p - n;
                continue;
            }
        }
        switch (c) {
          case &#39;\n&#39;: cc = &#39;n&#39;; break;
          case &#39;\r&#39;: cc = &#39;r&#39;; break;
          case &#39;\t&#39;: cc = &#39;t&#39;; break;
          case &#39;\f&#39;: cc = &#39;f&#39;; break;
          case &#39;\013&#39;: cc = &#39;v&#39;; break;
          case &#39;\010&#39;: cc = &#39;b&#39;; break;
          case &#39;\007&#39;: cc = &#39;a&#39;; break;
          case 033: cc = &#39;e&#39;; break;
          default: cc = 0; break;
        }
        if (cc) {
            if (p - n &gt; prev) str_buf_cat(result, prev, p - n - prev);
            buf[0] = &#39;\\&#39;;
            buf[1] = (char)cc;
            str_buf_cat(result, buf, 2);
            prev = p;
            continue;
        }
        /* The special casing of 0x85 (NEXT_LINE) here is because
         * Oniguruma historically treats it as printable, but it
         * doesn&#39;t match the print POSIX bracket class or character
         * property in regexps.
         *
         * See Ruby Bug #16842 for details:
         * https://bugs.ruby-lang.org/issues/16842
         */
        if ((enc == resenc &amp;&amp; rb_enc_isprint(c, enc) &amp;&amp; c != 0x85) ||
            (asciicompat &amp;&amp; rb_enc_isascii(c, enc) &amp;&amp; ISPRINT(c))) {
            continue;
        }
        else {
            if (p - n &gt; prev) str_buf_cat(result, prev, p - n - prev);
            rb_str_buf_cat_escaped_char(result, c, unicode_p);
            prev = p;
            continue;
        }
    }
    if (p &gt; prev) str_buf_cat(result, prev, p - prev);
    str_buf_cat2(result, &quot;\&quot;&quot;);

    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-intern">
            
              <b>str.intern   &rarr; symbol</b>
            
            <a href="../classes/String.html#method-i-intern" name="method-i-intern" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Symbol.html"><code>Symbol</code></a> corresponding to <em>str</em>, creating the symbol if it did not previously exist. See <a href="Symbol.html#method-i-id2name"><code>Symbol#id2name</code></a>.</p>

<pre><code>&quot;Koala&quot;.intern         #=&gt; :Koala
s = &#39;cat&#39;.to_sym       #=&gt; :cat
s == :cat              #=&gt; true
s = &#39;@cat&#39;.to_sym      #=&gt; :@cat
s == :@cat             #=&gt; true
</code></pre>

<p>This can also be used to create symbols that cannot be represented using the <code>:xxx</code> notation.</p>

<pre><code>&#39;cat and dog&#39;.to_sym   #=&gt; :&quot;cat and dog&quot;
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-to_sym">to_sym</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-intern_source')" id="l_method-i-intern_source">show</a>
                
              </p>
              <div id="method-i-intern_source" class="dyn-source">
                <pre>VALUE
rb_str_intern(VALUE str)
{
    VALUE sym;

    GLOBAL_SYMBOLS_ENTER(symbols);
    {
        sym = lookup_str_sym_with_lock(symbols, str);

        if (sym) {
            // ok
        }
        else if (USE_SYMBOL_GC) {
            rb_encoding *enc = rb_enc_get(str);
            rb_encoding *ascii = rb_usascii_encoding();
            if (enc != ascii &amp;&amp; sym_check_asciionly(str, false)) {
                str = rb_str_dup(str);
                rb_enc_associate(str, ascii);
                OBJ_FREEZE(str);
                enc = ascii;
            }
            else {
                str = rb_str_dup(str);
                OBJ_FREEZE(str);
            }
            str = rb_fstring(str);
            int type = rb_str_symname_type(str, IDSET_ATTRSET_FOR_INTERN);
            if (type &lt; 0) type = ID_JUNK;
            sym = dsymbol_alloc(symbols, rb_cSymbol, str, enc, type);
        }
        else {
            ID id = intern_str(str, 0);
            sym = ID2SYM(id);
        }
    }
    GLOBAL_SYMBOLS_LEAVE();
    return sym;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-iseuc">
            
              <b>String#iseuc   => true or false
</b>
            
            <a href="../classes/String.html#method-i-iseuc" name="method-i-iseuc" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns whether <code>self</code>‘s encoding is EUC-JP or not.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-iseuc_source')" id="l_method-i-iseuc_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L264" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-iseuc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">iseuc</span>;    <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">iseuc</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-isjis">
            
              <b>String#isjis   => true or false
</b>
            
            <a href="../classes/String.html#method-i-isjis" name="method-i-isjis" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns whether <code>self</code>‘s encoding is ISO-2022-JP or not.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-isjis_source')" id="l_method-i-isjis_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L276" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-isjis_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 276</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">isjis</span>;    <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">isjis</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-issjis">
            
              <b>String#issjis   => true or false
</b>
            
            <a href="../classes/String.html#method-i-issjis" name="method-i-issjis" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns whether <code>self</code>‘s encoding is Shift_JIS or not.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-issjis_source')" id="l_method-i-issjis_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L270" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-issjis_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 270</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">issjis</span>;   <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">issjis</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-isutf8">
            
              <b>String#isutf8   => true or false
</b>
            
            <a href="../classes/String.html#method-i-isutf8" name="method-i-isutf8" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns whether <code>self</code>‘s encoding is UTF-8 or not.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-isutf8_source')" id="l_method-i-isutf8_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L282" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-isutf8_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 282</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">isutf8</span>;   <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">isutf8</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-kconv">
            
              <b>String#kconv(to_enc, from_enc)
</b>
            
            <a href="../classes/String.html#method-i-kconv" name="method-i-kconv" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to <code>to_enc</code>. <code>to_enc</code> and <code>from_enc</code> are given as constants of <a href="Kconv.html"><code>Kconv</code></a> or <a href="Encoding.html"><code>Encoding</code></a> objects.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-kconv_source')" id="l_method-i-kconv_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L205" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-kconv_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 205</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">kconv</span>(<span class="ruby-identifier">to_enc</span>, <span class="ruby-identifier">from_enc</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">from_enc</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">from_enc</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">list</span>[<span class="ruby-value">0</span>]
  <span class="ruby-constant">Kconv</span><span class="ruby-operator">::</span><span class="ruby-identifier">kconv</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">to_enc</span>, <span class="ruby-identifier">from_enc</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-length">
            
              <b>length &rarr; integer</b>
            
            <a href="../classes/String.html#method-i-length" name="method-i-length" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the count of characters (not bytes) in <code>self</code>:</p>

<pre><code>&#39;foo&#39;.length        # =&gt; 3
&#39;тест&#39;.length       # =&gt; 4
&#39;こんにちは&#39;.length   # =&gt; 5
</code></pre>

<p>Contrast with <a href="String.html#method-i-bytesize"><code>String#bytesize</code></a>:</p>

<pre><code>&#39;foo&#39;.bytesize        # =&gt; 3
&#39;тест&#39;.bytesize       # =&gt; 8
&#39;こんにちは&#39;.bytesize   # =&gt; 15
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-size">size</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-length_source')" id="l_method-i-length_source">show</a>
                
              </p>
              <div id="method-i-length_source" class="dyn-source">
                <pre>VALUE
rb_str_length(VALUE str)
{
    return LONG2NUM(str_strlen(str, NULL));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-lines">
            
              <b>lines(Line_sep = $/, chomp: false) &rarr; array_of_strings
</b>
            
            <a href="../classes/String.html#method-i-lines" name="method-i-lines" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Forms substrings (“lines”) of <code>self</code> according to the given arguments (see <a href="String.html#method-i-each_line"><code>String#each_line</code></a> for details); returns the lines in an array.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-lines_source')" id="l_method-i-lines_source">show</a>
                
              </p>
              <div id="method-i-lines_source" class="dyn-source">
                <pre>static VALUE
rb_str_lines(int argc, VALUE *argv, VALUE str)
{
    VALUE ary = WANTARRAY(&quot;lines&quot;, 0);
    return rb_str_enumerate_lines(argc, argv, str, ary);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-ljust">
            
              <b>ljust(size, pad_string = ' ') &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-ljust" name="method-i-ljust" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a left-justified copy of <code>self</code>.</p>

<p>If integer argument <code>size</code> is greater than the size (in characters) of <code>self</code>, returns a new string of length <code>size</code> that is a copy of <code>self</code>, left justified and padded on the right with <code>pad_string</code>:</p>

<pre><code>&#39;hello&#39;.ljust(10)       # =&gt; &quot;hello     &quot;
&#39;  hello&#39;.ljust(10)     # =&gt; &quot;  hello   &quot;
&#39;hello&#39;.ljust(10, &#39;ab&#39;) # =&gt; &quot;helloababa&quot;
&#39;тест&#39;.ljust(10)        # =&gt; &quot;тест      &quot;
&#39;こんにちは&#39;.ljust(10)    # =&gt; &quot;こんにちは     &quot;
</code></pre>

<p>If <code>size</code> is not greater than the size of <code>self</code>, returns a copy of <code>self</code>:</p>

<pre><code>&#39;hello&#39;.ljust(5)  # =&gt; &quot;hello&quot;
&#39;hello&#39;.ljust(1)  # =&gt; &quot;hello&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-rjust"><code>String#rjust</code></a>, <a href="String.html#method-i-center"><code>String#center</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-ljust_source')" id="l_method-i-ljust_source">show</a>
                
              </p>
              <div id="method-i-ljust_source" class="dyn-source">
                <pre>static VALUE
rb_str_ljust(int argc, VALUE *argv, VALUE str)
{
    return rb_str_justify(argc, argv, str, &#39;l&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-lstrip">
            
              <b>lstrip &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-lstrip" name="method-i-lstrip" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with leading whitespace removed; see <a href="String.html#class-String-label-Whitespace+in+Strings">Whitespace in Strings</a>:</p>

<pre><code>whitespace = &quot;\x00\t\n\v\f\r &quot;
s = whitespace + &#39;abc&#39; + whitespace
s        # =&gt; &quot;\u0000\t\n\v\f\r abc\u0000\t\n\v\f\r &quot;
s.lstrip # =&gt; &quot;abc\u0000\t\n\v\f\r &quot;
</code></pre>

<p>Related: <a href="String.html#method-i-rstrip"><code>String#rstrip</code></a>, <a href="String.html#method-i-strip"><code>String#strip</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-lstrip_source')" id="l_method-i-lstrip_source">show</a>
                
              </p>
              <div id="method-i-lstrip_source" class="dyn-source">
                <pre>static VALUE
rb_str_lstrip(VALUE str)
{
    char *start;
    long len, loffset;
    RSTRING_GETMEM(str, start, len);
    loffset = lstrip_offset(str, start, start+len, STR_ENC_GET(str));
    if (loffset &lt;= 0) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, loffset, len - loffset);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-lstrip-21">
            
              <b>lstrip! &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-lstrip-21" name="method-i-lstrip-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-lstrip"><code>String#lstrip</code></a>, except that any modifications are made in <code>self</code>; returns <code>self</code> if any modification are made, <code>nil</code> otherwise.</p>

<p>Related: <a href="String.html#method-i-rstrip-21"><code>String#rstrip!</code></a>, <a href="String.html#method-i-strip-21"><code>String#strip!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-lstrip-21_source')" id="l_method-i-lstrip-21_source">show</a>
                
              </p>
              <div id="method-i-lstrip-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_lstrip_bang(VALUE str)
{
    rb_encoding *enc;
    char *start, *s;
    long olen, loffset;

    str_modify_keep_cr(str);
    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    loffset = lstrip_offset(str, start, start+olen, enc);
    if (loffset &gt; 0) {
        long len = olen-loffset;
        s = start + loffset;
        memmove(start, s, len);
        STR_SET_LEN(str, len);
        TERM_FILL(start+len, rb_enc_mbminlen(enc));
        return str;
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-match">
            
              <b>match(pattern, offset = 0) &rarr; matchdata or nil<br />match(pattern, offset = 0) {|matchdata| ... } &rarr; object
</b>
            
            <a href="../classes/String.html#method-i-match" name="method-i-match" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a <a href="MatchData.html"><code>MatchData</code></a> object (or <code>nil</code>) based on <code>self</code> and the given <code>pattern</code>.</p>

<p>Note: also updates <a href="Regexp.html#class-Regexp-label-Global+Variables">Global Variables at <code>Regexp</code></a>.</p>
<ul><li>
<p>Computes <code>regexp</code> by converting <code>pattern</code> (if not already a <a href="Regexp.html"><code>Regexp</code></a>).</p>

<pre><code>regexp = Regexp.new(pattern)
</code></pre>
</li><li>
<p>Computes <code>matchdata</code>, which will be either a <a href="MatchData.html"><code>MatchData</code></a> object or <code>nil</code> (see <a href="Regexp.html#method-i-match"><code>Regexp#match</code></a>):</p>

<pre><code>matchdata = &lt;tt&gt;regexp.match(self)
</code></pre>
</li></ul>

<p>With no block given, returns the computed <code>matchdata</code>:</p>

<pre><code>&#39;foo&#39;.match(&#39;f&#39;) # =&gt; #&lt;MatchData &quot;f&quot;&gt;
&#39;foo&#39;.match(&#39;o&#39;) # =&gt; #&lt;MatchData &quot;o&quot;&gt;
&#39;foo&#39;.match(&#39;x&#39;) # =&gt; nil
</code></pre>

<p>If <a href="Integer.html"><code>Integer</code></a> argument <code>offset</code> is given, the search begins at index <code>offset</code>:</p>

<pre><code>&#39;foo&#39;.match(&#39;f&#39;, 1) # =&gt; nil
&#39;foo&#39;.match(&#39;o&#39;, 1) # =&gt; #&lt;MatchData &quot;o&quot;&gt;
</code></pre>

<p>With a block given, calls the block with the computed <code>matchdata</code> and returns the block’s return value:</p>

<pre><code>&#39;foo&#39;.match(/o/) {|matchdata| matchdata } # =&gt; #&lt;MatchData &quot;o&quot;&gt;
&#39;foo&#39;.match(/x/) {|matchdata| matchdata } # =&gt; nil
&#39;foo&#39;.match(/f/, 1) {|matchdata| matchdata } # =&gt; nil
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-match_source')" id="l_method-i-match_source">show</a>
                
              </p>
              <div id="method-i-match_source" class="dyn-source">
                <pre>static VALUE
rb_str_match_m(int argc, VALUE *argv, VALUE str)
{
    VALUE re, result;
    if (argc &lt; 1)
        rb_check_arity(argc, 1, 2);
    re = argv[0];
    argv[0] = str;
    result = rb_funcallv(get_pat(re), rb_intern(&quot;match&quot;), argc, argv);
    if (!NIL_P(result) &amp;&amp; rb_block_given_p()) {
        return rb_yield(result);
    }
    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-match-3F">
            
              <b>match?(pattern, offset = 0) &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-match-3F" name="method-i-match-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> or <code>false</code> based on whether a match is found for <code>self</code> and <code>pattern</code>.</p>

<p>Note: does not update <a href="Regexp.html#class-Regexp-label-Global+Variables">Global Variables at <code>Regexp</code></a>.</p>

<p>Computes <code>regexp</code> by converting <code>pattern</code> (if not already a <a href="Regexp.html"><code>Regexp</code></a>).</p>

<pre><code>regexp = Regexp.new(pattern)
</code></pre>

<p>Returns <code>true</code> if <code>self+.match(regexp)</code> returns a <a href="MatchData.html"><code>MatchData</code></a> object, <code>false</code> otherwise:</p>

<pre><code>&#39;foo&#39;.match?(/o/) # =&gt; true
&#39;foo&#39;.match?(&#39;o&#39;) # =&gt; true
&#39;foo&#39;.match?(/x/) # =&gt; false
</code></pre>

<p>If <a href="Integer.html"><code>Integer</code></a> argument <code>offset</code> is given, the search begins at index <code>offset</code>:</p>

<pre><code>&#39;foo&#39;.match?(&#39;f&#39;, 1) # =&gt; false
&#39;foo&#39;.match?(&#39;o&#39;, 1) # =&gt; true
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-match-3F_source')" id="l_method-i-match-3F_source">show</a>
                
              </p>
              <div id="method-i-match-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_match_m_p(int argc, VALUE *argv, VALUE str)
{
    VALUE re;
    rb_check_arity(argc, 1, 2);
    re = get_pat(argv[0]);
    return rb_reg_match_p(re, str, argc &gt; 1 ? NUM2LONG(argv[1]) : 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-next">
            
              <b>next</b>()
            
            <a href="../classes/String.html#method-i-next" name="method-i-next" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the successor to <code>self</code>. The successor is calculated by incrementing characters.</p>

<p>The first character to be incremented is the rightmost alphanumeric: or, if no alphanumerics, the rightmost character:</p>

<pre><code>&#39;THX1138&#39;.succ # =&gt; &quot;THX1139&quot;
&#39;&lt;&lt;koala&gt;&gt;&#39;.succ # =&gt; &quot;&lt;&lt;koalb&gt;&gt;&quot;
&#39;***&#39;.succ # =&gt; &#39;**+&#39;
</code></pre>

<p>The successor to a digit is another digit, “carrying” to the next-left character for a “rollover” from 9 to 0, and prepending another digit if necessary:</p>

<pre><code>&#39;00&#39;.succ # =&gt; &quot;01&quot;
&#39;09&#39;.succ # =&gt; &quot;10&quot;
&#39;99&#39;.succ # =&gt; &quot;100&quot;
</code></pre>

<p>The successor to a letter is another letter of the same case, carrying to the next-left character for a rollover, and prepending another same-case letter if necessary:</p>

<pre><code>&#39;aa&#39;.succ # =&gt; &quot;ab&quot;
&#39;az&#39;.succ # =&gt; &quot;ba&quot;
&#39;zz&#39;.succ # =&gt; &quot;aaa&quot;
&#39;AA&#39;.succ # =&gt; &quot;AB&quot;
&#39;AZ&#39;.succ # =&gt; &quot;BA&quot;
&#39;ZZ&#39;.succ # =&gt; &quot;AAA&quot;
</code></pre>

<p>The successor to a non-alphanumeric character is the next character in the underlying character set’s collating sequence, carrying to the next-left character for a rollover, and prepending another character if necessary:</p>

<pre><code>s = 0.chr * 3
s # =&gt; &quot;\x00\x00\x00&quot;
s.succ # =&gt; &quot;\x00\x00\x01&quot;
s = 255.chr * 3
s # =&gt; &quot;\xFF\xFF\xFF&quot;
s.succ # =&gt; &quot;\x01\x00\x00\x00&quot;
</code></pre>

<p>Carrying can occur between and among mixtures of alphanumeric characters:</p>

<pre><code>s = &#39;zz99zz99&#39;
s.succ # =&gt; &quot;aaa00aa00&quot;
s = &#39;99zz99zz&#39;
s.succ # =&gt; &quot;100aa00aa&quot;
</code></pre>

<p>The successor to an empty String is a new empty String:</p>

<pre><code>&#39;&#39;.succ # =&gt; &quot;&quot;
</code></pre>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-succ">succ</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-next-21">
            
              <b>next!</b>()
            
            <a href="../classes/String.html#method-i-next-21" name="method-i-next-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Equivalent to <a href="String.html#method-i-succ"><code>String#succ</code></a>, but modifies <code>self</code> in place; returns <code>self</code>.</p>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-succ-21">succ!</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-oct">
            
              <b>oct &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-oct" name="method-i-oct" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Interprets the leading substring of <code>self</code> as a string of octal digits (with an optional sign) and returns the corresponding number; returns zero if there is no such leading substring:</p>

<pre><code>&#39;123&#39;.oct             # =&gt; 83
&#39;-377&#39;.oct            # =&gt; -255
&#39;0377non-numeric&#39;.oct # =&gt; 255
&#39;non-numeric&#39;.oct     # =&gt; 0
</code></pre>

<p>If <code>self</code> starts with <code>0</code>, radix indicators are honored; see <a href="Kernel.html#method-i-Integer"><code>Kernel#Integer</code></a>.</p>

<p>Related: <a href="String.html#method-i-hex"><code>String#hex</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-oct_source')" id="l_method-i-oct_source">show</a>
                
              </p>
              <div id="method-i-oct_source" class="dyn-source">
                <pre>static VALUE
rb_str_oct(VALUE str)
{
    return rb_str_to_inum(str, -8, FALSE);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-ord">
            
              <b>ord &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-ord" name="method-i-ord" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the integer ordinal of the first character of <code>self</code>:</p>

<pre><code>&#39;h&#39;.ord         # =&gt; 104
&#39;hello&#39;.ord     # =&gt; 104
&#39;тест&#39;.ord      # =&gt; 1090
&#39;こんにちは&#39;.ord  # =&gt; 12371
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-ord_source')" id="l_method-i-ord_source">show</a>
                
              </p>
              <div id="method-i-ord_source" class="dyn-source">
                <pre>static VALUE
rb_str_ord(VALUE s)
{
    unsigned int c;

    c = rb_enc_codepoint(RSTRING_PTR(s), RSTRING_END(s), STR_ENC_GET(s));
    return UINT2NUM(c);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-partition">
            
              <b>partition(string_or_regexp) &rarr; [head, match, tail]
</b>
            
            <a href="../classes/String.html#method-i-partition" name="method-i-partition" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a 3-element array of substrings of <code>self</code>.</p>

<p>Matches a pattern against <code>self</code>, scanning from the beginning. The pattern is:</p>
<ul><li>
<p><code>string_or_regexp</code> itself, if it is a <a href="Regexp.html"><code>Regexp</code></a>.</p>
</li><li>
<p><code>Regexp.quote(string_or_regexp)</code>, if <code>string_or_regexp</code> is a string.</p>
</li></ul>

<p>If the pattern is matched, returns pre-match, first-match, post-match:</p>

<pre><code>&#39;hello&#39;.partition(&#39;l&#39;)      # =&gt; [&quot;he&quot;, &quot;l&quot;, &quot;lo&quot;]
&#39;hello&#39;.partition(&#39;ll&#39;)     # =&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
&#39;hello&#39;.partition(&#39;h&#39;)      # =&gt; [&quot;&quot;, &quot;h&quot;, &quot;ello&quot;]
&#39;hello&#39;.partition(&#39;o&#39;)      # =&gt; [&quot;hell&quot;, &quot;o&quot;, &quot;&quot;]
&#39;hello&#39;.partition(/l+/)     #=&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
&#39;hello&#39;.partition(&#39;&#39;)       # =&gt; [&quot;&quot;, &quot;&quot;, &quot;hello&quot;]
&#39;тест&#39;.partition(&#39;т&#39;)       # =&gt; [&quot;&quot;, &quot;т&quot;, &quot;ест&quot;]
&#39;こんにちは&#39;.partition(&#39;に&#39;)  # =&gt; [&quot;こん&quot;, &quot;に&quot;, &quot;ちは&quot;]
</code></pre>

<p>If the pattern is not matched, returns a copy of <code>self</code> and two empty strings:</p>

<pre><code>&#39;hello&#39;.partition(&#39;x&#39;) # =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]
</code></pre>

<p>Related: <a href="String.html#method-i-rpartition"><code>String#rpartition</code></a>, <a href="String.html#method-i-split"><code>String#split</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-partition_source')" id="l_method-i-partition_source">show</a>
                
              </p>
              <div id="method-i-partition_source" class="dyn-source">
                <pre>static VALUE
rb_str_partition(VALUE str, VALUE sep)
{
    long pos;

    sep = get_pat_quoted(sep, 0);
    if (RB_TYPE_P(sep, T_REGEXP)) {
        if (rb_reg_search(sep, str, 0, 0) &lt; 0) {
            goto failed;
        }
        VALUE match = rb_backref_get();
        struct re_registers *regs = RMATCH_REGS(match);

        pos = BEG(0);
        sep = rb_str_subseq(str, pos, END(0) - pos);
    }
    else {
        pos = rb_str_index(str, sep, 0);
        if (pos &lt; 0) goto failed;
    }
    return rb_ary_new3(3, rb_str_subseq(str, 0, pos),
                          sep,
                          rb_str_subseq(str, pos+RSTRING_LEN(sep),
                                             RSTRING_LEN(str)-pos-RSTRING_LEN(sep)));

  failed:
    return rb_ary_new3(3, str_duplicate(rb_cString, str), str_new_empty_String(str), str_new_empty_String(str));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-prepend">
            
              <b>prepend(*other_strings)  &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-prepend" name="method-i-prepend" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Prepends each string in <code>other_strings</code> to <code>self</code> and returns <code>self</code>:</p>

<pre><code>s = &#39;foo&#39;
s.prepend(&#39;bar&#39;, &#39;baz&#39;) # =&gt; &quot;barbazfoo&quot;
s                       # =&gt; &quot;barbazfoo&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-concat"><code>String#concat</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-prepend_source')" id="l_method-i-prepend_source">show</a>
                
              </p>
              <div id="method-i-prepend_source" class="dyn-source">
                <pre>static VALUE
rb_str_prepend_multi(int argc, VALUE *argv, VALUE str)
{
    str_modifiable(str);

    if (argc == 1) {
        rb_str_update(str, 0L, 0L, argv[0]);
    }
    else if (argc &gt; 1) {
        int i;
        VALUE arg_str = rb_str_tmp_new(0);
        rb_enc_copy(arg_str, str);
        for (i = 0; i &lt; argc; i++) {
            rb_str_append(arg_str, argv[i]);
        }
        rb_str_update(str, 0L, 0L, arg_str);
    }

    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-replace">
            
              <b>replace(other_string) &rarr; self</b>
            
            <a href="../classes/String.html#method-i-replace" name="method-i-replace" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Replaces the contents of <code>self</code> with the contents of <code>other_string</code>:</p>

<pre><code>s = &#39;foo&#39;        # =&gt; &quot;foo&quot;
s.replace(&#39;bar&#39;) # =&gt; &quot;bar&quot;
</code></pre>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-initialize_copy">initialize_copy</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-reverse">
            
              <b>reverse &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-reverse" name="method-i-reverse" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new string with the characters from <code>self</code> in reverse order.</p>

<pre><code>&#39;stressed&#39;.reverse # =&gt; &quot;desserts&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-reverse_source')" id="l_method-i-reverse_source">show</a>
                
              </p>
              <div id="method-i-reverse_source" class="dyn-source">
                <pre>static VALUE
rb_str_reverse(VALUE str)
{
    rb_encoding *enc;
    VALUE rev;
    char *s, *e, *p;
    int cr;

    if (RSTRING_LEN(str) &lt;= 1) return str_duplicate(rb_cString, str);
    enc = STR_ENC_GET(str);
    rev = rb_str_new(0, RSTRING_LEN(str));
    s = RSTRING_PTR(str); e = RSTRING_END(str);
    p = RSTRING_END(rev);
    cr = ENC_CODERANGE(str);

    if (RSTRING_LEN(str) &gt; 1) {
        if (single_byte_optimizable(str)) {
            while (s &lt; e) {
                *--p = *s++;
            }
        }
        else if (cr == ENC_CODERANGE_VALID) {
            while (s &lt; e) {
                int clen = rb_enc_fast_mbclen(s, e, enc);

                p -= clen;
                memcpy(p, s, clen);
                s += clen;
            }
        }
        else {
            cr = rb_enc_asciicompat(enc) ?
                ENC_CODERANGE_7BIT : ENC_CODERANGE_VALID;
            while (s &lt; e) {
                int clen = rb_enc_mbclen(s, e, enc);

                if (clen &gt; 1 || (*s &amp; 0x80)) cr = ENC_CODERANGE_UNKNOWN;
                p -= clen;
                memcpy(p, s, clen);
                s += clen;
            }
        }
    }
    STR_SET_LEN(rev, RSTRING_LEN(str));
    str_enc_copy_direct(rev, str);
    ENC_CODERANGE_SET(rev, cr);

    return rev;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-reverse-21">
            
              <b>reverse! &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-reverse-21" name="method-i-reverse-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>self</code> with its characters reversed:</p>

<pre><code>s = &#39;stressed&#39;
s.reverse! # =&gt; &quot;desserts&quot;
s          # =&gt; &quot;desserts&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-reverse-21_source')" id="l_method-i-reverse-21_source">show</a>
                
              </p>
              <div id="method-i-reverse-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_reverse_bang(VALUE str)
{
    if (RSTRING_LEN(str) &gt; 1) {
        if (single_byte_optimizable(str)) {
            char *s, *e, c;

            str_modify_keep_cr(str);
            s = RSTRING_PTR(str);
            e = RSTRING_END(str) - 1;
            while (s &lt; e) {
                c = *s;
                *s++ = *e;
                *e-- = c;
            }
        }
        else {
            str_shared_replace(str, rb_str_reverse(str));
        }
    }
    else {
        str_modify_keep_cr(str);
    }
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rindex">
            
              <b>rindex(substring, offset = self.length) &rarr; integer or nil<br />rindex(regexp, offset = self.length) &rarr; integer or nil
</b>
            
            <a href="../classes/String.html#method-i-rindex" name="method-i-rindex" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Integer.html"><code>Integer</code></a> index of the <em>last</em> occurrence of the given <code>substring</code>, or <code>nil</code> if none found:</p>

<pre><code>&#39;foo&#39;.rindex(&#39;f&#39;) # =&gt; 0
&#39;foo&#39;.rindex(&#39;o&#39;) # =&gt; 2
&#39;foo&#39;.rindex(&#39;oo&#39;) # =&gt; 1
&#39;foo&#39;.rindex(&#39;ooo&#39;) # =&gt; nil
</code></pre>

<p>Returns the <a href="Integer.html"><code>Integer</code></a> index of the <em>last</em> match for the given <a href="Regexp.html"><code>Regexp</code></a> <code>regexp</code>, or <code>nil</code> if none found:</p>

<pre><code>&#39;foo&#39;.rindex(/f/) # =&gt; 0
&#39;foo&#39;.rindex(/o/) # =&gt; 2
&#39;foo&#39;.rindex(/oo/) # =&gt; 1
&#39;foo&#39;.rindex(/ooo/) # =&gt; nil
</code></pre>

<p>The <em>last</em> match means starting at the possible last position, not the last of longest matches.</p>

<pre><code>&#39;foo&#39;.rindex(/o+/) # =&gt; 2
$~ #=&gt; #&lt;MatchData &quot;o&quot;&gt;
</code></pre>

<p>To get the last longest match, needs to combine with negative lookbehind.</p>

<pre><code>&#39;foo&#39;.rindex(/(?&lt;!o)o+/) # =&gt; 1
$~ #=&gt; #&lt;MatchData &quot;oo&quot;&gt;
</code></pre>

<p>Or <a href="String.html#method-i-index"><code>String#index</code></a> with negative lookforward.</p>

<pre><code>&#39;foo&#39;.index(/o+(?!.*o)/) # =&gt; 1
$~ #=&gt; #&lt;MatchData &quot;oo&quot;&gt;
</code></pre>

<p><a href="Integer.html"><code>Integer</code></a> argument <code>offset</code>, if given and non-negative, specifies the maximum starting position in the</p>

<pre><code>string to _end_ the search:

 &#39;foo&#39;.rindex(&#39;o&#39;, 0) # =&gt; nil
 &#39;foo&#39;.rindex(&#39;o&#39;, 1) # =&gt; 1
 &#39;foo&#39;.rindex(&#39;o&#39;, 2) # =&gt; 2
 &#39;foo&#39;.rindex(&#39;o&#39;, 3) # =&gt; 2
</code></pre>

<p>If <code>offset</code> is a negative <a href="Integer.html"><code>Integer</code></a>, the maximum starting position in the string to <em>end</em> the search is the sum of the string’s length and <code>offset</code>:</p>

<pre><code>&#39;foo&#39;.rindex(&#39;o&#39;, -1) # =&gt; 2
&#39;foo&#39;.rindex(&#39;o&#39;, -2) # =&gt; 1
&#39;foo&#39;.rindex(&#39;o&#39;, -3) # =&gt; nil
&#39;foo&#39;.rindex(&#39;o&#39;, -4) # =&gt; nil
</code></pre>

<p>Related: <a href="String.html#method-i-index"><code>String#index</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rindex_source')" id="l_method-i-rindex_source">show</a>
                
              </p>
              <div id="method-i-rindex_source" class="dyn-source">
                <pre>static VALUE
rb_str_rindex_m(int argc, VALUE *argv, VALUE str)
{
    VALUE sub;
    VALUE initpos;
    rb_encoding *enc = STR_ENC_GET(str);
    long pos, len = str_strlen(str, enc); /* str&#39;s enc */

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;sub, &amp;initpos) == 2) {
        pos = NUM2LONG(initpos);
        if (pos &lt; 0 &amp;&amp; (pos += len) &lt; 0) {
            if (RB_TYPE_P(sub, T_REGEXP)) {
                rb_backref_set(Qnil);
            }
            return Qnil;
        }
        if (pos &gt; len) pos = len;
    }
    else {
        pos = len;
    }

    if (RB_TYPE_P(sub, T_REGEXP)) {
        /* enc = rb_enc_check(str, sub); */
        pos = str_offset(RSTRING_PTR(str), RSTRING_END(str), pos,
                         enc, single_byte_optimizable(str));

        if (rb_reg_search(sub, str, pos, 1) &gt;= 0) {
            VALUE match = rb_backref_get();
            struct re_registers *regs = RMATCH_REGS(match);
            pos = rb_str_sublen(str, BEG(0));
            return LONG2NUM(pos);
        }
    }
    else {
        StringValue(sub);
        pos = rb_str_rindex(str, sub, pos);
        if (pos &gt;= 0) {
            pos = rb_str_sublen(str, pos);
            return LONG2NUM(pos);
        }
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rjust">
            
              <b>rjust(size, pad_string = ' ') &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-rjust" name="method-i-rjust" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a right-justified copy of <code>self</code>.</p>

<p>If integer argument <code>size</code> is greater than the size (in characters) of <code>self</code>, returns a new string of length <code>size</code> that is a copy of <code>self</code>, right justified and padded on the left with <code>pad_string</code>:</p>

<pre><code>&#39;hello&#39;.rjust(10)       # =&gt; &quot;     hello&quot;
&#39;hello  &#39;.rjust(10)     # =&gt; &quot;   hello  &quot;
&#39;hello&#39;.rjust(10, &#39;ab&#39;) # =&gt; &quot;ababahello&quot;
&#39;тест&#39;.rjust(10)        # =&gt; &quot;      тест&quot;
&#39;こんにちは&#39;.rjust(10)    # =&gt; &quot;     こんにちは&quot;
</code></pre>

<p>If <code>size</code> is not greater than the size of <code>self</code>, returns a copy of <code>self</code>:</p>

<pre><code>&#39;hello&#39;.rjust(5, &#39;ab&#39;)  # =&gt; &quot;hello&quot;
&#39;hello&#39;.rjust(1, &#39;ab&#39;)  # =&gt; &quot;hello&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-ljust"><code>String#ljust</code></a>, <a href="String.html#method-i-center"><code>String#center</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rjust_source')" id="l_method-i-rjust_source">show</a>
                
              </p>
              <div id="method-i-rjust_source" class="dyn-source">
                <pre>static VALUE
rb_str_rjust(int argc, VALUE *argv, VALUE str)
{
    return rb_str_justify(argc, argv, str, &#39;r&#39;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rpartition">
            
              <b>rpartition(sep) &rarr; [head, match, tail]
</b>
            
            <a href="../classes/String.html#method-i-rpartition" name="method-i-rpartition" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a 3-element array of substrings of <code>self</code>.</p>

<p>Matches a pattern against <code>self</code>, scanning backwards from the end. The pattern is:</p>
<ul><li>
<p><code>string_or_regexp</code> itself, if it is a <a href="Regexp.html"><code>Regexp</code></a>.</p>
</li><li>
<p><code>Regexp.quote(string_or_regexp)</code>, if <code>string_or_regexp</code> is a string.</p>
</li></ul>

<p>If the pattern is matched, returns pre-match, last-match, post-match:</p>

<pre><code>&#39;hello&#39;.rpartition(&#39;l&#39;)      # =&gt; [&quot;hel&quot;, &quot;l&quot;, &quot;o&quot;]
&#39;hello&#39;.rpartition(&#39;ll&#39;)     # =&gt; [&quot;he&quot;, &quot;ll&quot;, &quot;o&quot;]
&#39;hello&#39;.rpartition(&#39;h&#39;)      # =&gt; [&quot;&quot;, &quot;h&quot;, &quot;ello&quot;]
&#39;hello&#39;.rpartition(&#39;o&#39;)      # =&gt; [&quot;hell&quot;, &quot;o&quot;, &quot;&quot;]
&#39;hello&#39;.rpartition(/l+/)     # =&gt; [&quot;hel&quot;, &quot;l&quot;, &quot;o&quot;]
&#39;hello&#39;.rpartition(&#39;&#39;)       # =&gt; [&quot;hello&quot;, &quot;&quot;, &quot;&quot;]
&#39;тест&#39;.rpartition(&#39;т&#39;)       # =&gt; [&quot;тес&quot;, &quot;т&quot;, &quot;&quot;]
&#39;こんにちは&#39;.rpartition(&#39;に&#39;)  # =&gt; [&quot;こん&quot;, &quot;に&quot;, &quot;ちは&quot;]
</code></pre>

<p>If the pattern is not matched, returns two empty strings and a copy of <code>self</code>:</p>

<pre><code>&#39;hello&#39;.rpartition(&#39;x&#39;) # =&gt; [&quot;&quot;, &quot;&quot;, &quot;hello&quot;]
</code></pre>

<p>Related: <a href="String.html#method-i-partition"><code>String#partition</code></a>, <a href="String.html#method-i-split"><code>String#split</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rpartition_source')" id="l_method-i-rpartition_source">show</a>
                
              </p>
              <div id="method-i-rpartition_source" class="dyn-source">
                <pre>static VALUE
rb_str_rpartition(VALUE str, VALUE sep)
{
    long pos = RSTRING_LEN(str);

    sep = get_pat_quoted(sep, 0);
    if (RB_TYPE_P(sep, T_REGEXP)) {
        if (rb_reg_search(sep, str, pos, 1) &lt; 0) {
            goto failed;
        }
        VALUE match = rb_backref_get();
        struct re_registers *regs = RMATCH_REGS(match);

        pos = BEG(0);
        sep = rb_str_subseq(str, pos, END(0) - pos);
    }
    else {
        pos = rb_str_sublen(str, pos);
        pos = rb_str_rindex(str, sep, pos);
        if (pos &lt; 0) {
            goto failed;
        }
    }

    return rb_ary_new3(3, rb_str_subseq(str, 0, pos),
                          sep,
                          rb_str_subseq(str, pos+RSTRING_LEN(sep),
                                        RSTRING_LEN(str)-pos-RSTRING_LEN(sep)));
  failed:
    return rb_ary_new3(3, str_new_empty_String(str), str_new_empty_String(str), str_duplicate(rb_cString, str));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rstrip">
            
              <b>rstrip &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-rstrip" name="method-i-rstrip" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of the receiver with trailing whitespace removed; see <a href="String.html#class-String-label-Whitespace+in+Strings">Whitespace in Strings</a>:</p>

<pre><code>whitespace = &quot;\x00\t\n\v\f\r &quot;
s = whitespace + &#39;abc&#39; + whitespace
s        # =&gt; &quot;\u0000\t\n\v\f\r abc\u0000\t\n\v\f\r &quot;
s.rstrip # =&gt; &quot;\u0000\t\n\v\f\r abc&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-lstrip"><code>String#lstrip</code></a>, <a href="String.html#method-i-strip"><code>String#strip</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rstrip_source')" id="l_method-i-rstrip_source">show</a>
                
              </p>
              <div id="method-i-rstrip_source" class="dyn-source">
                <pre>static VALUE
rb_str_rstrip(VALUE str)
{
    rb_encoding *enc;
    char *start;
    long olen, roffset;

    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    roffset = rstrip_offset(str, start, start+olen, enc);

    if (roffset &lt;= 0) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, 0, olen-roffset);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rstrip-21">
            
              <b>rstrip! &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-rstrip-21" name="method-i-rstrip-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-rstrip"><code>String#rstrip</code></a>, except that any modifications are made in <code>self</code>; returns <code>self</code> if any modification are made, <code>nil</code> otherwise.</p>

<p>Related: <a href="String.html#method-i-lstrip-21"><code>String#lstrip!</code></a>, <a href="String.html#method-i-strip-21"><code>String#strip!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rstrip-21_source')" id="l_method-i-rstrip-21_source">show</a>
                
              </p>
              <div id="method-i-rstrip-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_rstrip_bang(VALUE str)
{
    rb_encoding *enc;
    char *start;
    long olen, roffset;

    str_modify_keep_cr(str);
    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    roffset = rstrip_offset(str, start, start+olen, enc);
    if (roffset &gt; 0) {
        long len = olen - roffset;

        STR_SET_LEN(str, len);
        TERM_FILL(start+len, rb_enc_mbminlen(enc));
        return str;
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-scan">
            
              <b>scan(string_or_regexp) &rarr; array<br />scan(string_or_regexp) {|matches| ... } &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-scan" name="method-i-scan" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Matches a pattern against <code>self</code>; the pattern is:</p>
<ul><li>
<p><code>string_or_regexp</code> itself, if it is a <a href="Regexp.html"><code>Regexp</code></a>.</p>
</li><li>
<p><code>Regexp.quote(string_or_regexp)</code>, if <code>string_or_regexp</code> is a string.</p>
</li></ul>

<p>Iterates through <code>self</code>, generating a collection of matching results:</p>
<ul><li>
<p>If the pattern contains no groups, each result is the matched string, <code>$&amp;</code>.</p>
</li><li>
<p>If the pattern contains groups, each result is an array containing one entry per group.</p>
</li></ul>

<p>With no block given, returns an array of the results:</p>

<pre><code>s = &#39;cruel world&#39;
s.scan(/\w+/)      # =&gt; [&quot;cruel&quot;, &quot;world&quot;]
s.scan(/.../)      # =&gt; [&quot;cru&quot;, &quot;el &quot;, &quot;wor&quot;]
s.scan(/(...)/)    # =&gt; [[&quot;cru&quot;], [&quot;el &quot;], [&quot;wor&quot;]]
s.scan(/(..)(..)/) # =&gt; [[&quot;cr&quot;, &quot;ue&quot;], [&quot;l &quot;, &quot;wo&quot;]]
</code></pre>

<p>With a block given, calls the block with each result; returns <code>self</code>:</p>

<pre><code>s.scan(/\w+/) {|w| print &quot;&lt;&lt;#{w}&gt;&gt; &quot; }
print &quot;\n&quot;
s.scan(/(.)(.)/) {|x,y| print y, x }
print &quot;\n&quot;
</code></pre>

<p>Output:</p>

<pre><code>&lt;&lt;cruel&gt;&gt; &lt;&lt;world&gt;&gt;
rceu lowlr
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-scan_source')" id="l_method-i-scan_source">show</a>
                
              </p>
              <div id="method-i-scan_source" class="dyn-source">
                <pre>static VALUE
rb_str_scan(VALUE str, VALUE pat)
{
    VALUE result;
    long start = 0;
    long last = -1, prev = 0;
    char *p = RSTRING_PTR(str); long len = RSTRING_LEN(str);

    pat = get_pat_quoted(pat, 1);
    mustnot_broken(str);
    if (!rb_block_given_p()) {
        VALUE ary = rb_ary_new();

        while (!NIL_P(result = scan_once(str, pat, &amp;start, 0))) {
            last = prev;
            prev = start;
            rb_ary_push(ary, result);
        }
        if (last &gt;= 0) rb_pat_search(pat, str, last, 1);
        else rb_backref_set(Qnil);
        return ary;
    }

    while (!NIL_P(result = scan_once(str, pat, &amp;start, 1))) {
        last = prev;
        prev = start;
        rb_yield(result);
        str_mod_check(str, p, len);
    }
    if (last &gt;= 0) rb_pat_search(pat, str, last, 1);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-scrub">
            
              <b>scrub(replacement_string = default_replacement) &rarr; new_string<br />scrub{|bytes| ... } &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-scrub" name="method-i-scrub" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with each invalid byte sequence replaced by the given <code>replacement_string</code>.</p>

<p>With no block given and no argument, replaces each invalid sequence with the default replacement string (<code>&quot;�&quot;</code> for a Unicode encoding, <code>&#39;?&#39;</code> otherwise):</p>

<pre><code>s = &quot;foo\x81\x81bar&quot;
s.scrub # =&gt; &quot;foo��bar&quot;
</code></pre>

<p>With no block given and argument <code>replacement_string</code> given, replaces each invalid sequence with that string:</p>

<pre><code>&quot;foo\x81\x81bar&quot;.scrub(&#39;xyzzy&#39;) # =&gt; &quot;fooxyzzyxyzzybar&quot;
</code></pre>

<p>With a block given, replaces each invalid sequence with the value of the block:</p>

<pre><code>&quot;foo\x81\x81bar&quot;.scrub {|bytes| p bytes; &#39;XYZZY&#39; }
# =&gt; &quot;fooXYZZYXYZZYbar&quot;
</code></pre>

<p>Output:</p>

<pre><code>&quot;\x81&quot;
&quot;\x81&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-scrub_source')" id="l_method-i-scrub_source">show</a>
                
              </p>
              <div id="method-i-scrub_source" class="dyn-source">
                <pre>static VALUE
str_scrub(int argc, VALUE *argv, VALUE str)
{
    VALUE repl = argc ? (rb_check_arity(argc, 0, 1), argv[0]) : Qnil;
    VALUE new = rb_str_scrub(str, repl);
    return NIL_P(new) ? str_duplicate(rb_cString, str): new;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-scrub-21">
            
              <b>scrub! &rarr; self<br />scrub!(replacement_string = default_replacement) &rarr; self<br />scrub!{|bytes| ... } &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-scrub-21" name="method-i-scrub-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-scrub"><code>String#scrub</code></a>, except that any replacements are made in <code>self</code>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-scrub-21_source')" id="l_method-i-scrub-21_source">show</a>
                
              </p>
              <div id="method-i-scrub-21_source" class="dyn-source">
                <pre>static VALUE
str_scrub_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE repl = argc ? (rb_check_arity(argc, 0, 1), argv[0]) : Qnil;
    VALUE new = rb_str_scrub(str, repl);
    if (!NIL_P(new)) rb_str_replace(str, new);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-setbyte">
            
              <b>setbyte(index, integer) &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-setbyte" name="method-i-setbyte" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Sets the byte at zero-based <code>index</code> to <code>integer</code>; returns <code>integer</code>:</p>

<pre><code>s = &#39;abcde&#39;      # =&gt; &quot;abcde&quot;
s.setbyte(0, 98) # =&gt; 98
s                # =&gt; &quot;bbcde&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-getbyte"><code>String#getbyte</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-setbyte_source')" id="l_method-i-setbyte_source">show</a>
                
              </p>
              <div id="method-i-setbyte_source" class="dyn-source">
                <pre>static VALUE
rb_str_setbyte(VALUE str, VALUE index, VALUE value)
{
    long pos = NUM2LONG(index);
    long len = RSTRING_LEN(str);
    char *ptr, *head, *left = 0;
    rb_encoding *enc;
    int cr = ENC_CODERANGE_UNKNOWN, width, nlen;

    if (pos &lt; -len || len &lt;= pos)
        rb_raise(rb_eIndexError, &quot;index %ld out of string&quot;, pos);
    if (pos &lt; 0)
        pos += len;

    VALUE v = rb_to_int(value);
    VALUE w = rb_int_and(v, INT2FIX(0xff));
    char byte = (char)(NUM2INT(w) &amp; 0xFF);

    if (!str_independent(str))
        str_make_independent(str);
    enc = STR_ENC_GET(str);
    head = RSTRING_PTR(str);
    ptr = &amp;head[pos];
    if (!STR_EMBED_P(str)) {
        cr = ENC_CODERANGE(str);
        switch (cr) {
          case ENC_CODERANGE_7BIT:
            left = ptr;
            *ptr = byte;
            if (ISASCII(byte)) goto end;
            nlen = rb_enc_precise_mbclen(left, head+len, enc);
            if (!MBCLEN_CHARFOUND_P(nlen))
                ENC_CODERANGE_SET(str, ENC_CODERANGE_BROKEN);
            else
                ENC_CODERANGE_SET(str, ENC_CODERANGE_VALID);
            goto end;
          case ENC_CODERANGE_VALID:
            left = rb_enc_left_char_head(head, ptr, head+len, enc);
            width = rb_enc_precise_mbclen(left, head+len, enc);
            *ptr = byte;
            nlen = rb_enc_precise_mbclen(left, head+len, enc);
            if (!MBCLEN_CHARFOUND_P(nlen))
                ENC_CODERANGE_SET(str, ENC_CODERANGE_BROKEN);
            else if (MBCLEN_CHARFOUND_LEN(nlen) != width || ISASCII(byte))
                ENC_CODERANGE_CLEAR(str);
            goto end;
        }
    }
    ENC_CODERANGE_CLEAR(str);
    *ptr = byte;

  end:
    return value;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-shellescape">
            
              <b>str.shellescape => string
</b>
            
            <a href="../classes/String.html#method-i-shellescape" name="method-i-shellescape" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Escapes <code>str</code> so that it can be safely used in a Bourne shell command line.</p>

<p>See <a href="Shellwords.html#method-c-shellescape"><code>Shellwords.shellescape</code></a> for details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-shellescape_source')" id="l_method-i-shellescape_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/shellwords.rb#L226" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-shellescape_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/shellwords.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">shellescape</span>
  <span class="ruby-constant">Shellwords</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-shellsplit">
            
              <b>str.shellsplit => array
</b>
            
            <a href="../classes/String.html#method-i-shellsplit" name="method-i-shellsplit" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Splits <code>str</code> into an array of tokens in the same way the UNIX Bourne shell does.</p>

<p>See <a href="Shellwords.html#method-c-shellsplit"><code>Shellwords.shellsplit</code></a> for details.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-shellsplit_source')" id="l_method-i-shellsplit_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/shellwords.rb#L215" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-shellsplit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/shellwords.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">shellsplit</span>
  <span class="ruby-constant">Shellwords</span>.<span class="ruby-identifier">split</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-size">
            
              <b>size</b>()
            
            <a href="../classes/String.html#method-i-size" name="method-i-size" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the count of characters (not bytes) in <code>self</code>:</p>

<pre><code>&#39;foo&#39;.length        # =&gt; 3
&#39;тест&#39;.length       # =&gt; 4
&#39;こんにちは&#39;.length   # =&gt; 5
</code></pre>

<p>Contrast with <a href="String.html#method-i-bytesize"><code>String#bytesize</code></a>:</p>

<pre><code>&#39;foo&#39;.bytesize        # =&gt; 3
&#39;тест&#39;.bytesize       # =&gt; 8
&#39;こんにちは&#39;.bytesize   # =&gt; 15
</code></pre>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-length">length</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-slice">
            
              <b>slice</b>(*args)
            
            <a href="../classes/String.html#method-i-slice" name="method-i-slice" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the substring of <code>self</code> specified by the arguments. See examples at <a href="String.html#class-String-label-String+Slices">String Slices</a>.</p>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-5B-5D">[]</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-slice-21">
            
              <b>slice!(index)               &rarr; new_string or nil<br />slice!(start, length)       &rarr; new_string or nil<br />slice!(range)               &rarr; new_string or nil<br />slice!(regexp, capture = 0) &rarr; new_string or nil<br />slice!(substring)           &rarr; new_string or nil
</b>
            
            <a href="../classes/String.html#method-i-slice-21" name="method-i-slice-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Removes and returns the substring of <code>self</code> specified by the arguments. See <a href="String.html#class-String-label-String+Slices">String Slices</a>.</p>

<p>A few examples:</p>

<pre><code>string = &quot;This is a string&quot;
string.slice!(2)        #=&gt; &quot;i&quot;
string.slice!(3..6)     #=&gt; &quot; is &quot;
string.slice!(/s.*t/)   #=&gt; &quot;sa st&quot;
string.slice!(&quot;r&quot;)      #=&gt; &quot;r&quot;
string                  #=&gt; &quot;Thing&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-slice-21_source')" id="l_method-i-slice-21_source">show</a>
                
              </p>
              <div id="method-i-slice-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_slice_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE result = Qnil;
    VALUE indx;
    long beg, len = 1;
    char *p;

    rb_check_arity(argc, 1, 2);
    str_modify_keep_cr(str);
    indx = argv[0];
    if (RB_TYPE_P(indx, T_REGEXP)) {
        if (rb_reg_search(indx, str, 0, 0) &lt; 0) return Qnil;
        VALUE match = rb_backref_get();
        struct re_registers *regs = RMATCH_REGS(match);
        int nth = 0;
        if (argc &gt; 1 &amp;&amp; (nth = rb_reg_backref_number(match, argv[1])) &lt; 0) {
            if ((nth += regs-&gt;num_regs) &lt;= 0) return Qnil;
        }
        else if (nth &gt;= regs-&gt;num_regs) return Qnil;
        beg = BEG(nth);
        len = END(nth) - beg;
        goto subseq;
    }
    else if (argc == 2) {
        beg = NUM2LONG(indx);
        len = NUM2LONG(argv[1]);
        goto num_index;
    }
    else if (FIXNUM_P(indx)) {
        beg = FIX2LONG(indx);
        if (!(p = rb_str_subpos(str, beg, &amp;len))) return Qnil;
        if (!len) return Qnil;
        beg = p - RSTRING_PTR(str);
        goto subseq;
    }
    else if (RB_TYPE_P(indx, T_STRING)) {
        beg = rb_str_index(str, indx, 0);
        if (beg == -1) return Qnil;
        len = RSTRING_LEN(indx);
        result = str_duplicate(rb_cString, indx);
        goto squash;
    }
    else {
        switch (rb_range_beg_len(indx, &amp;beg, &amp;len, str_strlen(str, NULL), 0)) {
          case Qnil:
            return Qnil;
          case Qfalse:
            beg = NUM2LONG(indx);
            if (!(p = rb_str_subpos(str, beg, &amp;len))) return Qnil;
            if (!len) return Qnil;
            beg = p - RSTRING_PTR(str);
            goto subseq;
          default:
            goto num_index;
        }
    }

  num_index:
    if (!(p = rb_str_subpos(str, beg, &amp;len))) return Qnil;
    beg = p - RSTRING_PTR(str);

  subseq:
    result = rb_str_new(RSTRING_PTR(str)+beg, len);
    rb_enc_cr_str_copy_for_substr(result, str);

  squash:
    if (len &gt; 0) {
        if (beg == 0) {
            rb_str_drop_bytes(str, len);
        }
        else {
            char *sptr = RSTRING_PTR(str);
            long slen = RSTRING_LEN(str);
            if (beg + len &gt; slen) /* pathological check */
                len = slen - beg;
            memmove(sptr + beg,
                    sptr + beg + len,
                    slen - (beg + len));
            slen -= len;
            STR_SET_LEN(str, slen);
            TERM_FILL(&amp;sptr[slen], TERM_LEN(str));
        }
    }
    return result;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-split">
            
              <b>split(field_sep = $;, limit = nil) &rarr; array<br />split(field_sep = $;, limit = nil) {|substring| ... } &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-split" name="method-i-split" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an array of substrings of <code>self</code> that are the result of splitting <code>self</code> at each occurrence of the given field separator <code>field_sep</code>.</p>

<p>When <code>field_sep</code> is <code>$;</code>:</p>
<ul><li>
<p>If <code>$;</code> is <code>nil</code> (its default value), the split occurs just as if <code>field_sep</code> were given as a space character (see below).</p>
</li><li>
<p>If <code>$;</code> is a string, the split ocurs just as if <code>field_sep</code> were given as that string (see below).</p>
</li></ul>

<p>When <code>field_sep</code> is <code>&#39; &#39;</code> and <code>limit</code> is <code>nil</code>, the split occurs at each sequence of whitespace:</p>

<pre><code>&#39;abc def ghi&#39;.split(&#39; &#39;)         =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;]
&quot;abc \n\tdef\t\n  ghi&quot;.split(&#39; &#39;) # =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;]
&#39;abc  def   ghi&#39;.split(&#39; &#39;)      =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;]
&#39;&#39;.split(&#39; &#39;)                    =&gt; []
</code></pre>

<p>When <code>field_sep</code> is a string different from <code>&#39; &#39;</code> and <code>limit</code> is <code>nil</code>, the split occurs at each occurrence of <code>field_sep</code>; trailing empty substrings are not returned:</p>

<pre><code>&#39;abracadabra&#39;.split(&#39;ab&#39;)  =&gt; [&quot;&quot;, &quot;racad&quot;, &quot;ra&quot;]
&#39;aaabcdaaa&#39;.split(&#39;a&#39;)     =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;]
&#39;&#39;.split(&#39;a&#39;)              =&gt; []
&#39;3.14159&#39;.split(&#39;1&#39;)       =&gt; [&quot;3.&quot;, &quot;4&quot;, &quot;59&quot;]
&#39;!@#$%^$&amp;*($)_+&#39;.split(&#39;$&#39;) # =&gt; [&quot;!@#&quot;, &quot;%^&quot;, &quot;&amp;*(&quot;, &quot;)_+&quot;]
&#39;тест&#39;.split(&#39;т&#39;)          =&gt; [&quot;&quot;, &quot;ес&quot;]
&#39;こんにちは&#39;.split(&#39;に&#39;)     =&gt; [&quot;こん&quot;, &quot;ちは&quot;]
</code></pre>

<p>When <code>field_sep</code> is a <a href="Regexp.html"><code>Regexp</code></a> and <code>limit</code> is <code>nil</code>, the split occurs at each occurrence of a match; trailing empty substrings are not returned:</p>

<pre><code>&#39;abracadabra&#39;.split(/ab/) # =&gt; [&quot;&quot;, &quot;racad&quot;, &quot;ra&quot;]
&#39;aaabcdaaa&#39;.split(/a/)   =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;]
&#39;aaabcdaaa&#39;.split(//)    =&gt; [&quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;, &quot;a&quot;, &quot;a&quot;]
&#39;1 + 1 == 2&#39;.split(/\W+/) # =&gt; [&quot;1&quot;, &quot;1&quot;, &quot;2&quot;]
</code></pre>

<p>If the Regexp contains groups, their matches are also included in the returned array:</p>

<pre><code>&#39;1:2:3&#39;.split(/(:)()()/, 2) # =&gt; [&quot;1&quot;, &quot;:&quot;, &quot;&quot;, &quot;&quot;, &quot;2:3&quot;]
</code></pre>

<p>As seen above, if <code>limit</code> is <code>nil</code>, trailing empty substrings are not returned; the same is true if <code>limit</code> is zero:</p>

<pre><code>&#39;aaabcdaaa&#39;.split(&#39;a&#39;)   =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;]
&#39;aaabcdaaa&#39;.split(&#39;a&#39;, 0) # =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;]
</code></pre>

<p>If <code>limit</code> is positive integer <code>n</code>, no more than <code>n - 1-</code> splits occur, so that at most <code>n</code> substrings are returned, and trailing empty substrings are included:</p>

<pre><code>&#39;aaabcdaaa&#39;.split(&#39;a&#39;, 1) # =&gt; [&quot;aaabcdaaa&quot;]
&#39;aaabcdaaa&#39;.split(&#39;a&#39;, 2) # =&gt; [&quot;&quot;, &quot;aabcdaaa&quot;]
&#39;aaabcdaaa&#39;.split(&#39;a&#39;, 5) # =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;, &quot;aa&quot;]
&#39;aaabcdaaa&#39;.split(&#39;a&#39;, 7) # =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]
&#39;aaabcdaaa&#39;.split(&#39;a&#39;, 8) # =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]
</code></pre>

<p>Note that if <code>field_sep</code> is a Regexp containing groups, their matches are in the returned array, but do not count toward the limit.</p>

<p>If <code>limit</code> is negative, it behaves the same as if <code>limit</code> was <code>nil</code>, meaning that there is no limit, and trailing empty substrings are included:</p>

<pre><code>&#39;aaabcdaaa&#39;.split(&#39;a&#39;, -1) # =&gt; [&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;bcd&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;]
</code></pre>

<p>If a block is given, it is called with each substring:</p>

<pre><code>&#39;abc def ghi&#39;.split(&#39; &#39;) {|substring| p substring }
</code></pre>

<p>Output:</p>

<pre><code>&quot;abc&quot;
&quot;def&quot;
&quot;ghi&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-partition"><code>String#partition</code></a>, <a href="String.html#method-i-rpartition"><code>String#rpartition</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-split_source')" id="l_method-i-split_source">show</a>
                
              </p>
              <div id="method-i-split_source" class="dyn-source">
                <pre>static VALUE
rb_str_split_m(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    VALUE spat;
    VALUE limit;
    split_type_t split_type;
    long beg, end, i = 0, empty_count = -1;
    int lim = 0;
    VALUE result, tmp;

    result = rb_block_given_p() ? Qfalse : Qnil;
    if (rb_scan_args(argc, argv, &quot;02&quot;, &amp;spat, &amp;limit) == 2) {
        lim = NUM2INT(limit);
        if (lim &lt;= 0) limit = Qnil;
        else if (lim == 1) {
            if (RSTRING_LEN(str) == 0)
                return result ? rb_ary_new2(0) : str;
            tmp = str_duplicate(rb_cString, str);
            if (!result) {
                rb_yield(tmp);
                return str;
            }
            return rb_ary_new3(1, tmp);
        }
        i = 1;
    }
    if (NIL_P(limit) &amp;&amp; !lim) empty_count = 0;

    enc = STR_ENC_GET(str);
    split_type = SPLIT_TYPE_REGEXP;
    if (!NIL_P(spat)) {
        spat = get_pat_quoted(spat, 0);
    }
    else if (NIL_P(spat = rb_fs)) {
        split_type = SPLIT_TYPE_AWK;
    }
    else if (!(spat = rb_fs_check(spat))) {
        rb_raise(rb_eTypeError, &quot;value of $; must be String or Regexp&quot;);
    }
    else {
        rb_category_warn(RB_WARN_CATEGORY_DEPRECATED, &quot;$; is set to non-nil value&quot;);
    }
    if (split_type != SPLIT_TYPE_AWK) {
        switch (BUILTIN_TYPE(spat)) {
          case T_REGEXP:
            rb_reg_options(spat); /* check if uninitialized */
            tmp = RREGEXP_SRC(spat);
            split_type = literal_split_pattern(tmp, SPLIT_TYPE_REGEXP);
            if (split_type == SPLIT_TYPE_AWK) {
                spat = tmp;
                split_type = SPLIT_TYPE_STRING;
            }
            break;

          case T_STRING:
            mustnot_broken(spat);
            split_type = literal_split_pattern(spat, SPLIT_TYPE_STRING);
            break;

          default:
            UNREACHABLE_RETURN(Qnil);
        }
    }

#define SPLIT_STR(beg, len) (empty_count = split_string(result, str, beg, len, empty_count))

    beg = 0;
    char *ptr = RSTRING_PTR(str);
    char *eptr = RSTRING_END(str);
    if (split_type == SPLIT_TYPE_AWK) {
        char *bptr = ptr;
        int skip = 1;
        unsigned int c;

        if (result) result = rb_ary_new();
        end = beg;
        if (is_ascii_string(str)) {
            while (ptr &lt; eptr) {
                c = (unsigned char)*ptr++;
                if (skip) {
                    if (ascii_isspace(c)) {
                        beg = ptr - bptr;
                    }
                    else {
                        end = ptr - bptr;
                        skip = 0;
                        if (!NIL_P(limit) &amp;&amp; lim &lt;= i) break;
                    }
                }
                else if (ascii_isspace(c)) {
                    SPLIT_STR(beg, end-beg);
                    skip = 1;
                    beg = ptr - bptr;
                    if (!NIL_P(limit)) ++i;
                }
                else {
                    end = ptr - bptr;
                }
            }
        }
        else {
            while (ptr &lt; eptr) {
                int n;

                c = rb_enc_codepoint_len(ptr, eptr, &amp;n, enc);
                ptr += n;
                if (skip) {
                    if (rb_isspace(c)) {
                        beg = ptr - bptr;
                    }
                    else {
                        end = ptr - bptr;
                        skip = 0;
                        if (!NIL_P(limit) &amp;&amp; lim &lt;= i) break;
                    }
                }
                else if (rb_isspace(c)) {
                    SPLIT_STR(beg, end-beg);
                    skip = 1;
                    beg = ptr - bptr;
                    if (!NIL_P(limit)) ++i;
                }
                else {
                    end = ptr - bptr;
                }
            }
        }
    }
    else if (split_type == SPLIT_TYPE_STRING) {
        char *str_start = ptr;
        char *substr_start = ptr;
        char *sptr = RSTRING_PTR(spat);
        long slen = RSTRING_LEN(spat);

        if (result) result = rb_ary_new();
        mustnot_broken(str);
        enc = rb_enc_check(str, spat);
        while (ptr &lt; eptr &amp;&amp;
               (end = rb_memsearch(sptr, slen, ptr, eptr - ptr, enc)) &gt;= 0) {
            /* Check we are at the start of a char */
            char *t = rb_enc_right_char_head(ptr, ptr + end, eptr, enc);
            if (t != ptr + end) {
                ptr = t;
                continue;
            }
            SPLIT_STR(substr_start - str_start, (ptr+end) - substr_start);
            ptr += end + slen;
            substr_start = ptr;
            if (!NIL_P(limit) &amp;&amp; lim &lt;= ++i) break;
        }
        beg = ptr - str_start;
    }
    else if (split_type == SPLIT_TYPE_CHARS) {
        char *str_start = ptr;
        int n;

        if (result) result = rb_ary_new_capa(RSTRING_LEN(str));
        mustnot_broken(str);
        enc = rb_enc_get(str);
        while (ptr &lt; eptr &amp;&amp;
               (n = rb_enc_precise_mbclen(ptr, eptr, enc)) &gt; 0) {
            SPLIT_STR(ptr - str_start, n);
            ptr += n;
            if (!NIL_P(limit) &amp;&amp; lim &lt;= ++i) break;
        }
        beg = ptr - str_start;
    }
    else {
        if (result) result = rb_ary_new();
        long len = RSTRING_LEN(str);
        long start = beg;
        long idx;
        int last_null = 0;
        struct re_registers *regs;
        VALUE match = 0;

        for (; rb_reg_search(spat, str, start, 0) &gt;= 0;
             (match ? (rb_match_unbusy(match), rb_backref_set(match)) : (void)0)) {
            match = rb_backref_get();
            if (!result) rb_match_busy(match);
            regs = RMATCH_REGS(match);
            end = BEG(0);
            if (start == end &amp;&amp; BEG(0) == END(0)) {
                if (!ptr) {
                    SPLIT_STR(0, 0);
                    break;
                }
                else if (last_null == 1) {
                    SPLIT_STR(beg, rb_enc_fast_mbclen(ptr+beg, eptr, enc));
                    beg = start;
                }
                else {
                    if (start == len)
                        start++;
                    else
                        start += rb_enc_fast_mbclen(ptr+start,eptr,enc);
                    last_null = 1;
                    continue;
                }
            }
            else {
                SPLIT_STR(beg, end-beg);
                beg = start = END(0);
            }
            last_null = 0;

            for (idx=1; idx &lt; regs-&gt;num_regs; idx++) {
                if (BEG(idx) == -1) continue;
                SPLIT_STR(BEG(idx), END(idx)-BEG(idx));
            }
            if (!NIL_P(limit) &amp;&amp; lim &lt;= ++i) break;
        }
        if (match) rb_match_unbusy(match);
    }
    if (RSTRING_LEN(str) &gt; 0 &amp;&amp; (!NIL_P(limit) || RSTRING_LEN(str) &gt; beg || lim &lt; 0)) {
        SPLIT_STR(beg, RSTRING_LEN(str)-beg);
    }

    return result ? result : str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-squeeze">
            
              <b>squeeze(*selectors) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-squeeze" name="method-i-squeeze" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with characters specified by <code>selectors</code> “squeezed” (see <a href="../files/ruby/doc/character_selectors_rdoc.html#label-Multiple+Character+Selectors">Multiple Character Selectors</a>):</p>

<p>“Squeezed” means that each multiple-character run of a selected character is squeezed down to a single character; with no arguments given, squeezes all characters:</p>

<pre><code>&quot;yellow moon&quot;.squeeze                  #=&gt; &quot;yelow mon&quot;
&quot;  now   is  the&quot;.squeeze(&quot; &quot;)         #=&gt; &quot; now is the&quot;
&quot;putters shoot balls&quot;.squeeze(&quot;m-z&quot;)   #=&gt; &quot;puters shot balls&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-squeeze_source')" id="l_method-i-squeeze_source">show</a>
                
              </p>
              <div id="method-i-squeeze_source" class="dyn-source">
                <pre>static VALUE
rb_str_squeeze(int argc, VALUE *argv, VALUE str)
{
    str = str_duplicate(rb_cString, str);
    rb_str_squeeze_bang(argc, argv, str);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-squeeze-21">
            
              <b>squeeze!(*selectors) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-squeeze-21" name="method-i-squeeze-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-squeeze"><code>String#squeeze</code></a>, but modifies <code>self</code> in place. Returns <code>self</code> if any changes were made, <code>nil</code> otherwise.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-squeeze-21_source')" id="l_method-i-squeeze-21_source">show</a>
                
              </p>
              <div id="method-i-squeeze-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_squeeze_bang(int argc, VALUE *argv, VALUE str)
{
    char squeez[TR_TABLE_SIZE];
    rb_encoding *enc = 0;
    VALUE del = 0, nodel = 0;
    unsigned char *s, *send, *t;
    int i, modify = 0;
    int ascompat, singlebyte = single_byte_optimizable(str);
    unsigned int save;

    if (argc == 0) {
        enc = STR_ENC_GET(str);
    }
    else {
        for (i=0; i&lt;argc; i++) {
            VALUE s = argv[i];

            StringValue(s);
            enc = rb_enc_check(str, s);
            if (singlebyte &amp;&amp; !single_byte_optimizable(s))
                singlebyte = 0;
            tr_setup_table(s, squeez, i==0, &amp;del, &amp;nodel, enc);
        }
    }

    str_modify_keep_cr(str);
    s = t = (unsigned char *)RSTRING_PTR(str);
    if (!s || RSTRING_LEN(str) == 0) return Qnil;
    send = (unsigned char *)RSTRING_END(str);
    save = -1;
    ascompat = rb_enc_asciicompat(enc);

    if (singlebyte) {
        while (s &lt; send) {
            unsigned int c = *s++;
            if (c != save || (argc &gt; 0 &amp;&amp; !squeez[c])) {
                *t++ = save = c;
            }
        }
    }
    else {
        while (s &lt; send) {
            unsigned int c;
            int clen;

            if (ascompat &amp;&amp; (c = *s) &lt; 0x80) {
                if (c != save || (argc &gt; 0 &amp;&amp; !squeez[c])) {
                    *t++ = save = c;
                }
                s++;
            }
            else {
                c = rb_enc_codepoint_len((char *)s, (char *)send, &amp;clen, enc);

                if (c != save || (argc &gt; 0 &amp;&amp; !tr_find(c, squeez, del, nodel))) {
                    if (t != s) rb_enc_mbcput(c, t, enc);
                    save = c;
                    t += clen;
                }
                s += clen;
            }
        }
    }

    TERM_FILL((char *)t, TERM_LEN(str));
    if ((char *)t - RSTRING_PTR(str) != RSTRING_LEN(str)) {
        STR_SET_LEN(str, (char *)t - RSTRING_PTR(str));
        modify = 1;
    }

    if (modify) return str;
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-start_with-3F">
            
              <b>start_with?(*string_or_regexp) &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-start_with-3F" name="method-i-start_with-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns whether <code>self</code> starts with any of the given <code>string_or_regexp</code>.</p>

<p>Matches patterns against the beginning of <code>self</code>. For each given <code>string_or_regexp</code>, the pattern is:</p>
<ul><li>
<p><code>string_or_regexp</code> itself, if it is a <a href="Regexp.html"><code>Regexp</code></a>.</p>
</li><li>
<p><code>Regexp.quote(string_or_regexp)</code>, if <code>string_or_regexp</code> is a string.</p>
</li></ul>

<p>Returns <code>true</code> if any pattern matches the beginning, <code>false</code> otherwise:</p>

<pre><code>&#39;hello&#39;.start_with?(&#39;hell&#39;)               # =&gt; true
&#39;hello&#39;.start_with?(/H/i)                 # =&gt; true
&#39;hello&#39;.start_with?(&#39;heaven&#39;, &#39;hell&#39;)     # =&gt; true
&#39;hello&#39;.start_with?(&#39;heaven&#39;, &#39;paradise&#39;) # =&gt; false
&#39;тест&#39;.start_with?(&#39;т&#39;)                   # =&gt; true
&#39;こんにちは&#39;.start_with?(&#39;こ&#39;)              # =&gt; true
</code></pre>

<p>Related: <a href="String.html#method-i-end_with-3F"><code>String#end_with?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-start_with-3F_source')" id="l_method-i-start_with-3F_source">show</a>
                
              </p>
              <div id="method-i-start_with-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_start_with(int argc, VALUE *argv, VALUE str)
{
    int i;

    for (i=0; i&lt;argc; i++) {
        VALUE tmp = argv[i];
        if (RB_TYPE_P(tmp, T_REGEXP)) {
            if (rb_reg_start_with_p(tmp, str))
                return Qtrue;
        }
        else {
            const char *p, *s, *e;
            long slen, tlen;
            rb_encoding *enc;

            StringValue(tmp);
            enc = rb_enc_check(str, tmp);
            if ((tlen = RSTRING_LEN(tmp)) == 0) return Qtrue;
            if ((slen = RSTRING_LEN(str)) &lt; tlen) continue;
            p = RSTRING_PTR(str);
            e = p + slen;
            s = p + tlen;
            if (!at_char_right_boundary(p, s, e, enc))
                continue;
            if (memcmp(p, RSTRING_PTR(tmp), tlen) == 0)
                return Qtrue;
        }
    }
    return Qfalse;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strip">
            
              <b>strip &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-strip" name="method-i-strip" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of the receiver with leading and trailing whitespace removed; see <a href="String.html#class-String-label-Whitespace+in+Strings">Whitespace in Strings</a>:</p>

<pre><code>whitespace = &quot;\x00\t\n\v\f\r &quot;
s = whitespace + &#39;abc&#39; + whitespace
s       # =&gt; &quot;\u0000\t\n\v\f\r abc\u0000\t\n\v\f\r &quot;
s.strip # =&gt; &quot;abc&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-lstrip"><code>String#lstrip</code></a>, <a href="String.html#method-i-rstrip"><code>String#rstrip</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-strip_source')" id="l_method-i-strip_source">show</a>
                
              </p>
              <div id="method-i-strip_source" class="dyn-source">
                <pre>static VALUE
rb_str_strip(VALUE str)
{
    char *start;
    long olen, loffset, roffset;
    rb_encoding *enc = STR_ENC_GET(str);

    RSTRING_GETMEM(str, start, olen);
    loffset = lstrip_offset(str, start, start+olen, enc);
    roffset = rstrip_offset(str, start+loffset, start+olen, enc);

    if (loffset &lt;= 0 &amp;&amp; roffset &lt;= 0) return str_duplicate(rb_cString, str);
    return rb_str_subseq(str, loffset, olen-loffset-roffset);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-strip-21">
            
              <b>strip! &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-strip-21" name="method-i-strip-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-strip"><code>String#strip</code></a>, except that any modifications are made in <code>self</code>; returns <code>self</code> if any modification are made, <code>nil</code> otherwise.</p>

<p>Related: <a href="String.html#method-i-lstrip-21"><code>String#lstrip!</code></a>, <a href="String.html#method-i-strip-21"><code>String#strip!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-strip-21_source')" id="l_method-i-strip-21_source">show</a>
                
              </p>
              <div id="method-i-strip-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_strip_bang(VALUE str)
{
    char *start;
    long olen, loffset, roffset;
    rb_encoding *enc;

    str_modify_keep_cr(str);
    enc = STR_ENC_GET(str);
    RSTRING_GETMEM(str, start, olen);
    loffset = lstrip_offset(str, start, start+olen, enc);
    roffset = rstrip_offset(str, start+loffset, start+olen, enc);

    if (loffset &gt; 0 || roffset &gt; 0) {
        long len = olen-roffset;
        if (loffset &gt; 0) {
            len -= loffset;
            memmove(start, start + loffset, len);
        }
        STR_SET_LEN(str, len);
        TERM_FILL(start+len, rb_enc_mbminlen(enc));
        return str;
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-sub">
            
              <b>sub(pattern, replacement)   &rarr; new_string<br />sub(pattern) {|match| ... } &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-sub" name="method-i-sub" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with only the first occurrence (not all occurrences) of the given <code>pattern</code> replaced.</p>

<p>See <a href="String.html#class-String-label-Substitution+Methods">Substitution Methods</a>.</p>

<p>Related: <a href="String.html#method-i-sub-21"><code>String#sub!</code></a>, <a href="String.html#method-i-gsub"><code>String#gsub</code></a>, <a href="String.html#method-i-gsub-21"><code>String#gsub!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-sub_source')" id="l_method-i-sub_source">show</a>
                
              </p>
              <div id="method-i-sub_source" class="dyn-source">
                <pre>static VALUE
rb_str_sub(int argc, VALUE *argv, VALUE str)
{
    str = str_duplicate(rb_cString, str);
    rb_str_sub_bang(argc, argv, str);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-sub-21">
            
              <b>sub!(pattern, replacement)   &rarr; self or nil<br />sub!(pattern) {|match| ... } &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-sub-21" name="method-i-sub-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>self</code> with only the first occurrence (not all occurrences) of the given <code>pattern</code> replaced.</p>

<p>See <a href="String.html#class-String-label-Substitution+Methods">Substitution Methods</a>.</p>

<p>Related: <a href="String.html#method-i-sub"><code>String#sub</code></a>, <a href="String.html#method-i-gsub"><code>String#gsub</code></a>, <a href="String.html#method-i-gsub-21"><code>String#gsub!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-sub-21_source')" id="l_method-i-sub-21_source">show</a>
                
              </p>
              <div id="method-i-sub-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_sub_bang(int argc, VALUE *argv, VALUE str)
{
    VALUE pat, repl, hash = Qnil;
    int iter = 0;
    long plen;
    int min_arity = rb_block_given_p() ? 1 : 2;
    long beg;

    rb_check_arity(argc, min_arity, 2);
    if (argc == 1) {
        iter = 1;
    }
    else {
        repl = argv[1];
        hash = rb_check_hash_type(argv[1]);
        if (NIL_P(hash)) {
            StringValue(repl);
        }
    }

    pat = get_pat_quoted(argv[0], 1);

    str_modifiable(str);
    beg = rb_pat_search(pat, str, 0, 1);
    if (beg &gt;= 0) {
        rb_encoding *enc;
        int cr = ENC_CODERANGE(str);
        long beg0, end0;
        VALUE match, match0 = Qnil;
        struct re_registers *regs;
        char *p, *rp;
        long len, rlen;

        match = rb_backref_get();
        regs = RMATCH_REGS(match);
        if (RB_TYPE_P(pat, T_STRING)) {
            beg0 = beg;
            end0 = beg0 + RSTRING_LEN(pat);
            match0 = pat;
        }
        else {
            beg0 = BEG(0);
            end0 = END(0);
            if (iter) match0 = rb_reg_nth_match(0, match);
        }

        if (iter || !NIL_P(hash)) {
            p = RSTRING_PTR(str); len = RSTRING_LEN(str);

            if (iter) {
                repl = rb_obj_as_string(rb_yield(match0));
            }
            else {
                repl = rb_hash_aref(hash, rb_str_subseq(str, beg0, end0 - beg0));
                repl = rb_obj_as_string(repl);
            }
            str_mod_check(str, p, len);
            rb_check_frozen(str);
        }
        else {
            repl = rb_reg_regsub(repl, str, regs, RB_TYPE_P(pat, T_STRING) ? Qnil : pat);
        }

        enc = rb_enc_compatible(str, repl);
        if (!enc) {
            rb_encoding *str_enc = STR_ENC_GET(str);
            p = RSTRING_PTR(str); len = RSTRING_LEN(str);
            if (coderange_scan(p, beg0, str_enc) != ENC_CODERANGE_7BIT ||
                coderange_scan(p+end0, len-end0, str_enc) != ENC_CODERANGE_7BIT) {
                rb_raise(rb_eEncCompatError, &quot;incompatible character encodings: %s and %s&quot;,
                         rb_enc_name(str_enc),
                         rb_enc_name(STR_ENC_GET(repl)));
            }
            enc = STR_ENC_GET(repl);
        }
        rb_str_modify(str);
        rb_enc_associate(str, enc);
        if (ENC_CODERANGE_UNKNOWN &lt; cr &amp;&amp; cr &lt; ENC_CODERANGE_BROKEN) {
            int cr2 = ENC_CODERANGE(repl);
            if (cr2 == ENC_CODERANGE_BROKEN ||
                (cr == ENC_CODERANGE_VALID &amp;&amp; cr2 == ENC_CODERANGE_7BIT))
                cr = ENC_CODERANGE_UNKNOWN;
            else
                cr = cr2;
        }
        plen = end0 - beg0;
        rlen = RSTRING_LEN(repl);
        len = RSTRING_LEN(str);
        if (rlen &gt; plen) {
            RESIZE_CAPA(str, len + rlen - plen);
        }
        p = RSTRING_PTR(str);
        if (rlen != plen) {
            memmove(p + beg0 + rlen, p + beg0 + plen, len - beg0 - plen);
        }
        rp = RSTRING_PTR(repl);
        memmove(p + beg0, rp, rlen);
        len += rlen - plen;
        STR_SET_LEN(str, len);
        TERM_FILL(&amp;RSTRING_PTR(str)[len], TERM_LEN(str));
        ENC_CODERANGE_SET(str, cr);

        RB_GC_GUARD(match);

        return str;
    }
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-succ">
            
              <b>succ &rarr; new_str</b>
            
            <a href="../classes/String.html#method-i-succ" name="method-i-succ" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the successor to <code>self</code>. The successor is calculated by incrementing characters.</p>

<p>The first character to be incremented is the rightmost alphanumeric: or, if no alphanumerics, the rightmost character:</p>

<pre><code>&#39;THX1138&#39;.succ # =&gt; &quot;THX1139&quot;
&#39;&lt;&lt;koala&gt;&gt;&#39;.succ # =&gt; &quot;&lt;&lt;koalb&gt;&gt;&quot;
&#39;***&#39;.succ # =&gt; &#39;**+&#39;
</code></pre>

<p>The successor to a digit is another digit, “carrying” to the next-left character for a “rollover” from 9 to 0, and prepending another digit if necessary:</p>

<pre><code>&#39;00&#39;.succ # =&gt; &quot;01&quot;
&#39;09&#39;.succ # =&gt; &quot;10&quot;
&#39;99&#39;.succ # =&gt; &quot;100&quot;
</code></pre>

<p>The successor to a letter is another letter of the same case, carrying to the next-left character for a rollover, and prepending another same-case letter if necessary:</p>

<pre><code>&#39;aa&#39;.succ # =&gt; &quot;ab&quot;
&#39;az&#39;.succ # =&gt; &quot;ba&quot;
&#39;zz&#39;.succ # =&gt; &quot;aaa&quot;
&#39;AA&#39;.succ # =&gt; &quot;AB&quot;
&#39;AZ&#39;.succ # =&gt; &quot;BA&quot;
&#39;ZZ&#39;.succ # =&gt; &quot;AAA&quot;
</code></pre>

<p>The successor to a non-alphanumeric character is the next character in the underlying character set’s collating sequence, carrying to the next-left character for a rollover, and prepending another character if necessary:</p>

<pre><code>s = 0.chr * 3
s # =&gt; &quot;\x00\x00\x00&quot;
s.succ # =&gt; &quot;\x00\x00\x01&quot;
s = 255.chr * 3
s # =&gt; &quot;\xFF\xFF\xFF&quot;
s.succ # =&gt; &quot;\x01\x00\x00\x00&quot;
</code></pre>

<p>Carrying can occur between and among mixtures of alphanumeric characters:</p>

<pre><code>s = &#39;zz99zz99&#39;
s.succ # =&gt; &quot;aaa00aa00&quot;
s = &#39;99zz99zz&#39;
s.succ # =&gt; &quot;100aa00aa&quot;
</code></pre>

<p>The successor to an empty String is a new empty String:</p>

<pre><code>&#39;&#39;.succ # =&gt; &quot;&quot;
</code></pre>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-next">next</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-succ_source')" id="l_method-i-succ_source">show</a>
                
              </p>
              <div id="method-i-succ_source" class="dyn-source">
                <pre>VALUE
rb_str_succ(VALUE orig)
{
    VALUE str;
    str = rb_str_new(RSTRING_PTR(orig), RSTRING_LEN(orig));
    rb_enc_cr_str_copy_for_substr(str, orig);
    return str_succ(str);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-succ-21">
            
              <b>succ! &rarr; self</b>
            
            <a href="../classes/String.html#method-i-succ-21" name="method-i-succ-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Equivalent to <a href="String.html#method-i-succ"><code>String#succ</code></a>, but modifies <code>self</code> in place; returns <code>self</code>.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-next-21">next!</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-succ-21_source')" id="l_method-i-succ-21_source">show</a>
                
              </p>
              <div id="method-i-succ-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_succ_bang(VALUE str)
{
    rb_str_modify(str);
    str_succ(str);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-sum">
            
              <b>sum(n = 16) &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-sum" name="method-i-sum" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a basic <code>n</code>-bit checksum of the characters in <code>self</code>; the checksum is the sum of the binary value of each byte in <code>self</code>, modulo <code>2**n - 1</code>:</p>

<pre><code>&#39;hello&#39;.sum     # =&gt; 532
&#39;hello&#39;.sum(4)  # =&gt; 4
&#39;hello&#39;.sum(64) # =&gt; 532
&#39;тест&#39;.sum      # =&gt; 1405
&#39;こんにちは&#39;.sum  # =&gt; 2582
</code></pre>

<p>This is not a particularly strong checksum.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-sum_source')" id="l_method-i-sum_source">show</a>
                
              </p>
              <div id="method-i-sum_source" class="dyn-source">
                <pre>static VALUE
rb_str_sum(int argc, VALUE *argv, VALUE str)
{
    int bits = 16;
    char *ptr, *p, *pend;
    long len;
    VALUE sum = INT2FIX(0);
    unsigned long sum0 = 0;

    if (rb_check_arity(argc, 0, 1) &amp;&amp; (bits = NUM2INT(argv[0])) &lt; 0) {
        bits = 0;
    }
    ptr = p = RSTRING_PTR(str);
    len = RSTRING_LEN(str);
    pend = p + len;

    while (p &lt; pend) {
        if (FIXNUM_MAX - UCHAR_MAX &lt; sum0) {
            sum = rb_funcall(sum, &#39;+&#39;, 1, LONG2FIX(sum0));
            str_mod_check(str, ptr, len);
            sum0 = 0;
        }
        sum0 += (unsigned char)*p;
        p++;
    }

    if (bits == 0) {
        if (sum0) {
            sum = rb_funcall(sum, &#39;+&#39;, 1, LONG2FIX(sum0));
        }
    }
    else {
        if (sum == INT2FIX(0)) {
            if (bits &lt; (int)sizeof(long)*CHAR_BIT) {
                sum0 &amp;= (((unsigned long)1)&lt;&lt;bits)-1;
            }
            sum = LONG2FIX(sum0);
        }
        else {
            VALUE mod;

            if (sum0) {
                sum = rb_funcall(sum, &#39;+&#39;, 1, LONG2FIX(sum0));
            }

            mod = rb_funcall(INT2FIX(1), idLTLT, 1, INT2FIX(bits));
            mod = rb_funcall(mod, &#39;-&#39;, 1, INT2FIX(1));
            sum = rb_funcall(sum, &#39;&amp;&#39;, 1, mod);
        }
    }
    return sum;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-swapcase">
            
              <b>swapcase(*options) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-swapcase" name="method-i-swapcase" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string containing the characters in <code>self</code>, with cases reversed; each uppercase character is downcased; each lowercase character is upcased:</p>

<pre><code>s = &#39;Hello World!&#39; # =&gt; &quot;Hello World!&quot;
s.swapcase         # =&gt; &quot;hELLO wORLD!&quot;
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-swapcase-21"><code>String#swapcase!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-swapcase_source')" id="l_method-i-swapcase_source">show</a>
                
              </p>
              <div id="method-i-swapcase_source" class="dyn-source">
                <pre>static VALUE
rb_str_swapcase(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_DOWNCASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (RSTRING_LEN(str) == 0 || !RSTRING_PTR(str)) return str_duplicate(rb_cString, str);
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }
    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-swapcase-21">
            
              <b>swapcase!(*options) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-swapcase-21" name="method-i-swapcase-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Upcases each lowercase character in <code>self</code>; downcases uppercase character; returns <code>self</code> if any changes were made, <code>nil</code> otherwise:</p>

<pre><code>s = &#39;Hello World!&#39; # =&gt; &quot;Hello World!&quot;
s.swapcase!        # =&gt; &quot;hELLO wORLD!&quot;
s                  # =&gt; &quot;hELLO wORLD!&quot;
&#39;&#39;.swapcase!       # =&gt; nil
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-swapcase"><code>String#swapcase</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-swapcase-21_source')" id="l_method-i-swapcase-21_source">show</a>
                
              </p>
              <div id="method-i-swapcase-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_swapcase_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE | ONIGENC_CASE_DOWNCASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_c">
            
              <b>to_c &rarr; complex
</b>
            
            <a href="../classes/String.html#method-i-to_c" name="method-i-to_c" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>self</code> interpreted as a <a href="Complex.html"><code>Complex</code></a> object; leading whitespace and trailing garbage are ignored:</p>

<pre><code>&#39;9&#39;.to_c                 # =&gt; (9+0i)
&#39;2.5&#39;.to_c               # =&gt; (2.5+0i)
&#39;2.5/1&#39;.to_c             # =&gt; ((5/2)+0i)
&#39;-3/2&#39;.to_c              # =&gt; ((-3/2)+0i)
&#39;-i&#39;.to_c                # =&gt; (0-1i)
&#39;45i&#39;.to_c               # =&gt; (0+45i)
&#39;3-4i&#39;.to_c              # =&gt; (3-4i)
&#39;-4e2-4e-2i&#39;.to_c        # =&gt; (-400.0-0.04i)
&#39;-0.0-0.0i&#39;.to_c         # =&gt; (-0.0-0.0i)
&#39;1/2+3/4i&#39;.to_c          # =&gt; ((1/2)+(3/4)*i)
&#39;1.0@0&#39;.to_c             # =&gt; (1+0.0i)
&quot;1.0@#{Math::PI/2}&quot;.to_c # =&gt; (0.0+1i)
&quot;1.0@#{Math::PI}&quot;.to_c   # =&gt; (-1+0.0i)
</code></pre>

<p>Returns Complex zero if the string cannot be converted:</p>

<pre><code>&#39;ruby&#39;.to_c        # =&gt; (0+0i)
</code></pre>

<p>See <a href="Kernel.html#method-i-Complex"><code>Kernel#Complex</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_c_source')" id="l_method-i-to_c_source">show</a>
                
              </p>
              <div id="method-i-to_c_source" class="dyn-source">
                <pre>static VALUE
string_to_c(VALUE self)
{
    VALUE num;

    rb_must_asciicompat(self);

    (void)parse_comp(rb_str_fill_terminator(self, 1), FALSE, &amp;num);

    return num;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_d">
            
              <b>str.to_d  &rarr; bigdecimal
</b>
            
            <a href="../classes/String.html#method-i-to_d" name="method-i-to_d" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the result of interpreting leading characters in <code>str</code> as a <a href="BigDecimal.html"><code>BigDecimal</code></a>.</p>

<pre><code>require &#39;bigdecimal&#39;
require &#39;bigdecimal/util&#39;

&quot;0.5&quot;.to_d             # =&gt; 0.5e0
&quot;123.45e1&quot;.to_d        # =&gt; 0.12345e4
&quot;45.67 degrees&quot;.to_d   # =&gt; 0.4567e2
</code></pre>

<p>See also <a href="BigDecimal.html"><code>Kernel.BigDecimal</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_d_source')" id="l_method-i-to_d_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/bigdecimal/lib/bigdecimal/util.rb#L72" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-to_d_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/bigdecimal/lib/bigdecimal/util.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">to_d</span>
  <span class="ruby-constant">BigDecimal</span>.<span class="ruby-identifier">interpret_loosely</span>(<span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_f">
            
              <b>to_f &rarr; float
</b>
            
            <a href="../classes/String.html#method-i-to_f" name="method-i-to_f" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the result of interpreting leading characters in <code>self</code> as a Float:</p>

<pre><code>&#39;3.14159&#39;.to_f  # =&gt; 3.14159
&#39;1.234e-2&#39;.to_f # =&gt; 0.01234
</code></pre>

<p>Characters past a leading valid number (in the given <code>base</code>) are ignored:</p>

<pre><code>&#39;3.14 (pi to two places)&#39;.to_f # =&gt; 3.14
</code></pre>

<p>Returns zero if there is no leading valid number:</p>

<pre><code>&#39;abcdef&#39;.to_f # =&gt; 0.0
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_f_source')" id="l_method-i-to_f_source">show</a>
                
              </p>
              <div id="method-i-to_f_source" class="dyn-source">
                <pre>static VALUE
rb_str_to_f(VALUE str)
{
    return DBL2NUM(rb_str_to_dbl(str, FALSE));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_i">
            
              <b>to_i(base = 10) &rarr; integer
</b>
            
            <a href="../classes/String.html#method-i-to_i" name="method-i-to_i" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the result of interpreting leading characters in <code>self</code> as an integer in the given <code>base</code> (which must be in (0, 2..36)):</p>

<pre><code>&#39;123456&#39;.to_i     # =&gt; 123456
&#39;123def&#39;.to_i(16) # =&gt; 1195503
</code></pre>

<p>With <code>base</code> zero, string <code>object</code> may contain leading characters to specify the actual base:</p>

<pre><code>&#39;123def&#39;.to_i(0)   # =&gt; 123
&#39;0123def&#39;.to_i(0)  # =&gt; 83
&#39;0b123def&#39;.to_i(0) # =&gt; 1
&#39;0o123def&#39;.to_i(0) # =&gt; 83
&#39;0d123def&#39;.to_i(0) # =&gt; 123
&#39;0x123def&#39;.to_i(0) # =&gt; 1195503
</code></pre>

<p>Characters past a leading valid number (in the given <code>base</code>) are ignored:</p>

<pre><code>&#39;12.345&#39;.to_i   # =&gt; 12
&#39;12345&#39;.to_i(2) # =&gt; 1
</code></pre>

<p>Returns zero if there is no leading valid number:</p>

<pre><code>&#39;abcdef&#39;.to_i # =&gt; 0
&#39;2&#39;.to_i(2)   # =&gt; 0
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_i_source')" id="l_method-i-to_i_source">show</a>
                
              </p>
              <div id="method-i-to_i_source" class="dyn-source">
                <pre>static VALUE
rb_str_to_i(int argc, VALUE *argv, VALUE str)
{
    int base = 10;

    if (rb_check_arity(argc, 0, 1) &amp;&amp; (base = NUM2INT(argv[0])) &lt; 0) {
        rb_raise(rb_eArgError, &quot;invalid radix %d&quot;, base);
    }
    return rb_str_to_inum(str, base, FALSE);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_r">
            
              <b>str.to_r  &rarr;  rational
</b>
            
            <a href="../classes/String.html#method-i-to_r" name="method-i-to_r" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the result of interpreting leading characters in <code>str</code> as a rational.  Leading whitespace and extraneous characters past the end of a valid number are ignored. Digit sequences can be separated by an underscore. If there is not a valid number at the start of <code>str</code>, zero is returned.  This method never raises an exception.</p>

<pre><code>&#39;  2  &#39;.to_r       #=&gt; (2/1)
&#39;300/2&#39;.to_r       #=&gt; (150/1)
&#39;-9.2&#39;.to_r        #=&gt; (-46/5)
&#39;-9.2e2&#39;.to_r      #=&gt; (-920/1)
&#39;1_234_567&#39;.to_r   #=&gt; (1234567/1)
&#39;21 June 09&#39;.to_r  #=&gt; (21/1)
&#39;21/06/09&#39;.to_r    #=&gt; (7/2)
&#39;BWV 1079&#39;.to_r    #=&gt; (0/1)
</code></pre>

<p>NOTE: “0.3”.to_r isn’t the same as 0.3.to_r.  The former is equivalent to “3/10”.to_r, but the latter isn’t so.</p>

<pre><code>&quot;0.3&quot;.to_r == 3/10r  #=&gt; true
0.3.to_r   == 3/10r  #=&gt; false
</code></pre>

<p>See also <a href="Kernel.html#method-i-Rational"><code>Kernel#Rational</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_r_source')" id="l_method-i-to_r_source">show</a>
                
              </p>
              <div id="method-i-to_r_source" class="dyn-source">
                <pre>static VALUE
string_to_r(VALUE self)
{
    VALUE num;

    rb_must_asciicompat(self);

    num = parse_rat(RSTRING_PTR(self), RSTRING_END(self), 0, TRUE);

    if (RB_FLOAT_TYPE_P(num) &amp;&amp; !FLOAT_ZERO_P(num))
        rb_raise(rb_eFloatDomainError, &quot;Infinity&quot;);
    return num;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_s">
            
              <b>to_s &rarr; self or string</b>
            
            <a href="../classes/String.html#method-i-to_s" name="method-i-to_s" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>self</code> if <code>self</code> is a String, or <code>self</code> converted to a String if <code>self</code> is a subclass of String.</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="String.html#method-i-to_str">to_str</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_s_source')" id="l_method-i-to_s_source">show</a>
                
              </p>
              <div id="method-i-to_s_source" class="dyn-source">
                <pre>static VALUE
rb_str_to_s(VALUE str)
{
    if (rb_obj_class(str) != rb_cString) {
        return str_duplicate(rb_cString, str);
    }
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_str">
            
              <b>to_str</b>()
            
            <a href="../classes/String.html#method-i-to_str" name="method-i-to_str" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>self</code> if <code>self</code> is a String, or <code>self</code> converted to a String if <code>self</code> is a subclass of String.</p>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-to_s">to_s</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-to_sym">
            
              <b>str.to_sym   &rarr; symbol</b>
            
            <a href="../classes/String.html#method-i-to_sym" name="method-i-to_sym" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the <a href="Symbol.html"><code>Symbol</code></a> corresponding to <em>str</em>, creating the symbol if it did not previously exist. See <a href="Symbol.html#method-i-id2name"><code>Symbol#id2name</code></a>.</p>

<pre><code>&quot;Koala&quot;.intern         #=&gt; :Koala
s = &#39;cat&#39;.to_sym       #=&gt; :cat
s == :cat              #=&gt; true
s = &#39;@cat&#39;.to_sym      #=&gt; :@cat
s == :@cat             #=&gt; true
</code></pre>

<p>This can also be used to create symbols that cannot be represented using the <code>:xxx</code> notation.</p>

<pre><code>&#39;cat and dog&#39;.to_sym   #=&gt; :&quot;cat and dog&quot;
</code></pre>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="String.html#method-i-intern">intern</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-toeuc">
            
              <b>String#toeuc   => string
</b>
            
            <a href="../classes/String.html#method-i-toeuc" name="method-i-toeuc" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to EUC-JP</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-toeuc_source')" id="l_method-i-toeuc_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L224" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-toeuc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 224</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">toeuc</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">toeuc</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tojis">
            
              <b>String#tojis   => string
</b>
            
            <a href="../classes/String.html#method-i-tojis" name="method-i-tojis" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to ISO-2022-JP</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tojis_source')" id="l_method-i-tojis_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L218" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-tojis_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tojis</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">tojis</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tolocale">
            
              <b>String#tolocale   => string
</b>
            
            <a href="../classes/String.html#method-i-tolocale" name="method-i-tolocale" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to locale encoding</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tolocale_source')" id="l_method-i-tolocale_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L254" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-tolocale_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 254</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tolocale</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">tolocale</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tosjis">
            
              <b>String#tosjis   => string
</b>
            
            <a href="../classes/String.html#method-i-tosjis" name="method-i-tosjis" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to Shift_JIS</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tosjis_source')" id="l_method-i-tosjis_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L230" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-tosjis_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tosjis</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">tosjis</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-toutf16">
            
              <b>String#toutf16   => string
</b>
            
            <a href="../classes/String.html#method-i-toutf16" name="method-i-toutf16" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to UTF-16</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-toutf16_source')" id="l_method-i-toutf16_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L242" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-toutf16_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">toutf16</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">toutf16</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-toutf32">
            
              <b>String#toutf32   => string
</b>
            
            <a href="../classes/String.html#method-i-toutf32" name="method-i-toutf32" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to UTF-32</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-toutf32_source')" id="l_method-i-toutf32_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L248" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-toutf32_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 248</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">toutf32</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">toutf32</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-toutf8">
            
              <b>String#toutf8   => string
</b>
            
            <a href="../classes/String.html#method-i-toutf8" name="method-i-toutf8" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Convert <code>self</code> to UTF-8</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-toutf8_source')" id="l_method-i-toutf8_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/ext/nkf/lib/kconv.rb#L236" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-toutf8_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/ext/nkf/lib/kconv.rb, line 236</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">toutf8</span>; <span class="ruby-constant">Kconv</span>.<span class="ruby-identifier">toutf8</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tr">
            
              <b>tr(selector, replacements) &rarr; new_string
</b>
            
            <a href="../classes/String.html#method-i-tr" name="method-i-tr" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with each character specified by string <code>selector</code> translated to the corresponding character in string <code>replacements</code>. The correspondence is <em>positional</em>:</p>
<ul><li>
<p>Each occurrence of the first character specified by <code>selector</code> is translated to the first character in <code>replacements</code>.</p>
</li><li>
<p>Each occurrence of the second character specified by <code>selector</code> is translated to the second character in <code>replacements</code>.</p>
</li><li>
<p>And so on.</p>
</li></ul>

<p>Example:</p>

<pre><code>&#39;hello&#39;.tr(&#39;el&#39;, &#39;ip&#39;) #=&gt; &quot;hippo&quot;
</code></pre>

<p>If <code>replacements</code> is shorter than <code>selector</code>, it is implicitly padded with its own last character:</p>

<pre><code>&#39;hello&#39;.tr(&#39;aeiou&#39;, &#39;-&#39;)   # =&gt; &quot;h-ll-&quot;
&#39;hello&#39;.tr(&#39;aeiou&#39;, &#39;AA-&#39;) # =&gt; &quot;hAll-&quot;
</code></pre>

<p>Arguments <code>selector</code> and <code>replacements</code> must be valid character selectors (see <a href="../files/ruby/doc/character_selectors_rdoc.html">Character Selectors</a>), and may use any of its valid forms, including negation, ranges, and escaping:</p>

<pre><code># Negation.
&#39;hello&#39;.tr(&#39;^aeiou&#39;, &#39;-&#39;) # =&gt; &quot;-e--o&quot;
# Ranges.
&#39;ibm&#39;.tr(&#39;b-z&#39;, &#39;a-z&#39;) # =&gt; &quot;hal&quot;
# Escapes.
&#39;hel^lo&#39;.tr(&#39;\^aeiou&#39;, &#39;-&#39;)     # =&gt; &quot;h-l-l-&quot;    # Escaped leading caret.
&#39;i-b-m&#39;.tr(&#39;b\-z&#39;, &#39;a-z&#39;)       # =&gt; &quot;ibabm&quot;     # Escaped embedded hyphen.
&#39;foo\\bar&#39;.tr(&#39;ab\\&#39;, &#39;XYZ&#39;)    # =&gt; &quot;fooZYXr&quot;   # Escaped backslash.
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tr_source')" id="l_method-i-tr_source">show</a>
                
              </p>
              <div id="method-i-tr_source" class="dyn-source">
                <pre>static VALUE
rb_str_tr(VALUE str, VALUE src, VALUE repl)
{
    str = str_duplicate(rb_cString, str);
    tr_trans(str, src, repl, 0);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tr-21">
            
              <b>tr!(selector, replacements) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-tr-21" name="method-i-tr-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-tr"><code>String#tr</code></a>, but modifies <code>self</code> in place. Returns <code>self</code> if any changes were made, <code>nil</code> otherwise.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tr-21_source')" id="l_method-i-tr-21_source">show</a>
                
              </p>
              <div id="method-i-tr-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_tr_bang(VALUE str, VALUE src, VALUE repl)
{
    return tr_trans(str, src, repl, 0);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tr_s">
            
              <b>tr_s(selector, replacements) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-tr_s" name="method-i-tr_s" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-tr"><code>String#tr</code></a>, but also squeezes the modified portions of the translated string; returns a new string (translated and squeezed).</p>

<pre><code>&#39;hello&#39;.tr_s(&#39;l&#39;, &#39;r&#39;)   #=&gt; &quot;hero&quot;
&#39;hello&#39;.tr_s(&#39;el&#39;, &#39;-&#39;)  #=&gt; &quot;h-o&quot;
&#39;hello&#39;.tr_s(&#39;el&#39;, &#39;hx&#39;) #=&gt; &quot;hhxo&quot;
</code></pre>

<p>Related: <a href="String.html#method-i-squeeze"><code>String#squeeze</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tr_s_source')" id="l_method-i-tr_s_source">show</a>
                
              </p>
              <div id="method-i-tr_s_source" class="dyn-source">
                <pre>static VALUE
rb_str_tr_s(VALUE str, VALUE src, VALUE repl)
{
    str = str_duplicate(rb_cString, str);
    tr_trans(str, src, repl, 1);
    return str;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-tr_s-21">
            
              <b>tr_s!(selector, replacements) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-tr_s-21" name="method-i-tr_s-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-tr_s"><code>String#tr_s</code></a>, but modifies <code>self</code> in place. Returns <code>self</code> if any changes were made, <code>nil</code> otherwise.</p>

<p>Related: <a href="String.html#method-i-squeeze-21"><code>String#squeeze!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-tr_s-21_source')" id="l_method-i-tr_s-21_source">show</a>
                
              </p>
              <div id="method-i-tr_s-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_tr_s_bang(VALUE str, VALUE src, VALUE repl)
{
    return tr_trans(str, src, repl, 1);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-undump">
            
              <b>undump &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-undump" name="method-i-undump" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an unescaped version of <code>self</code>:</p>

<pre><code>s_orig = &quot;\f\x00\xff\\\&quot;&quot;    # =&gt; &quot;\f\u0000\xFF\\\&quot;&quot;
s_dumped = s_orig.dump       # =&gt; &quot;\&quot;\\f\\x00\\xFF\\\\\\\&quot;\&quot;&quot;
s_undumped = s_dumped.undump # =&gt; &quot;\f\u0000\xFF\\\&quot;&quot;
s_undumped == s_orig         # =&gt; true
</code></pre>

<p>Related: <a href="String.html#method-i-dump"><code>String#dump</code></a> (inverse of <a href="String.html#method-i-undump"><code>String#undump</code></a>).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-undump_source')" id="l_method-i-undump_source">show</a>
                
              </p>
              <div id="method-i-undump_source" class="dyn-source">
                <pre>static VALUE
str_undump(VALUE str)
{
    const char *s = RSTRING_PTR(str);
    const char *s_end = RSTRING_END(str);
    rb_encoding *enc = rb_enc_get(str);
    VALUE undumped = rb_enc_str_new(s, 0L, enc);
    bool utf8 = false;
    bool binary = false;
    int w;

    rb_must_asciicompat(str);
    if (rb_str_is_ascii_only_p(str) == Qfalse) {
        rb_raise(rb_eRuntimeError, &quot;non-ASCII character detected&quot;);
    }
    if (!str_null_check(str, &amp;w)) {
        rb_raise(rb_eRuntimeError, &quot;string contains null byte&quot;);
    }
    if (RSTRING_LEN(str) &lt; 2) goto invalid_format;
    if (*s != &#39;&quot;&#39;) goto invalid_format;

    /* strip &#39;&quot;&#39; at the start */
    s++;

    for (;;) {
        if (s &gt;= s_end) {
            rb_raise(rb_eRuntimeError, &quot;unterminated dumped string&quot;);
        }

        if (*s == &#39;&quot;&#39;) {
            /* epilogue */
            s++;
            if (s == s_end) {
                /* ascii compatible dumped string */
                break;
            }
            else {
                static const char force_encoding_suffix[] = &quot;.force_encoding(\&quot;&quot;; /* &quot;\&quot;)&quot; */
                static const char dup_suffix[] = &quot;.dup&quot;;
                const char *encname;
                int encidx;
                ptrdiff_t size;

                /* check separately for strings dumped by older versions */
                size = sizeof(dup_suffix) - 1;
                if (s_end - s &gt; size &amp;&amp; memcmp(s, dup_suffix, size) == 0) s += size;

                size = sizeof(force_encoding_suffix) - 1;
                if (s_end - s &lt;= size) goto invalid_format;
                if (memcmp(s, force_encoding_suffix, size) != 0) goto invalid_format;
                s += size;

                if (utf8) {
                    rb_raise(rb_eRuntimeError, &quot;dumped string contained Unicode escape but used force_encoding&quot;);
                }

                encname = s;
                s = memchr(s, &#39;&quot;&#39;, s_end-s);
                size = s - encname;
                if (!s) goto invalid_format;
                if (s_end - s != 2) goto invalid_format;
                if (s[0] != &#39;&quot;&#39; || s[1] != &#39;)&#39;) goto invalid_format;

                encidx = rb_enc_find_index2(encname, (long)size);
                if (encidx &lt; 0) {
                    rb_raise(rb_eRuntimeError, &quot;dumped string has unknown encoding name&quot;);
                }
                rb_enc_associate_index(undumped, encidx);
            }
            break;
        }

        if (*s == &#39;\\&#39;) {
            s++;
            if (s &gt;= s_end) {
                rb_raise(rb_eRuntimeError, &quot;invalid escape&quot;);
            }
            undump_after_backslash(undumped, &amp;s, s_end, &amp;enc, &amp;utf8, &amp;binary);
        }
        else {
            rb_str_cat(undumped, s++, 1);
        }
    }

    RB_GC_GUARD(str);

    return undumped;
invalid_format:
    rb_raise(rb_eRuntimeError, &quot;invalid dumped string; not wrapped with &#39;\&quot;&#39; nor &#39;\&quot;...\&quot;.force_encoding(\&quot;...\&quot;)&#39; form&quot;);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-unicode_normalize">
            
              <b>unicode_normalize(form = :nfc) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-unicode_normalize" name="method-i-unicode_normalize" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a copy of <code>self</code> with <a href="https://unicode.org/reports/tr15">Unicode normalization</a> applied.</p>

<p>Argument <code>form</code> must be one of the following symbols (see <a href="https://unicode.org/reports/tr15/#Norm_Forms">Unicode normalization forms</a>):</p>
<ul><li>
<p><code>:nfc</code>: Canonical decomposition, followed by canonical composition.</p>
</li><li>
<p><code>:nfd</code>: Canonical decomposition.</p>
</li><li>
<p><code>:nfkc</code>: Compatibility decomposition, followed by canonical composition.</p>
</li><li>
<p><code>:nfkd</code>: Compatibility decomposition.</p>
</li></ul>

<p>The encoding of <code>self</code> must be one of:</p>
<ul><li>
<p>Encoding::UTF_8</p>
</li><li>
<p>Encoding::UTF_16BE</p>
</li><li>
<p>Encoding::UTF_16LE</p>
</li><li>
<p>Encoding::UTF_32BE</p>
</li><li>
<p>Encoding::UTF_32LE</p>
</li><li>
<p>Encoding::GB18030</p>
</li><li>
<p>Encoding::UCS_2BE</p>
</li><li>
<p>Encoding::UCS_4BE</p>
</li></ul>

<p>Examples:</p>

<pre><code>&quot;a\u0300&quot;.unicode_normalize      # =&gt; &quot;a&quot;
&quot;\u00E0&quot;.unicode_normalize(:nfd) # =&gt; &quot;a &quot;
</code></pre>

<p>Related: <a href="String.html#method-i-unicode_normalize-21"><code>String#unicode_normalize!</code></a>, <a href="String.html#method-i-unicode_normalized-3F"><code>String#unicode_normalized?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unicode_normalize_source')" id="l_method-i-unicode_normalize_source">show</a>
                
              </p>
              <div id="method-i-unicode_normalize_source" class="dyn-source">
                <pre>static VALUE
rb_str_unicode_normalize(int argc, VALUE *argv, VALUE str)
{
    return unicode_normalize_common(argc, argv, str, id_normalize);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-unicode_normalize-21">
            
              <b>unicode_normalize!(form = :nfc) &rarr; self
</b>
            
            <a href="../classes/String.html#method-i-unicode_normalize-21" name="method-i-unicode_normalize-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-unicode_normalize"><code>String#unicode_normalize</code></a>, except that the normalization is performed on <code>self</code>.</p>

<p>Related <a href="String.html#method-i-unicode_normalized-3F"><code>String#unicode_normalized?</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unicode_normalize-21_source')" id="l_method-i-unicode_normalize-21_source">show</a>
                
              </p>
              <div id="method-i-unicode_normalize-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_unicode_normalize_bang(int argc, VALUE *argv, VALUE str)
{
    return rb_str_replace(str, unicode_normalize_common(argc, argv, str, id_normalize));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-unicode_normalized-3F">
            
              <b>unicode_normalized?(form = :nfc) &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-unicode_normalized-3F" name="method-i-unicode_normalized-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>self</code> is in the given <code>form</code> of Unicode normalization, <code>false</code> otherwise. The <code>form</code> must be one of <code>:nfc</code>, <code>:nfd</code>, <code>:nfkc</code>, or <code>:nfkd</code>.</p>

<p>Examples:</p>

<pre><code>&quot;a\u0300&quot;.unicode_normalized?       # =&gt; false
&quot;a\u0300&quot;.unicode_normalized?(:nfd) # =&gt; true
&quot;\u00E0&quot;.unicode_normalized?        # =&gt; true
&quot;\u00E0&quot;.unicode_normalized?(:nfd)  # =&gt; false
</code></pre>

<p>Raises an exception if <code>self</code> is not in a Unicode encoding:</p>

<pre><code>s = &quot;\xE0&quot;.force_encoding(&#39;ISO-8859-1&#39;)
s.unicode_normalized? # Raises Encoding::CompatibilityError.
</code></pre>

<p>Related: <a href="String.html#method-i-unicode_normalize"><code>String#unicode_normalize</code></a>, <a href="String.html#method-i-unicode_normalize-21"><code>String#unicode_normalize!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unicode_normalized-3F_source')" id="l_method-i-unicode_normalized-3F_source">show</a>
                
              </p>
              <div id="method-i-unicode_normalized-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_unicode_normalized_p(int argc, VALUE *argv, VALUE str)
{
    return unicode_normalize_common(argc, argv, str, id_normalized_p);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-unpack">
            
              <b>unpack(template, offset: 0) &rarr; array
</b>
            
            <a href="../classes/String.html#method-i-unpack" name="method-i-unpack" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Extracts data from <code>self</code>, forming objects that become the elements of a new array; returns that array. See <a href="../files/ruby/doc/packed_data_rdoc.html">Packed Data</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unpack_source')" id="l_method-i-unpack_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/pack.rb#L19" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-unpack_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/pack.rb, line 19</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unpack</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-value">offset:</span> <span class="ruby-value">0</span>)
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">pack_unpack</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">offset</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-unpack1">
            
              <b>unpack1(template, offset: 0) &rarr; object
</b>
            
            <a href="../classes/String.html#method-i-unpack1" name="method-i-unpack1" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="String.html#method-i-unpack"><code>String#unpack</code></a>, but unpacks and returns only the first extracted object. See <a href="../files/ruby/doc/packed_data_rdoc.html">Packed Data</a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unpack1_source')" id="l_method-i-unpack1_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/pack.rb#L28" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-unpack1_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/pack.rb, line 28</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">unpack1</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-value">offset:</span> <span class="ruby-value">0</span>)
  <span class="ruby-constant">Primitive</span>.<span class="ruby-identifier">pack_unpack1</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">offset</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-upcase">
            
              <b>upcase(*options) &rarr; string
</b>
            
            <a href="../classes/String.html#method-i-upcase" name="method-i-upcase" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string containing the upcased characters in <code>self</code>:</p>

<pre><code>s = &#39;Hello World!&#39; # =&gt; &quot;Hello World!&quot;
s.upcase           # =&gt; &quot;HELLO WORLD!&quot;
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-upcase-21"><code>String#upcase!</code></a>, <a href="String.html#method-i-downcase"><code>String#downcase</code></a>, <a href="String.html#method-i-downcase-21"><code>String#downcase!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-upcase_source')" id="l_method-i-upcase_source">show</a>
                
              </p>
              <div id="method-i-upcase_source" class="dyn-source">
                <pre>static VALUE
rb_str_upcase(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE;
    VALUE ret;

    flags = check_case_options(argc, argv, flags);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        ret = rb_str_new(RSTRING_PTR(str), RSTRING_LEN(str));
        str_enc_copy_direct(ret, str);
        upcase_single(ret);
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY) {
        ret = rb_str_new(0, RSTRING_LEN(str));
        rb_str_ascii_casemap(str, ret, &amp;flags, enc);
    }
    else {
        ret = rb_str_casemap(str, &amp;flags, enc);
    }

    return ret;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-upcase-21">
            
              <b>upcase!(*options) &rarr; self or nil
</b>
            
            <a href="../classes/String.html#method-i-upcase-21" name="method-i-upcase-21" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Upcases the characters in <code>self</code>; returns <code>self</code> if any changes were made, <code>nil</code> otherwise:</p>

<pre><code>s = &#39;Hello World!&#39; # =&gt; &quot;Hello World!&quot;
s.upcase!          # =&gt; &quot;HELLO WORLD!&quot;
s                  # =&gt; &quot;HELLO WORLD!&quot;
s.upcase!          # =&gt; nil
</code></pre>

<p>The casing may be affected by the given <code>options</code>; see <a href="../files/ruby/doc/case_mapping_rdoc.html">Case Mapping</a>.</p>

<p>Related: <a href="String.html#method-i-upcase"><code>String#upcase</code></a>, <a href="String.html#method-i-downcase"><code>String#downcase</code></a>, <a href="String.html#method-i-downcase-21"><code>String#downcase!</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-upcase-21_source')" id="l_method-i-upcase-21_source">show</a>
                
              </p>
              <div id="method-i-upcase-21_source" class="dyn-source">
                <pre>static VALUE
rb_str_upcase_bang(int argc, VALUE *argv, VALUE str)
{
    rb_encoding *enc;
    OnigCaseFoldType flags = ONIGENC_CASE_UPCASE;

    flags = check_case_options(argc, argv, flags);
    str_modify_keep_cr(str);
    enc = str_true_enc(str);
    if (case_option_single_p(flags, enc, str)) {
        if (upcase_single(str))
            flags |= ONIGENC_CASE_MODIFIED;
    }
    else if (flags&amp;ONIGENC_CASE_ASCII_ONLY)
        rb_str_ascii_casemap(str, str, &amp;flags, enc);
    else
        str_shared_replace(str, rb_str_casemap(str, &amp;flags, enc));

    if (ONIGENC_CASE_MODIFIED&amp;flags) return str;
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-upto">
            
              <b>upto(other_string, exclusive = false) {|string| ... } &rarr; self<br />upto(other_string, exclusive = false) &rarr; new_enumerator
</b>
            
            <a href="../classes/String.html#method-i-upto" name="method-i-upto" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>With a block given, calls the block with each String value returned by successive calls to <a href="String.html#method-i-succ"><code>String#succ</code></a>; the first value is <code>self</code>, the next is <code>self.succ</code>, and so on; the sequence terminates when value <code>other_string</code> is reached; returns <code>self</code>:</p>

<pre><code>&#39;a8&#39;.upto(&#39;b6&#39;) {|s| print s, &#39; &#39; } # =&gt; &quot;a8&quot;
</code></pre>

<p>Output:</p>

<pre><code>a8 a9 b0 b1 b2 b3 b4 b5 b6
</code></pre>

<p>If argument <code>exclusive</code> is given as a truthy object, the last value is omitted:</p>

<pre><code>&#39;a8&#39;.upto(&#39;b6&#39;, true) {|s| print s, &#39; &#39; } # =&gt; &quot;a8&quot;
</code></pre>

<p>Output:</p>

<pre><code>a8 a9 b0 b1 b2 b3 b4 b5
</code></pre>

<p>If <code>other_string</code> would not be reached, does not call the block:</p>

<pre><code>&#39;25&#39;.upto(&#39;5&#39;) {|s| fail s }
&#39;aa&#39;.upto(&#39;a&#39;) {|s| fail s }
</code></pre>

<p>With no block given, returns a new Enumerator:</p>

<pre><code>&#39;a8&#39;.upto(&#39;b6&#39;) # =&gt; #&lt;Enumerator: &quot;a8&quot;:upto(&quot;b6&quot;)&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-upto_source')" id="l_method-i-upto_source">show</a>
                
              </p>
              <div id="method-i-upto_source" class="dyn-source">
                <pre>static VALUE
rb_str_upto(int argc, VALUE *argv, VALUE beg)
{
    VALUE end, exclusive;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;end, &amp;exclusive);
    RETURN_ENUMERATOR(beg, argc, argv);
    return rb_str_upto_each(beg, end, RTEST(exclusive), str_upto_i, Qnil);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-valid_encoding-3F">
            
              <b>valid_encoding? &rarr; true or false
</b>
            
            <a href="../classes/String.html#method-i-valid_encoding-3F" name="method-i-valid_encoding-3F" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns <code>true</code> if <code>self</code> is encoded correctly, <code>false</code> otherwise:</p>

<pre><code>&quot;\xc2\xa1&quot;.force_encoding(&quot;UTF-8&quot;).valid_encoding? # =&gt; true
&quot;\xc2&quot;.force_encoding(&quot;UTF-8&quot;).valid_encoding?     # =&gt; false
&quot;\x80&quot;.force_encoding(&quot;UTF-8&quot;).valid_encoding?     # =&gt; false
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-valid_encoding-3F_source')" id="l_method-i-valid_encoding-3F_source">show</a>
                
              </p>
              <div id="method-i-valid_encoding-3F_source" class="dyn-source">
                <pre>static VALUE
rb_str_valid_encoding_p(VALUE str)
{
    int cr = rb_enc_str_coderange(str);

    return RBOOL(cr != ENC_CODERANGE_BROKEN);
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
