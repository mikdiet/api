<!DOCTYPE html>
<html lang="en">
<head>
    <title>Random</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["Random"]'>


    <meta property="og:title" value="Random">

  
    
    <meta name="description" content="Random provides an interface to Ruby’s pseudo-random number generator, or PRNG.  The PRNG produces a deterministic sequence of bits which approximate true randomness.">
    <meta property="og:description" content="Random provides an interface to Ruby’s pseudo-random number generator, or PRNG.  The PRNG produces a deterministic sequence of bits which approximate true randomness.">
  

    <meta name="keywords" content="Random class, ==, new, rand, bytes, seed, srand, rand, bytes, seed, new_seed, urandom">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Class</span>
            Random
            
                <span class="parent">&lt;
                    
                    base
                    
                </span>
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/lib/random/formatter_rb.html">ruby/lib/random/formatter.rb</a></li>
            
            <li><a href="../files/ruby/random_c.html">ruby/random.c</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="Random.html"><code>Random</code></a> provides an interface to Ruby’s pseudo-random number generator, or PRNG.  The PRNG produces a deterministic sequence of bits which approximate true randomness. The sequence may be represented by integers, floats, or binary strings.</p>

<p>The generator may be initialized with either a system-generated or user-supplied seed value by using <a href="Random.html#method-c-srand"><code>Random.srand</code></a>.</p>

<p>The class method <a href="Random.html#method-c-rand"><code>Random.rand</code></a> provides the base functionality of <a href="Kernel.html#method-i-rand"><code>Kernel.rand</code></a> along with better handling of floating point values. These are both interfaces to the Ruby system PRNG.</p>

<p><a href="Random.html#method-c-new"><code>Random.new</code></a> will create a new PRNG with a state independent of the Ruby system PRNG, allowing multiple generators with different seed values or sequence positions to exist simultaneously. <a href="Random.html"><code>Random</code></a> objects can be marshaled, allowing sequences to be saved and resumed.</p>

<p>PRNGs are currently implemented as a modified Mersenne Twister with a period of 2**19937-1.  As this algorithm is <em>not</em> for cryptographical use, you must use <a href="SecureRandom.html"><code>SecureRandom</code></a> for security purpose, instead of this PRNG.</p>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="Random/Formatter.html">Random::Formatter</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-3D-3D">==</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-bytes">bytes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-bytes">bytes</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>,
              </li>
            
              
              <li>
                <a href="#method-c-new_seed">new_seed</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-rand">rand</a>,
              </li>
            
              
              <li>
                <a href="#method-c-rand">rand</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-seed">seed</a>,
              </li>
            
              
              <li>
                <a href="#method-i-seed">seed</a>,
              </li>
            
              
              <li>
                <a href="#method-c-srand">srand</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-urandom">urandom</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <h2 class="sectiontitle">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">DEFAULT</td>
            <td>=</td>
            <td class="attr-value">rb_cRandom</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-bytes">
            
              <b>Random.bytes(size) &rarr; string
</b>
            
            <a href="../classes/Random.html#method-c-bytes" name="method-c-bytes" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a random binary string. The argument <code>size</code> specifies the length of the returned string.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-bytes_source')" id="l_method-c-bytes_source">show</a>
                
              </p>
              <div id="method-c-bytes_source" class="dyn-source">
                <pre>static VALUE
random_s_bytes(VALUE obj, VALUE len)
{
    rb_random_t *rnd = rand_start(default_rand());
    return rand_bytes(&amp;random_mt_if, rnd, NUM2LONG(rb_to_int(len)));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-new">
            
              <b>Random.new(seed = Random.new_seed) &rarr; prng
</b>
            
            <a href="../classes/Random.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Creates a new PRNG using <code>seed</code> to set the initial state. If <code>seed</code> is omitted, the generator is initialized with <a href="Random.html#method-c-new_seed"><code>Random.new_seed</code></a>.</p>

<p>See <a href="Random.html#method-c-srand"><code>Random.srand</code></a> for more information on the use of seed values.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre>static VALUE
random_init(int argc, VALUE *argv, VALUE obj)
{
    rb_random_t *rnd = try_get_rnd(obj);
    const rb_random_interface_t *rng = rb_rand_if(obj);

    if (!rng) {
        rb_raise(rb_eTypeError, &quot;undefined random interface: %s&quot;,
                 RTYPEDDATA_TYPE(obj)-&gt;wrap_struct_name);
    }
    argc = rb_check_arity(argc, 0, 1);
    rb_check_frozen(obj);
    if (argc == 0) {
        rnd-&gt;seed = rand_init_default(rng, rnd);
    }
    else {
        rnd-&gt;seed = rand_init(rng, rnd, rb_to_int(argv[0]));
    }
    return obj;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-new_seed">
            
              <b>Random.new_seed &rarr; integer
</b>
            
            <a href="../classes/Random.html#method-c-new_seed" name="method-c-new_seed" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns an arbitrary seed value. This is used by <a href="Random.html#method-c-new"><code>Random.new</code></a> when no seed value is specified as an argument.</p>

<pre><code>Random.new_seed  #=&gt; 115032730400174366788466674494640623225
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_seed_source')" id="l_method-c-new_seed_source">show</a>
                
              </p>
              <div id="method-c-new_seed_source" class="dyn-source">
                <pre>static VALUE
random_seed(VALUE _)
{
    VALUE v;
    with_random_seed(DEFAULT_SEED_CNT, 1) {
        v = make_seed_value(seedbuf, DEFAULT_SEED_CNT);
    }
    return v;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-rand">
            
              <b>Random.rand &rarr; float<br />Random.rand(max) &rarr; number<br />Random.rand(range) &rarr; number
</b>
            
            <a href="../classes/Random.html#method-c-rand" name="method-c-rand" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a random number using the Ruby system PRNG.</p>

<p>See also <a href="Random.html#method-i-rand"><code>Random#rand</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-rand_source')" id="l_method-c-rand_source">show</a>
                
              </p>
              <div id="method-c-rand_source" class="dyn-source">
                <pre>static VALUE
random_s_rand(int argc, VALUE *argv, VALUE obj)
{
    VALUE v = rand_random(argc, argv, Qnil, rand_start(default_rand()));
    check_random_number(v, argv);
    return v;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-seed">
            
              <b>Random.seed &rarr; integer
</b>
            
            <a href="../classes/Random.html#method-c-seed" name="method-c-seed" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the seed value used to initialize the Ruby system PRNG. This may be used to initialize another generator with the same state at a later time, causing it to produce the same sequence of numbers.</p>

<pre><code>Random.seed      #=&gt; 1234
prng1 = Random.new(Random.seed)
prng1.seed       #=&gt; 1234
prng1.rand(100)  #=&gt; 47
Random.seed      #=&gt; 1234
Random.rand(100) #=&gt; 47
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-seed_source')" id="l_method-c-seed_source">show</a>
                
              </p>
              <div id="method-c-seed_source" class="dyn-source">
                <pre>static VALUE
random_s_seed(VALUE obj)
{
    rb_random_mt_t *rnd = rand_mt_start(default_rand());
    return rnd-&gt;base.seed;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-srand">
            
              <b>srand(number = Random.new_seed) &rarr; old_seed
</b>
            
            <a href="../classes/Random.html#method-c-srand" name="method-c-srand" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Seeds the system pseudo-random number generator, with <code>number</code>. The previous seed value is returned.</p>

<p>If <code>number</code> is omitted, seeds the generator using a source of entropy provided by the operating system, if available (/dev/urandom on Unix systems or the RSA cryptographic provider on Windows), which is then combined with the time, the process id, and a sequence number.</p>

<p>srand may be used to ensure repeatable sequences of pseudo-random numbers between different runs of the program. By setting the seed to a known value, programs can be made deterministic during testing.</p>

<pre><code>srand 1234               # =&gt; 268519324636777531569100071560086917274
[ rand, rand ]           # =&gt; [0.1915194503788923, 0.6221087710398319]
[ rand(10), rand(1000) ] # =&gt; [4, 664]
srand 1234               # =&gt; 1234
[ rand, rand ]           # =&gt; [0.1915194503788923, 0.6221087710398319]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-srand_source')" id="l_method-c-srand_source">show</a>
                
              </p>
              <div id="method-c-srand_source" class="dyn-source">
                <pre>static VALUE
rb_f_srand(int argc, VALUE *argv, VALUE obj)
{
    VALUE seed, old;
    rb_random_mt_t *r = rand_mt_start(default_rand());

    if (rb_check_arity(argc, 0, 1) == 0) {
        seed = random_seed(obj);
    }
    else {
        seed = rb_to_int(argv[0]);
    }
    old = r-&gt;base.seed;
    rand_init(&amp;random_mt_if, &amp;r-&gt;base, seed);
    r-&gt;base.seed = seed;

    return old;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-urandom">
            
              <b>Random.urandom(size) &rarr; string
</b>
            
            <a href="../classes/Random.html#method-c-urandom" name="method-c-urandom" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string, using platform providing features. Returned value is expected to be a cryptographically secure pseudo-random number in binary form. This method raises a <a href="RuntimeError.html"><code>RuntimeError</code></a> if the feature provided by platform failed to prepare the result.</p>

<p>In 2017, Linux manpage random(7) writes that “no cryptographic primitive available today can hope to promise more than 256 bits of security”.  So it might be questionable to pass size &gt; 32 to this method.</p>

<pre><code>Random.urandom(8)  #=&gt; &quot;\x78\x41\xBA\xAF\x7D\xEA\xD8\xEA&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-urandom_source')" id="l_method-c-urandom_source">show</a>
                
              </p>
              <div id="method-c-urandom_source" class="dyn-source">
                <pre>static VALUE
random_raw_seed(VALUE self, VALUE size)
{
    long n = NUM2ULONG(size);
    VALUE buf = rb_str_new(0, n);
    if (n == 0) return buf;
    if (fill_random_bytes(RSTRING_PTR(buf), n, TRUE))
        rb_raise(rb_eRuntimeError, &quot;failed to get urandom&quot;);
    return buf;
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
      <h2 class="sectiontitle">Instance Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-i-3D-3D">
            
              <b>prng1 == prng2 &rarr; true or false
</b>
            
            <a href="../classes/Random.html#method-i-3D-3D" name="method-i-3D-3D" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns true if the two generators have the same internal state, otherwise false.  Equivalent generators will return the same sequence of pseudo-random numbers.  Two generators will generally have the same state only if they were initialized with the same seed</p>

<pre><code>Random.new == Random.new             # =&gt; false
Random.new(1234) == Random.new(1234) # =&gt; true
</code></pre>

<p>and have the same invocation history.</p>

<pre><code>prng1 = Random.new(1234)
prng2 = Random.new(1234)
prng1 == prng2 # =&gt; true

prng1.rand     # =&gt; 0.1915194503788923
prng1 == prng2 # =&gt; false

prng2.rand     # =&gt; 0.1915194503788923
prng1 == prng2 # =&gt; true
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-3D-3D_source')" id="l_method-i-3D-3D_source">show</a>
                
              </p>
              <div id="method-i-3D-3D_source" class="dyn-source">
                <pre>static VALUE
rand_mt_equal(VALUE self, VALUE other)
{
    rb_random_mt_t *r1, *r2;
    if (rb_obj_class(self) != rb_obj_class(other)) return Qfalse;
    r1 = get_rnd_mt(self);
    r2 = get_rnd_mt(other);
    if (memcmp(r1-&gt;mt.state, r2-&gt;mt.state, sizeof(r1-&gt;mt.state))) return Qfalse;
    if ((r1-&gt;mt.next - r1-&gt;mt.state) != (r2-&gt;mt.next - r2-&gt;mt.state)) return Qfalse;
    if (r1-&gt;mt.left != r2-&gt;mt.left) return Qfalse;
    return rb_equal(r1-&gt;base.seed, r2-&gt;base.seed);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-bytes">
            
              <b>prng.bytes(size) &rarr; string
</b>
            
            <a href="../classes/Random.html#method-i-bytes" name="method-i-bytes" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a random binary string containing <code>size</code> bytes.</p>

<pre><code>random_string = Random.new.bytes(10) # =&gt; &quot;\xD7:R\xAB?\x83\xCE\xFAkO&quot;
random_string.size                   # =&gt; 10
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-bytes_source')" id="l_method-i-bytes_source">show</a>
                
              </p>
              <div id="method-i-bytes_source" class="dyn-source">
                <pre>static VALUE
random_bytes(VALUE obj, VALUE len)
{
    rb_random_t *rnd = try_get_rnd(obj);
    return rand_bytes(rb_rand_if(obj), rnd, NUM2LONG(rb_to_int(len)));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-rand">
            
              <b>prng.rand &rarr; float<br />prng.rand(max) &rarr; number<br />prng.rand(range) &rarr; number
</b>
            
            <a href="../classes/Random.html#method-i-rand" name="method-i-rand" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>When <code>max</code> is an <a href="Integer.html"><code>Integer</code></a>, <code>rand</code> returns a random integer greater than or equal to zero and less than <code>max</code>. Unlike <a href="Kernel.html#method-i-rand"><code>Kernel.rand</code></a>, when <code>max</code> is a negative integer or zero, <code>rand</code> raises an <a href="ArgumentError.html"><code>ArgumentError</code></a>.</p>

<pre><code>prng = Random.new
prng.rand(100)       # =&gt; 42
</code></pre>

<p>When <code>max</code> is a <a href="Float.html"><code>Float</code></a>, <code>rand</code> returns a random floating point number between 0.0 and <code>max</code>, including 0.0 and excluding <code>max</code>.</p>

<pre><code>prng.rand(1.5)       # =&gt; 1.4600282860034115
</code></pre>

<p>When <code>range</code> is a <a href="Range.html"><code>Range</code></a>, <code>rand</code> returns a random number where <code>range.member?(number) == true</code>.</p>

<pre><code>prng.rand(5..9)      # =&gt; one of [5, 6, 7, 8, 9]
prng.rand(5...9)     # =&gt; one of [5, 6, 7, 8]
prng.rand(5.0..9.0)  # =&gt; between 5.0 and 9.0, including 9.0
prng.rand(5.0...9.0) # =&gt; between 5.0 and 9.0, excluding 9.0
</code></pre>

<p>Both the beginning and ending values of the range must respond to subtract (<code>-</code>) and add (<code>+</code>)methods, or rand will raise an <a href="ArgumentError.html"><code>ArgumentError</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-rand_source')" id="l_method-i-rand_source">show</a>
                
              </p>
              <div id="method-i-rand_source" class="dyn-source">
                <pre>static VALUE
random_rand(int argc, VALUE *argv, VALUE obj)
{
    VALUE v = rand_random(argc, argv, obj, try_get_rnd(obj));
    check_random_number(v, argv);
    return v;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-i-seed">
            
              <b>prng.seed &rarr; integer
</b>
            
            <a href="../classes/Random.html#method-i-seed" name="method-i-seed" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns the seed value used to initialize the generator. This may be used to initialize another generator with the same state at a later time, causing it to produce the same sequence of numbers.</p>

<pre><code>prng1 = Random.new(1234)
prng1.seed       #=&gt; 1234
prng1.rand(100)  #=&gt; 47

prng2 = Random.new(prng1.seed)
prng2.rand(100)  #=&gt; 47
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-seed_source')" id="l_method-i-seed_source">show</a>
                
              </p>
              <div id="method-i-seed_source" class="dyn-source">
                <pre>static VALUE
random_get_seed(VALUE obj)
{
    return get_rnd(obj)-&gt;seed;
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
  
</div>

    </main>
  </body>
</html>
