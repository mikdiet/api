<!DOCTYPE html>
<html lang="en">
<head>
    <title>URI</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='["URI"]'>


    <meta property="og:title" value="URI">

  
    
    <meta name="description" content="URI is a module providing classes to handle Uniform Resource Identifiers (RFC2396).  Features  Uniform way of handling URIs.  Flexibility to introduce custom URI schemes.">
    <meta property="og:description" content="URI is a module providing classes to handle Uniform Resource Identifiers (RFC2396).  Features  Uniform way of handling URIs.  Flexibility to introduce custom URI schemes.">
  

    <meta name="keywords" content="URI class, open, register_scheme, scheme_list, for, split, parse, join, encode_www_form_component, decode_www_form_component, encode_uri_component, decode_uri_component, encode_www_form, decode_www_form">
</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            <span class="type">Module</span>
            URI
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/lib/open-uri_rb.html">ruby/lib/open-uri.rb</a></li>
            
            <li><a href="../files/ruby/lib/rubygems/local_remote_options_rb.html">ruby/lib/rubygems/local_remote_options.rb</a></li>
            
            <li><a href="../files/ruby/lib/rubygems/request_rb.html">ruby/lib/rubygems/request.rb</a></li>
            
            <li><a href="../files/ruby/lib/rubygems/specification_policy_rb.html">ruby/lib/rubygems/specification_policy.rb</a></li>
            
            <li><a href="../files/ruby/lib/rubygems/uri_rb.html">ruby/lib/rubygems/uri.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri_rb.html">ruby/lib/uri.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/common_rb.html">ruby/lib/uri/common.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/file_rb.html">ruby/lib/uri/file.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/ftp_rb.html">ruby/lib/uri/ftp.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/generic_rb.html">ruby/lib/uri/generic.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/http_rb.html">ruby/lib/uri/http.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/https_rb.html">ruby/lib/uri/https.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/ldap_rb.html">ruby/lib/uri/ldap.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/ldaps_rb.html">ruby/lib/uri/ldaps.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/mailto_rb.html">ruby/lib/uri/mailto.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/rfc2396_parser_rb.html">ruby/lib/uri/rfc2396_parser.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/rfc3986_parser_rb.html">ruby/lib/uri/rfc3986_parser.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/version_rb.html">ruby/lib/uri/version.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/ws_rb.html">ruby/lib/uri/ws.rb</a></li>
            
            <li><a href="../files/ruby/lib/uri/wss_rb.html">ruby/lib/uri/wss.rb</a></li>
            
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p><a href="URI.html"><code>URI</code></a> is a module providing classes to handle Uniform Resource Identifiers (<a href="http://tools.ietf.org/html/rfc2396">RFC2396</a>).</p>

<h2 id="module-URI-label-Features">Features</h2>
<ul><li>
<p>Uniform way of handling URIs.</p>
</li><li>
<p>Flexibility to introduce custom <a href="URI.html"><code>URI</code></a> schemes.</p>
</li><li>
<p>Flexibility to have an alternate <a href="URI/RFC2396_Parser.html"><code>URI::Parser</code></a> (or just different patterns and regexp’s).</p>
</li></ul>

<h2 id="module-URI-label-Basic+example">Basic example</h2>

<pre><code>require &#39;uri&#39;

uri = URI(&quot;http://foo.com/posts?id=30&amp;limit=5#time=1305298413&quot;)
#=&gt; #&lt;URI::HTTP http://foo.com/posts?id=30&amp;limit=5#time=1305298413&gt;

uri.scheme    #=&gt; &quot;http&quot;
uri.host      #=&gt; &quot;foo.com&quot;
uri.path      #=&gt; &quot;/posts&quot;
uri.query     #=&gt; &quot;id=30&amp;limit=5&quot;
uri.fragment  #=&gt; &quot;time=1305298413&quot;

uri.to_s      #=&gt; &quot;http://foo.com/posts?id=30&amp;limit=5#time=1305298413&quot;
</code></pre>

<h2 id="module-URI-label-Adding+custom+URIs">Adding custom URIs</h2>

<pre><code>module URI
  class RSYNC &lt; Generic
    DEFAULT_PORT = 873
  end
  register_scheme &#39;RSYNC&#39;, RSYNC
end
#=&gt; URI::RSYNC

URI.scheme_list
#=&gt; {&quot;FILE&quot;=&gt;URI::File, &quot;FTP&quot;=&gt;URI::FTP, &quot;HTTP&quot;=&gt;URI::HTTP,
#    &quot;HTTPS&quot;=&gt;URI::HTTPS, &quot;LDAP&quot;=&gt;URI::LDAP, &quot;LDAPS&quot;=&gt;URI::LDAPS,
#    &quot;MAILTO&quot;=&gt;URI::MailTo, &quot;RSYNC&quot;=&gt;URI::RSYNC}

uri = URI(&quot;rsync://rsync.foo.com&quot;)
#=&gt; #&lt;URI::RSYNC rsync://rsync.foo.com&gt;
</code></pre>

<h2 id="module-URI-label-RFC+References">RFC References</h2>

<p>A good place to view an RFC spec is <a href="http://www.ietf.org/rfc.html">www.ietf.org/rfc.html</a>.</p>

<p>Here is a list of all related RFC’s:</p>
<ul><li>
<p><a href="http://tools.ietf.org/html/rfc822">RFC822</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc1738">RFC1738</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2255">RFC2255</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2368">RFC2368</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2373">RFC2373</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2396">RFC2396</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc2732">RFC2732</a></p>
</li><li>
<p><a href="http://tools.ietf.org/html/rfc3986">RFC3986</a></p>
</li></ul>

<h2 id="module-URI-label-Class+tree"><a href="Class.html"><code>Class</code></a> tree</h2>
<ul><li>
<p><a href="URI/Generic.html"><code>URI::Generic</code></a> (in uri/generic.rb)</p>
<ul><li>
<p><a href="URI/File.html"><code>URI::File</code></a> - (in uri/file.rb)</p>
</li><li>
<p><a href="URI/FTP.html"><code>URI::FTP</code></a> - (in uri/ftp.rb)</p>
</li><li>
<p><a href="URI/HTTP.html"><code>URI::HTTP</code></a> - (in uri/http.rb)</p>
<ul><li>
<p><a href="URI/HTTPS.html"><code>URI::HTTPS</code></a> - (in uri/https.rb)</p>
</li></ul>
</li><li>
<p><a href="URI/LDAP.html"><code>URI::LDAP</code></a> - (in uri/ldap.rb)</p>
<ul><li>
<p><a href="URI/LDAPS.html"><code>URI::LDAPS</code></a> - (in uri/ldaps.rb)</p>
</li></ul>
</li><li>
<p><a href="URI/MailTo.html"><code>URI::MailTo</code></a> - (in uri/mailto.rb)</p>
</li></ul>
</li><li>
<p><a href="URI/RFC2396_Parser.html"><code>URI::Parser</code></a> - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/RFC2396_REGEXP.html"><code>URI::REGEXP</code></a> - (in uri/common.rb)</p>
<ul><li>
<p>URI::REGEXP::PATTERN - (in uri/common.rb)</p>
</li></ul>
</li><li>
<p>URI::Util - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/Error.html"><code>URI::Error</code></a> - (in uri/common.rb)</p>
<ul><li>
<p><a href="URI/InvalidURIError.html"><code>URI::InvalidURIError</code></a> - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/InvalidComponentError.html"><code>URI::InvalidComponentError</code></a> - (in uri/common.rb)</p>
</li><li>
<p><a href="URI/BadURIError.html"><code>URI::BadURIError</code></a> - (in uri/common.rb)</p>
</li></ul>
</li></ul>

<h2 id="module-URI-label-Copyright+Info">Copyright Info</h2>
<dl class="rdoc-list note-list"><dt>Author
<dd>
<p>Akira Yamada &lt;akira@ruby-lang.org&gt;</p>
</dd><dt>Documentation
<dd>
<p>Akira Yamada &lt;akira@ruby-lang.org&gt; Dmitry V. Sabanin &lt;sdmitry@lrn.ru&gt; Vincent Batts &lt;vbatts@hashbangbash.com&gt;</p>
</dd><dt>License
<dd>
<p>Copyright © 2001 akira yamada &lt;akira@ruby-lang.org&gt; You can redistribute it and/or modify it under the same term as Ruby.</p>
</dd></dl>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="URI/RFC2396_REGEXP.html">URI::REGEXP</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="URI/RFC2396_REGEXP.html">URI::RFC2396_REGEXP</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="URI/Schemes.html">URI::Schemes</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/BadURIError.html">URI::BadURIError</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/Error.html">URI::Error</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/FTP.html">URI::FTP</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/File.html">URI::File</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/Generic.html">URI::Generic</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/HTTP.html">URI::HTTP</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/HTTPS.html">URI::HTTPS</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/InvalidComponentError.html">URI::InvalidComponentError</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/InvalidURIError.html">URI::InvalidURIError</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/LDAP.html">URI::LDAP</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/LDAPS.html">URI::LDAPS</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/MailTo.html">URI::MailTo</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/RFC2396_Parser.html">URI::Parser</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/RFC2396_Parser.html">URI::RFC2396_Parser</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/WS.html">URI::WS</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="URI/WSS.html">URI::WSS</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-decode_uri_component">decode_uri_component</a>,
              </li>
            
              
              <li>
                <a href="#method-c-decode_www_form">decode_www_form</a>,
              </li>
            
              
              <li>
                <a href="#method-c-decode_www_form_component">decode_www_form_component</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-encode_uri_component">encode_uri_component</a>,
              </li>
            
              
              <li>
                <a href="#method-c-encode_www_form">encode_www_form</a>,
              </li>
            
              
              <li>
                <a href="#method-c-encode_www_form_component">encode_www_form_component</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-for">for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>J</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-join">join</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-open">open</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-parse">parse</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-register_scheme">register_scheme</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-scheme_list">scheme_list</a>,
              </li>
            
              
              <li>
                <a href="#method-c-split">split</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="URI/RFC2396_REGEXP.html">
              URI::RFC2396_REGEXP
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    
      <!-- Section constants -->
      <h2 class="sectiontitle">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">DEFAULT_PARSER</td>
            <td>=</td>
            <td class="attr-value">Parser.new</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p><a href="URI/RFC2396_Parser.html#method-c-new"><code>URI::Parser.new</code></a></p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">Parser</td>
            <td>=</td>
            <td class="attr-value">RFC2396_Parser</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">REGEXP</td>
            <td>=</td>
            <td class="attr-value">RFC2396_REGEXP</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">RFC3986_PARSER</td>
            <td>=</td>
            <td class="attr-value">RFC3986_Parser.new</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">TBLENCURICOMP_</td>
            <td>=</td>
            <td class="attr-value">TBLENCWWWCOMP_.dup.freeze</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-decode_uri_component">
            
              <b>decode_uri_component</b>(str, enc=Encoding::UTF_8)
            
            <a href="../classes/URI.html#method-c-decode_uri_component" name="method-c-decode_uri_component" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="URI.html#method-c-decode_www_form_component"><code>URI.decode_www_form_component</code></a>, except that <code>&#39;+&#39;</code> is preserved.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-decode_uri_component_source')" id="l_method-c-decode_uri_component_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L379" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-decode_uri_component_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 379</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">decode_uri_component</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
  <span class="ruby-identifier">_decode_uri_component</span>(<span class="ruby-regexp">/%\h\h/</span>, <span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-decode_www_form">
            
              <b>decode_www_form</b>(str, enc=Encoding::UTF_8, separator: &#39;&amp;&#39;, use__charset_: false, isindex: false)
            
            <a href="../classes/URI.html#method-c-decode_www_form" name="method-c-decode_www_form" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns name/value pairs derived from the given string <code>str</code>, which must be an ASCII string.</p>

<p>The method may be used to decode the body of <a href="Net/HTTPResponse.html"><code>Net::HTTPResponse</code></a> object <code>res</code> for which <code>res[&#39;Content-Type&#39;]</code> is <code>&#39;application/x-www-form-urlencoded&#39;</code>.</p>

<p>The returned data is an array of 2-element subarrays; each subarray is a name/value pair (both are strings). Each returned string has encoding <code>enc</code>, and has had invalid characters removed via <a href="String.html#method-i-scrub"><code>String#scrub</code></a>.</p>

<p>A simple example:</p>

<pre><code>URI.decode_www_form(&#39;foo=0&amp;bar=1&amp;baz&#39;)
# =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;&quot;]]
</code></pre>

<p>The returned strings have certain conversions, similar to those performed in <a href="URI.html#method-c-decode_www_form_component"><code>URI.decode_www_form_component</code></a>:</p>

<pre><code>URI.decode_www_form(&#39;f%23o=%2F&amp;b-r=%24&amp;b+z=%40&#39;)
# =&gt; [[&quot;f#o&quot;, &quot;/&quot;], [&quot;b-r&quot;, &quot;$&quot;], [&quot;b z&quot;, &quot;@&quot;]]
</code></pre>

<p>The given string may contain consecutive separators:</p>

<pre><code>URI.decode_www_form(&#39;foo=0&amp;&amp;bar=1&amp;&amp;baz=2&#39;)
# =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;&quot;, &quot;&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;&quot;, &quot;&quot;], [&quot;baz&quot;, &quot;2&quot;]]
</code></pre>

<p>A different separator may be specified:</p>

<pre><code>URI.decode_www_form(&#39;foo=0--bar=1--baz&#39;, separator: &#39;--&#39;)
# =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;&quot;]]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-decode_www_form_source')" id="l_method-c-decode_www_form_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L554" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-decode_www_form_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 554</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">decode_www_form</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>, <span class="ruby-value">separator:</span> <span class="ruby-string">&#39;&amp;&#39;</span>, <span class="ruby-value">use__charset_:</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">isindex:</span> <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;the input of #{self.name}.#{__method__} must be ASCII only string&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">ascii_only?</span>
  <span class="ruby-identifier">ary</span> = []
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">ary</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">enc</span> = <span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">enc</span>)
  <span class="ruby-identifier">str</span>.<span class="ruby-identifier">b</span>.<span class="ruby-identifier">each_line</span>(<span class="ruby-identifier">separator</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">string</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">string</span>.<span class="ruby-identifier">chomp!</span>(<span class="ruby-identifier">separator</span>)
    <span class="ruby-identifier">key</span>, <span class="ruby-identifier">sep</span>, <span class="ruby-identifier">val</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">partition</span>(<span class="ruby-string">&#39;=&#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">isindex</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">sep</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">val</span> = <span class="ruby-identifier">key</span>
        <span class="ruby-identifier">key</span> = <span class="ruby-string">+&#39;&#39;</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">isindex</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">use__charset_</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;_charset_&#39;</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">e</span> = <span class="ruby-identifier">get_encoding</span>(<span class="ruby-identifier">val</span>)
      <span class="ruby-identifier">enc</span> = <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">use__charset_</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">key</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/\+|%\h\h/</span>, <span class="ruby-constant">TBLDECWWWCOMP_</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>
      <span class="ruby-identifier">val</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp">/\+|%\h\h/</span>, <span class="ruby-constant">TBLDECWWWCOMP_</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">val</span> = <span class="ruby-string">+&#39;&#39;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">ary</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">k</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">enc</span>)
    <span class="ruby-identifier">k</span>.<span class="ruby-identifier">scrub!</span>
    <span class="ruby-identifier">v</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-identifier">enc</span>)
    <span class="ruby-identifier">v</span>.<span class="ruby-identifier">scrub!</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">ary</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-decode_www_form_component">
            
              <b>decode_www_form_component</b>(str, enc=Encoding::UTF_8)
            
            <a href="../classes/URI.html#method-c-decode_www_form_component" name="method-c-decode_www_form_component" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a string decoded from the given URL-encoded string <code>str</code>.</p>

<p>The given string is first encoded as Encoding::ASCII-8BIT (using <a href="String.html#method-i-b"><code>String#b</code></a>), then decoded (as below), and finally force-encoded to the given encoding <code>enc</code>.</p>

<p>The returned string:</p>
<ul><li>
<p>Preserves:</p>
<ul><li>
<p>Characters <code>&#39;*&#39;</code>, <code>&#39;.&#39;</code>, <code>&#39;-&#39;</code>, and <code>&#39;_&#39;</code>.</p>
</li><li>
<p>Character in ranges <code>&#39;a&#39;..&#39;z&#39;</code>, <code>&#39;A&#39;..&#39;Z&#39;</code>, and <code>&#39;0&#39;..&#39;9&#39;</code>.</p>
</li></ul>

<p>Example:</p>

<pre><code>URI.decode_www_form_component(&#39;*.-_azAZ09&#39;)
# =&gt; &quot;*.-_azAZ09&quot;
</code></pre>
</li><li>
<p>Converts:</p>
<ul><li>
<p>Character <code>&#39;+&#39;</code> to character <code>&#39; &#39;</code>.</p>
</li><li>
<p>Each “percent notation” to an ASCII character.</p>
</li></ul>

<p>Example:</p>

<pre><code>URI.decode_www_form_component(&#39;Here+are+some+punctuation+characters%3A+%2C%3B%3F%3A&#39;)
# =&gt; &quot;Here are some punctuation characters: ,;?:&quot;
</code></pre>
</li></ul>

<p>Related: <a href="URI.html#method-c-decode_uri_component"><code>URI.decode_uri_component</code></a> (preserves <code>&#39;+&#39;</code>).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-decode_www_form_component_source')" id="l_method-c-decode_www_form_component_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L368" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-decode_www_form_component_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 368</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">decode_www_form_component</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
  <span class="ruby-identifier">_decode_uri_component</span>(<span class="ruby-regexp">/\+|%\h\h/</span>, <span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-encode_uri_component">
            
              <b>encode_uri_component</b>(str, enc=nil)
            
            <a href="../classes/URI.html#method-c-encode_uri_component" name="method-c-encode_uri_component" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Like <a href="URI.html#method-c-encode_www_form_component"><code>URI.encode_www_form_component</code></a>, except that <code>&#39; &#39;</code> (space) is encoded as <code>&#39;%20&#39;</code> (instead of <code>&#39;+&#39;</code>).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-encode_uri_component_source')" id="l_method-c-encode_uri_component_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L374" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-encode_uri_component_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 374</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">encode_uri_component</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">_encode_uri_component</span>(<span class="ruby-regexp">/[^*\-.0-9A-Z_a-z]/</span>, <span class="ruby-constant">TBLENCURICOMP_</span>, <span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-encode_www_form">
            
              <b>encode_www_form</b>(enum, enc=nil)
            
            <a href="../classes/URI.html#method-c-encode_www_form" name="method-c-encode_www_form" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a URL-encoded string derived from the given <a href="Enumerable.html#module-Enumerable-label-Enumerable+in+Ruby+Classes">Enumerable</a> <code>enum</code>.</p>

<p>The result is suitable for use as form data for an HTTP request whose <code>Content-Type</code> is <code>&#39;application/x-www-form-urlencoded&#39;</code>.</p>

<p>The returned string consists of the elements of <code>enum</code>, each converted to one or more URL-encoded strings, and all joined with character <code>&#39;&amp;&#39;</code>.</p>

<p>Simple examples:</p>

<pre><code>URI.encode_www_form([[&#39;foo&#39;, 0], [&#39;bar&#39;, 1], [&#39;baz&#39;, 2]])
# =&gt; &quot;foo=0&amp;bar=1&amp;baz=2&quot;
URI.encode_www_form({foo: 0, bar: 1, baz: 2})
# =&gt; &quot;foo=0&amp;bar=1&amp;baz=2&quot;
</code></pre>

<p>The returned string is formed using method <a href="URI.html#method-c-encode_www_form_component"><code>URI.encode_www_form_component</code></a>, which converts certain characters:</p>

<pre><code>URI.encode_www_form(&#39;f#o&#39;: &#39;/&#39;, &#39;b-r&#39;: &#39;$&#39;, &#39;b z&#39;: &#39;@&#39;)
# =&gt; &quot;f%23o=%2F&amp;b-r=%24&amp;b+z=%40&quot;
</code></pre>

<p>When <code>enum</code> is Array-like, each element <code>ele</code> is converted to a field:</p>
<ul><li>
<p>If <code>ele</code> is an array of two or more elements, the field is formed from its first two elements (and any additional elements are ignored):</p>

<pre><code>name = URI.encode_www_form_component(ele[0], enc)
value = URI.encode_www_form_component(ele[1], enc)
&quot;#{name}=#{value}&quot;
</code></pre>

<p>Examples:</p>

<pre><code>URI.encode_www_form([%w[foo bar], %w[baz bat bah]])
# =&gt; &quot;foo=bar&amp;baz=bat&quot;
URI.encode_www_form([[&#39;foo&#39;, 0], [&#39;bar&#39;, :baz, &#39;bat&#39;]])
# =&gt; &quot;foo=0&amp;bar=baz&quot;
</code></pre>
</li><li>
<p>If <code>ele</code> is an array of one element, the field is formed from <code>ele[0]</code>:</p>

<pre><code>URI.encode_www_form_component(ele[0])
</code></pre>

<p>Example:</p>

<pre><code>URI.encode_www_form([[&#39;foo&#39;], [:bar], [0]])
# =&gt; &quot;foo&amp;bar&amp;0&quot;
</code></pre>
</li><li>
<p>Otherwise the field is formed from <code>ele</code>:</p>

<pre><code>URI.encode_www_form_component(ele)
</code></pre>

<p>Example:</p>

<pre><code>URI.encode_www_form([&#39;foo&#39;, :bar, 0])
# =&gt; &quot;foo&amp;bar&amp;0&quot;
</code></pre>
</li></ul>

<p>The elements of an Array-like <code>enum</code> may be mixture:</p>

<pre><code>URI.encode_www_form([[&#39;foo&#39;, 0], [&#39;bar&#39;, 1, 2], [&#39;baz&#39;], :bat])
# =&gt; &quot;foo=0&amp;bar=1&amp;baz&amp;bat&quot;
</code></pre>

<p>When <code>enum</code> is Hash-like, each <code>key</code>/<code>value</code> pair is converted to one or more fields:</p>
<ul><li>
<p>If <code>value</code> is <a href="../files/ruby/doc/implicit_conversion_rdoc.html#label-Array-Convertible+Objects">Array-convertible</a>, each element <code>ele</code> in <code>value</code> is paired with <code>key</code> to form a field:</p>

<pre><code>name = URI.encode_www_form_component(key, enc)
value = URI.encode_www_form_component(ele, enc)
&quot;#{name}=#{value}&quot;
</code></pre>

<p>Example:</p>

<pre><code>URI.encode_www_form({foo: [:bar, 1], baz: [:bat, :bam, 2]})
# =&gt; &quot;foo=bar&amp;foo=1&amp;baz=bat&amp;baz=bam&amp;baz=2&quot;
</code></pre>
</li><li>
<p>Otherwise, <code>key</code> and <code>value</code> are paired to form a field:</p>

<pre><code>name = URI.encode_www_form_component(key, enc)
value = URI.encode_www_form_component(value, enc)
&quot;#{name}=#{value}&quot;
</code></pre>

<p>Example:</p>

<pre><code>URI.encode_www_form({foo: 0, bar: 1, baz: 2})
# =&gt; &quot;foo=0&amp;bar=1&amp;baz=2&quot;
</code></pre>
</li></ul>

<p>The elements of a Hash-like <code>enum</code> may be mixture:</p>

<pre><code>URI.encode_www_form({foo: [0, 1], bar: 2})
# =&gt; &quot;foo=0&amp;foo=1&amp;bar=2&quot;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-encode_www_form_source')" id="l_method-c-encode_www_form_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L501" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-encode_www_form_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 501</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">encode_www_form</span>(<span class="ruby-identifier">enum</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">enum</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">enc</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_ary</span>)
      <span class="ruby-identifier">v</span>.<span class="ruby-identifier">to_ary</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">w</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">str</span> = <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">enc</span>)
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;=&#39;</span>
          <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">w</span>, <span class="ruby-identifier">enc</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;&amp;&#39;</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">str</span> = <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">k</span>, <span class="ruby-identifier">enc</span>)
      <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&#39;=&#39;</span>
      <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">encode_www_form_component</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">enc</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;&amp;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-encode_www_form_component">
            
              <b>encode_www_form_component</b>(str, enc=nil)
            
            <a href="../classes/URI.html#method-c-encode_www_form_component" name="method-c-encode_www_form_component" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a URL-encoded string derived from the given string <code>str</code>.</p>

<p>The returned string:</p>
<ul><li>
<p>Preserves:</p>
<ul><li>
<p>Characters <code>&#39;*&#39;</code>, <code>&#39;.&#39;</code>, <code>&#39;-&#39;</code>, and <code>&#39;_&#39;</code>.</p>
</li><li>
<p>Character in ranges <code>&#39;a&#39;..&#39;z&#39;</code>, <code>&#39;A&#39;..&#39;Z&#39;</code>, and <code>&#39;0&#39;..&#39;9&#39;</code>.</p>
</li></ul>

<p>Example:</p>

<pre><code>URI.encode_www_form_component(&#39;*.-_azAZ09&#39;)
# =&gt; &quot;*.-_azAZ09&quot;
</code></pre>
</li><li>
<p>Converts:</p>
<ul><li>
<p>Character <code>&#39; &#39;</code> to character <code>&#39;+&#39;</code>.</p>
</li><li>
<p>Any other character to “percent notation”; the percent notation for character <em>c</em> is <code>&#39;%%%X&#39; % c.ord</code>.</p>
</li></ul>

<p>Example:</p>

<pre><code>URI.encode_www_form_component(&#39;Here are some punctuation characters: ,;?:&#39;)
# =&gt; &quot;Here+are+some+punctuation+characters%3A+%2C%3B%3F%3A&quot;
</code></pre>
</li></ul>

<p>Encoding:</p>
<ul><li>
<p>If <code>str</code> has encoding Encoding::ASCII_8BIT, argument <code>enc</code> is ignored.</p>
</li><li>
<p>Otherwise <code>str</code> is converted first to Encoding::UTF_8 (with suitable character replacements), and then to encoding <code>enc</code>.</p>
</li></ul>

<p>In either case, the returned string has forced encoding Encoding::US_ASCII.</p>

<p>Related: <a href="URI.html#method-c-encode_uri_component"><code>URI.encode_uri_component</code></a> (encodes <code>&#39; &#39;</code> as <code>&#39;%20&#39;</code>).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-encode_www_form_component_source')" id="l_method-c-encode_www_form_component_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L335" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-encode_www_form_component_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 335</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">encode_www_form_component</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">_encode_uri_component</span>(<span class="ruby-regexp">/[^*\-.0-9A-Z_a-z]/</span>, <span class="ruby-constant">TBLENCWWWCOMP_</span>, <span class="ruby-identifier">str</span>, <span class="ruby-identifier">enc</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-for">
            
              <b>for</b>(scheme, *arguments, default: Generic)
            
            <a href="../classes/URI.html#method-c-for" name="method-c-for" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new object constructed from the given <code>scheme</code>, <code>arguments</code>, and <code>default</code>:</p>
<ul><li>
<p>The new object is an instance of <code>URI.scheme_list[scheme.upcase]</code>.</p>
</li><li>
<p>The object is initialized by calling the class initializer using <code>scheme</code> and <code>arguments</code>. See <a href="URI/Generic.html#method-c-new"><code>URI::Generic.new</code></a>.</p>
</li></ul>

<p>Examples:</p>

<pre><code>values = [&#39;john.doe&#39;, &#39;www.example.com&#39;, &#39;123&#39;, nil, &#39;/forum/questions/&#39;, nil, &#39;tag=networking&amp;order=newest&#39;, &#39;top&#39;]
URI.for(&#39;https&#39;, *values)
# =&gt; #&lt;URI::HTTPS https://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&gt;
URI.for(&#39;foo&#39;, *values, default: URI::HTTP)
# =&gt; #&lt;URI::HTTP foo://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-for_source')" id="l_method-c-for_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L123" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-keyword">for</span>(<span class="ruby-identifier ruby-title">scheme</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>, <span class="ruby-value">default:</span> <span class="ruby-constant">Generic</span>)
  <span class="ruby-identifier">const_name</span> = <span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>

  <span class="ruby-identifier">uri_class</span> = <span class="ruby-constant">INITIAL_SCHEMES</span>[<span class="ruby-identifier">const_name</span>]
  <span class="ruby-identifier">uri_class</span> <span class="ruby-operator">||=</span> <span class="ruby-keyword">if</span> <span class="ruby-regexp">/\A[A-Z]\w*\z/</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-identifier">const_name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Schemes</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">const_name</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-constant">Schemes</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">const_name</span>, <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">uri_class</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">default</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">uri_class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">scheme</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">arguments</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-join">
            
              <b>join</b>(*str)
            
            <a href="../classes/URI.html#method-c-join" name="method-c-join" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Merges the given <a href="URI.html"><code>URI</code></a> strings <code>str</code> per <a href="https://www.rfc-editor.org/rfc/rfc2396.html">RFC 2396</a>.</p>

<p>Each string in <code>str</code> is converted to an <a href="https://www.rfc-editor.org/rfc/rfc3986.html">RFC3986 URI</a> before being merged.</p>

<p>Examples:</p>

<pre><code>URI.join(&quot;http://example.com/&quot;,&quot;main.rbx&quot;)
# =&gt; #&lt;URI::HTTP http://example.com/main.rbx&gt;

URI.join(&#39;http://example.com&#39;, &#39;foo&#39;)
# =&gt; #&lt;URI::HTTP http://example.com/foo&gt;

URI.join(&#39;http://example.com&#39;, &#39;/foo&#39;, &#39;/bar&#39;)
# =&gt; #&lt;URI::HTTP http://example.com/bar&gt;

URI.join(&#39;http://example.com&#39;, &#39;/foo&#39;, &#39;bar&#39;)
# =&gt; #&lt;URI::HTTP http://example.com/bar&gt;

URI.join(&#39;http://example.com&#39;, &#39;/foo/&#39;, &#39;bar&#39;)
# =&gt; #&lt;URI::HTTP http://example.com/foo/bar&gt;
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-join_source')" id="l_method-c-join_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L211" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-join_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">str</span>)
  <span class="ruby-constant">RFC3986_PARSER</span>.<span class="ruby-identifier">join</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">str</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-open">
            
              <b>open</b>(name, *rest, &amp;block)
            
            <a href="../classes/URI.html#method-c-open" name="method-c-open" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Allows the opening of various resources including URIs.</p>

<p>If the first argument responds to the ‘open’ method, ‘open’ is called on it with the rest of the arguments.</p>

<p>If the first argument is a string that begins with <code>(protocol)://</code>, it is parsed by <a href="URI.html#method-c-parse"><code>URI.parse</code></a>.  If the parsed object responds to the ‘open’ method, ‘open’ is called on it with the rest of the arguments.</p>

<p>Otherwise, <a href="Kernel.html#method-i-open"><code>Kernel#open</code></a> is called.</p>

<p><a href="OpenURI/OpenRead.html#method-i-open"><code>OpenURI::OpenRead#open</code></a> provides <a href="OpenURI/OpenRead.html#method-i-open"><code>URI::HTTP#open</code></a>, <a href="OpenURI/OpenRead.html#method-i-open"><code>URI::HTTPS#open</code></a> and <a href="OpenURI/OpenRead.html#method-i-open"><code>URI::FTP#open</code></a>, <a href="Kernel.html#method-i-open"><code>Kernel#open</code></a>.</p>

<p>We can accept URIs and strings that begin with http://, https:// and ftp://. In these cases, the opened file object is extended by <a href="OpenURI/Meta.html"><code>OpenURI::Meta</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-open_source')" id="l_method-c-open_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/open-uri.rb#L23" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-open_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/open-uri.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:open</span>)
    <span class="ruby-identifier">name</span>.<span class="ruby-identifier">open</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:to_str</span>) <span class="ruby-operator">&amp;&amp;</span>
        <span class="ruby-regexp">%r{\A[A-Za-z][A-Za-z0-9+\-\.]*://}</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span>
        (<span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">name</span>)).<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:open</span>)
    <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">open</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-parse">
            
              <b>parse</b>(uri)
            
            <a href="../classes/URI.html#method-c-parse" name="method-c-parse" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a new URI object constructed from the given string <code>uri</code>:</p>

<pre><code>URI.parse(&#39;https://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&#39;)
# =&gt; #&lt;URI::HTTPS https://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&gt;
URI.parse(&#39;http://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&#39;)
# =&gt; #&lt;URI::HTTP http://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&gt;
</code></pre>

<p>It’s recommended to first ::escape string <code>uri</code> if it may contain invalid <a href="URI.html"><code>URI</code></a> characters.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-parse_source')" id="l_method-c-parse_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L184" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-parse_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 184</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">parse</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-constant">RFC3986_PARSER</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-register_scheme">
            
              <b>register_scheme</b>(scheme, klass)
            
            <a href="../classes/URI.html#method-c-register_scheme" name="method-c-register_scheme" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Registers the given <code>klass</code> as the class to be instantiated when parsing a URI with the given <code>scheme</code>:</p>

<pre><code>URI.register_scheme(&#39;MS_SEARCH&#39;, URI::Generic) # =&gt; URI::Generic
URI.scheme_list[&#39;MS_SEARCH&#39;]                   # =&gt; URI::Generic
</code></pre>

<p>Note that after calling <a href="String.html#method-i-upcase"><code>String#upcase</code></a> on <code>scheme</code>, it must be a valid constant name.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-register_scheme_source')" id="l_method-c-register_scheme_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L79" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-register_scheme_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">register_scheme</span>(<span class="ruby-identifier">scheme</span>, <span class="ruby-identifier">klass</span>)
  <span class="ruby-constant">Schemes</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">scheme</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>, <span class="ruby-identifier">klass</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-scheme_list">
            
              <b>scheme_list</b>()
            
            <a href="../classes/URI.html#method-c-scheme_list" name="method-c-scheme_list" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a hash of the defined schemes:</p>

<pre><code>URI.scheme_list
# =&gt;
{&quot;MAILTO&quot;=&gt;URI::MailTo,
 &quot;LDAPS&quot;=&gt;URI::LDAPS,
 &quot;WS&quot;=&gt;URI::WS,
 &quot;HTTP&quot;=&gt;URI::HTTP,
 &quot;HTTPS&quot;=&gt;URI::HTTPS,
 &quot;LDAP&quot;=&gt;URI::LDAP,
 &quot;FILE&quot;=&gt;URI::File,
 &quot;FTP&quot;=&gt;URI::FTP}
</code></pre>

<p>Related: <a href="URI.html#method-c-register_scheme"><code>URI.register_scheme</code></a>.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-scheme_list_source')" id="l_method-c-scheme_list_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L97" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-scheme_list_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">scheme_list</span>
  <span class="ruby-constant">Schemes</span>.<span class="ruby-identifier">constants</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
    [<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>, <span class="ruby-constant">Schemes</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">name</span>)]
  }.<span class="ruby-identifier">to_h</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-split">
            
              <b>split</b>(uri)
            
            <a href="../classes/URI.html#method-c-split" name="method-c-split" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a 9-element array representing the parts of the URI formed from the string <code>uri</code>; each array element is a string or <code>nil</code>:</p>

<pre><code>names = %w[scheme userinfo host port registry path opaque query fragment]
values = URI.split(&#39;https://john.doe@www.example.com:123/forum/questions/?tag=networking&amp;order=newest#top&#39;)
names.zip(values)
# =&gt;
[[&quot;scheme&quot;, &quot;https&quot;],
 [&quot;userinfo&quot;, &quot;john.doe&quot;],
 [&quot;host&quot;, &quot;www.example.com&quot;],
 [&quot;port&quot;, &quot;123&quot;],
 [&quot;registry&quot;, nil],
 [&quot;path&quot;, &quot;/forum/questions/&quot;],
 [&quot;opaque&quot;, nil],
 [&quot;query&quot;, &quot;tag=networking&amp;order=newest&quot;],
 [&quot;fragment&quot;, &quot;top&quot;]]
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-split_source')" id="l_method-c-split_source">show</a>
                
                  | <a href="https://github.com/ruby/ruby/blob/49dc0a12f185d791f1826396035b54cf3fb1771e/lib/uri/common.rb#L170" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-split_source" class="dyn-source">
                <pre><span class="ruby-comment"># File ruby/lib/uri/common.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">split</span>(<span class="ruby-identifier">uri</span>)
  <span class="ruby-constant">RFC3986_PARSER</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">uri</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
      
    
    
  
</div>

    </main>
  </body>
</html>
