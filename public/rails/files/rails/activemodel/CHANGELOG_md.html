<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script type="text/javascript" charset="utf-8">
document.addEventListener("turbolinks:load", function() {
  // Only initialize panel if not yet initialized
  if(!$('#panel .tree ul li').length) {
    $('#links').hide();
    var panel = new Searchdoc.Panel($('#panel'), search_data, tree, '/');
    $('#search').focus();
    var s = window.location.search.match(/\?q=([^&]+)/);
    if (s) {
      s = decodeURIComponent(s[1]).replace(/\+/g, ' ');
      if (s.length > 0) {
        $('#search').val(s);
        panel.search(s, true);
      }
    }
    panel.toggle([]);
  }
})
</script>


</head>

<body>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<div class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</div>


    <div class="banner">
        
        <h2>
            CHANGELOG.md
        </h2>
        <ul class="files">
            
            <li>
                rails/activemodel/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/46274982bb14fa0ba0a8d22c80be8d7154385b96/activemodel/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2022-04-14 01:17:56 +0300</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+6.1.5+-28March+09-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.5 (March 09, 2022)</h2>
<ul><li>
<p>Clear secure password cache if password is set to <code>nil</code></p>

<p>Before:</p>

<p>user.password = &#39;something&#39;  user.password = nil</p>

<p>user.password # =&gt; &#39;something&#39;</p>

<p>Now:</p>

<p>user.password = &#39;something&#39;  user.password = nil</p>

<p>user.password # =&gt; nil</p>

<p><em>Markus Doits</em></p>
</li><li>
<p>Fix delegation in <code>ActiveModel::Type::Registry#lookup</code> and <code>ActiveModel::Type.lookup</code></p>

<p>Passing a last positional argument <code>{}</code> would be incorrectly considered as keyword argument.</p>

<p><em>Benoit Daloze</em></p>
</li><li>
<p>Fix <code>to_json</code> after <code>changes_applied</code> for <code>ActiveModel::Dirty</code> object.</p>

<p><em>Ryuta Kamizono</em></p>
</li></ul>

<h2 id="label-Rails+6.1.4.7+-28March+08-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.7 (March 08, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.6+-28February+11-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.6 (February 11, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.5+-28February+11-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.5 (February 11, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.4+-28December+15-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.4 (December 15, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.3+-28December+14-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.3 (December 14, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.2+-28December+14-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.2 (December 14, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.1+-28August+19-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.1 (August 19, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4+-28June+24-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4 (June 24, 2021)</h2>
<ul><li>
<p>Fix <code>to_json</code> for <code>ActiveModel::Dirty</code> object.</p>

<p>Exclude <code>mutations_from_database</code> attribute from json as it lead to recursion.</p>

<p><em>Anil Maurya</em></p>
</li></ul>

<h2 id="label-Rails+6.1.3.2+-28May+05-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.3.2 (May 05, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.3.1+-28March+26-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.3.1 (March 26, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.3+-28February+17-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.3 (February 17, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.2.1+-28February+10-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.2.1 (February 10, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.2+-28February+09-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.2 (February 09, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.1+-28January+07-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.1 (January 07, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.0+-28December+09-2C+2020-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.0 (December 09, 2020)</h2>
<ul><li>
<p>Pass in <code>base</code> instead of <code>base_class</code> to Error.human_attribute_name</p>

<p>This is useful in cases where the <code>human_attribute_name</code> method depends on other attributes&#39; values of the class under validation to derive what the attribute name should be.</p>

<p><em>Filipe Sabella</em></p>
</li><li>
<p>Deprecate marshalling load from legacy attributes format.</p>

<p><em>Ryuta Kamizono</em></p>
</li><li>
<p><code>*_previously_changed?</code> accepts <code>:from</code> and <code>:to</code> keyword arguments like <code>*_changed?</code>.</p>

<pre><code>topic.update!(status: :archived)
topic.status_previously_changed?(from: &quot;active&quot;, to: &quot;archived&quot;)
# =&gt; true
</code></pre>

<p><em>George Claghorn</em></p>
</li><li>
<p>Raise FrozenError when trying to write attributes that aren&#39;t backed by the database on an object that is frozen:</p>

<pre><code>class Animal
  include ActiveModel::Attributes
  attribute :age
end

animal = Animal.new
animal.freeze
animal.age = 25 # =&gt; FrozenError, &quot;can&#39;t modify a frozen Animal&quot;
</code></pre>

<p><em>Josh Brody</em></p>
</li><li>
<p>Add <code>*_previously_was</code> attribute methods when dirty tracking. Example:</p>

<pre><code>pirate.update(catchphrase: &quot;Ahoy!&quot;)
pirate.previous_changes[&quot;catchphrase&quot;] # =&gt; [&quot;Thar She Blows!&quot;, &quot;Ahoy!&quot;]
pirate.catchphrase_previously_was # =&gt; &quot;Thar She Blows!&quot;
</code></pre>

<p><em>DHH</em></p>
</li><li>
<p>Encapsulate each validation error as an Error object.</p>

<p>The <code>ActiveModel</code>’s <code>errors</code> collection is now an array of these Error objects, instead of messages/details hash.</p>

<p>For each of these <code>Error</code> object, its <code>message</code> and <code>full_message</code> methods are for generating error messages. Its <code>details</code> method would return error’s extra parameters, found in the original <code>details</code> hash.</p>

<p>The change tries its best at maintaining backward compatibility, however some edge cases won’t be covered, like <code>errors#first</code> will return <code>ActiveModel::Error</code> and manipulating <code>errors.messages</code> and <code>errors.details</code> hashes directly will have no effect. Moving forward, please convert those direct manipulations to use provided API methods instead. Please note that <code>errors#add</code> now accepts <code>options</code> as keyword arguments instead of <code>Hash</code> which introduced a change in Ruby 3 to [keyword <a href="kwargs-ann">arguments]</a>.</p>

<p>The list of deprecated methods and their planned future behavioral changes at the next major release are:</p>
<ul><li>
<p><code>errors#slice!</code> will be removed.</p>
</li><li>
<p><code>errors#each</code> with the <code>key, value</code> two-arguments block will stop working, while the <code>error</code> single-argument block would return <code>Error</code> object.</p>
</li><li>
<p><code>errors#values</code> will be removed.</p>
</li><li>
<p><code>errors#keys</code> will be removed.</p>
</li><li>
<p><code>errors#to_xml</code> will be removed.</p>
</li><li>
<p><code>errors#to_h</code> will be removed, and can be replaced with <code>errors#to_hash</code>.</p>
</li><li>
<p>Manipulating <code>errors</code> itself as a hash will have no effect (e.g. <code>errors[:foo] = &#39;bar&#39;</code>).</p>
</li><li>
<p>Manipulating the hash returned by <code>errors#messages</code> (e.g. <code>errors.messages[:foo] = &#39;bar&#39;</code>) will have no effect.</p>
</li><li>
<p>Manipulating the hash returned by <code>errors#details</code> (e.g. <code>errors.details[:foo].clear</code>) will have no effect.</p>
</li></ul>

<p><em>lulalala</em></p>
</li></ul>

<p>Please check <a href="https://github_com/rails/rails/blob/6-0-stable/activemodel/CHANGELOG_md.html">6-0-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
