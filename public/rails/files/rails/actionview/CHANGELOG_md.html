<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>

<meta name="data-rel-prefix" content="/">
<meta name="data-tree-keys" content='[]'>

</head>

<body>
    <a class="sr-only sr-only-focusable" href="#content" data-turbolinks="false">Skip to Content</a>
    <a class="sr-only sr-only-focusable" href="#search" data-turbolinks="false">Skip to Search</a>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<nav class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search (/) for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</nav>


    <div class="banner">
        
        <h2>
            CHANGELOG.md
        </h2>
        <ul class="files">
            
            <li>
                rails/actionview/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/9650d254d4539ed8201394bc9f639e78bac24b20/actionview/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2022-09-06 00:52:05 +0300</li>
        </ul>
    </div>

    <main id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+6.1.6.1+-28July+12-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.6.1 (July 12, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.5.1+-28April+26-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.5.1 (April 26, 2022)</h2>
<ul><li>
<p>Fix and add protections for XSS in <code>ActionView::Helpers</code> and <code>ERB::Util</code>.</p>

<p>Escape dangerous characters in names of tags and names of attributes in the tag helpers, following the XML specification. Rename the option <code>:escape_attributes</code> to <code>:escape</code>, to simplify by applying the option to the whole tag.</p>

<p><em>Álvaro Martín Fraguas</em></p>
</li></ul>

<h2 id="label-Rails+6.1.5+-28March+09-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.5 (March 09, 2022)</h2>
<ul><li>
<p><code>preload_link_tag</code> properly inserts <code>as</code> attributes for files with <code>image</code> MIME types, such as JPG or SVG.</p>

<p><em>Nate Berkopec</em></p>
</li><li>
<p>Add <code>autocomplete=&quot;off&quot;</code> to all generated hidden fields.</p>

<p>Fixes #42610.</p>

<p><em>Ryan Baumann</em></p>
</li><li>
<p>Fix <code>current_page?</code> when URL has trailing slash.</p>

<p>This fixes the <code>current_page?</code> helper when the given URL has a trailing slash, and is an absolute URL or also has query params.</p>

<p>Fixes #33956.</p>

<p><em>Jonathan Hefner</em></p>
</li></ul>

<h2 id="label-Rails+6.1.4.7+-28March+08-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.7 (March 08, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.6+-28February+11-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.6 (February 11, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.5+-28February+11-2C+2022-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.5 (February 11, 2022)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.4+-28December+15-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.4 (December 15, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.3+-28December+14-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.3 (December 14, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.2+-28December+14-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.2 (December 14, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4.1+-28August+19-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4.1 (August 19, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.4+-28June+24-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.4 (June 24, 2021)</h2>
<ul><li>
<p>The <code>translate</code> helper now passes <code>default</code> values that aren't translation keys through <code>I18n.translate</code> for interpolation.</p>

<p><em>Jonathan Hefner</em></p>
</li><li>
<p>Don't attach UJS form submission handlers to Turbo forms.</p>

<p><em>David Heinemeier Hansson</em></p>
</li><li>
<p>Allow both <code>current_page?(url_hash)</code> and <code>current_page?(**url_hash)</code> on Ruby 2.7.</p>

<p><em>Ryuta Kamizono</em></p>
</li></ul>

<h2 id="label-Rails+6.1.3.2+-28May+05-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.3.2 (May 05, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.3.1+-28March+26-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.3.1 (March 26, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.3+-28February+17-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.3 (February 17, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.2.1+-28February+10-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.2.1 (February 10, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.2+-28February+09-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.2 (February 09, 2021)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.1.1+-28January+07-2C+2021-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.1 (January 07, 2021)</h2>
<ul><li>
<p>Fix lazy translation in partial with block.</p>

<p><em>Marek Kasztelnik</em></p>
</li><li>
<p>Avoid extra <code>SELECT COUNT</code> queries when rendering Active Record collections.</p>

<p><em>aar0nr</em></p>
</li><li>
<p>Link preloading keep integrity hashes in the header.</p>

<p><em>Étienne Barrié</em></p>
</li><li>
<p>Add <code>config.action_view.preload_links_header</code> to allow disabling of the <code>Link</code> header being added by default when using <code>stylesheet_link_tag</code> and <code>javascript_include_tag</code>.</p>

<p><em>Andrew White</em></p>
</li><li>
<p>The <code>translate</code> helper now resolves <code>default</code> values when a <code>nil</code> key is specified, instead of always returning <code>nil</code>.</p>

<p><em>Jonathan Hefner</em></p>
</li></ul>

<h2 id="label-Rails+6.1.0+-28December+09-2C+2020-29"><a href="../../../classes/Rails.html"><code>Rails</code></a> 6.1.0 (December 09, 2020)</h2>
<ul><li>
<p>SanitizeHelper.sanitized_allowed_attributes and SanitizeHelper.sanitized_allowed_tags call safe_list_sanitizer's class method</p>

<p>Fixes #39586</p>

<p><em>Taufiq Muhammadi</em></p>
</li><li>
<p>Change form_with to generate non-remote forms by default.</p>

<p><code>form_with</code> would generate a remote form by default. This would confuse users because they were forced to handle remote requests.</p>

<p>All new 6.1 applications will generate non-remote forms by default. When upgrading a 6.0 application you can enable remote forms by default by setting <code>config.action_view.form_with_generates_remote_forms</code> to <code>true</code>.</p>

<p><em>Petrik de Heus</em></p>
</li><li>
<p>Yield translated strings to calls of <code>ActionView::FormBuilder#button</code> when a block is given.</p>

<p><em>Sean Doyle</em></p>
</li><li>
<p>Alias <code>ActionView::Helpers::Tags::Label::LabelBuilder#translation</code> to <code>#to_s</code> so that <code>form.label</code> calls can yield that value to their blocks.</p>

<p><em>Sean Doyle</em></p>
</li><li>
<p>Rename the new <code>TagHelper#class_names</code> method to <code>TagHelper#token_list</code>, and make the original available as an alias.</p>

<pre><code>token_list(&quot;foo&quot;, &quot;foo bar&quot;)
# =&gt; &quot;foo bar&quot;
</code></pre>

<p><em>Sean Doyle</em></p>
</li><li>
<p>ARIA <a href="../../../classes/Array.html"><code>Array</code></a> and <a href="../../../classes/Hash.html"><code>Hash</code></a> attributes are treated as space separated <code>DOMTokenList</code> values. This is useful when declaring lists of label text identifiers in <code>aria-labelledby</code> or <code>aria-describedby</code>.</p>

<pre><code>tag.input type: &#39;checkbox&#39;, name: &#39;published&#39;, aria: {
  invalid: @post.errors[:published].any?,
  labelledby: [&#39;published_context&#39;, &#39;published_label&#39;],
  describedby: { published_errors: @post.errors[:published].any? }
}
#=&gt; &lt;input
      type=&quot;checkbox&quot; name=&quot;published&quot; aria-invalid=&quot;true&quot;
      aria-labelledby=&quot;published_context published_label&quot;
      aria-describedby=&quot;published_errors&quot;
    &gt;
</code></pre>

<p><em>Sean Doyle</em></p>
</li><li>
<p>Remove deprecated <code>escape_whitelist</code> from <code>ActionView::Template::Handlers::ERB</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>find_all_anywhere</code> from <code>ActionView::Resolver</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>formats</code> from <code>ActionView::Template::HTML</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>formats</code> from <code>ActionView::Template::RawFile</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>formats</code> from <code>ActionView::Template::Text</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>find_file</code> from <code>ActionView::PathSet</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>rendered_format</code> from <code>ActionView::LookupContext</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>find_file</code> from <code>ActionView::ViewPaths</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Require that <code>ActionView::Base</code> subclasses implement <code>#compiled_method_container</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to pass an object that is not a <code>ActionView::LookupContext</code> as the first argument in <code>ActionView::Base#initialize</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>format</code> argument <code>ActionView::Base#initialize</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template#refresh</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template#original_encoding</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template#variants</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template#formats</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template#virtual_path=</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template#updated_at</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>updated_at</code> argument required on <code>ActionView::Template#initialize</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Make <code>locals</code> argument required on <code>ActionView::Template#initialize</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>ActionView::Template.finalize_compiled_template_methods</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>config.action_view.finalize_compiled_template_methods</code></p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to calling <code>ActionView::ViewPaths#with_fallback</code> with a block.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to passing absolute paths to <code>render template:</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to passing relative paths to <code>render file:</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove support to template handlers that don’t accept two arguments.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated pattern argument in <code>ActionView::Template::PathResolver</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to call private methods from object in some view helpers.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p><code>ActionView::Helpers::TranslationHelper#translate</code> accepts a block, yielding the translated text and the fully resolved translation key:</p>

<pre><code>&lt;%= translate(&quot;.relative_key&quot;) do |translation, resolved_key| %&gt;
  &lt;span title=&quot;&lt;%= resolved_key %&gt;&quot;&gt;&lt;%= translation %&gt;&lt;/span&gt;
&lt;% end %&gt;
</code></pre>

<p><em>Sean Doyle</em></p>
</li><li>
<p>Ensure cache fragment digests include all relevant template dependencies when fragments are contained in a block passed to the render helper. Remove the virtual_path keyword arguments found in CacheHelper as they no longer possess any function following 1581cab.</p>

<p>Fixes #38984.</p>

<p><em>Aaron Lipman</em></p>
</li><li>
<p>Deprecate <code>config.action_view.raise_on_missing_translations</code> in favor of <code>config.i18n.raise_on_missing_translations</code>.</p>

<p>New generalized configuration option now determines whether an error should be raised for missing translations in controllers and views.</p>

<p><em>fatkodima</em></p>
</li><li>
<p>Instrument layout rendering in <code>TemplateRenderer#render_with_layout</code> as <code>render_layout.action_view</code>, and include (when necessary) the layout's virtual path in notification payloads for collection and partial renders.</p>

<p><em>Zach Kemp</em></p>
</li><li>
<p><code>ActionView::Base.annotate_rendered_view_with_filenames</code> annotates HTML output with template file names.</p>

<p><em>Joel Hawksley</em>, <em>Aaron Patterson</em></p>
</li><li>
<p><code>ActionView::Helpers::TranslationHelper#translate</code> returns nil when passed <code>default: nil</code> without a translation matching <code>I18n#translate</code>.</p>

<p><em>Stefan Wrobel</em></p>
</li><li>
<p><code>OptimizedFileSystemResolver</code> prefers template details in order of locale, formats, variants, handlers.</p>

<p><em>Iago Pimenta</em></p>
</li><li>
<p>Added <code>class_names</code> helper to create a CSS class value with conditional classes.</p>

<p><em>Joel Hawksley</em>, <em>Aaron Patterson</em></p>
</li><li>
<p>Add support for conditional values to TagBuilder.</p>

<p><em>Joel Hawksley</em></p>
</li><li>
<p><code>ActionView::Helpers::FormOptionsHelper#select</code> should mark option for <code>nil</code> as selected.</p>

<pre><code>@post = Post.new
@post.category = nil

# Before
select(&quot;post&quot;, &quot;category&quot;, none: nil, programming: 1, economics: 2)
# =&gt;
# &lt;select name=&quot;post[category]&quot; id=&quot;post_category&quot;&gt;
#   &lt;option value=&quot;&quot;&gt;none&lt;/option&gt;
#  &lt;option value=&quot;1&quot;&gt;programming&lt;/option&gt;
#  &lt;option value=&quot;2&quot;&gt;economics&lt;/option&gt;
# &lt;/select&gt;

# After
select(&quot;post&quot;, &quot;category&quot;, none: nil, programming: 1, economics: 2)
# =&gt;
# &lt;select name=&quot;post[category]&quot; id=&quot;post_category&quot;&gt;
#   &lt;option selected=&quot;selected&quot; value=&quot;&quot;&gt;none&lt;/option&gt;
#  &lt;option value=&quot;1&quot;&gt;programming&lt;/option&gt;
#  &lt;option value=&quot;2&quot;&gt;economics&lt;/option&gt;
# &lt;/select&gt;
</code></pre>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Log lines for partial renders and started template renders are now emitted at the <code>DEBUG</code> level instead of <code>INFO</code>.</p>

<p>Completed template renders are still logged at the <code>INFO</code> level.</p>

<p><em>DHH</em></p>
</li><li>
<p><a href="../../../classes/ActionView/Helpers/SanitizeHelper.html"><code>ActionView::Helpers::SanitizeHelper</code></a>: support rails-html-sanitizer 1.1.0.</p>

<p><em>Juanito Fatas</em></p>
</li><li>
<p>Added <code>phone_to</code> helper method to create a link from mobile numbers.</p>

<p><em>Pietro Moro</em></p>
</li><li>
<p>annotated_source_code returns an empty array so TemplateErrors without a template in the backtrace are surfaced properly by DebugExceptions.</p>

<p><em>Guilherme Mansur</em>, <em>Kasper Timm Hansen</em></p>
</li><li>
<p>Add autoload for SyntaxErrorInTemplate so syntax errors are correctly raised by DebugExceptions.</p>

<p><em>Guilherme Mansur</em>, <em>Gannon McGibbon</em></p>
</li><li>
<p><code>RenderingHelper</code> supports rendering objects that <code>respond_to?</code> <code>:render_in</code>.</p>

<p><em>Joel Hawksley</em>, <em>Natasha Umer</em>, <em>Aaron Patterson</em>, <em>Shawn Allen</em>, <em>Emily Plummer</em>, <em>Diana Mounter</em>, <em>John Hawthorn</em>, <em>Nathan Herald</em>, <em>Zaid Zawaideh</em>, <em>Zach Ahn</em></p>
</li><li>
<p>Fix <code>select_tag</code> so that it doesn’t change <code>options</code> when <code>include_blank</code> is present.</p>

<p><em>Younes SERRAJ</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/6-0-stable/actionview/CHANGELOG.md">6-0-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </main>
  </body>
</html>
