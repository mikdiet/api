<!DOCTYPE html>
<html lang="en">
<head>
    <title>RubyVM</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script type="text/javascript" charset="utf-8">
document.addEventListener("turbolinks:load", function() {
  // Only initialize panel if not yet initialized
  if(!$('#panel .tree ul li').length) {
    $('#links').hide();
    var panel = new Searchdoc.Panel($('#panel'), search_data, tree, '/');
    $('#search').focus();
    var s = window.location.search.match(/\?q=([^&]+)/);
    if (s) {
      s = decodeURIComponent(s[1]).replace(/\+/g, ' ');
      if (s.length > 0) {
        $('#search').val(s);
        panel.search(s, true);
      }
    }
    panel.toggle(["RubyVM"]);
  }
})
</script>



    <meta property="og:title" value="RubyVM">

  
    
    <meta name="description" content="for ast.c  The RubyVM module only exists on MRI. RubyVM is not defined in other Ruby implementations such as JRuby and TruffleRuby.  The RubyVM module provides some access to MRI internals.">
    <meta property="og:description" content="for ast.c  The RubyVM module only exists on MRI. RubyVM is not defined in other Ruby implementations such as JRuby and TruffleRuby.  The RubyVM module provides some access to MRI internals.">
  

    <meta name="keywords" content="RubyVM class, each_builtin, stat">
</head>

<body>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<div class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</div>


    <div class="banner">
        
        <h2>
            <span class="type">Class</span>
            RubyVM
            
                <span class="parent">&lt;
                    
                    <a href="Object.html">Object</a>
                    
                </span>
            
        </h2>
        <ul class="files">
            
            <li><a href="../files/ruby/ast_c.html">ruby/ast.c</a></li>
            
            <li><a href="../files/ruby/ast_rb.html">ruby/ast.rb</a></li>
            
            <li><a href="../files/ruby/lib/debug_rb.html">ruby/lib/debug.rb</a></li>
            
            <li><a href="../files/ruby/lib/irb/ruby-lex_rb.html">ruby/lib/irb/ruby-lex.rb</a></li>
            
            <li><a href="../files/ruby/lib/pp_rb.html">ruby/lib/pp.rb</a></li>
            
            <li><a href="../files/ruby/mini_builtin_c.html">ruby/mini_builtin.c</a></li>
            
            <li><a href="../files/ruby/vm_c.html">ruby/vm.c</a></li>
            
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>for ast.c</p>

<p>The <a href="RubyVM.html"><code>RubyVM</code></a> module only exists on MRI. <code>RubyVM</code> is not defined in other Ruby implementations such as JRuby and TruffleRuby.</p>

<p>The <a href="RubyVM.html"><code>RubyVM</code></a> module provides some access to MRI internals. This module is for very limited purposes, such as debugging, prototyping, and research.  Normal users must not use it. This module is not portable between Ruby implementations.</p>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="RubyVM/AbstractSyntaxTree.html">RubyVM::AbstractSyntaxTree</a>
        </li>
      
        <li>
          <span class="type">MODULE</span>
          <a href="RubyVM/MJIT.html">RubyVM::MJIT</a>
        </li>
      
        <li>
          <span class="type">CLASS</span>
          <a href="RubyVM/InstructionSequence.html">RubyVM::InstructionSequence</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-each_builtin">each_builtin</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-stat">stat</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <h2 class="sectiontitle">Constants</h2>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">DEFAULT_PARAMS</td>
            <td>=</td>
            <td class="attr-value">::RubyVM:</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p><a href="RubyVM.html#DEFAULT_PARAMS"><code>DEFAULT_PARAMS</code></a> This constant exposes the VM&#39;s default parameters. Note that changing these values does not affect VM execution. Specification is not stable and you should not depend on this value. Of course, this constant is MRI specific.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">INSTRUCTION_NAMES</td>
            <td>=</td>
            <td class="attr-value">::RubyVM:</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p><a href="RubyVM.html#INSTRUCTION_NAMES"><code>INSTRUCTION_NAMES</code></a> A list of bytecode instruction names in MRI. This constant is MRI specific.</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">OPTS</td>
            <td>=</td>
            <td class="attr-value">::RubyVM:</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p><a href="RubyVM.html#OPTS"><code>OPTS</code></a> An <a href="Array.html"><code>Array</code></a> of VM build options. This constant is MRI specific.</p></td>
            </tr>
          
        
      </table>
    


    


    <!-- Methods -->
    
      <h2 class="sectiontitle">Class Public methods</h2>
      
        <div class="method">
          <h3 class="title method-title" id="method-c-each_builtin">
            
              <b>each_builtin</b>()
            
            <a href="../classes/RubyVM.html#method-c-each_builtin" name="method-c-each_builtin" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-each_builtin_source')" id="l_method-c-each_builtin_source">show</a>
                
              </p>
              <div id="method-c-each_builtin_source" class="dyn-source">
                <pre>static VALUE
each_builtin(VALUE self)
{
    st_foreach(loaded_builtin_table, each_builtin_i, 0);
    return Qnil;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <h3 class="title method-title" id="method-c-stat">
            
              <b>RubyVM.stat &rarr; Hash<br />RubyVM.stat(hsh) &rarr; hsh<br />RubyVM.stat(Symbol) &rarr; Numeric
</b>
            
            <a href="../classes/RubyVM.html#method-c-stat" name="method-c-stat" class="permalink">Link</a>
          </h3>

          
            <div class="description">
              <p>Returns a <a href="Hash.html"><code>Hash</code></a> containing implementation-dependent counters inside the VM.</p>

<p>This hash includes information about method/constant cache serials:</p>

<pre><code>{
  :global_method_state=&gt;251,
  :global_constant_state=&gt;481,
  :class_serial=&gt;9029
}
</code></pre>

<p>The contents of the hash are implementation specific and may be changed in the future.</p>

<p>This method is only expected to work on C Ruby.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-stat_source')" id="l_method-c-stat_source">show</a>
                
              </p>
              <div id="method-c-stat_source" class="dyn-source">
                <pre>static VALUE
vm_stat(int argc, VALUE *argv, VALUE self)
{
    static VALUE sym_global_method_state, sym_global_constant_state, sym_class_serial;
    VALUE arg = Qnil;
    VALUE hash = Qnil, key = Qnil;

    if (rb_check_arity(argc, 0, 1) == 1) {
        arg = argv[0];
        if (SYMBOL_P(arg))
            key = arg;
        else if (RB_TYPE_P(arg, T_HASH))
            hash = arg;
        else
            rb_raise(rb_eTypeError, &quot;non-hash or symbol given&quot;);
    }
    else {
        hash = rb_hash_new();
    }

    if (sym_global_method_state == 0) {
#define S(s) sym_##s = ID2SYM(rb_intern_const(#s))
        S(global_method_state);
        S(global_constant_state);
        S(class_serial);
#undef S
    }

#define SET(name, attr) \
    if (key == sym_##name) \
        return SERIALT2NUM(attr); \
    else if (hash != Qnil) \
        rb_hash_aset(hash, sym_##name, SERIALT2NUM(attr));

    SET(global_method_state, ruby_vm_global_method_state);
    SET(global_constant_state, ruby_vm_global_constant_state);
    SET(class_serial, ruby_vm_class_serial);
#undef SET

    if (!NIL_P(key)) { /* matched key should return above */
        rb_raise(rb_eArgError, &quot;unknown key: %&quot;PRIsVALUE, rb_sym2str(key));
    }

    return hash;
}</pre>
              </div>
            </div>
            
          </div>
        
      
    
    
  
</div>

    </div>
  </body>
</html>
