<!DOCTYPE html>
<html lang="en">
<head>
    <title>NEWS-2.2.0</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
<link rel="stylesheet" href="/css/reset.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/panel.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/main.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<link rel="stylesheet" href="/css/github.css" type="text/css" media="screen" data-turbolinks-track="reload" />
<script src="/js/jquery-3.5.1.min.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/main.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/highlight.pack.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/turbolinks.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/search_index.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searcher.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/panel/tree.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script src="/js/searchdoc.js" type="text/javascript" charset="utf-8" data-turbolinks-track="reload"></script>
<script type="text/javascript" charset="utf-8">
document.addEventListener("turbolinks:load", function() {
  // Only initialize panel if not yet initialized
  if(!$('#panel .tree ul li').length) {
    $('#links').hide();
    var panel = new Searchdoc.Panel($('#panel'), search_data, tree, '/');
    $('#search').focus();
    var s = window.location.search.match(/\?q=([^&]+)/);
    if (s) {
      s = decodeURIComponent(s[1]).replace(/\+/g, ' ');
      if (s.length > 0) {
        $('#search').val(s);
        panel.search(s, true);
      }
    }
    panel.toggle([]);
  }
})
</script>


</head>

<body>

    <input type="checkbox" id="hamburger" class="panel_checkbox">
<label class="panel_mobile_button" for="hamburger"><span></span> Menu</label>
<div class="panel panel_tree" id="panel" data-turbolinks-permanent>
  <div class="header">
    <input type="text" placeholder="Search for a class, method, ..." autosave="searchdoc" results="10" id="search" autocomplete="off" tabindex="-1" />
    <label class="panel_mobile_button_close" for="hamburger"><span></span> Close</label>
  </div>
  <div class="tree">
    <ul>
    </ul>
  </div>
  <div class="result">
    <ul>
    </ul>
  </div>
  <a href="links.html" id="links">index</a>
</div>


    <div class="banner">
        
        <h2>
            NEWS-2.2.0
        </h2>
        <ul class="files">
            
            <li>
                ruby/doc/NEWS-2.2.0
                
                    <a href="https://github.com/ruby/ruby/blob/2ee2f17971c7622412cdf503c832efcb07e11334/doc/NEWS-2.2.0" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2021-04-30 00:52:05 +0300</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="label-NEWS+for+Ruby+2.2.0"><a href="../NEWS.html">NEWS</a> for Ruby 2.2.0</h1>

<p>This document is a list of user visible feature changes made between releases except for bug fixes.</p>

<p>Note that each entry is kept so brief that no reason behind or reference information is supplied with.  For a full list of changes with all sufficient information, see the ChangeLog file.</p>

<h2 id="label-Changes+since+the+2.1.0+release">Changes since the 2.1.0 release</h2>

<h3 id="label-Language+changes">Language changes</h3>
<ul><li>
<p>nil/true/false</p>
<ul><li>
<p>nil/true/false objects are frozen. [Feature #8923]</p>
</li></ul>
</li><li>
<p><a href="../../../classes/Hash.html"><code>Hash</code></a> literal</p>
<ul><li>
<p><a href="../../../classes/Symbol.html"><code>Symbol</code></a> key followed by a colon can be quoted. [Feature #4276]</p>
</li></ul>
</li><li>
<p>default argument fixed a very longstanding bug that an optional argument was not accessible in its default value expression.  [Bug #9593]</p>
</li></ul>

<h3 id="label-Core+classes+updates+-28outstanding+ones+only-29">Core classes updates (outstanding ones only)</h3>
<ul><li>
<p><a href="../../../classes/Binding.html"><code>Binding</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Binding.html#method-i-local_variables"><code>Binding#local_variables</code></a></p>
</li><li>
<p><a href="../../../classes/Binding.html#method-i-receiver"><code>Binding#receiver</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Dir.html"><code>Dir</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Dir.html#method-i-fileno"><code>Dir#fileno</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Enumerable.html"><code>Enumerable</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Enumerable.html#method-i-slice_after"><code>Enumerable#slice_after</code></a></p>
</li><li>
<p><a href="../../../classes/Enumerable.html#method-i-slice_when"><code>Enumerable#slice_when</code></a></p>
</li></ul>
</li><li>
<p>Extended methods:</p>
<ul><li>
<p>min, min_by, max and max_by supports optional argument to return multiple elements.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Float.html"><code>Float</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Float.html#method-i-next_float"><code>Float#next_float</code></a></p>
</li><li>
<p><a href="../../../classes/Float.html#method-i-prev_float"><code>Float#prev_float</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/File.html"><code>File</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/File.html#method-c-birthtime"><code>File.birthtime</code></a></p>
</li><li>
<p><a href="../../../classes/File.html#method-i-birthtime"><code>File#birthtime</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/File/Stat.html"><code>File::Stat</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/File/Stat.html#method-i-birthtime"><code>File::Stat#birthtime</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/GC.html"><code>GC</code></a></p>
<ul><li>
<p><a href="../../../classes/GC.html#method-c-latest_gc_info"><code>GC.latest_gc_info</code></a> returns :state to represent current <a href="../../../classes/GC.html"><code>GC</code></a> status.</p>
</li><li>
<p>Improvements</p>
<ul><li>
<p>Introduce incremental marking for major <a href="../../../classes/GC.html"><code>GC</code></a>. [Feature #10137]</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/IO.html"><code>IO</code></a></p>
<ul><li>
<p>Improvements</p>
<ul><li>
<p><a href="../../../classes/IO.html#method-i-read_nonblock"><code>IO#read_nonblock</code></a> and <a href="../../../classes/IO.html#method-i-write_nonblock"><code>IO#write_nonblock</code></a> for pipes on Windows are supported.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Kernel.html"><code>Kernel</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p>Kernel#itself</p>
</li></ul>
</li><li>
<p>Improvements</p>
<ul><li>
<p><a href="../../../classes/Kernel.html#method-i-throw"><code>Kernel#throw</code></a> raises <a href="../../../classes/UncaughtThrowError.html"><code>UncaughtThrowError</code></a>, subclass of <a href="../../../classes/ArgumentError.html"><code>ArgumentError</code></a> when there is no corresponding catch block, instead of <a href="../../../classes/ArgumentError.html"><code>ArgumentError</code></a>.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Process.html"><code>Process</code></a></p>
<ul><li>
<p>Extended method:</p>
<ul><li>
<p><a href="../../../classes/Process.html"><code>Process</code></a> execution methods such as <a href="../../../classes/Process.html#method-c-spawn"><code>Process.spawn</code></a> opens the file in write mode for redirect from [:out, :err].</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/String.html"><code>String</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/String.html#method-i-unicode_normalize"><code>String#unicode_normalize</code></a></p>
</li><li>
<p><a href="../../../classes/String.html#method-i-unicode_normalize-21"><code>String#unicode_normalize!</code></a></p>
</li><li>
<p><a href="../../../classes/String.html#method-i-unicode_normalized-3F"><code>String#unicode_normalized?</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Symbol.html"><code>Symbol</code></a></p>
<ul><li>
<p>Improvements</p>
<ul><li>
<p>Most symbols which are returned by <a href="../../../classes/String.html#method-i-to_sym"><code>String#to_sym</code></a> and <a href="../../../classes/String.html#method-i-intern"><code>String#intern</code></a> are GC-able.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Method.html"><code>Method</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Method.html#method-i-curry"><code>Method#curry([arity]</code></a>) returns a curried <a href="../../../classes/Proc.html"><code>Proc</code></a>.</p>
</li><li>
<p><a href="../../../classes/Method.html#method-i-super_method"><code>Method#super_method</code></a> returns a <a href="../../../classes/Method.html"><code>Method</code></a> of superclass, which would be called when super is used.</p>
</li></ul>
</li></ul>
</li></ul>

<h3 id="label-Core+classes+compatibility+issues+-28excluding+feature+bug+fixes-29">Core classes compatibility issues (excluding feature bug fixes)</h3>
<ul><li>
<p><a href="../../../classes/Enumerable.html"><code>Enumerable</code></a></p>
<ul><li>
<p><a href="../../../classes/Enumerable.html#method-i-slice_before"><code>Enumerable#slice_before</code></a>&#39;s state management deprecated.</p>
</li><li>
<p><a href="../../../classes/Enumerable.html#method-i-chunk"><code>Enumerable#chunk</code></a>&#39;s state management deprecated.</p>
</li></ul>
</li><li>
<p><a href="../../../classes/GC.html"><code>GC</code></a></p>
<ul><li>
<p>incompatible changes:</p>
<ul><li>
<p>Rename <a href="../../../classes/GC.html#method-c-stat"><code>GC.stat</code></a> entries. [Feature #9924] See <a href="https://docs.google.com/spreadsheets/d/11Ua4uBr6o0k-nORrZLEIIUkHJ9JRzRR0NyZfrhEEnc8/edit?usp=sharing">docs.google.com/spreadsheets/d/11Ua4uBr6o0k-nORrZLEIIUkHJ9JRzRR0NyZfrhEEnc8/edit?usp=sharing</a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Hash.html"><code>Hash</code></a></p>
<ul><li>
<p>incompatible changes:</p>
<ul><li>
<p>Change overriding policy for duplicated key. [Bug #10315] { **hash1, **hash2 } contains values of hash2 for duplicated keys.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/IO.html"><code>IO</code></a></p>
<ul><li>
<p>incompatible changes:</p>
<ul><li>
<p>When flushing file <a href="../../../classes/IO.html"><code>IO</code></a> with <a href="../../../classes/IO.html#method-i-flush"><code>IO#flush</code></a>, you cannot assume that the metadata of the file is updated immediately.  On some platforms (especially Windows), it is delayed until the filesystem load is decreased. Use <a href="../../../classes/IO.html#method-i-fsync"><code>IO#fsync</code></a> if you want to guarantee updating metadata.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Math.html"><code>Math</code></a></p>
<ul><li>
<p>incompatible changes:</p>
<ul><li>
<p><a href="../../../classes/Math.html#method-c-log"><code>Math.log</code></a> now raises <a href="../../../classes/Math/DomainError.html"><code>Math::DomainError</code></a> instead of returning NaN if the base is less than 0, and returns NaN instead of -infinity if both of two arguments are 0.</p>
</li><li>
<p><a href="../../../classes/Math.html#method-c-atan2"><code>Math.atan2</code></a> now returns values like as expected by C99 if both two arguments are infinity.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Proc.html"><code>Proc</code></a></p>
<ul><li>
<p>incompatible changes:</p>
<ul><li>
<p><a href="../../../classes/ArgumentError.html"><code>ArgumentError</code></a> is no longer raised when lambda <a href="../../../classes/Proc.html"><code>Proc</code></a> is passed as a block, and the number of yielded arguments does not match the formal arguments of the lambda, if just an array is yielded and its length matches.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Process.html"><code>Process</code></a></p>
<ul><li>
<p><a href="../../../classes/Process.html"><code>Process</code></a> execution methods such as <a href="../../../classes/Process.html#method-c-spawn"><code>Process.spawn</code></a> opens the file in write mode for redirect from [:out, :err]. Before Ruby 2.2, it was opened in read mode.</p>
</li></ul>
</li></ul>

<h3 id="label-Stdlib+updates+-28outstanding+ones+only-29">Stdlib updates (outstanding ones only)</h3>
<ul><li>
<p><a href="../../../classes/Continuation.html"><code>Continuation</code></a></p>
<ul><li>
<p>callcc is obsolete. use <a href="../../../classes/Fiber.html"><code>Fiber</code></a> instead.</p>
</li></ul>
</li><li>
<p><a href="../../../classes/Digest.html"><code>Digest</code></a></p>
<ul><li>
<p>Digest() should now be thread-safe.  If you have a problem with regard to on-demand loading under a multi-threaded environment, preload “digest/*” modules on boot or use this method instead of directly referencing Digest::*.</p>
</li><li>
<p>Digest::HMAC has been removed just as previously noticed.</p>
</li></ul>
</li><li>
<p>DL</p>
<ul><li>
<p>DL has been removed from stdlib. Please use <a href="../../../classes/Fiddle.html"><code>Fiddle</code></a> instead!</p>
</li></ul>
</li><li>
<p><a href="../../../classes/Etc.html"><code>Etc</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Etc.html#method-c-uname"><code>Etc.uname</code></a></p>
</li><li>
<p><a href="../../../classes/Etc.html#method-c-sysconf"><code>Etc.sysconf</code></a></p>
</li><li>
<p><a href="../../../classes/Etc.html#method-c-confstr"><code>Etc.confstr</code></a></p>
</li><li>
<p><a href="../../../classes/IO.html#method-i-pathconf"><code>IO#pathconf</code></a></p>
</li><li>
<p><a href="../../../classes/Etc.html#method-c-nprocessors"><code>Etc.nprocessors</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Find.html"><code>Find</code></a>, <a href="../../../classes/Pathname.html"><code>Pathname</code></a></p>
<ul><li>
<p>Extended methods:</p>
<ul><li>
<p>find method accepts “ignore_error” keyword argument.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Matrix.html"><code>Matrix</code></a></p>
<ul><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Matrix.html#method-i-first_minor"><code>Matrix#first_minor</code></a>(row, column) returns the submatrix obtained by deleting the specified row and column.</p>
</li><li>
<p><a href="../../../classes/Matrix.html#method-i-cofactor"><code>Matrix#cofactor</code></a>(row, column) returns the (row, column) cofactor which is obtained by multiplying the first minor by (-1)**(row + column).</p>
</li><li>
<p><a href="../../../classes/Matrix.html#method-i-adjugate"><code>Matrix#adjugate</code></a> returns the adjugate of the matrix.</p>
</li><li>
<p>hstack and vstack are new instance and class methods to stack matrices horizontally and vertically.</p>
</li><li>
<p><a href="../../../classes/Matrix.html#method-i-laplace_expansion"><code>Matrix#laplace_expansion</code></a>(row_or_column: num) returns the laplace_expansion along the <code>num</code> -th row or column.</p>
</li><li>
<p><a href="../../../classes/Vector.html#method-c-basis"><code>Vector.basis</code></a>(size:, index:) returns the specified basis vector.</p>
</li><li>
<p>Unary - and + added for <a href="../../../classes/Vector.html"><code>Vector</code></a> and <a href="../../../classes/Matrix.html"><code>Matrix</code></a>.</p>
</li><li>
<p><a href="../../../classes/Vector.html#method-i-cross_product"><code>Vector#cross_product</code></a> generalized to arbitrary dimensions.</p>
</li><li>
<p><a href="../../../classes/Vector.html#method-i-dot"><code>Vector#dot</code></a> and cross are aliases for inner_product and cross_product.</p>
</li><li>
<p><a href="../../../classes/Vector.html#method-i-angle_with"><code>Vector#angle_with</code></a> returns the angle with its argument</p>
</li><li>
<p>New instance and class method independent? to test linear independence.</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Pathname.html"><code>Pathname</code></a></p>
<ul><li>
<p>Pathname#/ is aliased to <a href="../../../classes/Pathname.html#method-i-2B"><code>Pathname#+</code></a>.</p>
</li><li>
<p>New methods:</p>
<ul><li>
<p><a href="../../../classes/Pathname.html#method-i-birthtime"><code>Pathname#birthtime</code></a></p>
</li></ul>
</li></ul>
</li><li>
<p>Rake</p>
<ul><li>
<p>Updated to Rake 10.4.0.  For full release notes see:</p>

<p><a href="http://docs.seattlerb.org/rake/History_rdoc.html#label-10.4.0">docs.seattlerb.org/rake/History_rdoc.html#label-10.4.0</a></p>
</li></ul>
</li><li>
<p>RubyGems</p>
<ul><li>
<p>Updated to RubyGems 2.4.2.  For full release notes see:</p>

<p><a href="http://docs.seattlerb.org/rubygems/History_txt.html#label-2.4.2+%2F+2014-10-01">docs.seattlerb.org/rubygems/History_txt.html#label-2.4.2+%2F+2014-10-01</a></p>
</li></ul>
</li><li>
<p><a href="../../../classes/TSort.html"><code>TSort</code></a></p>
<ul><li>
<p><a href="../../../classes/TSort.html#method-c-tsort_each"><code>TSort.tsort_each</code></a>, <a href="../../../classes/TSort.html#method-c-each_strongly_connected_component"><code>TSort.each_strongly_connected_component</code></a> and <a href="../../../classes/TSort.html#method-c-each_strongly_connected_component_from"><code>TSort.each_strongly_connected_component_from</code></a> returns an enumerator if no block given.</p>
</li></ul>
</li><li>
<p>XMLRPC</p>
<ul><li>
<p>Added new parser class named LibXMLStreamParser.</p>
</li></ul>
</li></ul>

<h3 id="label-Stdlib+compatibility+issues+-28excluding+feature+bug+fixes-29">Stdlib compatibility issues (excluding feature bug fixes)</h3>
<ul><li>
<p>lib/mathn.rb</p>
<ul><li>
<p>Show deprecated warning [Feature #10169]</p>
</li></ul>
</li><li>
<p>ext/date/lib/date/format.rb</p>
<ul><li>
<p>Removed because it&#39;s empty file.</p>
</li></ul>
</li><li>
<p><a href="../../../classes/Digest.html"><code>Digest</code></a></p>
<ul><li>
<p>Digest::HMAC has finally ceased to exist.  Use <a href="../../../classes/OpenSSL/HMAC.html"><code>OpenSSL::HMAC</code></a> or an external gem instead.</p>
</li></ul>
</li><li>
<p>time.rb</p>
<ul><li>
<p><a href="../../../classes/Time.html#method-c-parse"><code>Time.parse</code></a>, <a href="../../../classes/Time.html#method-c-strptime"><code>Time.strptime</code></a>, <a href="../../../classes/Time.html#method-c-rfc2822"><code>Time.rfc2822</code></a>, <a href="../../../classes/Time.html#method-c-xmlschema"><code>Time.xmlschema</code></a> may produce fixed-offset <a href="../../../classes/Time.html"><code>Time</code></a> objects. It is happen when usual localtime doesn&#39;t preserve the offset from UTC.</p>
</li><li>
<p><a href="../../../classes/Time.html#method-c-httpdate"><code>Time.httpdate</code></a> produces always UTC <a href="../../../classes/Time.html"><code>Time</code></a> object.</p>
</li><li>
<p><a href="../../../classes/Time.html#method-c-strptime"><code>Time.strptime</code></a> raises <a href="../../../classes/ArgumentError.html"><code>ArgumentError</code></a> when no date information.</p>
</li></ul>
</li><li>
<p>lib/rational.rb</p>
<ul><li>
<p>Removed because it is deprecated from 2009.</p>
</li></ul>
</li><li>
<p>lib/complex.rb</p>
<ul><li>
<p>Removed because it is deprecated from 2009.</p>
</li></ul>
</li><li>
<p>lib/prettyprint.rb</p>
<ul><li>
<p>Removed PrettyPrint#first?</p>
</li></ul>
</li><li>
<p>lib/minitest/*.rb</p>
<ul><li>
<p>Removed because it conflicts to minitest 5. [Feature #9711]</p>
</li></ul>
</li><li>
<p>lib/test/*<strong>/</strong>.rb</p>
<ul><li>
<p>Removed because it conflicts to minitest 5, and it was just an wrapper of minitest 4. [Feature #9711]</p>
</li></ul>
</li><li>
<p>lib/uri</p>
<ul><li>
<p>support RFC 3986. [Feature #2542]</p>
</li></ul>
</li><li>
<p>GServer</p>
<ul><li>
<p>GServer is extracted to gserver gem. It&#39;s unmaintain code.</p>
</li></ul>
</li><li>
<p><a href="../../../classes/Logger.html"><code>Logger</code></a></p>
<ul><li>
<p>Logger::Application is extracted to logger-application gem. It&#39;s unmaintain code.</p>
</li></ul>
</li><li>
<p><a href="../../../classes/ObjectSpace.html"><code>ObjectSpace</code></a> (after requiring “objspace”)</p>
<ul><li>
<p><a href="../../../classes/ObjectSpace.html#method-c-memsize_of"><code>ObjectSpace.memsize_of(obj)</code></a> returns a size includes sizeof(RVALUE).</p>
<dl class="rdoc-list label-list"><dt>Bug #8984
<dd></dd></dl>
</li></ul>
</li><li>
<p><a href="../../../classes/Prime.html"><code>Prime</code></a></p>
<ul><li>
<p>incompatible changes:</p>
<ul><li>
<p><a href="../../../classes/Prime.html#method-i-prime-3F"><code>Prime.prime?</code></a> now returns false for negative numbers. This method should not be used to know the number is composite or not. [Bug #7395]</p>
</li></ul>
</li></ul>
</li><li>
<p><a href="../../../classes/Psych.html"><code>Psych</code></a></p>
<ul><li>
<p>Removed Psych::EngineManager [Bug #8344]</p>
</li></ul>
</li></ul>

<h3 id="label-Built-in+global+variables+compatibility+issues">Built-in global variables compatibility issues</h3>

<h3 id="label-C+API+updates">C API updates</h3>
<ul><li>
<p>Deprecated APIs removed.  [Feature #9502]</p>

<p>Check_SafeStr -&gt; SafeStringValue rb_check_safe_str -&gt; SafeStringValue rb_quad_pack -&gt; rb_integer_pack rb_quad_unpack -&gt; rb_integer_unpack rb_read_check : access struct FILE internal. no replacement. rb_struct_iv_get : internal function. no replacement. struct rb_blocking_region_buffer : internal type. no replacement. rb_thread_blocking_region_begin -&gt; rb_thread_call_without_gvl family rb_thread_blocking_region_end -&gt; rb_thread_call_without_gvl family TRAP_BEG -&gt; rb_thread_call_without_gvl family TRAP_END -&gt; rb_thread_call_without_gvl family rb_thread_select -&gt; rb_thread_fd_select struct rb_exec_arg : internal type. no replacement. rb_exec : internal function. no replacement. rb_exec_arg_addopt : internal function. no replacement. rb_exec_arg_fixup : internal function. no replacement. rb_exec_arg_init : internal function. no replacement. rb_exec_err : internal function. no replacement. rb_fork : internal function. no replacement. rb_fork_err : internal function. no replacement. rb_proc_exec_n : internal function. no replacement. rb_run_exec_options : internal function. no replacement. rb_run_exec_options_err : internal function. no replacement. rb_thread_blocking_region -&gt; rb_thread_call_without_gvl family rb_thread_polling -&gt; rb_thread_wait_for rb_big2str0 : internal function. no replacement. rb_big2ulong_pack -&gt; rb_integer_pack rb_gc_set_params : internal function. no replacement. rb_io_mode_flags -&gt; rb_io_modestr_fmode rb_io_modenum_flags -&gt; rb_io_oflags_fmode</p>
</li><li>
<p>struct RBignum is hidden.  [Feature #6083] Use rb_integer_pack and rb_integer_unpack instead.</p>
</li><li>
<p>struct RRational is hidden.  [Feature #9513] Use rb_rational_num and rb_rational_den instead.</p>
</li><li>
<p>rb_big_new and rb_big_resize takes a size_t instead of long.</p>
</li><li>
<p>rb_num2long returns a long instead of SIGNED_VALUE.</p>
</li><li>
<p>rb_num2ulong returns an unsigned long instead of VALUE.</p>
</li><li>
<p>st hash table uses power-of-two sizes for speed [Feature #9425]. Lookups are 10-25% faster if using appropriate hash functions. However, weaknesses in hash distribution can no longer be masked by prime number-sized tables, so extensions may need to tweak hash functions to ensure good distribution.</p>
</li><li>
<p>rb_sym2str() added. This is almost same as `rb_id2str(SYM2ID(sym))` but not pinning a dynamic symbol.</p>
</li><li>
<p>rb_str_cat_cstr() added. This is same as `rb_str_cat2()`.</p>
</li><li>
<p>`rb_str_substr()` and `rb_str_subseq()` will share middle of a string, but not only the end of a string, in the future.  Therefore, result strings may not be NUL-terminated, `StringValueCStr()` is needed calling to obtain a NUL-terminated C string.</p>
</li><li>
<p>rb_tracepoint_new() supports new internal events accessible only from C:</p>
<ul><li>
<p>RUBY_INTERNAL_EVENT_GC_ENTER</p>
</li><li>
<p>RUBY_INTERNAL_EVENT_GC_EXIT r47528</p>
</li></ul>
</li><li>
<p>rb_hash_delete() now does not call the block given to the current method.</p>
</li><li>
<p>rb_extract_keywords() and rb_get_kwargs() exported.  See <a href="../README_md.html">README</a>.EXT for details.</p>
</li></ul>

<h3 id="label-Build+system+updates">Build system updates</h3>
<ul><li>
<p>jemalloc is optionally supported via `./configure –with-jemalloc` jemalloc may be suitable when system malloc is slow or prone to fragmentation.  [Feature #9113]</p>
</li></ul>

<h3 id="label-Implementation+changes">Implementation changes</h3>
<ul><li>
<p><a href="../../../classes/GC.html"><code>GC</code></a></p>

<pre><code>* Most symbols which are returned by String#to_sym and
  String#intern are GC-able [Feature #9634]
* Introduce incremental marking for major GC. [Feature #10137]
* Enable lazy sweep on GC caused by malloc().
</code></pre>
</li><li>
<p>VM</p>

<pre><code>* Use frozen string literals for Hash#[] and Hash#[]=
* Fast keyword arguments passing [Feature #10440]
* Allow to receive huge splatted array by a rest argument
  [Feature #10440]
</code></pre>
</li><li>
<p><a href="../../../classes/Process.html"><code>Process</code></a></p>

<pre><code>* Process creation methods, such as spawn(), uses vfork() system call.
  vfork() is faster than fork() when the parent process uses huge memory.
</code></pre>
</li></ul>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
